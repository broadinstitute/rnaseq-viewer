(this.webpackJsonprnaseq_viewer=this.webpackJsonprnaseq_viewer||[]).push([[0],{318:function(e,t,n){e.exports=n(576)},323:function(e,t,n){},576:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(56),c=n.n(o),l=(n(323),n(32)),i=n(12),s=n(13),u=n(597),m=n(11),p=n(14),d=n(23),g=n(24),f=n(25),h=n(594),b=n(577),E=n(77);function v(){var e=Object(i.a)(["\n  display: inline;\n  width: 50px;\n  margin-left: 5px;\n  padding-left: 5px;\n"]);return v=function(){return e},e}function y(){var e=Object(i.a)(["\n  margin-top: 5px !important;\n"]);return y=function(){return e},e}function O(){var e=Object(i.a)(["\n  opacity: 0.95;\n"]);return O=function(){return e},e}function S(){var e=Object(i.a)(["\n  padding-top: 3px;\n"]);return S=function(){return e},e}function w(){var e=Object(i.a)([" \n  display: inline-block;\n  margin: 12px 0px 0px 0px !important;\n"]);return w=function(){return e},e}var _=s.a.h3(w()),j=s.a.div(S()),T=Object(s.a)(h.a)(O()),N=Object(s.a)(E.a)(y()),k=s.a.input(v()),x=n(592),A=n(591),C=n(578),R=n(593),L=n(26),I=n(28),D=n(31),U=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case e:return void 0===r.newValue?(console.error("Invalid ".concat(e," action: action.newValue is undefined: "),r),a):(n&&console.log("singleValueReducer: applying action: ",r,"State changing from ",a," to ",r.newValue),r.newValue);default:return a}};return a},B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case e:if(void 0===r.updates)return console.error("Invalid ".concat(e," action: action.updates is undefined: "),r),a;var o=Object(D.a)({},a,{},r.updates);return n&&console.log("singleObjectReducer: applying action: ",r,"State changing from ",a," to ",o),o;default:return a}};return a},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case"SET_".concat(e):case"ADD_".concat(e):case"REMOVE_".concat(e):if(!Array.isArray(r.values))return console.error("Invalid ".concat(r.type," action: action.values is undefined or not an array: "),r),a;var o;if(r.type==="SET_".concat(e))o=Object(f.a)(r.values);else if(r.type==="ADD_".concat(e))o=[].concat(Object(f.a)(a),Object(f.a)(r.values));else{var c=r.values;o=a.filter((function(e){return!c.includes(e)}))}return n&&console.log("createArrayReducer: applying action: ",r,"State changing from ",a," to ",o),o;default:return a}};return a},G={modals:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,o=arguments.length>1?arguments[1]:void 0;if(!o)return r;switch(o.type){case e:if(void 0===o.updatesById)return console.error("Invalid ".concat(e," action. action.updatesById is undefined: "),o),r;var c=o.updatesById;if(t){if(!(t in c))return r;c=c[t]}var l=Object(D.a)({},r);return Object.entries(c).forEach((function(e){var t=Object(I.a)(e,2),n=t[0],a=t[1];null==a?delete l[n]:l[n]?l[n]=Object(D.a)({},l[n],{},a):l[n]=Object(D.a)({},a)})),a&&console.log("objectsByIdReducer: applying action: ",o,"State changing from: ",r," to ",l),l;default:return r}};return r}("UPDATE_MODAL_STATE")},P=function(e,t){return e.modals[t]&&e.modals[t].open};function V(){var e=Object(i.a)(["\n  margin-left: 10px !important;\n  width: 100px;\n"]);return V=function(){return e},e}function H(){var e=Object(i.a)(["\n  float: right;\n  padding: 0px 20px 20px 20px;\n"]);return H=function(){return e},e}function q(){var e=Object(i.a)(["\n  &.ui.button.basic {\n    white-space: nowrap;\n    border: none;\n    padding: ",";\n    color: "," !important;\n    text-decoration: none;\n    font-weight: ",';\n    box-shadow: none !important;\n    user-select: auto;\n    \n    &:hover, &:focus, &:active {\n      color: #1e70bf !important;\n      background: transparent !important;\n    }\n    \n    &[class*="right labeled"].icon {\n      padding-left: 0 !important;\n      padding-right: 2.1em !important;\n      \n      > .icon {\n        background-color: initial;\n      }\n    }\n  }\n']);return q=function(){return e},e}var z=Object(s.a)(C.a).attrs({basic:!0})(q(),(function(e){return e.padding||0}),(function(e){return e.color||"#4183C4"}),(function(e){return e.fontWeight||"inherit"})),J=s.a.div(H()),W=Object(s.a)(C.a)(V()),F=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleClose=function(){var t=!0;e.props.handleClose&&(t=e.props.handleClose()),t&&e.props.close()},e.handleSave=function(){var t=!0;e.props.handleSave&&(t=e.props.handleSave()),t&&e.props.close()},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.trigger?r.a.cloneElement(this.props.trigger,{onClick:this.props.open}):null;return r.a.createElement(R.a,{open:this.props.isOpen,trigger:e,onClose:this.handleClose,size:this.props.size},r.a.createElement(R.a.Header,null,this.props.title,r.a.createElement(z,{floated:"right",onClick:this.handleClose,icon:r.a.createElement(E.a,{name:"remove",color:"grey"})})),r.a.createElement(R.a.Content,null,this.props.children),r.a.createElement(J,null,r.a.createElement(W,{tabIndex:0,onClick:this.handleClose,type:"button"},"Cancel"),r.a.createElement(W,{tabIndex:0,onClick:this.handleSave,type:"submit",color:"blue"},this.props.handleSave?"Save":"Ok")))}}]),n}(r.a.PureComponent);F.defaultProps={size:"small"};var K=Object(l.b)((function(e,t){return{isOpen:P(e,t.modalName)}}),(function(e,t){return{open:function(n){var a;n.preventDefault(),e((a=t.modalName,function(e){return e({type:"UPDATE_MODAL_STATE",updatesById:Object(L.a)({},a,{open:!0})})}))},close:function(){var n,a;e((n=t.modalName,a=!0,function(e,t){t().modals[n].confirmOnClose&&!a?e({type:"UPDATE_MODAL_STATE",updatesById:Object(L.a)({},n,{confirming:!0})}):e({type:"UPDATE_MODAL_STATE",updatesById:Object(L.a)({},n,{open:!1,confirming:!1,confirmOnClose:null})})}))}}}))(F);function X(){var e=Object(i.a)(["\n  cursor: pointer;\n"]);return X=function(){return e},e}var Y=s.a.a(X()),Q=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).render=function(){var e=a.props,t=e.locusList,n=e.name,o=e.setLocusList,c="Locus List - ".concat(n);return r.a.createElement(K,{title:c,size:"large",modalName:c,trigger:r.a.createElement(Y,null,(t||[]).length>0?r.a.createElement("div",null,r.a.createElement("br",null),"Edit Locus List"):r.a.createElement("div",null,"Add Locus List To Side Bar")),handleSave:function(){var e=a.textAreaValue.split(/[,\s]+/).filter(Boolean);return o(e),!0}},r.a.createElement(x.a,null,r.a.createElement(x.a.Field,{control:A.a,style:{minHeight:"300px"},defaultValue:a.textAreaValue,onKeyUp:function(e){a.textAreaValue=e.target.value},placeholder:"Enter genomic positions, intervals, and/or gene names separated by commas, spaces, or new lines.  These can be in any format recognized by the IGV search bar.  For example: DMD, ENST00000589830, chr1:55516888, 2:152341851-152591002"})),r.a.createElement("br",null),r.a.createElement("b",null,r.a.createElement("i",null,"NOTE:"))," This locus list will be saved across page refreshes in this browser, \xa0 but will not be recorded in the page url like other settings.\xa0 Sharing or bookmarking this page won't include the contents of this list.")};var o=a.props.locusList;return a.textAreaValue=(o||[]).join("\n"),a}return n}(r.a.PureComponent),$=function(e){var t=e.name,n=e.locusList,a=e.setLocus,o=e.setLocusList;return r.a.createElement("div",null,n.map((function(e,t){return r.a.createElement("div",{key:"".concat(e," ").concat(t)},t+1,". \xa0 ",r.a.createElement(Y,{onClick:function(){a(e)}},e))})),r.a.createElement(Q,{name:t,locusList:n,setLocusList:o}))},Z=n(595);function ee(){var e=Object(i.a)(["\n"]);return ee=function(){return e},e}function te(){var e=Object(i.a)(["\n  font-family: monospace;\n  background-color: #F7F7F7;\n"]);return te=function(){return e},e}function ne(){var e=Object(i.a)(["\n  font-family: monospace;\n  margin: 20px 30px;\n  padding: 10px;\n  background-color: #F7F7F7;\n  white-space: nowrap;\n"]);return ne=function(){return e},e}function ae(){var e=Object(i.a)(["\n  cursor: pointer;\n  padding: 10px 10px 10px 0px;\n  display: inline-block;\n"]);return ae=function(){return e},e}var re=s.a.a(ae()),oe=s.a.div(ne()),ce=s.a.span(te()),le=Object(s.a)(h.a).attrs({position:"right center"})(ee()),ie={".bigWig":"coverage",".junctions.bed":"junctions",".spliceJunctions.bed":"junctions",".junctions.bed.gz":"junctions",".spliceJunctions.bed.gz":"junctions",".bam":"bam",".cram":"bam",".vcf":"vcf",".vcf.gz":"vcf",".wig":"wig",".bedGraph":"wig",".bed":"bed",".bed.gz":"bed"},se=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).getInitialState=function(){return{textAreaValue:"",warningMessage:null,errorMessage:null}},a.parseTextAreaValueToRows=function(e){if(!e.trim())return{rows:[],errorMessage:null};var t=null,n=[],a=e.split(/[,\s]+/).filter(Boolean).reduce((function(e,t){var a=t.split("/"),r=a[a.length-1],o=Object.keys(ie).filter((function(e){return r.endsWith(e)}));if(0===o.length)n.push(t);else{var c=o[0],l=r.replace(c,"");e[l]||(e[l]={data:[]}),e[l].name=l,e[l].data.push({type:ie[c],url:t})}return e}),{});return n.length>0&&(t="These paths have file suffixes that are not recognized: ".concat(n.join(", "))),{newRows:Object.values(a),errorMessage:t}},a.handleModalSave=function(){var e=a.props.addRows,t=a.state.textAreaValue,n=a.parseTextAreaValueToRows(t),r=n.newRows,o=n.errorMessage;return o?(a.setState({errorMessage:o}),!1):(e(r),!0)},a.handleModalClose=function(){return a.setState(a.getInitialState()),!0},a.render=function(){var e=a.props,t=e.title,n=e.trigger,o=a.state,c=o.textAreaValue,l=o.warningMessage,i=o.errorMessage,s="".concat(t," Rows");return r.a.createElement(K,{title:s,size:"large",modalName:s,trigger:n,handleSave:a.handleModalSave,handleClose:a.handleModalClose},r.a.createElement("div",null,"Enter google bucket path(s) for data files: \xa0",r.a.createElement(le,{trigger:r.a.createElement(E.a,{style:{margin:"10px 0px"},name:"question circle outline"}),content:r.a.createElement("div",null,r.a.createElement("b",null,"Format"),":",r.a.createElement("br",null),r.a.createElement("br",null),"Enter a list of data file paths separated by commas, spaces or new lines. ",r.a.createElement("br",null),r.a.createElement("br",null),"Example:",r.a.createElement("br",null),r.a.createElement(oe,null,"gs://your-bucket/dir/sample-name1.bigWig ",r.a.createElement("br",null),"gs://your-bucket/dir/sample2.bigWig ",r.a.createElement("br",null),"gs://your-bucket/dir/sample-name1.junctions.bed.gz ",r.a.createElement("br",null),"gs://your-bucket/dir/sample-name1.bam ",r.a.createElement("br",null),"gs://your-bucket/dir/sample2.junctions.bed.gz ",r.a.createElement("br",null)),"Paths that have the same prefix (eg. ",r.a.createElement(ce,null,"gs://your-bucket/dir/sample-name1")," above) will be interpreted as different data types for same sample.",r.a.createElement("br",null),"The order of paths doesn't matter.",r.a.createElement("br",null),r.a.createElement("br",null),"IGV.js track types will be inferred from file extensions as follows:",r.a.createElement("br",null),r.a.createElement("div",{style:{margin:"10px 30px"}},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement("b",null," File Extension ")," "),r.a.createElement("td",null," ",r.a.createElement("b",null,"IGV.js Track Type")," ")),Object.entries(ie).filter((function(e){return!Object(I.a)(e,1)[0].endsWith(".bed")})).map((function(e,t){var n=Object(I.a)(e,2),a=n[0],o=n[1];return r.a.createElement("tr",{key:"".concat(a," ").concat(o," ").concat(t)},r.a.createElement("td",null,a),r.a.createElement("td",null,o))}))))))}),r.a.createElement("br",null)),r.a.createElement(x.a,null,r.a.createElement(A.a,{style:{minHeight:"300px"},value:c,onChange:function(e){a.setState({textAreaValue:e.target.value})},placeholder:"Enter file path(s)"})),r.a.createElement("br",null),r.a.createElement("b",null,r.a.createElement("i",null,"NOTE:"))," These paths will be saved across page refreshes in this browser, but will not be recorded in the page url like other settings. Sharing or bookmarking this page won't include these paths.",l&&r.a.createElement(Z.a,{color:"yellow"},l),i&&r.a.createElement(Z.a,{color:"red"},i))},a.state=a.getInitialState(),a}return n}(r.a.PureComponent),ue=Object(l.b)(null,(function(e){return{addRows:function(t,n){e({type:"ADD_ROWS",categoryName:t,rows:n})}}}))((function(e){var t=e.category,n=e.addRows;return r.a.createElement("div",null,r.a.createElement(se,{title:"Add ".concat(t.categoryName),categoryName:t.categoryName,addRows:function(e){return n(t.categoryName,e)},trigger:r.a.createElement(re,null,"Add ",0===t.rows.length?t.categoryName:null," Rows")}))})),me=n(59),pe=n.n(me),de=n(596),ge=n(93),fe=n(2),he=n.n(fe),be=n(6),Ee=function(){var e=Object(be.a)(he.a.mark((function e(){var t;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance();case 2:if((t=e.sent).isSignedIn.get()){e.next=6;break}return e.next=6,t.signIn();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=Object(be.a)(he.a.mark((function e(){var t,n;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance();case 2:return t=e.sent,n=t.currentUser.get().getBasicProfile(),e.abrupt("return",n.getEmail());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=Object(be.a)(he.a.mark((function e(){var t,n;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance();case 2:return t=e.sent,n=t.currentUser.get(),t.isSignedIn.get()||n.reloadAuthResponse(),e.abrupt("return",n.getAuthResponse().access_token);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oe=["GT/AG","CT/AC","GC/AG","CT/GC","AT/AC","GT/AT","non-canonical"],Se=function(e){return e.locus},we=function(e){return e.rightSideBarLocusList},_e=function(e){return e.leftSideBarLocusList},je=function(e){return e.genome},Te=function(e){return e.dataTypesToShow},Ne=function(e){return e.rowsInCategories},ke=function(e){return e.selectedRowNamesByCategoryName},xe=function(e){return e.selectedSamplesByCategoryNameAndRowName},Ae=function(e){return e.sjOptions},Ce=function(e){return e.vcfOptions},Re=function(e){return e.bamOptions},Le=function(e){return e.gcnvOptions},Ie=function(e){return e.user},De=function(e){return e.initialSettingsUrl},Ue=function(e){return e.initialSettingsUrlHasBeenApplied},Be=Object(ge.a)(Ne,(function(e){return Object(f.a)(e.reduce((function(e,t){return t.rows.forEach((function(t){t.data&&t.data.forEach((function(t){t.type&&e.add(t.type)}))})),e}),new Set))})),Me=Object(ge.a)(Be,Te,(function(e,t){return e.length<2?e:e.filter((function(e){return t.includes(e)}))})),Ge=Object(ge.a)(Ne,(function(e){return e.reduce((function(e,t){return Object(D.a)({},e,Object(L.a)({},t.categoryName,t.rows))}),{})})),Pe=Object(ge.a)(ke,Ge,(function(e,t){return Object.entries(e).reduce((function(e,n){var a=Object(I.a)(n,2),r=a[0],o=a[1];return t[r]?Object(D.a)({},e,Object(L.a)({},r,t[r].filter((function(e){return o.includes(e.name)})))):e}),{})})),Ve=Object(ge.a)(Pe,xe,Te,Ae,Ce,Re,Le,(function(e,t,n,a,r,o,c){var l=[];return Object.entries(e).forEach((function(e){var i=Object(I.a)(e,2),s=i[0];return i[1].forEach((function(e,i){var u,m;(e.data||[]).forEach((function(p,d){"gcnv_bed"===p.type?(console.log("Adding ".concat(p.url," track #"),100*i+d),l.push({type:"gcnv",format:"gcnv",name:"".concat(e.name," ").concat(p.label||""),url:p.url,indexURL:"".concat(p.url,".tbi"),height:c.trackHeight,min:c.trackMin,max:c.trackMax,autoscale:c.autoscale,highlightSamples:(((t[s]||{}).selectedSamples||{})[e.name]||[]).reduce((function(n,a){return n[a]=((((t[s]||{}).sampleSettings||{})[e.name]||{})[a]||{}).color||"blue",n}),{}),onlyHandleClicksForHighlightedSamples:c.onlyHandleClicksForHighlightedSamples,oauthToken:ye,order:100*i+d,rowName:e.name,categoryName:s})):("junctions"===p.type||p.url.includes("junctions.bed"))&&n.includes("junctions")?u={type:"spliceJunctions",format:"bed",url:p.url,indexURL:"".concat(p.url,".tbi"),oauthToken:ye,order:10*i,name:e.name,height:a.trackHeight,minUniquelyMappedReads:a.minUniquelyMappedReads,minTotalReads:a.minTotalReads,maxFractionMultiMappedReads:a.maxFractionMultiMappedReads,minSplicedAlignmentOverhang:a.minSplicedAlignmentOverhang,thicknessBasedOn:a.thicknessBasedOn,bounceHeightBasedOn:a.bounceHeightBasedOn,colorBy:a.colorBy,colorByNumReadsThreshold:void 0!==a.colorByNumReadsThreshold?a.colorByNumReadsThreshold:5,hideStrand:a.showOnlyPlusStrand?"-":a.showOnlyMinusStrand?"+":void 0,labelUniqueReadCount:a.labelUniqueReadCount,labelMultiMappedReadCount:a.labelMultiMappedReadCount,labelTotalReadCount:a.labelTotalReadCount,labelMotif:a.labelMotif,labelAnnotatedJunction:a.labelAnnotatedJunction&&a.labelAnnotatedJunctionValue,hideAnnotatedJunctions:a.hideAnnotated,hideUnannotatedJunctions:a.hideUnannotated,hideMotifs:Oe.filter((function(e){return a["hideMotif".concat(e)]})),rowName:e.name,categoryName:s}:("coverage"===p.type||p.url.includes(".bigWig"))&&n.includes("coverage")?(m={type:"wig",format:"bigwig",url:p.url,oauthToken:ye,name:e.name,height:a.trackHeight,order:10*i+d,rowName:e.name,categoryName:s},p.url.includes("spliceai")&&(m.color=function(e){return e<.5?"rgb(180,180,180)":e<.8?"rgb(180,180,0)":"rgb(200,0,0)"})):("vcf"===p.type||p.url.includes(".vcf"))&&n.includes("vcf")?(console.log("Adding ".concat(p.url," track #"),100*i+d),l.push({type:"variant",format:"vcf",url:p.url,indexURL:"".concat(p.url,".tbi"),indexed:!0,name:"".concat(e.name," ").concat(p.label||p.type),displayMode:r.displayMode,oauthToken:ye,order:100*i+d,rowName:e.name,categoryName:s})):("alignment"===p.type||p.url.includes(".bam")||p.url.includes(".cram"))&&n.includes("alignment")&&(console.log("Adding ".concat(p.url," track #"),100*i+d),l.push({type:"alignment",url:p.url,indexed:!0,name:"".concat(e.name," ").concat(p.label||""),height:o.trackHeight,colorBy:o.colorBy,viewAsPairs:o.viewAsPairs,showSoftClips:o.showSoftClips,oauthToken:ye,order:100*i+d,rowName:e.name,categoryName:s}))})),m&&u?(console.log("Adding ".concat(u.url," & ").concat(m.url," track")),l.push({type:"merged",name:u.name,height:a.trackHeight,tracks:[m,u],order:10*i+2,rowName:e.name,categoryName:s})):u?(console.log("Adding ".concat(u.url," track")),l.push(u)):m&&(console.log("Adding ".concat(m.url," track")),l.push(m))}))})),l}));function He(){var e=Object(i.a)(["\n  margin-top: 15px; \n  .prompt {\n    border-radius: 2px !important;\n    width: 155px;\n  }\n  \n  input {\n      max-width: none !important;\n      padding: 5px !important;\n  }\n  .results {\n      min-width: max-content;\n  }\n\n  .red-text {\n    .title {\n      color: #CC0000 !important;\n      font-weight: 500 !important;\n     }\n  }\n"]);return He=function(){return e},e}var qe=Object(s.a)(de.a)(He()),ze={isLoading:!1,results:[],value:""},Je=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this)).handleResultSelect=function(t,n){var a=n.result;e.setState({value:""}),console.log(t,a);var r=a.id.split("!!"),o=r[0],c=r[1],l=r[2],i=r[3];i?("ADD"===o&&e.props.updateSelectedRowNames(o,c,[l]),e.props.updateSelectedSamples(o,c,Object(L.a)({},l,[i]))):e.props.updateSelectedRowNames(o,c,[l])},e.handleSearchChange=function(t,n){var a=n.value;e.setState({isLoading:!0,value:a});var r=function(t,n){return function(t){return e.props.selectedRowNamesByCategoryName[t]||[]}(t).includes(n)},o=function(t){return(e.props.selectedSamplesByCategoryNameAndRowName[t]||{}).selectedSamples||{}},c=function(e,t){return o(e)[t]||[]},l=function(e,t,n){return c(e,t).includes(n)};setTimeout((function(){if(e.state.value.length<1)return e.setState(ze);var t=new RegExp(pe.a.escapeRegExp(e.state.value),"i"),n={},a=0;t.test("Hide")&&Object.keys(e.props.selectedRowNamesByCategoryName).forEach((function(t){a>=10||e.props.selectedRowNamesByCategoryName[t].forEach((function(e){if(!(a>=10)){n[t]=n[t]||[];var r={action:"REMOVE",categoryName:t,rowName:e};pe.a.some(n[t],r)||n[t].push(r),a+=1}}))})),(t.test("Hide")||t.test("Hide sample"))&&Object.keys(e.props.selectedSamplesByCategoryNameAndRowName).forEach((function(e){a>=10||Object.keys(o(e)).forEach((function(t){a>=10||!r(e,t)||c(e,t).forEach((function(r){if(!(a>=10)){n[e]=n[e]||[];var o={action:"REMOVE",categoryName:e,rowName:t,sample:r};pe.a.some(n[e],o)||n[e].push(o),a+=1}}))}))})),e.props.rowsInCategories.forEach((function(e){a>=10||e.rows.forEach((function(o){if(!(a>=10)){if(t.test(o.name)){n[e.categoryName]=n[e.categoryName]||[];var c={action:r(e.categoryName,o.name)?"REMOVE":"ADD",categoryName:e.categoryName,rowName:o.name};pe.a.some(n[e.categoryName],c)||n[e.categoryName].push(c),a+=1}if(o.data){var i=o.data.filter((function(e){return e.samples&&e.samples.length>0}));i.length>1&&console.warn("Found row with multiple data items each of which has a samples array. This may behave unexpectedly if there are duplicate samples"),i.forEach((function(c){(c.samples||[]).forEach((function(c){if(!(a>=10)&&t.test(c)){n[e.categoryName]=n[e.categoryName]||[];var i={action:r(e.categoryName,o.name)&&l(e.categoryName,o.name,c)?"REMOVE":"ADD",categoryName:e.categoryName,rowName:o.name,sample:c};pe.a.some(n[e.categoryName],i)||n[e.categoryName].push(i),a+=1}}))}))}}}))}));var i=e.props.rowsInCategories.length>1,s=i?{}:[];return Object.keys(n).forEach((function(e){i&&(s[e]={name:e,results:[]});var t=i?s[e].results:s;n[e].forEach((function(n){if(n.sample){var a="ADD"===n.action?"Show sample":"Hide sample";t.push({id:"".concat(n.action,"!!").concat(e,"!!").concat(n.rowName,"!!").concat(n.sample),title:"".concat(a," ").concat(n.rowName," > ").concat(n.sample),className:"ADD"!==n.action&&"red-text"})}else{var r="ADD"===n.action?"Show":"Hide";t.push({id:"".concat(n.action,"!!").concat(e,"!!").concat(n.rowName),title:"".concat(r," ").concat(n.rowName),className:"ADD"!==n.action&&"red-text"})}}))})),e.setState({isLoading:!1,results:s})}),300)},e.render=function(){var t=e.state,n=t.isLoading,a=t.value,o=t.results;return r.a.createElement(qe,{category:e.props.rowsInCategories.length>1,loading:n,onResultSelect:e.handleResultSelect,onSearchChange:e.handleSearchChange,placeholder:"Select data",results:o,value:a})},e.state=ze,e}return n}(r.a.Component),We=Object(l.b)((function(e){return{rowsInCategories:Ne(e),selectedRowNamesByCategoryName:ke(e),selectedSamplesByCategoryNameAndRowName:xe(e)}}),(function(e){return{updateSelectedRowNames:function(t,n,a){e({type:"".concat(t,"_SELECTED_ROW_NAMES"),categoryName:n,selectedRowNames:a})},updateSelectedSamples:function(t,n,a){e({type:"".concat(t,"_SELECTED_SAMPLES"),categoryName:n,selectedSamplesByRowName:a})}}}))(Je);function Fe(){var e=Object(i.a)(["\n  white-space: nowrap;\n"]);return Fe=function(){return e},e}function Ke(){var e=Object(i.a)(["\n  padding-left: 5px;\n  white-space: nowrap;\n"]);return Ke=function(){return e},e}function Xe(){var e=Object(i.a)(["\n  cursor: pointer;\n  padding: 10px 10px 10px 0px;\n  display: inline-block;\n"]);return Xe=function(){return e},e}function Ye(){var e=Object(i.a)(["\n  color: ",";\n  border: 3px solid ",";\n  display: inline-block;\n  width: 6px;\n  border-radius: 1px;\n  height: 10px;\n  cursor: pointer;\n"]);return Ye=function(){return e},e}function Qe(){var e=Object(i.a)(["\n  display: inline-block;\n  margin: 0px 0px 0px 15px;\n  color: #999;\n  white-space: nowrap;\n"]);return Qe=function(){return e},e}var $e=s.a.div(Qe()),Ze=s.a.div.attrs({name:"stop"})(Ye(),(function(e){return e.color}),(function(e){return e.color})),et={junctions:"#B0B0EC",coverage:"#B5D29A",alignment:"#5DB6E9",vcf:"#E6A01B",default:"#000000"},tt=s.a.a(Xe()),nt=s.a.span(Ke()),at=s.a.div(Fe()),rt=function(e){var t=e.row;return r.a.createElement(h.a,{content:r.a.createElement("table",null,r.a.createElement("tbody",null,(t.data||[]).map((function(e,t){return r.a.createElement("tr",{key:"".concat(e.url," ").concat(e.type," ").concat(t)},r.a.createElement("td",{style:{paddingRight:"10px"}},r.a.createElement("b",null,e.type&&e.type.toUpperCase(),":")),r.a.createElement("td",null,r.a.createElement(at,null,e.url)))})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("div",{style:{fontSize:"small",color:"grey",marginTop:"10px"}},"(click to copy paths)"))))),position:"right center",trigger:r.a.createElement(nt,{onClick:function(){var e=(t.data||[]).map((function(e){return e.url})).join("\n");navigator.clipboard.writeText(e)}},(t.data||[]).map((function(e,t){return r.a.createElement(Ze,{key:"".concat(e.url," ").concat(e.type," ").concat(t),color:et[e.type]||et.default})}))),style:{marginLeft:"2px"}})},ot=function(e){var t=e.allDataTypes,n=e.enabledDataTypes,a=e.updateDataTypesToShow;if(t.length<2)return null;var o=Object(f.a)(t).map((function(e,t){var o=e;return o="junctions"===e?"Splice Junctions":"vcf"===e?"VCF":"gcnv_bed"===e?"gCNV":o.charAt(0).toUpperCase()+o.slice(1),r.a.createElement(j,{key:"".concat(e," ").concat(t)},r.a.createElement(b.a,{label:"".concat(o.toLocaleString()),checked:n.includes(e),onChange:function(t,n){return a(n.checked?"ADD":"REMOVE",[e])}}),r.a.createElement(nt,null,r.a.createElement(h.a,{content:"This color stripe marks rows that have ".concat(o," data. Select this checkbox to show ").concat(o," tracks for each row selected below."),position:"right center",trigger:r.a.createElement(Ze,{color:et[e]||et.default})})))}));return r.a.createElement("div",null,r.a.createElement(_,null,"SHOW TRACK TYPES"),o)},ct=function(e){var t=e.category,n=e.updateSelectedRowNames;return r.a.createElement("div",null,r.a.createElement(_,null,t.categoryName.toUpperCase()),t.rows.length>=12&&r.a.createElement($e,null,"(N=".concat(t.rows.length,") ")),t.rows.length>0&&r.a.createElement("div",null,r.a.createElement(tt,{onClick:function(e){e.preventDefault(),n("SET",t.categoryName,[])}},"Uncheck All")))},lt=function(e){var t=e.rowsInCategories,n=e.selectedRowNamesByCategoryName,a=e.updateSelectedRowNames;return t.map((function(e,t){return r.a.createElement("div",{key:"".concat(e.categoryName," ").concat(t)},r.a.createElement(ct,{category:e,updateSelectedRowNames:a}),e.rows.map((function(t,o){var c=n[e.categoryName]||[];return r.a.createElement(it,{key:"".concat(t.name," ").concat(o),row:t,categoryName:e.categoryName,selectedRowNames:c,updateSelectedRowNames:a})})),r.a.createElement(ue,{category:e}))}))},it=function(e){var t=e.row,n=e.categoryName,a=e.selectedRowNames,o=e.updateSelectedRowNames;return r.a.createElement(at,null,r.a.createElement(b.a,{label:t.name,checked:a.includes(t.name),"data-row":t.name,onChange:function(e,t){return o(t.checked?"ADD":"REMOVE",n,[t["data-row"]])}}),r.a.createElement(st,{row:t}),r.a.createElement(rt,{row:t}))},st=function(e){var t=e.row;return t.description?r.a.createElement(T,{inverted:!0,content:t.description,position:"right center",trigger:r.a.createElement(E.a,{style:{marginLeft:"10px"},name:"question circle outline"})}):null},ut=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.locusList,n=e.rowsInCategories,a=e.allDataTypes,o=e.enabledDataTypes,c=e.selectedRowNamesByCategoryName,l=e.setLocus,i=e.setLocusList,s=e.updateDataTypesToShow,u=e.updateSelectedRowNames;return r.a.createElement("div",null,r.a.createElement($,{name:"Left Side Bar",locusList:t,setLocus:l,setLocusList:i}),r.a.createElement(ot,{allDataTypes:a,enabledDataTypes:o,updateDataTypesToShow:s}),r.a.createElement(We,null),r.a.createElement(lt,{rowsInCategories:n,selectedRowNamesByCategoryName:c,updateSelectedRowNames:u}))}}]),n}(r.a.PureComponent),mt=Object(l.b)((function(e){return{locusList:_e(e),rowsInCategories:Ne(e),allDataTypes:Be(e),enabledDataTypes:Me(e),selectedRowNamesByCategoryName:ke(e)}}),(function(e){return{setLocus:function(t){e({type:"UPDATE_LOCUS",newValue:t})},setLocusList:function(t){e({type:"SET_LEFT_SIDE_BAR_LOCUS_LIST",values:t})},updateDataTypesToShow:function(t,n){e({type:"".concat(t,"_DATA_TYPES_TO_SHOW"),values:n})},updateSelectedRowNames:function(t,n,a){e({type:"".concat(t,"_SELECTED_ROW_NAMES"),categoryName:n,selectedRowNames:a})},updateSjOptions:function(t){e({type:"UPDATE_SJ_OPTIONS",updates:t})},updateVcfOptions:function(t){e({type:"UPDATE_VCF_OPTIONS",updates:t})},updateBamOptions:function(t){e({type:"UPDATE_BAM_OPTIONS",updates:t})}}}))(ut),pt=Object(l.b)((function(e){return{bamOptions:Re(e)}}),(function(e){return{updateBamOptions:function(t){e({type:"UPDATE_BAM_OPTIONS",updates:t})}}}))((function(e){var t=e.bamOptions,n=e.updateBamOptions;return r.a.createElement("div",null,r.a.createElement(_,null,"BAM TRACK ",r.a.createElement("br",null),"OPTIONS"),r.a.createElement("br",null),r.a.createElement(j,null,"Track height: ",r.a.createElement(k,{key:"track-height-".concat(t.trackHeight),type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode&&n(Object(L.a)({},t,a||e.target.value))}(e,"trackHeight",parseInt(e.target.value,10))}})," px"),r.a.createElement(j,null,r.a.createElement(b.a,{label:"View as pairs",checked:t.viewAsPairs,onChange:function(e,t){return n({viewAsPairs:t.checked})}})),r.a.createElement(j,null,r.a.createElement(b.a,{label:"Show soft-clips",checked:t.showSoftClips,onChange:function(e,t){return n({showSoftClips:t.checked})}})),r.a.createElement(j,null,"Color by:"),r.a.createElement(j,null,r.a.createElement("select",{value:t.colorBy,onChange:function(e){return n({colorBy:e.target.value})}},r.a.createElement("option",{value:"strand"},"Strand"),r.a.createElement("option",{value:"firstOfPairStrand"},"First-of-pair strand"),r.a.createElement("option",{value:"pairOrientation"},"Pair orientation"),r.a.createElement("option",{value:"fragmentLength"},"Insert size (TLEN)"),r.a.createElement("option",{value:"none"},"None"))))})),dt=Object(l.b)((function(e){return{vcfOptions:Ce(e)}}),(function(e){return{updateVcfOptions:function(t){e({type:"UPDATE_VCF_OPTIONS",updates:t})}}}))((function(e){var t=e.vcfOptions,n=e.updateVcfOptions;return r.a.createElement("div",null,r.a.createElement(_,null,"VCF TRACK ",r.a.createElement("br",null),"OPTIONS"),r.a.createElement("br",null),r.a.createElement(j,null,"Display mode: \xa0",r.a.createElement("select",{value:t.displayMode,onChange:function(e){return n({displayMode:e.target.value})}},r.a.createElement("option",{value:"COLLAPSED"},"Collapse"),r.a.createElement("option",{value:"SQUISHED"},"Squish"),r.a.createElement("option",{value:"EXPANDED"},"Expand"))))})),gt=n(589);function ft(){var e=Object(i.a)(["\n  label {\n    margin-left: 10px;\n    margin-bottom: 10px;\n    padding-left: 1.4em !important;\n  }\n"]);return ft=function(){return e},e}var ht=Object(s.a)(gt.a)(ft()),bt=function(e){var t=e.sjOptions,n=e.handleTextInput;return"strand"===t.colorBy?r.a.createElement("div",null,r.a.createElement(N,{name:"stop",style:{color:"#b0b0ec"}})," plus",r.a.createElement(N,{name:"stop",style:{color:"#ecb0b0",marginLeft:"10px"}})," minus"):"motif"===t.colorBy?r.a.createElement("div",null,r.a.createElement(N,{name:"stop",style:{color:"rgb(27,158,119)"}})," GT/AG ",r.a.createElement("br",null),r.a.createElement(N,{name:"stop",style:{color:"rgb(217,95,2)"}})," CT/AC ",r.a.createElement("br",null),r.a.createElement(N,{name:"stop",style:{color:"rgb(117,112,179)"}})," GC/AG ",r.a.createElement("br",null),r.a.createElement(N,{name:"stop",style:{color:"rgb(231,41,138)"}})," CT/GC ",r.a.createElement("br",null),r.a.createElement(N,{name:"stop",style:{color:"rgb(102,166,30)"}})," AT/AC ",r.a.createElement("br",null),r.a.createElement(N,{name:"stop",style:{color:"rgb(230,171,2)"}})," GT/AT ",r.a.createElement("br",null),r.a.createElement(N,{name:"stop",style:{color:"rgb(166,118,29)"}})," non-canonical ",r.a.createElement("br",null)):"numUniqueReads"===t.colorBy||"numReads"===t.colorBy?r.a.createElement("div",null,"# reads",r.a.createElement(N,{name:"stop",style:{color:"#AAAAAA",marginLeft:"10px"}}),"\xa0\u2264 \xa0",r.a.createElement(k,{type:"text",key:"num-reads-".concat(t.colorByNumReadsThreshold),defaultValue:void 0!==t.colorByNumReadsThreshold?t.colorByNumReadsThreshold:5,onKeyUp:function(e){return n(e,"colorByNumReadsThreshold")},style:{width:"35px"}}),"\xa0 < \xa0",r.a.createElement(N,{name:"stop",style:{color:"blue"}})):"isAnnotatedJunction"===t.colorBy?r.a.createElement("div",null,r.a.createElement(N,{name:"stop",style:{color:"#b0b0ec"}})," known junction ",r.a.createElement("br",null),r.a.createElement(N,{name:"stop",style:{color:"orange"}})," novel junction"):r.a.createElement("div",null)},Et=Object(l.b)((function(e){return{sjOptions:Ae(e)}}),(function(e){return{updateSjOptions:function(t){e({type:"UPDATE_SJ_OPTIONS",updates:t})}}}))((function(e){var t=e.sjOptions,n=e.updateSjOptions,a=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode&&n(Object(L.a)({},t,a||e.target.value))};return r.a.createElement("div",null,r.a.createElement(_,null,"JUNCTION TRACK ",r.a.createElement("br",null),"OPTIONS"),r.a.createElement("br",null),r.a.createElement(j,null,"Track height: ",r.a.createElement(k,{key:"track-height-".concat(t.trackHeight),type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return a(e,"trackHeight",parseInt(e.target.value,10))}})," px"),r.a.createElement(j,null,"Color by:"),r.a.createElement(j,null,r.a.createElement("select",{value:t.colorBy,onChange:function(e){return n({colorBy:e.target.value})}},r.a.createElement("option",{value:"strand"},"strand"),r.a.createElement("option",{value:"motif"},"donor/acceptor motif"),r.a.createElement("option",{value:"numUniqueReads"},"# uniquely-mapped reads"),r.a.createElement("option",{value:"numReads"},"# total reads"),r.a.createElement("option",{value:"isAnnotatedJunction"},"is known junction")),r.a.createElement(bt,{sjOptions:t,handleTextInput:a})),r.a.createElement(j,null,"Junction thickness:"),r.a.createElement(j,null,r.a.createElement("select",{value:t.thicknessBasedOn,onChange:function(e){return n({thicknessBasedOn:e.target.value})}},r.a.createElement("option",{value:"numUniqueReads"},"# uniquely-mapped reads"),r.a.createElement("option",{value:"numReads"},"# total reads"),r.a.createElement("option",{value:"isAnnotatedJunction"},"is known junction"))),r.a.createElement(j,null,"Junction bounce height:"),r.a.createElement(j,null,r.a.createElement("select",{value:t.bounceHeightBasedOn,onChange:function(e){return n({bounceHeightBasedOn:e.target.value})}},r.a.createElement("option",{value:"random"},"random"),r.a.createElement("option",{value:"distance"},"distance"),r.a.createElement("option",{value:"thickness"},"thickness"))),r.a.createElement(j,null,"Junction label:"),r.a.createElement(j,null,r.a.createElement(b.a,{label:"# uniquely-mapped",checked:t.labelUniqueReadCount,onChange:function(e,t){return n({labelUniqueReadCount:t.checked})}})),r.a.createElement(j,null,r.a.createElement(b.a,{label:"# multi-mapped",checked:t.labelMultiMappedReadCount,onChange:function(e,t){return n({labelMultiMappedReadCount:t.checked})}})),r.a.createElement(j,null,r.a.createElement(b.a,{label:"# total reads",checked:t.labelTotalReadCount,onChange:function(e,t){return n({labelTotalReadCount:t.checked})}})),r.a.createElement(j,null,r.a.createElement(b.a,{label:"donor/acceptor motif",checked:t.labelMotif,onChange:function(e,t){return n({labelMotif:t.checked})}})),r.a.createElement(j,null,r.a.createElement(b.a,{label:"known junction:",checked:t.labelAnnotatedJunction,onChange:function(e,t){return n({labelAnnotatedJunction:t.checked})}}),r.a.createElement(k,{key:"junction-label-".concat(t.labelAnnotatedJunctionValue),type:"text",defaultValue:t.labelAnnotatedJunctionValue,onKeyUp:function(e){return a(e,"labelAnnotatedJunctionValue")},style:{width:"35px"}})),r.a.createElement(_,null,"JUNCTION TRACK FILTERS"),r.a.createElement("br",null),r.a.createElement(j,null,"Show Strands:",r.a.createElement(ht,{label:"both",name:"strandButton",checked:!t.showOnlyPlusStrand&&!t.showOnlyMinusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!1,showOnlyMinusStrand:!1})}}),r.a.createElement(ht,{label:"plus",name:"strandButton",checked:t.showOnlyPlusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!0,showOnlyMinusStrand:!1})}}),r.a.createElement(ht,{label:"minus",name:"strandButton",checked:t.showOnlyMinusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!1,showOnlyMinusStrand:!0})}})),r.a.createElement(j,null,r.a.createElement(b.a,{label:"Show known junctions",checked:!t.hideAnnotated,onChange:function(e,t){return n({hideAnnotated:!t.checked})}})),r.a.createElement(j,null,r.a.createElement(b.a,{label:"Show novel junctions",checked:!t.hideUnannotated,onChange:function(e,t){return n({hideUnannotated:!t.checked})}})),r.a.createElement("div",null,r.a.createElement(j,null,"Uniquely-mapped reads:"),"at least ",r.a.createElement(k,{key:"uniquely-mapped-reads-".concat(t.minUniquelyMappedReads),type:"text",defaultValue:t.minUniquelyMappedReads,onKeyUp:function(e){return a(e,"minUniquelyMappedReads",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(j,null,"Total reads:"),"at least ",r.a.createElement(k,{key:"total-reads-".concat(t.minTotalReads),type:"text",defaultValue:t.minTotalReads,onKeyUp:function(e){return a(e,"minTotalReads",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(j,null,"Fraction multi-mapped:",r.a.createElement(T,{inverted:!0,content:"Allows filtering of junctions where most reads that span the junction are multi-mapped reads. For example, setting this to 0.79 will hide junctions where 8 out of 10 (or more) reads that span the junction are not uniquely mapped reads.",position:"left center",on:"click",trigger:r.a.createElement(E.a,{style:{marginLeft:"8px"},name:"question circle outline"})})),"at most ",r.a.createElement(k,{key:"fraction-multi-mapped-".concat(t.maxFractionMultiMappedReads),type:"text",defaultValue:t.maxFractionMultiMappedReads,onKeyUp:function(e){return a(e,"maxFractionMultiMappedReads",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(j,null,"Splice overhang base-pairs:"),"at least ",r.a.createElement(k,{key:"spliced-alignment-overhang-".concat(t.minSplicedAlignmentOverhang),type:"text",defaultValue:t.minSplicedAlignmentOverhang,onKeyUp:function(e){return a(e,"minSplicedAlignmentOverhang",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(j,null,"Donor/Acceptor Motifs:"),Oe.map((function(e){return r.a.createElement(j,{key:e},r.a.createElement(b.a,{label:"Show ".concat(e),checked:!t["hideMotif".concat(e)],onChange:function(t,a){return n(Object(L.a)({},"hideMotif".concat(e),!a.checked))}}))}))))})),vt=n(300);function yt(){var e=Object(i.a)(["\n  padding: 0px !important;\n  div {\n    overflow-y: visible !important;\n  }\n"]);return yt=function(){return e},e}function Ot(){var e=Object(i.a)(["\n  display: inline-block;\n  cursor: pointer;\n  border-radius: 2px;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.1);\n  width: 10px;\n  height: 12px;\n"]);return Ot=function(){return e},e}function St(){var e=Object(i.a)(["\n  display: inline-block;\n  cursor: pointer;\n  border-radius: 2px;\n  padding: 1px 2px;\n  background: #fff;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.1);\n"]);return St=function(){return e},e}var wt=s.a.div(St()),_t=s.a.div(Ot()),jt=Object(s.a)(h.a).attrs({flowing:!0})(yt()),Tt=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState({color:e})},a.handleApply=function(e){a.props.colorChangedHandler(e.hex)},a.state={color:a.props.color},a}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(jt,{on:"click",position:"left center",trigger:r.a.createElement(wt,null,r.a.createElement(_t,{style:{background:this.state.color}})),content:r.a.createElement(vt.SwatchesPicker,{color:this.state.color,onChangeComplete:this.handleApply,onChange:function(t){return e.setState({color:t})}})})}}]),n}(r.a.Component);function Nt(){var e=Object(i.a)(["\n  word-wrap: break-word;\n  word-break: break-all;  \n  white-space: normal;\n"]);return Nt=function(){return e},e}function kt(){var e=Object(i.a)(["\n  padding: 0px !important;\n  box-shadow: none !important;\n"]);return kt=function(){return e},e}function xt(){var e=Object(i.a)(["\n  margin: 10px 0px 8px 0px;\n  font-style: italic;\n"]);return xt=function(){return e},e}function At(){var e=Object(i.a)(["\n  font-weight: 700;\n  margin: 8px 0px;\n"]);return At=function(){return e},e}function Ct(){var e=Object(i.a)(["\n  margin-bottom: 8px; \n"]);return Ct=function(){return e},e}function Rt(){var e=Object(i.a)(["\n  color: gray;\n"]);return Rt=function(){return e},e}var Lt=s.a.span(Rt()),It=Object(s.a)(j)(Ct()),Dt=s.a.div(At()),Ut=s.a.div(xt()),Bt=Object(s.a)(C.a).attrs({basic:!0,icon:!0})(kt()),Mt=s.a.span(Nt()),Gt=r.a.createElement(Lt,null,"Use search box in left side-bar to select which samples to highlight."),Pt=function(e){var t=e.categoryName,n=e.rowName,a=e.sample,o=e.sampleSettings,c=e.unhighlightSample,l=e.updateSampleSettings;return r.a.createElement("div",{style:{whiteSpace:"nowrap"}},r.a.createElement(Bt,{onClick:function(){return c(t,n,a)}},r.a.createElement(E.a,{name:"delete"})),r.a.createElement(Mt,null,a),r.a.createElement("span",{style:{marginLeft:"8px"}},r.a.createElement(Tt,{key:o.color,color:o.color||"blue",colorChangedHandler:function(e){return l(t,n,a,{color:e})}})))},Vt=function(e){var t=e.selectedSamplesByCategoryNameAndRowName,n=e.unhighlightSample,a=e.updateSampleSettings,o=[];return Object.entries(t).forEach((function(e){var t=Object(I.a)(e,2),c=t[0],l=t[1];Object.entries(l.selectedSamples||{}).forEach((function(e){var t=Object(I.a)(e,2),i=t[0],s=t[1];o.push(r.a.createElement("div",{key:"".concat(c,"!!").concat(i)},r.a.createElement(Ut,null,c,": ",i),s.map((function(e){return r.a.createElement(Pt,{key:e,categoryName:c,rowName:i,sample:e,sampleSettings:((l.sampleSettings||{})[i]||{})[e]||{},unhighlightSample:n,updateSampleSettings:a})}))))}))})),o.length>0?o:Gt},Ht=Object(l.b)((function(e){return{gcnvOptions:Le(e),selectedSamplesByCategoryNameAndRowName:xe(e)}}),(function(e){return{updateGcnvOptions:function(t){e({type:"UPDATE_GCNV_OPTIONS",updates:t})},unhighlightSample:function(t,n,a){e({type:"REMOVE_SELECTED_SAMPLES",categoryName:t,selectedSamplesByRowName:Object(L.a)({},n,[a])})},updateSampleSettings:function(t,n,a,r){e({type:"UPDATE_SAMPLE_SETTINGS",categoryName:t,sampleSettingsByRowName:Object(L.a)({},n,Object(L.a)({},a,r))})}}}))((function(e){var t=e.gcnvOptions,n=e.selectedSamplesByCategoryNameAndRowName,a=e.updateGcnvOptions,o=e.updateSampleSettings,c=e.unhighlightSample,l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode&&a(Object(L.a)({},t,n||e.target.value))};return r.a.createElement("div",null,r.a.createElement(_,null,"GCNV OPTIONS"),r.a.createElement("br",null),r.a.createElement(It,null,"Track height: ",r.a.createElement(k,{key:"track-height-".concat(t.trackHeight),type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return l(e,"trackHeight",parseInt(e.target.value,10))}})," px"),r.a.createElement(It,null,"Y-max: ",r.a.createElement(k,{key:"y-max-".concat(t.trackMax),type:"text",defaultValue:t.trackMax,onKeyUp:function(e){return l(e,"trackMax",parseInt(e.target.value,10))}})," copies"),r.a.createElement(It,null,r.a.createElement(Dt,null,"Highlighted samples:"),r.a.createElement(Vt,{selectedSamplesByCategoryNameAndRowName:n,unhighlightSample:c,updateSampleSettings:o})))})),qt=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.locusList,n=e.enabledDataTypes,a=e.setLocus,o=e.setLocusList;return r.a.createElement("div",null,r.a.createElement($,{name:"Right Side Bar",locusList:t,setLocus:a,setLocusList:o}),n.includes("alignment")&&r.a.createElement(pt,null),n.includes("vcf")&&r.a.createElement(dt,null),(n.includes("coverage")||n.includes("junctions"))&&r.a.createElement(Et,null),n.includes("gcnv_bed")&&r.a.createElement(Ht,null))}}]),n}(r.a.PureComponent),zt=Object(l.b)((function(e){return{locusList:we(e),enabledDataTypes:Me(e)}}),(function(e){return{setLocus:function(t){e({type:"UPDATE_LOCUS",newValue:t})},setLocusList:function(t){e({type:"SET_RIGHT_SIDE_BAR_LOCUS_LIST",values:t})}}}))(qt);function Jt(){var e=Object(i.a)(["\n  cursor: pointer;\n  margin-left: 20px;\n"]);return Jt=function(){return e},e}var Wt=s.a.a(Jt()),Ft=function(){return r.a.createElement(K,{title:"About the TGG Viewer",size:"large",modalName:"AboutModal",trigger:r.a.createElement(Wt,null,"About")},"The Translational Genomics Group (TGG) Viewer is a free, open-source web app for visualizing splice junctions, copy number, and other data genome-wide using ",r.a.createElement("a",{href:"https://github.com/igvteam/igv.js",target:"_blank"},"IGV.js"),r.a.createElement("br",null),r.a.createElement("br",null),"Main features: ",r.a.createElement("br",null),r.a.createElement("ul",null,r.a.createElement("li",null,"Supports most file formats supported by IGV.js, including: .bed, .vcf, .bam, .cram, .bigWig, as well as several custom formats for splice junctions (.junctions.bed.gz) and gCNV copy-number variants (.gcnv.bed.gz) "),r.a.createElement("li",null,"Includes custom reference tracks such as splice junctions from GTEx v8 muscle, blood, and fibroblast samples."),r.a.createElement("li",null,"Supports adding gene or locus lists to left or right side bar for quick navigation across a list of regions."),r.a.createElement("li",null,"Can load data files or reference tracks from any Google bucket to which you have read-access."),r.a.createElement("li",null,"Retrieves just the on-screen sections of the files directly from Google buckets."),r.a.createElement("li",null,"All settings, gene lists, and data paths can be exported and later restored or shared with others via a .json config file. To export all current settings, click the ",r.a.createElement(E.a,{name:"download"})," button, upload the .json file to github (or another public url), and then to restore the settings, paste the file's URL into the Initial Settings input, and Apply. "),r.a.createElement("li",null,"The page url also records page settings so that they can be bookmarked or shared, but does not include gene lists.")),r.a.createElement("a",{href:"https://github.com/broadinstitute/tgg-viewer/issues",target:"_blank"},"Issues"),"\xa0or ",r.a.createElement("a",{href:"https://github.com/broadinstitute/tgg-viewer/issues",target:"_blank"},"Feature Requests"),"\xa0can be submitted via ",r.a.createElement("a",{href:"https://github.com/broadinstitute/tgg-viewer",target:"_blank"},"GitHub"),".")},Kt=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.user;return e.googleUserEmail?r.a.createElement("div",null,"Signed in to Google Buckets as ",r.a.createElement("b",null,e.googleUserEmail)):r.a.createElement("div",null,"Signing in to Google Buckets...")}}]),n}(r.a.PureComponent),Xt=Object(l.b)((function(e){return{user:Ie(e)}}))(Kt);function Yt(){var e=Object(i.a)(["\n  text-align: right;\n  padding-right: 75px !important;\n"]);return Yt=function(){return e},e}function Qt(){var e=Object(i.a)(["\n  text-align: left;\n  padding-left: 75px !important;\n"]);return Qt=function(){return e},e}function $t(){var e=Object(i.a)(["\n  color: #444;\n  margin-bottom: 5px;\n"]);return $t=function(){return e},e}var Zt=Object(s.a)(u.a.Row)($t()),en=Object(s.a)(u.a.Column).attrs({width:6})(Qt()),tn=Object(s.a)(u.a.Column).attrs({width:10})(Yt()),nn=function(){return r.a.createElement(u.a,null,r.a.createElement(Zt,null,r.a.createElement(en,null,r.a.createElement("b",null,"TGG Viewer:"),r.a.createElement(Ft,null)),r.a.createElement(tn,null,r.a.createElement(Xt,null))))},an=n(301),rn=function(e,t){var n;return function(){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];n&&clearTimeout(n),n=setTimeout((function(){t.apply(void 0,r),n=null}),e)}};function on(){var e=Object(i.a)([""]);return on=function(){return e},e}var cn={showIdeogram:!0,showNavigation:!0,showRuler:!0,showCenterGuide:!0,showCursorTrackingGuide:!0,showCommandBar:!0},ln=s.a.div(on()),sn=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).setContainerElement=function(e){a.container=e},a.render=function(){return r.a.createElement(ln,null,r.a.createElement("div",{ref:a.setContainerElement}))},a.container=null,a.browser=null,a.ignoreNextTrackRemovedEvent=!1,a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(be.a)(he.a.mark((function e(){var t,n,a,r,o,c,l,i,s,u=this;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.container){e.next=2;break}return e.abrupt("return");case 2:return t=this.props,n=t.genome,a=t.locus,r=t.tracks,o=t.locusChangedHandler,c=t.trackRemovedHandler,l=t.userChangedHandler,i=Object(D.a)({},cn,{locus:a,genome:n,tracks:r}),e.next=6,new Promise((function(e){"undefined"!==typeof gapi&&gapi.load("client:auth2",(function(){gapi.client.load("storage","v1",(function(){gapi.client.init({clientId:"61200892608-qphtf65o323setqdcfj4hnf601mmetvs.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/devstorage.read_only",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/storage/v1/rest"]}),e()}))}))}));case 6:return e.next=8,Ee();case 8:return e.next=10,ve();case 10:s=e.sent,l(s),console.log("Calling igv.createBrowser(..)",i),an.a.createBrowser(this.container,i).then((function(e){u.browser=e,o&&u.browser.on("locuschange",rn(300,o)),c&&u.browser.on("trackremoved",(function(e){u.ignoreNextTrackRemovedEvent||c(e),u.ignoreNextTrackRemovedEvent=!1}))}));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shouldComponentUpdate",value:function(e){var t=this;if(!this.container||!this.browser)return!1;var n=this.props,a=n.tracks,r=n.selectedSamplesByCategoryNameAndRowName,o=n.enabledDataTypes,c=n.sjOptions,l=n.vcfOptions,i=n.bamOptions,s=n.gcnvOptions,u=this.browser.$searchInput.val(),m=e.locus;!e.locus||u&&m.replace(/,/g,"")===u.replace(/,/g,"")||this.browser.search(m);var p=e.tracks.reduce((function(e,t){return Object(D.a)(Object(L.a)({},t.name,t),e)}),{});return a.forEach((function(n){var a=p[n.name];if(a){var u=["merged","wig","spliceJunctions"].includes(n.type)&&(e.enabledDataTypes.includes("junctions")!==o.includes("junctions")||e.enabledDataTypes.includes("coverage")!==o.includes("coverage")||e.sjOptions!==c),m="variant"===n.type&&e.vcfOptions!==l,d="alignment"===n.type&&e.bamOptions!==i,g="gcnv"===n.type&&e.gcnvOptions!==s,f="gcnv"===n.type&&(!pe.a.isEqual(((e.selectedSamplesByCategoryNameAndRowName[n.categoryName]||{}).selectedSamples||{})[n.rowName],((r[n.categoryName]||{}).selectedSamples||{})[n.rowName])||!pe.a.isEqual(((e.selectedSamplesByCategoryNameAndRowName[n.categoryName]||{}).sampleSettings||{})[n.rowName],((r[n.categoryName]||{}).sampleSettings||{})[n.rowName]));(u||m||d||g||f)&&(console.log("Reloading track",n.name),t.ignoreNextTrackRemovedEvent=!0,t.browser.removeTrackByName(n.name),t.browser.loadTrack(a)),delete p[n.name]}else try{t.ignoreNextTrackRemovedEvent=!0,console.log("Removing track",n.name),t.browser.removeTrackByName(n.name)}catch(h){console.warn("Unable to remove track",n.name,h)}})),Object.values(p).forEach((function(e){try{console.log("Loading track",e.name),t.browser.loadTrack(e)}catch(n){console.warn("Unable to add track",e.name,n)}})),!1}}]),n}(r.a.Component),un=Object(l.b)((function(e){return{genome:je(e),locus:Se(e),tracks:Ve(e),enabledDataTypes:Me(e),selectedSamplesByCategoryNameAndRowName:xe(e),sjOptions:Ae(e),vcfOptions:Ce(e),bamOptions:Re(e),gcnvOptions:Le(e)}}),(function(e){return{locusChangedHandler:function(t){var n=t.label.replace(/,/g,"");e({type:"UPDATE_LOCUS",newValue:n})},userChangedHandler:function(t){e({type:"UPDATE_USER",updates:{googleUserEmail:t}})},trackRemovedHandler:function(t){console.log("Removing track",t.config.categoryName,t.config.name),e({type:"REMOVE_SELECTED_ROW_NAMES",categoryName:[t.config.categoryName],selectedRowNames:[t.config.name]})}}}))(sn),mn=n(590),pn=n(303),dn=n.n(pn),gn=n(304),fn=n.n(gn),hn=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){switch(this.props.status){case n.IN_PROGRESS:return r.a.createElement(E.a,{loading:!0,name:"spinner",style:{color:"#4183c4"}});case n.SUCCEEDED:return r.a.createElement(h.a,{trigger:r.a.createElement(E.a,{name:"check circle",style:{color:"#00C000"}}),content:this.props.successMessage||"Success",position:"top center",size:"small"});case n.ERROR:return r.a.createElement(h.a,{trigger:r.a.createElement(E.a,{name:"warning circle",style:{color:"#F00000"}}),content:this.props.errorMessage||"",position:"top center",size:"small"});default:return r.a.createElement(E.a,{name:"warning circle",style:{color:"rgb(0,0,0,0.0)"}})}}}]),n}(r.a.PureComponent);hn.NONE="NONE",hn.IN_PROGRESS="IN_PROGRESS",hn.SUCCEEDED="SUCCEEDED",hn.ERROR="ERROR";var bn=hn,En=n(193),vn=n.n(En),yn=n(194),On=n.n(yn),Sn={},wn="gs://seqr-reference-data/GRCh38/rna-seq",_n={genome:"hg38",locus:"chr15:92,835,700-93,031,800",dataTypesToShow:["junctions","coverage","vcf","gcnv_bed"],leftSideBarLocusList:[],rightSideBarLocusList:[],rowsInCategories:[{categoryName:"Reference Data",rows:[{name:"GTEx 100 Muscle",description:"100 randomly-chosen GTEx v3 muscle samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all 100 samples.",data:[{type:"junctions",url:"".concat(wn,"/GTEx_ref_data/muscle_100_GTEx_samples.junctions.bed.gz")},{type:"coverage",url:"".concat(wn,"/GTEx_ref_data/muscle_100_GTEx_samples.bigWig")}]},{name:"GTEx 100 Blood",description:"100 randomly-chosen GTEx v3 blood samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all 100 samples.",data:[{type:"junctions",url:"".concat(wn,"/GTEx_ref_data/blood_100_GTEx_samples.junctions.bed.gz")},{type:"coverage",url:"".concat(wn,"/GTEx_ref_data/blood_100_GTEx_samples.bigWig")}]},{name:"GTEx 100 Fibs",description:"100 randomly-chosen GTEx v3 fibroblast samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all 100 samples.",data:[{type:"junctions",url:"".concat(wn,"/GTEx_ref_data/fibs_100_GTEx_samples.junctions.bed.gz")},{type:"coverage",url:"".concat(wn,"/GTEx_ref_data/fibs_100_GTEx_samples.bigWig")}]},{name:"GTEx All Muscle",description:"All 803 GTEx v3 muscle samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all samples.",data:[{type:"junctions",url:"".concat(wn,"/GTEx_ref_data/GTEX_muscle.803_samples.junctions.bed.gz")},{type:"coverage",url:"".concat(wn,"/GTEx_ref_data/GTEX_muscle.803_samples.bigWig")}]},{name:"GTEx All Blood",description:"All 755 GTEx v3 blood samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all samples.",data:[{type:"junctions",url:"".concat(wn,"/GTEx_ref_data/GTEX_blood.755_samples.junctions.bed.gz")},{type:"coverage",url:"".concat(wn,"/GTEx_ref_data/GTEX_blood.755_samples.bigWig")}]},{name:"GTEx All Fibs",description:"All 504 GTEx v3 fibroblast samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all samples.",data:[{type:"junctions",url:"".concat(wn,"/GTEx_ref_data/GTEX_fibs.504_samples.junctions.bed.gz")},{type:"coverage",url:"".concat(wn,"/GTEx_ref_data/GTEX_fibs.504_samples.bigWig")}]},{name:"GTEx All Muscle - Norm.",description:"All 803 GTEx v3 muscle samples combined by summing raw coverage values across all samples and also summing normalized splice-junction-spanning read counts across all samples. The normalization is done by computing the normalized read count for each junction as normalized_read_count = raw_read_count * scalar. Here scalar = average_unique_reads_per_muscle_sample / (total_unqiue_reads_in_this_sample * number_of_muscle_samples), and average_unique_reads_per_muscle_sample = (total_unqiue_reads_in_all_muscle_samples / number_of_muscle_samples)",data:[{type:"junctions",url:"".concat(wn,"/GTEx_ref_data/GTEX_muscle.803_samples.normalized.junctions.bed.gz")},{type:"coverage",url:"".concat(wn,"/GTEx_ref_data/GTEX_muscle.803_samples.bigWig")}]},{name:"GTEx All Blood - Norm.",description:"All 755 GTEx v3 blood samples combined by summing raw coverage values across all samples and also summing normalized splice-junction-spanning read counts across all samples. The normalization is done by computing the normalized read count for each junction as normalized_read_count = raw_read_count * scalar. Here scalar = average_unique_reads_per_blood_sample / (total_unqiue_reads_in_this_sample * number_of_blood_samples), and average_unique_reads_per_blood_sample = (total_unqiue_reads_in_all_blood_samples / number_of_blood_samples)",data:[{type:"junctions",url:"".concat(wn,"/GTEx_ref_data/GTEX_blood.755_samples.normalized.junctions.bed.gz")},{type:"coverage",url:"".concat(wn,"/GTEx_ref_data/GTEX_blood.755_samples.bigWig")}]},{name:"GTEx All Fibs - Norm.",description:"All 504 GTEx v3 fibroblast samples combined by summing raw coverage values across all samples and also summing normalized splice-junction-spanning read counts across all samples. The normalization is done by computing the normalized read count for each junction as normalized_read_count = raw_read_count * scalar. Here scalar = average_unique_reads_per_fibs_sample / (total_unqiue_reads_in_this_sample * number_of_fibs_samples), and average_unique_reads_per_fibs_sample = (total_unqiue_reads_in_all_fibs_samples / number_of_fibs_samples)",data:[{type:"junctions",url:"".concat(wn,"/GTEx_ref_data/GTEX_fibs.504_samples.normalized.junctions.bed.gz")},{type:"coverage",url:"".concat(wn,"/GTEx_ref_data/GTEX_fibs.504_samples.bigWig")}]},{name:"splice AI scores - SNVs",data:[{type:"coverage",url:"".concat(wn,"/spliceai/spliceai_scores.raw.snv.hg38.all.bigWig")}]},{name:"splice AI scores - SNVs - alt allele A",data:[{type:"coverage",url:"".concat(wn,"/spliceai/spliceai_scores.raw.snv.hg38.alt-allele-A.bigWig")}]},{name:"splice AI scores - SNVs - alt allele C",data:[{type:"coverage",url:"".concat(wn,"/spliceai/spliceai_scores.raw.snv.hg38.alt-allele-C.bigWig")}]},{name:"splice AI scores - SNVs - alt allele G",data:[{type:"coverage",url:"".concat(wn,"/spliceai/spliceai_scores.raw.snv.hg38.alt-allele-G.bigWig")}]},{name:"splice AI scores - SNVs - alt allele T",data:[{type:"coverage",url:"".concat(wn,"/spliceai/spliceai_scores.raw.snv.hg38.alt-allele-T.bigWig")}]}]},{categoryName:"Samples",rows:[]}],selectedRowNamesByCategoryName:{},sjOptions:{trackHeight:170,hideAnnotated:!1,hideUnannotated:!1,colorBy:"strand",minUniquelyMappedReads:0,minTotalReads:1,maxFractionMultiMappedReads:1,minSplicedAlignmentOverhang:0,thicknessBasedOn:"numUniqueReads",bounceHeightBasedOn:"random",labelUniqueReadCount:!0,labelMultiMappedReadCount:!1,labelTotalReadCount:!1,labelMotif:!1,labelAnnotatedJunction:!1,labelAnnotatedJunctionValue:" [A]"},vcfOptions:{displayMode:"EXPANDED"},bamOptions:{trackHeight:200,showSoftClips:!0,alignmentShading:"strand"},gcnvOptions:{trackHeight:200,trackMin:0,trackMax:5,autoscale:!1,onlyHandleClicksForHighlightedSamples:!0},initialSettingsUrl:""};_n.initialSettings=JSON.parse(JSON.stringify(_n));var jn={locus:"locus",dataTypesToShow:"show",selectedRowNamesByCategoryName:"selectedRows",selectedSamplesByCategoryNameAndRowName:"selectedSamples",sjOptions:"sjOptions",vcfOptions:"vcfOptions",bamOptions:"bamOptions",gcnvOptions:"gcnvOptions",initialSettingsUrl:"settingsUrl"},Tn=["rowsInCategories","leftSideBarLocusList","rightSideBarLocusList"],Nn=function(){var e=Tn.reduce((function(e,t){var n=function(e){try{var t=localStorage.getItem(e),n=On.a.decompress(t);if(Sn[e]=n,null===n)return;return JSON.parse(n)}catch(a){return}}(t);return void 0!==n&&(e[t]=n),e}),{}),t=Object.entries(jn).reduce((function(e,t){var n=Object(I.a)(t,2),a=n[0],r=n[1];return Object(D.a)({},e,Object(L.a)({},r,a))}),{}),n=window.location.hash.replace(/^#/,""),a=n?n.split("&").reduce((function(e,n){var a=n.split("="),r=a[0]in t?t[a[0]]:a[0];if("locus"===r)e=Object(D.a)({},e,Object(L.a)({},r,a[1]));else try{e[r]=vn.a.parse(a[1])}catch(o){console.error("Couldn't parse url hash param",a[0],": ",a[1])}return e}),{}):{};return Object(D.a)({},_n,{},e,{},a)},kn=function(e){Tn.forEach((function(t){!function(e,t){try{var n=JSON.stringify(t);if(Sn[e]===n)return;console.warn("LocalStorage: compressing ".concat(e));var a=On.a.compress(n);localStorage.setItem(e,a),Sn[e]=n}catch(r){console.warn("Unable to save state: ",e,t,r)}}(t,e[t])}));var t=Object.keys(e).filter((function(e){return e in jn})).reduce((function(t,n){var a="locus"===n?e[n].replace(",",""):vn.a.stringify(e[n]);return[].concat(Object(f.a)(t),["".concat(jn[n],"=").concat(a)])}),[]).join("&");window.location.hash="#".concat(t)};function xn(){var e=Object(i.a)(["\n  margin-left: 20px !important;\n  margin-right: 15px !important;\n"]);return xn=function(){return e},e}function An(){var e=Object(i.a)(["\n  margin-top: 100px;\n  width: calc(100% - 350px);\n"]);return An=function(){return e},e}function Cn(){var e=Object(i.a)(["\n  color: #999;\n  width: 100%;\n  text-align: center;\n  \n  .ui.label {\n    color: #444;\n    background-color: #f3f3f3;\n  }\n"]);return Cn=function(){return e},e}var Rn=s.a.div(Cn()),Ln=Object(s.a)(mn.a)(An()),In=Object(s.a)(C.a)(xn()),Dn=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).loadInitialSettingsUrl=function(){var e=Object(be.a)(he.a.mark((function e(t){var n,r,o,c,l,i,s,u,m,p,d,g;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.props,r=n.globalState,o=n.updateInitialSettingsUrl,c=n.setInitialSettingsUrlHasBeenApplied,l=n.resetGlobalState,t){e.next=6;break}return l(Object(D.a)({},_n,{},{user:r.user})),o(""),c(),e.abrupt("return");case 6:if(-1!==t.search(":")&&-1!==t.search("/")){e.next=8;break}throw new Error('Invalid url: "'.concat(t,'"'));case 8:return i=-1!==t.search(".yaml")||-1!==t.search(".yml"),s=-1!==t.search(".json"),u=!i&&!s,e.next=13,fetch(t);case 13:if((m=e.sent).ok){e.next=16;break}throw new Error("Couldn't load URL. Error: ".concat(m.statusText.toLowerCase()," (").concat(m.status,")"));case 16:return e.next=18,m.text();case 18:if(p=e.sent,(d=null)||!i&&!u){e.next=30;break}e.prev=21,d=fn.a.safeLoad(p),e.next=30;break;case 25:if(e.prev=25,e.t0=e.catch(21),!i){e.next=30;break}return console.error("Unable to parse YAML file: ".concat(t,". ").concat(e.t0)),e.abrupt("return");case 30:if(d||!s&&!u){e.next=40;break}e.prev=31,d=JSON.parse(p),e.next=40;break;case 35:if(e.prev=35,e.t1=e.catch(31),!s){e.next=40;break}return console.error("Unable to parse JSON file: ".concat(t,". ").concat(e.t1)),e.abrupt("return");case 40:if(d){e.next=43;break}return console.error("Unable to parse JSON or YAML from: ".concat(t)),e.abrupt("return");case 43:(g=Object.keys(r).reduce((function(e,t){return t in d?Object(D.a)({},e,Object(L.a)({},t,d[t])):e}),{})).initialSettings=JSON.parse(JSON.stringify(g)),l(Object(D.a)({},r,{},g)),o(t),c();case 48:case"end":return e.stop()}}),e,null,[[21,25],[31,35]])})));return function(t){return e.apply(this,arguments)}}(),a.applyInitialSettingsUrl=function(){var e=Object(be.a)(he.a.mark((function e(t){return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({requestStatus:bn.IN_PROGRESS}),t.startsWith("https://github.com/")&&(t=t.replace("https://github.com","https://raw.githubusercontent.com").replace("blob/","")),e.prev=2,e.next=5,a.loadInitialSettingsUrl(t);case 5:a.setState({requestStatus:bn.SUCCEEDED,successMessage:t?"Successfully loaded URL and applied settings":"Reset all settings to defaults"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),a.setState({requestStatus:bn.ERROR,errorMessage:e.t0.toString()});case 11:return e.next=13,dn()(1e4);case 13:a.state.requestStatus!==bn.IN_PROGRESS&&a.setState({requestStatus:bn.NONE,errorMessage:""});case 14:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),a.exportCurrentSettings=function(){var e=["initialSettings","initialSettingsUrlHasBeenApplied","user","modals"],t=Object.keys(a.props.globalState).reduce((function(t,n){return e.includes(n)||(t[n]=a.props.globalState[n]),t}),{});return encodeURIComponent(JSON.stringify(t,null,5))},a.textInputValue=e.initialSettingsUrl||"",a.state={requestStatus:bn.NONE,successMessage:"",errorMessage:""},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(be.a)(he.a.mark((function e(){var t,n,a;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.initialSettingsUrl,a=t.initialSettingsUrlHasBeenApplied,!n||a){e.next=5;break}return console.log("Loading settings from url",n),e.next=5,this.applyInitialSettingsUrl(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.initialSettingsUrl;return r.a.createElement(Rn,{align:"center"},r.a.createElement(Ln,{label:"Initial settings:",defaultValue:t,placeholder:"URL of .yaml or .json settings file (eg. http://.../settings.json), or blank to reset all settings to defaults.",onChange:function(t){e.textInputValue=t.target.value}}),r.a.createElement(In,{content:"Apply",onClick:function(){return e.applyInitialSettingsUrl(e.textInputValue)}}),r.a.createElement(bn,{status:this.state.requestStatus,errorMessage:this.state.errorMessage,successMessage:this.state.successMessage}),r.a.createElement(h.a,{content:"Export current settings to a .json file. If you upload this file to a public url (for example on github) and then paste the url here, these settings will be restored.",position:"right center",trigger:r.a.createElement("a",{download:"settings.json",href:"data:text/json;charset=utf-8,".concat(this.exportCurrentSettings())},r.a.createElement(C.a,{icon:"download"}))}))}}]),n}(r.a.PureComponent),Un=Object(l.b)((function(e){return{globalState:e,initialSettingsUrl:De(e),initialSettingsUrlHasBeenApplied:Ue(e)}}),(function(e){return{updateInitialSettingsUrl:function(t){e({type:"UPDATE_INITIAL_SETTINGS_URL",newValue:t})},setInitialSettingsUrlHasBeenApplied:function(){e({type:"UPDATE_INITIAL_SETTINGS_URL_HAS_BEEN_APPLIED",newValue:!0})},resetGlobalState:function(t){e({type:"RESET_GLOBAL_STATE",newState:t})}}}))(Dn);function Bn(){var e=Object(i.a)(["\n  min-width: calc(99% - ","px) !important;\n"]);return Bn=function(){return e},e}function Mn(){var e=Object(i.a)(["\n  min-width: ","px !important;\n"]);return Mn=function(){return e},e}function Gn(){var e=Object(i.a)(["\n  padding: 10px 20px;\n"]);return Gn=function(){return e},e}var Pn=s.a.div(Gn()),Vn=Object(s.a)(u.a.Column)(Mn(),210),Hn=Object(s.a)(u.a.Column)(Bn(),425),qn=function(){return r.a.createElement(Pn,null,r.a.createElement(u.a,null,r.a.createElement(u.a.Row,null,r.a.createElement(Vn,null,r.a.createElement(mt,null)),r.a.createElement(Hn,null,r.a.createElement(nn,null),r.a.createElement(un,null),r.a.createElement(Un,null)),r.a.createElement(Vn,null,r.a.createElement(zt,null)))))},zn=n(76),Jn=n(305),Wn=Object(zn.c)(Object.assign({genome:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},locus:U("UPDATE_LOCUS",""),rightSideBarLocusList:M("RIGHT_SIDE_BAR_LOCUS_LIST"),leftSideBarLocusList:M("LEFT_SIDE_BAR_LOCUS_LIST"),dataTypesToShow:M("DATA_TYPES_TO_SHOW"),rowsInCategories:function(e,t){return t&&t.categoryName&&t.rows?e.map((function(e){if(e.categoryName!==t.categoryName)return e;var n;switch(t.type){case"SET_ROWS":n=Object(f.a)(t.rows);break;case"ADD_ROWS":var a=e.rows.map((function(e){return e.name}));n=[].concat(Object(f.a)(e.rows),Object(f.a)(t.rows.filter((function(e){return!a.includes(e.name)}))));break;default:n=e.rows}return Object(D.a)({},e,{rows:n})})):e||[]},selectedRowNamesByCategoryName:function(e,t){if(!t||!t.categoryName||!Array.isArray(t.selectedRowNames))return e||{};var n=e[t.categoryName]||[];switch(t.type){case"SET_SELECTED_ROW_NAMES":case"ADD_SELECTED_ROW_NAMES":case"REMOVE_SELECTED_ROW_NAMES":var a;if("SET_SELECTED_ROW_NAMES"===t.type)a=Array.from(new Set(t.selectedRowNames));else if("ADD_SELECTED_ROW_NAMES"===t.type)a=Array.from(new Set([].concat(Object(f.a)(n),Object(f.a)(t.selectedRowNames))));else{var r=t.selectedRowNames;a=n.filter((function(e){return!r.includes(e)}))}return Object(D.a)({},e,Object(L.a)({},t.categoryName,a));default:console.trace("Unknown action type: ".concat(t.type))}return e},selectedSamplesByCategoryNameAndRowName:function(e,t){if(!t||!t.categoryName||!t.selectedSamplesByRowName&&!t.sampleSettingsByRowName)return e||{};var n=e[t.categoryName]||{},a=n.selectedSamples||{},r=n.sampleSettings||{},o=a,c=r;switch(t.type){case"SET_SELECTED_SAMPLES":case"ADD_SELECTED_SAMPLES":case"REMOVE_SELECTED_SAMPLES":o="SET_SELECTED_SAMPLES"===t.type?Object(D.a)({},a,{},t.selectedSamplesByRowName):"ADD_SELECTED_SAMPLES"===t.type?Array.from(new Set([].concat(Object(f.a)(Object.keys(a)),Object(f.a)(Object.keys(t.selectedSamplesByRowName))))).reduce((function(e,n){return e[n]=Array.from(new Set([].concat(Object(f.a)(a[n]||[]),Object(f.a)(t.selectedSamplesByRowName[n]||[])))),e}),{}):Object.keys(a).reduce((function(e,n){var r=t.selectedSamplesByRowName[n]||[],o=(a[n]||[]).filter((function(e){return!r.includes(e)}));return o.length>0&&(e[n]=o),e}),{});break;case"UPDATE_SAMPLE_SETTINGS":c=Object(D.a)({},r),Object.keys(t.sampleSettingsByRowName).forEach((function(e){c[e]=t.sampleSettingsByRowName[e]}));break;default:return console.trace("Unknown action type: ".concat(t.type)),e}return Object(D.a)({},e,Object(L.a)({},t.categoryName,{selectedSamples:o,sampleSettings:c}))},sjOptions:B("UPDATE_SJ_OPTIONS"),vcfOptions:B("UPDATE_VCF_OPTIONS"),bamOptions:B("UPDATE_BAM_OPTIONS"),gcnvOptions:B("UPDATE_GCNV_OPTIONS"),user:B("UPDATE_USER"),initialSettings:U("UPDATE_INITIAL_SETTINGS",{}),initialSettingsUrl:U("UPDATE_INITIAL_SETTINGS_URL",""),initialSettingsUrlHasBeenApplied:U("UPDATE_INITIAL_SETTINGS_URL_HAS_BEEN_APPLIED",!1)},G)),Fn=function(e,t){if("RESET_GLOBAL_STATE"===t.type)return t.newState;var n=Wn(e,t);return kn(n),n},Kn=function(){var e=Nn();return console.log("Initializing store to:",e),Object(zn.e)(Fn,e,Object(zn.d)(Object(zn.a)(Jn.a)))};var Xn=function(){return r.a.createElement(l.a,{store:Kn()},r.a.createElement(qn,null))};c.a.render(r.a.createElement(Xn,null),document.getElementById("root"))}},[[318,1,2]]]);
//# sourceMappingURL=main.218e6cd9.chunk.js.map