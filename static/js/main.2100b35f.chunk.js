(this.webpackJsonprnaseq_viewer=this.webpackJsonprnaseq_viewer||[]).push([[0],{318:function(e,t,n){e.exports=n(576)},323:function(e,t,n){},576:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(56),l=n.n(o),c=(n(323),n(31)),i=n(12),s=n(13),u=n(597),m=n(11),p=n(14),d=n(23),g=n(24),f=n(25),b=n(594),h=n(577),E=n(77);function v(){var e=Object(i.a)(["\n  display: inline;\n  width: 50px;\n  margin-left: 5px;\n  padding-left: 5px;\n"]);return v=function(){return e},e}function y(){var e=Object(i.a)(["\n  margin-top: 5px !important;\n"]);return y=function(){return e},e}function S(){var e=Object(i.a)(["\n  opacity: 0.95;\n"]);return S=function(){return e},e}function w(){var e=Object(i.a)(["\n  padding-top: 3px;\n"]);return w=function(){return e},e}function O(){var e=Object(i.a)([" \n  display: inline-block;\n  margin: 12px 0px 0px 0px !important;\n"]);return O=function(){return e},e}var _=s.a.h3(O()),j=s.a.div(w()),T=Object(s.a)(b.a)(S()),N=Object(s.a)(E.a)(y()),k=s.a.input(v()),x=n(592),A=n(591),C=n(578),R=n(593),L=n(26),I=n(32),B=n(30),D=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case e:return void 0===r.newValue?(console.error("Invalid ".concat(e," action: action.newValue is undefined: "),r),a):(n&&console.log("singleValueReducer: applying action: ",r,"State changing from ",a," to ",r.newValue),r.newValue);default:return a}};return a},U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case e:if(void 0===r.updates)return console.error("Invalid ".concat(e," action: action.updates is undefined: "),r),a;var o=Object(B.a)({},a,{},r.updates);return n&&console.log("singleObjectReducer: applying action: ",r,"State changing from ",a," to ",o),o;default:return a}};return a},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case"SET_".concat(e):case"ADD_".concat(e):case"REMOVE_".concat(e):if(!Array.isArray(r.values))return console.error("Invalid ".concat(r.type," action: action.values is undefined or not an array: "),r),a;var o;if(r.type==="SET_".concat(e))o=Object(f.a)(r.values);else if(r.type==="ADD_".concat(e))o=[].concat(Object(f.a)(a),Object(f.a)(r.values));else{var l=r.values;o=a.filter((function(e){return!l.includes(e)}))}return n&&console.log("createArrayReducer: applying action: ",r,"State changing from ",a," to ",o),o;default:return a}};return a},G={modals:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,o=arguments.length>1?arguments[1]:void 0;if(!o)return r;switch(o.type){case e:if(void 0===o.updatesById)return console.error("Invalid ".concat(e," action. action.updatesById is undefined: "),o),r;var l=o.updatesById;if(t){if(!(t in l))return r;l=l[t]}var c=Object(B.a)({},r);return Object.entries(l).forEach((function(e){var t=Object(I.a)(e,2),n=t[0],a=t[1];null==a?delete c[n]:c[n]?c[n]=Object(B.a)({},c[n],{},a):c[n]=Object(B.a)({},a)})),a&&console.log("objectsByIdReducer: applying action: ",o,"State changing from: ",r," to ",c),c;default:return r}};return r}("UPDATE_MODAL_STATE")},P=function(e,t){return e.modals[t]&&e.modals[t].open};function V(){var e=Object(i.a)(["\n  margin-left: 10px !important;\n  width: 100px;\n"]);return V=function(){return e},e}function H(){var e=Object(i.a)(["\n  float: right;\n  padding: 0px 20px 20px 20px;\n"]);return H=function(){return e},e}function q(){var e=Object(i.a)(["\n  &.ui.button.basic {\n    white-space: nowrap;\n    border: none;\n    padding: ",";\n    color: "," !important;\n    text-decoration: none;\n    font-weight: ",';\n    box-shadow: none !important;\n    user-select: auto;\n    \n    &:hover, &:focus, &:active {\n      color: #1e70bf !important;\n      background: transparent !important;\n    }\n    \n    &[class*="right labeled"].icon {\n      padding-left: 0 !important;\n      padding-right: 2.1em !important;\n      \n      > .icon {\n        background-color: initial;\n      }\n    }\n  }\n']);return q=function(){return e},e}var z=Object(s.a)(C.a).attrs({basic:!0})(q(),(function(e){return e.padding||0}),(function(e){return e.color||"#4183C4"}),(function(e){return e.fontWeight||"inherit"})),J=s.a.div(H()),W=Object(s.a)(C.a)(V()),F=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleClose=function(){var t=!0;e.props.handleClose&&(t=e.props.handleClose()),t&&e.props.close()},e.handleSave=function(){var t=!0;e.props.handleSave&&(t=e.props.handleSave()),t&&e.props.close()},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.trigger?r.a.cloneElement(this.props.trigger,{onClick:this.props.open}):null;return r.a.createElement(R.a,{open:this.props.isOpen,trigger:e,onClose:this.handleClose,size:this.props.size},r.a.createElement(R.a.Header,null,this.props.title,r.a.createElement(z,{floated:"right",onClick:this.handleClose,icon:r.a.createElement(E.a,{name:"remove",color:"grey"})})),r.a.createElement(R.a.Content,null,this.props.children),r.a.createElement(J,null,r.a.createElement(W,{tabIndex:0,onClick:this.handleClose,type:"button"},"Cancel"),r.a.createElement(W,{tabIndex:0,onClick:this.handleSave,type:"submit",color:"blue"},this.props.handleSave?"Save":"Ok")))}}]),n}(r.a.PureComponent);F.defaultProps={size:"small"};var K=Object(c.b)((function(e,t){return{isOpen:P(e,t.modalName)}}),(function(e,t){return{open:function(n){var a;n.preventDefault(),e((a=t.modalName,function(e){return e({type:"UPDATE_MODAL_STATE",updatesById:Object(L.a)({},a,{open:!0})})}))},close:function(){var n,a;e((n=t.modalName,a=!0,function(e,t){t().modals[n].confirmOnClose&&!a?e({type:"UPDATE_MODAL_STATE",updatesById:Object(L.a)({},n,{confirming:!0})}):e({type:"UPDATE_MODAL_STATE",updatesById:Object(L.a)({},n,{open:!1,confirming:!1,confirmOnClose:null})})}))}}}))(F);function X(){var e=Object(i.a)(["\n  cursor: pointer;\n"]);return X=function(){return e},e}var Y=s.a.a(X()),Q=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).render=function(){var e=a.props,t=e.locusList,n=e.name,o=e.setLocusList,l="Locus List - ".concat(n);return r.a.createElement(K,{title:l,size:"large",modalName:l,trigger:r.a.createElement(Y,null,(t||[]).length>0?r.a.createElement("div",null,r.a.createElement("br",null),"Edit Locus List"):r.a.createElement("div",null,"Add Locus List To Side Bar")),handleSave:function(){var e=a.textAreaValue.split(/[,\s]+/).filter(Boolean);return o(e),!0}},r.a.createElement(x.a,null,r.a.createElement(x.a.Field,{control:A.a,style:{minHeight:"300px"},defaultValue:a.textAreaValue,onKeyUp:function(e){a.textAreaValue=e.target.value},placeholder:"Enter genomic positions, intervals, and/or gene names separated by commas, spaces, or new lines.  These can be in any format recognized by the IGV search bar.  For example: DMD, ENST00000589830, chr1:55516888, 2:152341851-152591002"})),r.a.createElement("br",null),r.a.createElement("b",null,r.a.createElement("i",null,"NOTE:"))," This locus list will be saved across page refreshes in this browser, \xa0 but will not be recorded in the page url like other settings.\xa0 Sharing or bookmarking this page won't include the contents of this list.")};var o=a.props.locusList;return a.textAreaValue=(o||[]).join("\n"),a}return n}(r.a.PureComponent),$=function(e){var t=e.name,n=e.locusList,a=e.setLocus,o=e.setLocusList;return r.a.createElement("div",null,n.map((function(e,t){return r.a.createElement("div",{key:e},t+1,". \xa0 ",r.a.createElement(Y,{onClick:function(){a(e)}},e))})),r.a.createElement(Q,{name:t,locusList:n,setLocusList:o}))},Z=n(589),ee=n(595),te=n(113),ne=n.n(te),ae={".bigWig":"coverage",".junctions.bed":"spliceJunctions",".spliceJunctions.bed":"spliceJunctions",".junctions.bed.gz":"spliceJunctions",".spliceJunctions.bed.gz":"spliceJunctions",".bam":"bam",".cram":"bam",".vcf":"vcf",".vcf.gz":"vcf",".wig":"wig",".bedGraph":"wig"},re=["GT/AG","CT/AC","GC/AG","CT/GC","AT/AC","GT/AT","non-canonical"],oe=n(93),le=n(2),ce=n.n(le),ie=n(6),se=function(){var e=Object(ie.a)(ce.a.mark((function e(){var t;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance();case 2:if((t=e.sent).isSignedIn.get()){e.next=6;break}return e.next=6,t.signIn();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ue=function(){var e=Object(ie.a)(ce.a.mark((function e(){var t,n;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance();case 2:return t=e.sent,n=t.currentUser.get().getBasicProfile(),e.abrupt("return",n.getEmail());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(ie.a)(ce.a.mark((function e(){var t,n;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance();case 2:return t=e.sent,n=t.currentUser.get(),t.isSignedIn.get()||n.reloadAuthResponse(),e.abrupt("return",n.getAuthResponse().access_token);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(e){return e.locus},de=function(e){return e.rightSideBarLocusList},ge=function(e){return e.leftSideBarLocusList},fe=function(e){return e.genome},be=function(e){return e.dataTypesToShow},he=function(e){return e.rowsInCategories},Ee=function(e){return e.selectedRowNamesByCategoryName},ve=function(e){return e.selectedSamplesByCategoryNameAndRowName},ye=function(e){return e.sjOptions},Se=function(e){return e.vcfOptions},we=function(e){return e.bamOptions},Oe=function(e){return e.gcnvOptions},_e=function(e){return e.user},je=function(e){return e.initialSettings},Te=function(e){return e.initialSettingsUrl},Ne=function(e){return e.initialSettingsUrlHasBeenApplied},ke=Object(oe.a)(he,(function(e){return Object(f.a)(e.reduce((function(e,t){return t.rows.forEach((function(t){t.data&&t.data.forEach((function(t){t.type&&e.add(t.type)}))})),e}),new Set))})),xe=Object(oe.a)(ke,be,(function(e,t){return e.length<2?e:e.filter((function(e){return t.includes(e)}))})),Ae=Object(oe.a)(he,(function(e){return e.reduce((function(e,t){return Object(B.a)({},e,Object(L.a)({},t.categoryName,t.rows))}),{})})),Ce=Object(oe.a)(Ee,Ae,(function(e,t){return Object.entries(e).reduce((function(e,n){var a=Object(I.a)(n,2),r=a[0],o=a[1];return t[r]?Object(B.a)({},e,Object(L.a)({},r,t[r].filter((function(e){return o.includes(e.name)})))):e}),{})})),Re=Object(oe.a)(Ce,ve,be,ye,Se,we,Oe,(function(e,t,n,a,r,o,l){var c=[];return Object.entries(e).forEach((function(e){var i=Object(I.a)(e,2),s=i[0];return i[1].forEach((function(e,i){var u,m;(e.data||[]).forEach((function(p,d){"gcnv_bed"===p.type?(console.log("Adding ".concat(p.url," track #"),100*i+d),c.push({type:"gcnv",format:"gcnv",name:"".concat(e.name," ").concat(p.label||""),url:p.url,indexURL:"".concat(p.url,".tbi"),height:l.trackHeight,min:l.trackMin,max:l.trackMax,autoscale:l.autoscale,highlightSamples:(((t[s]||{}).selectedSamples||{})[e.name]||[]).reduce((function(n,a){return n[a]=((((t[s]||{}).sampleSettings||{})[e.name]||{})[a]||{}).color||"blue",n}),{}),onlyHandleClicksForHighlightedSamples:l.onlyHandleClicksForHighlightedSamples,oauthToken:me,order:100*i+d,rowName:e.name,categoryName:s})):("junctions"===p.type||p.url.includes("junctions.bed"))&&n.includes("junctions")?u={type:"spliceJunctions",format:"bed",url:p.url,indexURL:"".concat(p.url,".tbi"),oauthToken:me,order:10*i,name:e.name,height:a.trackHeight,minUniquelyMappedReads:a.minUniquelyMappedReads,minTotalReads:a.minTotalReads,maxFractionMultiMappedReads:a.maxFractionMultiMappedReads,minSplicedAlignmentOverhang:a.minSplicedAlignmentOverhang,thicknessBasedOn:a.thicknessBasedOn,bounceHeightBasedOn:a.bounceHeightBasedOn,colorBy:a.colorBy,colorByNumReadsThreshold:void 0!==a.colorByNumReadsThreshold?a.colorByNumReadsThreshold:5,hideStrand:a.showOnlyPlusStrand?"-":a.showOnlyMinusStrand?"+":void 0,labelUniqueReadCount:a.labelUniqueReadCount,labelMultiMappedReadCount:a.labelMultiMappedReadCount,labelTotalReadCount:a.labelTotalReadCount,labelMotif:a.labelMotif,labelAnnotatedJunction:a.labelAnnotatedJunction&&a.labelAnnotatedJunctionValue,hideAnnotatedJunctions:a.hideAnnotated,hideUnannotatedJunctions:a.hideUnannotated,hideMotifs:re.filter((function(e){return a["hideMotif".concat(e)]})),rowName:e.name,categoryName:s}:("coverage"===p.type||p.url.includes(".bigWig"))&&n.includes("coverage")?(m={type:"wig",format:"bigwig",url:p.url,oauthToken:me,name:e.name,height:a.trackHeight,order:10*i+d,rowName:e.name,categoryName:s},p.url.includes("spliceai")&&(m.color=function(e){return e<.5?"rgb(180,180,180)":e<.8?"rgb(180,180,0)":"rgb(200,0,0)"})):("vcf"===p.type||p.url.includes(".vcf"))&&n.includes("vcf")?(console.log("Adding ".concat(p.url," track #"),100*i+d),c.push({type:"variant",format:"vcf",url:p.url,indexURL:"".concat(p.url,".tbi"),indexed:!0,name:"".concat(e.name," ").concat(p.label||p.type),displayMode:r.displayMode,oauthToken:me,order:100*i+d,rowName:e.name,categoryName:s})):("alignment"===p.type||p.url.includes(".bam")||p.url.includes(".cram"))&&n.includes("alignment")&&(console.log("Adding ".concat(p.url," track #"),100*i+d),c.push({type:"alignment",url:p.url,indexed:!0,name:"".concat(e.name," ").concat(p.label||""),height:o.trackHeight,colorBy:o.colorBy,viewAsPairs:o.viewAsPairs,showSoftClips:o.showSoftClips,oauthToken:me,order:100*i+d,rowName:e.name,categoryName:s}))})),m&&u?(console.log("Adding ".concat(u.url," & ").concat(m.url," track")),c.push({type:"merged",name:u.name,height:a.trackHeight,tracks:[m,u],order:10*i+2,rowName:e.name,categoryName:s})):u?(console.log("Adding ".concat(u.url," track")),c.push(u)):m&&(console.log("Adding ".concat(m.url," track")),c.push(m))}))})),c}));function Le(){var e=Object(i.a)(["\n"]);return Le=function(){return e},e}function Ie(){var e=Object(i.a)(["\n  label {\n    margin: 10px 0px 10px 20px;\n    padding-left: 1.4em !important;\n  }\n"]);return Ie=function(){return e},e}function Be(){var e=Object(i.a)(["\n  font-family: monospace;\n  background-color: #F7F7F7;\n"]);return Be=function(){return e},e}function De(){var e=Object(i.a)(["\n  font-family: monospace;\n  margin: 20px 30px;\n  padding: 10px;\n  background-color: #F7F7F7;\n  white-space: nowrap;\n"]);return De=function(){return e},e}function Ue(){var e=Object(i.a)(["\n  cursor: pointer;\n  padding: 10px 10px 10px 0px;\n  display: inline-block;\n"]);return Ue=function(){return e},e}var Me=s.a.a(Ue()),Ge=s.a.div(De()),Pe=s.a.span(Be()),Ve=Object(s.a)(Z.a)(Ie()),He=Object(s.a)(b.a).attrs({position:"bottom center"})(Le()),qe=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).getInitialState=function(){var e=a.props.rows,t=e&&e.length>0?"yaml":"basic";return{format:t,textAreaValue:a.convertRowsToTextAreaValue(e||[],t),warningMessage:null,errorMessage:null}},a.parseTextAreaValueToRows=function(e,t){if(!e.trim())return{rows:[],errorMessage:null};var n=[],a=null,r=[];if("basic"===t){var o=e.split(/[,\s]+/).filter(Boolean).reduce((function(e,t){var n=t.split("/"),a=n[n.length-1],o=Object.keys(ae).filter((function(e){return a.endsWith(e)}));if(0===o.length)r.push(t);else{var l=o[0],c=a.replace(l,"");e[c]||(e[c]={}),e[c].name=c,e[c][ae[l]]=t}return e}),{});n=Object.values(o)}else if("yaml"===t||"json"===t)try{n=ne.a.safeLoad(e)}catch(l){a="Unable to parse YAML: ".concat(l)}else if("json"===t)try{n=JSON.parse(e)}catch(l){a="Unable to parse JSON: ".concat(l)}return r.length>0&&(a="These paths have unexpected file suffixes: ".concat(r.join(", "))),{samples:n,errorMessage:a}},a.convertRowsToTextAreaValue=function(e,t){return e&&0!==e.length?("basic"===t?n=e.map((function(e){return Object.keys(e).filter((function(e){return"name"!==e&&"description"!==e})).map((function(t){return e[t]}))})).flat().join("\n"):"yaml"===t?n=ne.a.safeDump(e,{flowLevel:2}):"json"===t&&(n=JSON.stringify(e,null,2)),n):"";var n},a.formatRadioButtonChangeHandler=function(e,t){var n=a.state,r=n.textAreaValue,o=n.format,l=a.parseTextAreaValueToRows(r,o),c=l.rows,i=l.errorMessage;return i?(e.preventDefault(),a.setState({errorMessage:i}),!1):(a.setState({errorMessage:""}),t.checked&&a.setState({format:t.label,textAreaValue:a.convertRowsToTextAreaValue(c,t.label)}),!0)},a.getInitialRowsInCategory=function(){var e=a.props,t=e.categoryName,n=e.showResetButton,r=e.initialRowsInCategories;if(n&&r){var o=r.filter((function(e){return e.categoryName===t}));if(o.length>0)return o[0].rows}return[]},a.resetButtonClickHandler=function(){var e=a.state.format,t=a.getInitialRowsInCategory(),n=a.convertRowsToTextAreaValue(t,e);a.setState({textAreaValue:n})},a.handleModalSave=function(){var e=a.props.setRows,t=a.state,n=t.textAreaValue,r=t.format,o=a.parseTextAreaValueToRows(n,r),l=o.rows,c=o.errorMessage;return c?(a.setState({errorMessage:c}),!1):(e(l),!0)},a.handleModalClose=function(){return a.setState(a.getInitialState()),!0},a.render=function(){var e,t=a.props,n=t.rows,o=t.title,l=t.showResetButton,c=t.trigger,i=a.state,s=i.format,u=i.textAreaValue,m=i.warningMessage,p=i.errorMessage,d="".concat(o," Rows");l&&(e=a.getInitialRowsInCategory());var g=n.some((function(e){return e.description||Object.keys(e).filter((function(e){return"name"!==e&&"description"!==e})).length>1}));return r.a.createElement(K,{title:d,size:"large",modalName:d,trigger:c,handleSave:a.handleModalSave,handleClose:a.handleModalClose},r.a.createElement("div",null,"Enter google bucket path(s) for ",r.a.createElement("i",null,".bigWig"),", ",r.a.createElement("i",null,".junctions.bed.gz"),", ",r.a.createElement("i",null,".bam/.cram"),", or ",r.a.createElement("i",null,".vcf.gz")," files:",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("b",null,"Format:"),r.a.createElement(Ve,{name:"format",label:"basic",disabled:g,checked:"basic"===s,onChange:a.formatRadioButtonChangeHandler}),r.a.createElement(He,{trigger:r.a.createElement(E.a,{style:{marginLeft:"8px"},name:"question circle outline"}),content:r.a.createElement("div",null,g&&r.a.createElement("div",null,r.a.createElement("b",null,"[Disabled]")," because some rows have multiple data files and/or a description.",r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("b",null,"Basic format"),":",r.a.createElement("br",null),r.a.createElement("br",null),"Enter a list of paths separated by commas, spaces or new lines. ",r.a.createElement("br",null),r.a.createElement("br",null),"Example:",r.a.createElement("br",null),r.a.createElement(Ge,null,"gs://your-bucket/dir/sample-name1.bigWig ",r.a.createElement("br",null),"gs://your-bucket/dir/sample2.bigWig ",r.a.createElement("br",null),"gs://your-bucket/dir/sample-name1.junctions.bed.gz ",r.a.createElement("br",null),"gs://your-bucket/dir/sample-name1.bam ",r.a.createElement("br",null),"gs://your-bucket/dir/sample2.junctions.bed.gz ",r.a.createElement("br",null)),"Paths that have the same prefix (like ",r.a.createElement(Pe,null,"gs://your-bucket/dir/sample-name1")," in the example) will be interpreted as different data types from the same sample.",r.a.createElement("br",null),r.a.createElement("br",null),"The order of paths doesn't matter.")}),r.a.createElement(Ve,{name:"format",label:"yaml",checked:"yaml"===s,onChange:a.formatRadioButtonChangeHandler}),r.a.createElement(He,{trigger:r.a.createElement(E.a,{style:{marginLeft:"8px"},name:"question circle outline"}),content:r.a.createElement("div",null,r.a.createElement("b",null,"YAML format"),":",r.a.createElement("br",null),r.a.createElement("br",null),"Provides per-sample file paths just like the Basic format, but allows additional meta-data to be specified - such as sample descriptions - as well as more flexibility in file names.",r.a.createElement("br",null),r.a.createElement(Ge,null,"- name: sample1 ",r.a.createElement("br",null),"\xa0 description: description of sample1 ",r.a.createElement("br",null),"\xa0 coverage: gs://your-bucket/dir/sample-name1.bigWig ",r.a.createElement("br",null),"\xa0 junctions: gs://your-bucket/dir2/sample-name1.junctions.bed.gz ",r.a.createElement("br",null),"\xa0 bam: gs://your-bucket/dir3/sample-name1.bam ",r.a.createElement("br",null),"\xa0 vcf: gs://your-bucket/dir3/sample-name1-wgs-variants.vcf.gz ",r.a.createElement("br",null),"- name: sample2 ",r.a.createElement("br",null),"\xa0 coverage: gs://your-bucket/dir/sample2.bigWig ",r.a.createElement("br",null),"\xa0 junctions: gs://your-bucket/dir2/sample2.junctions.bed.gz ",r.a.createElement("br",null)))}),r.a.createElement(Ve,{name:"format",label:"json",checked:"json"===s,onChange:a.formatRadioButtonChangeHandler}),r.a.createElement(He,{trigger:r.a.createElement(E.a,{style:{marginLeft:"8px"},name:"question circle outline"}),content:r.a.createElement("div",null,r.a.createElement("b",null,"JSON format"),":",r.a.createElement("br",null),r.a.createElement("br",null),"Identical to YAML, but represented in the JSON format.",r.a.createElement("br",null),r.a.createElement(Ge,null,"[{",r.a.createElement("br",null),' "name": "sample1",',r.a.createElement("br",null),' "coverage": "gs://your-bucket/dir/sample-name1.bigWig", ',r.a.createElement("br",null),' "junctions": "gs://your-bucket/dir2/sample-name1.junctions.bed.gz", ',r.a.createElement("br",null),' "bam": "gs://your-bucket/dir3/sample-name1.bam", ',r.a.createElement("br",null),' "vcf": "gs://your-bucket/dir3/sample-name1-wgs-variants.vcf.gz" ',r.a.createElement("br",null),"}, {",r.a.createElement("br",null),' "name": "sample2", ',r.a.createElement("br",null),' "coverage": "gs://your-bucket/dir/sample2.bigWig", ',r.a.createElement("br",null),' "junctions": "gs://your-bucket/dir2/sample2.junctions.bed.gz" ',r.a.createElement("br",null),"}]",r.a.createElement("br",null)))}),l&&r.a.createElement(Me,{style:{float:"right"},onClick:a.resetButtonClickHandler},"Reset ",e&&e.length>0?"To ".concat(e.length," Original Samples"):null))),r.a.createElement(x.a,null,r.a.createElement(A.a,{style:{minHeight:"300px"},value:u,onChange:function(e){a.setState({textAreaValue:e.target.value})},placeholder:"Enter file path(s)"})),r.a.createElement("br",null),r.a.createElement("b",null,r.a.createElement("i",null,"NOTE:"))," These paths will be saved across page refreshes in this browser, but will not be recorded in the page url like other settings. Sharing or bookmarking this page won't include these paths.",m&&r.a.createElement(ee.a,{color:"yellow"},m),p&&r.a.createElement(ee.a,{color:"red"},p))},a.state=a.getInitialState(),a}return n}(r.a.PureComponent),ze=Object(c.b)((function(e){return{initialRowsInCategories:je(e).rowsInCategories}}),(function(e){return{updateRows:function(t,n,a){e({type:"".concat(t,"_ROWS"),categoryName:n,rows:a})}}}))((function(e){var t=e.category,n=e.initialRowsInCategories,a=e.updateRows;return r.a.createElement("div",null,r.a.createElement(qe,{key:"".concat(JSON.stringify(t.rows),"_add"),title:"Add ".concat(t.categoryName),categoryName:t.categoryName,rows:[],setRows:function(e){return a("ADD",t.categoryName,e)},initialRowsInCategories:n,trigger:r.a.createElement(Me,null,"Add ",0===t.rows.length?t.categoryName:null," Rows")}),t.rows.length>0&&r.a.createElement(qe,{key:"".concat(JSON.stringify(t.rows),"_edit"),title:"Edit ".concat(t.categoryName),categoryName:t.categoryName,rows:t.rows,setRows:function(e){return a("SET",t.categoryName,e)},initialRowsInCategories:n,trigger:r.a.createElement(Me,null,"Edit Rows"),showResetButton:!0}))})),Je=n(59),We=n.n(Je),Fe=n(596);function Ke(){var e=Object(i.a)(["\n  margin-top: 15px; \n  .prompt {\n    border-radius: 2px !important;\n    width: 155px;\n  }\n  \n  input {\n      max-width: none !important;\n      padding: 5px !important;\n  }\n  .results {\n      min-width: max-content;\n  }\n"]);return Ke=function(){return e},e}var Xe=Object(s.a)(Fe.a)(Ke()),Ye={isLoading:!1,results:[],value:""},Qe=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this)).handleResultSelect=function(t,n){var a=n.result;e.setState({value:""}),console.log(t,a);var r=a.id.split("!!"),o=r[0],l=r[1],c=r[2],i=r[3];i?("ADD"===o&&e.props.updateSelectedRowNames(o,l,[c]),e.props.updateSelectedSamples(o,l,Object(L.a)({},c,[i]))):e.props.updateSelectedRowNames(o,l,[c])},e.handleSearchChange=function(t,n){var a=n.value;e.setState({isLoading:!0,value:a});var r=function(t,n){return function(t){return e.props.selectedRowNamesByCategoryName[t]||[]}(t).includes(n)},o=function(t){return(e.props.selectedSamplesByCategoryNameAndRowName[t]||{}).selectedSamples||{}},l=function(e,t){return o(e)[t]||[]},c=function(e,t,n){return l(e,t).includes(n)};setTimeout((function(){if(e.state.value.length<1)return e.setState(Ye);var t=new RegExp(We.a.escapeRegExp(e.state.value),"i"),n={},a=0;t.test("Hide")&&Object.keys(e.props.selectedRowNamesByCategoryName).forEach((function(t){a>=10||e.props.selectedRowNamesByCategoryName[t].forEach((function(e){if(!(a>=10)){n[t]=n[t]||[];var r={action:"REMOVE",categoryName:t,rowName:e};We.a.some(n[t],r)||n[t].push(r),a+=1}}))})),(t.test("Hide")||t.test("Hide sample"))&&Object.keys(e.props.selectedSamplesByCategoryNameAndRowName).forEach((function(e){a>=10||Object.keys(o(e)).forEach((function(t){a>=10||!r(e,t)||l(e,t).forEach((function(r){if(!(a>=10)){n[e]=n[e]||[];var o={action:"REMOVE",categoryName:e,rowName:t,sample:r};We.a.some(n[e],o)||n[e].push(o),a+=1}}))}))})),e.props.rowsInCategories.forEach((function(e){a>=10||e.rows.forEach((function(o){if(!(a>=10)){if(t.test(o.name)){n[e.categoryName]=n[e.categoryName]||[];var l={action:r(e.categoryName,o.name)?"REMOVE":"ADD",categoryName:e.categoryName,rowName:o.name};We.a.some(n[e.categoryName],l)||n[e.categoryName].push(l),a+=1}if(o.data){var i=o.data.filter((function(e){return e.samples&&e.samples.length>0}));i.length>1&&console.warn("Found row with multiple data items each of which has a samples array. This may behave unexpectedly if there are duplicate samples"),i.forEach((function(l){(l.samples||[]).forEach((function(l){if(!(a>=10)&&t.test(l)){n[e.categoryName]=n[e.categoryName]||[];var i={action:r(e.categoryName,o.name)&&c(e.categoryName,o.name,l)?"REMOVE":"ADD",categoryName:e.categoryName,rowName:o.name,sample:l};We.a.some(n[e.categoryName],i)||n[e.categoryName].push(i),a+=1}}))}))}}}))}));var i=e.props.rowsInCategories.length>1,s=i?{}:[];return Object.keys(n).forEach((function(e){i&&(s[e]={name:e,results:[]});var t=i?s[e].results:s;n[e].forEach((function(n){if(n.sample){var a="ADD"===n.action?"Show sample":"Hide sample";t.push({id:"".concat(n.action,"!!").concat(e,"!!").concat(n.rowName,"!!").concat(n.sample),title:"".concat(a," ").concat(n.rowName," > ").concat(n.sample)})}else{var r="ADD"===n.action?"Show":"Hide";t.push({id:"".concat(n.action,"!!").concat(e,"!!").concat(n.rowName),title:"".concat(r," ").concat(n.rowName)})}}))})),e.setState({isLoading:!1,results:s})}),300)},e.render=function(){var t=e.state,n=t.isLoading,a=t.value,o=t.results;return r.a.createElement(Xe,{category:e.props.rowsInCategories.length>1,loading:n,onResultSelect:e.handleResultSelect,onSearchChange:e.handleSearchChange,placeholder:"Select data",results:o,value:a})},e.state=Ye,e}return n}(r.a.Component),$e=Object(c.b)((function(e){return{rowsInCategories:he(e),selectedRowNamesByCategoryName:Ee(e),selectedSamplesByCategoryNameAndRowName:ve(e)}}),(function(e){return{updateSelectedRowNames:function(t,n,a){e({type:"".concat(t,"_SELECTED_ROW_NAMES"),categoryName:n,selectedRowNames:a})},updateSelectedSamples:function(t,n,a){e({type:"".concat(t,"_SELECTED_SAMPLES"),categoryName:n,selectedSamplesByRowName:a})}}}))(Qe);function Ze(){var e=Object(i.a)(["\n  white-space: nowrap;\n"]);return Ze=function(){return e},e}function et(){var e=Object(i.a)(["\n  padding-left: 5px;\n  white-space: nowrap;\n"]);return et=function(){return e},e}function tt(){var e=Object(i.a)(["\n  cursor: pointer;\n  padding: 10px 10px 10px 0px;\n  display: inline-block;\n"]);return tt=function(){return e},e}function nt(){var e=Object(i.a)(["\n  color: ",";\n  border: 3px solid ",";\n  display: inline-block;\n  width: 6px;\n  border-radius: 1px;\n  height: 10px;\n  cursor: pointer;\n"]);return nt=function(){return e},e}function at(){var e=Object(i.a)(["\n  display: inline-block;\n  margin: 0px 0px 0px 15px;\n  color: #999;\n  white-space: nowrap;\n"]);return at=function(){return e},e}var rt=s.a.div(at()),ot=s.a.div.attrs({name:"stop"})(nt(),(function(e){return e.color}),(function(e){return e.color})),lt={junctions:"#B0B0EC",coverage:"#B5D29A",alignment:"#5DB6E9",vcf:"#E6A01B",default:"#000000"},ct=s.a.a(tt()),it=s.a.span(et()),st=s.a.div(Ze()),ut=function(e){var t=e.row;return r.a.createElement(b.a,{content:r.a.createElement("table",null,r.a.createElement("tbody",null,(t.data||[]).map((function(e){return r.a.createElement("tr",{key:"".concat(e.url," ").concat(e.type)},r.a.createElement("td",{style:{paddingRight:"10px"}},r.a.createElement("b",null,e.type&&e.type.toUpperCase(),":")),r.a.createElement("td",null,r.a.createElement(st,null,e.url)))})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("div",{style:{fontSize:"small",color:"grey",marginTop:"10px"}},"(click to copy paths)"))))),position:"right center",trigger:r.a.createElement(it,{onClick:function(){var e=(t.data||[]).map((function(e){return e.url})).join("\n");navigator.clipboard.writeText(e)}},(t.data||[]).map((function(e){return r.a.createElement(ot,{key:"".concat(e.url," ").concat(e.type),color:lt[e.type]||lt.default})}))),style:{marginLeft:"2px"}})},mt=function(e){var t=e.allDataTypes,n=e.enabledDataTypes,a=e.updateDataTypesToShow;if(t.length<2)return null;var o=Object(f.a)(t).map((function(e){var t=e;return t="junctions"===e?"Splice Junctions":"vcf"===e?"VCF":"gcnv_bed"===e?"gCNV":t.charAt(0).toUpperCase()+t.slice(1),r.a.createElement(j,{key:e},r.a.createElement(h.a,{label:"".concat(t.toLocaleString()),checked:n.includes(e),onChange:function(t,n){return a(n.checked?"ADD":"REMOVE",[e])}}),r.a.createElement(it,null,r.a.createElement(b.a,{content:"This color stripe marks rows that have ".concat(t," data. Select this checkbox to show ").concat(t," tracks for each row selected below."),position:"right center",trigger:r.a.createElement(ot,{color:lt[e]||lt.default})})))}));return r.a.createElement("div",null,r.a.createElement(_,null,"SHOW TRACK TYPES"),o)},pt=function(e){var t=e.category,n=e.updateSelectedRowNames;return r.a.createElement("div",null,r.a.createElement(_,null,t.categoryName.toUpperCase()),t.rows.length>=12&&r.a.createElement(rt,null,"(N=".concat(t.rows.length,") ")),t.rows.length>0&&r.a.createElement("div",null,r.a.createElement(ct,{onClick:function(e){e.preventDefault(),n("SET",t.categoryName,[])}},"Uncheck All")))},dt=function(e){var t=e.rowsInCategories,n=e.selectedRowNamesByCategoryName,a=e.updateSelectedRowNames;return t.map((function(e,t){return r.a.createElement("div",{key:e.categoryName||t},r.a.createElement(pt,{category:e,updateSelectedRowNames:a}),e.rows.map((function(t,o){var l=n[e.categoryName]||[];return r.a.createElement(gt,{key:t.name||o,row:t,categoryName:e.categoryName,selectedRowNames:l,updateSelectedRowNames:a})})),r.a.createElement(ze,{category:e}))}))},gt=function(e){var t=e.row,n=e.categoryName,a=e.selectedRowNames,o=e.updateSelectedRowNames;return r.a.createElement(st,null,r.a.createElement(h.a,{label:t.name,checked:a.includes(t.name),"data-row":t.name,onChange:function(e,t){return o(t.checked?"ADD":"REMOVE",n,[t["data-row"]])}}),r.a.createElement(ft,{row:t}),r.a.createElement(ut,{row:t}))},ft=function(e){var t=e.row;return t.description?r.a.createElement(T,{inverted:!0,content:t.description,position:"right center",trigger:r.a.createElement(E.a,{style:{marginLeft:"10px"},name:"question circle outline"})}):null},bt=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.locusList,n=e.rowsInCategories,a=e.allDataTypes,o=e.enabledDataTypes,l=e.selectedRowNamesByCategoryName,c=e.setLocus,i=e.setLocusList,s=e.updateDataTypesToShow,u=e.updateSelectedRowNames;return r.a.createElement("div",null,r.a.createElement($,{name:"Left Side Bar",locusList:t,setLocus:c,setLocusList:i}),r.a.createElement(mt,{allDataTypes:a,enabledDataTypes:o,updateDataTypesToShow:s}),r.a.createElement($e,null),r.a.createElement(dt,{rowsInCategories:n,selectedRowNamesByCategoryName:l,updateSelectedRowNames:u}))}}]),n}(r.a.PureComponent),ht=Object(c.b)((function(e){return{locusList:ge(e),rowsInCategories:he(e),allDataTypes:ke(e),enabledDataTypes:xe(e),selectedRowNamesByCategoryName:Ee(e)}}),(function(e){return{setLocus:function(t){e({type:"UPDATE_LOCUS",newValue:t})},setLocusList:function(t){e({type:"SET_LEFT_SIDE_BAR_LOCUS_LIST",values:t})},updateDataTypesToShow:function(t,n){e({type:"".concat(t,"_DATA_TYPES_TO_SHOW"),values:n})},updateSelectedRowNames:function(t,n,a){e({type:"".concat(t,"_SELECTED_ROW_NAMES"),categoryName:n,selectedRowNames:a})},updateSjOptions:function(t){e({type:"UPDATE_SJ_OPTIONS",updates:t})},updateVcfOptions:function(t){e({type:"UPDATE_VCF_OPTIONS",updates:t})},updateBamOptions:function(t){e({type:"UPDATE_BAM_OPTIONS",updates:t})}}}))(bt),Et=Object(c.b)((function(e){return{bamOptions:we(e)}}),(function(e){return{updateBamOptions:function(t){e({type:"UPDATE_BAM_OPTIONS",updates:t})}}}))((function(e){var t=e.bamOptions,n=e.updateBamOptions;return r.a.createElement("div",null,r.a.createElement(_,null,"BAM TRACK ",r.a.createElement("br",null),"OPTIONS"),r.a.createElement("br",null),r.a.createElement(j,null,"Track height: ",r.a.createElement(k,{key:"track-height-".concat(t.trackHeight),type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode&&n(Object(L.a)({},t,a||e.target.value))}(e,"trackHeight",parseInt(e.target.value,10))}})," px"),r.a.createElement(j,null,r.a.createElement(h.a,{label:"View as pairs",checked:t.viewAsPairs,onChange:function(e,t){return n({viewAsPairs:t.checked})}})),r.a.createElement(j,null,r.a.createElement(h.a,{label:"Show soft-clips",checked:t.showSoftClips,onChange:function(e,t){return n({showSoftClips:t.checked})}})),r.a.createElement(j,null,"Color by:"),r.a.createElement(j,null,r.a.createElement("select",{value:t.colorBy,onChange:function(e){return n({colorBy:e.target.value})}},r.a.createElement("option",{value:"strand"},"Strand"),r.a.createElement("option",{value:"firstOfPairStrand"},"First-of-pair strand"),r.a.createElement("option",{value:"pairOrientation"},"Pair orientation"),r.a.createElement("option",{value:"fragmentLength"},"Insert size (TLEN)"),r.a.createElement("option",{value:"none"},"None"))))})),vt=Object(c.b)((function(e){return{vcfOptions:Se(e)}}),(function(e){return{updateVcfOptions:function(t){e({type:"UPDATE_VCF_OPTIONS",updates:t})}}}))((function(e){var t=e.vcfOptions,n=e.updateVcfOptions;return r.a.createElement("div",null,r.a.createElement(_,null,"VCF TRACK ",r.a.createElement("br",null),"OPTIONS"),r.a.createElement("br",null),r.a.createElement(j,null,"Display mode: \xa0",r.a.createElement("select",{value:t.displayMode,onChange:function(e){return n({displayMode:e.target.value})}},r.a.createElement("option",{value:"COLLAPSED"},"Collapse"),r.a.createElement("option",{value:"SQUISHED"},"Squish"),r.a.createElement("option",{value:"EXPANDED"},"Expand"))))}));function yt(){var e=Object(i.a)(["\n  label {\n    margin-left: 10px;\n    margin-bottom: 10px;\n    padding-left: 1.4em !important;\n  }\n"]);return yt=function(){return e},e}var St=Object(s.a)(Z.a)(yt()),wt=function(e){var t=e.sjOptions,n=e.handleTextInput;return"strand"===t.colorBy?r.a.createElement("div",null,r.a.createElement(N,{name:"stop",style:{color:"#b0b0ec"}})," plus",r.a.createElement(N,{name:"stop",style:{color:"#ecb0b0",marginLeft:"10px"}})," minus"):"motif"===t.colorBy?r.a.createElement("div",null,r.a.createElement(N,{name:"stop",style:{color:"rgb(27,158,119)"}})," GT/AG ",r.a.createElement("br",null),r.a.createElement(N,{name:"stop",style:{color:"rgb(217,95,2)"}})," CT/AC ",r.a.createElement("br",null),r.a.createElement(N,{name:"stop",style:{color:"rgb(117,112,179)"}})," GC/AG ",r.a.createElement("br",null),r.a.createElement(N,{name:"stop",style:{color:"rgb(231,41,138)"}})," CT/GC ",r.a.createElement("br",null),r.a.createElement(N,{name:"stop",style:{color:"rgb(102,166,30)"}})," AT/AC ",r.a.createElement("br",null),r.a.createElement(N,{name:"stop",style:{color:"rgb(230,171,2)"}})," GT/AT ",r.a.createElement("br",null),r.a.createElement(N,{name:"stop",style:{color:"rgb(166,118,29)"}})," non-canonical ",r.a.createElement("br",null)):"numUniqueReads"===t.colorBy||"numReads"===t.colorBy?r.a.createElement("div",null,"# reads",r.a.createElement(N,{name:"stop",style:{color:"#AAAAAA",marginLeft:"10px"}}),"\xa0\u2264 \xa0",r.a.createElement(k,{type:"text",key:"num-reads-".concat(t.colorByNumReadsThreshold),defaultValue:void 0!==t.colorByNumReadsThreshold?t.colorByNumReadsThreshold:5,onKeyUp:function(e){return n(e,"colorByNumReadsThreshold")},style:{width:"35px"}}),"\xa0 < \xa0",r.a.createElement(N,{name:"stop",style:{color:"blue"}})):"isAnnotatedJunction"===t.colorBy?r.a.createElement("div",null,r.a.createElement(N,{name:"stop",style:{color:"#b0b0ec"}})," known junction ",r.a.createElement("br",null),r.a.createElement(N,{name:"stop",style:{color:"orange"}})," novel junction"):r.a.createElement("div",null)},Ot=Object(c.b)((function(e){return{sjOptions:ye(e)}}),(function(e){return{updateSjOptions:function(t){e({type:"UPDATE_SJ_OPTIONS",updates:t})}}}))((function(e){var t=e.sjOptions,n=e.updateSjOptions,a=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode&&n(Object(L.a)({},t,a||e.target.value))};return r.a.createElement("div",null,r.a.createElement(_,null,"JUNCTION TRACK ",r.a.createElement("br",null),"OPTIONS"),r.a.createElement("br",null),r.a.createElement(j,null,"Track height: ",r.a.createElement(k,{key:"track-height-".concat(t.trackHeight),type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return a(e,"trackHeight",parseInt(e.target.value,10))}})," px"),r.a.createElement(j,null,"Color by:"),r.a.createElement(j,null,r.a.createElement("select",{value:t.colorBy,onChange:function(e){return n({colorBy:e.target.value})}},r.a.createElement("option",{value:"strand"},"strand"),r.a.createElement("option",{value:"motif"},"donor/acceptor motif"),r.a.createElement("option",{value:"numUniqueReads"},"# uniquely-mapped reads"),r.a.createElement("option",{value:"numReads"},"# total reads"),r.a.createElement("option",{value:"isAnnotatedJunction"},"is known junction")),r.a.createElement(wt,{sjOptions:t,handleTextInput:a})),r.a.createElement(j,null,"Junction thickness:"),r.a.createElement(j,null,r.a.createElement("select",{value:t.thicknessBasedOn,onChange:function(e){return n({thicknessBasedOn:e.target.value})}},r.a.createElement("option",{value:"numUniqueReads"},"# uniquely-mapped reads"),r.a.createElement("option",{value:"numReads"},"# total reads"),r.a.createElement("option",{value:"isAnnotatedJunction"},"is known junction"))),r.a.createElement(j,null,"Junction bounce height:"),r.a.createElement(j,null,r.a.createElement("select",{value:t.bounceHeightBasedOn,onChange:function(e){return n({bounceHeightBasedOn:e.target.value})}},r.a.createElement("option",{value:"random"},"random"),r.a.createElement("option",{value:"distance"},"distance"),r.a.createElement("option",{value:"thickness"},"thickness"))),r.a.createElement(j,null,"Junction label:"),r.a.createElement(j,null,r.a.createElement(h.a,{label:"# uniquely-mapped",checked:t.labelUniqueReadCount,onChange:function(e,t){return n({labelUniqueReadCount:t.checked})}})),r.a.createElement(j,null,r.a.createElement(h.a,{label:"# multi-mapped",checked:t.labelMultiMappedReadCount,onChange:function(e,t){return n({labelMultiMappedReadCount:t.checked})}})),r.a.createElement(j,null,r.a.createElement(h.a,{label:"# total reads",checked:t.labelTotalReadCount,onChange:function(e,t){return n({labelTotalReadCount:t.checked})}})),r.a.createElement(j,null,r.a.createElement(h.a,{label:"donor/acceptor motif",checked:t.labelMotif,onChange:function(e,t){return n({labelMotif:t.checked})}})),r.a.createElement(j,null,r.a.createElement(h.a,{label:"known junction:",checked:t.labelAnnotatedJunction,onChange:function(e,t){return n({labelAnnotatedJunction:t.checked})}}),r.a.createElement(k,{key:"junction-label-".concat(t.labelAnnotatedJunctionValue),type:"text",defaultValue:t.labelAnnotatedJunctionValue,onKeyUp:function(e){return a(e,"labelAnnotatedJunctionValue")},style:{width:"35px"}})),r.a.createElement(_,null,"JUNCTION TRACK FILTERS"),r.a.createElement("br",null),r.a.createElement(j,null,"Show Strands:",r.a.createElement(St,{label:"both",name:"strandButton",checked:!t.showOnlyPlusStrand&&!t.showOnlyMinusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!1,showOnlyMinusStrand:!1})}}),r.a.createElement(St,{label:"plus",name:"strandButton",checked:t.showOnlyPlusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!0,showOnlyMinusStrand:!1})}}),r.a.createElement(St,{label:"minus",name:"strandButton",checked:t.showOnlyMinusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!1,showOnlyMinusStrand:!0})}})),r.a.createElement(j,null,r.a.createElement(h.a,{label:"Show known junctions",checked:!t.hideAnnotated,onChange:function(e,t){return n({hideAnnotated:!t.checked})}})),r.a.createElement(j,null,r.a.createElement(h.a,{label:"Show novel junctions",checked:!t.hideUnannotated,onChange:function(e,t){return n({hideUnannotated:!t.checked})}})),r.a.createElement("div",null,r.a.createElement(j,null,"Uniquely-mapped reads:"),"at least ",r.a.createElement(k,{key:"uniquely-mapped-reads-".concat(t.minUniquelyMappedReads),type:"text",defaultValue:t.minUniquelyMappedReads,onKeyUp:function(e){return a(e,"minUniquelyMappedReads",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(j,null,"Total reads:"),"at least ",r.a.createElement(k,{key:"total-reads-".concat(t.minTotalReads),type:"text",defaultValue:t.minTotalReads,onKeyUp:function(e){return a(e,"minTotalReads",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(j,null,"Fraction multi-mapped:",r.a.createElement(T,{inverted:!0,content:"Allows filtering of junctions where most reads that span the junction are multi-mapped reads. For example, setting this to 0.79 will hide junctions where 8 out of 10 (or more) reads that span the junction are not uniquely mapped reads.",position:"left center",on:"click",trigger:r.a.createElement(E.a,{style:{marginLeft:"8px"},name:"question circle outline"})})),"at most ",r.a.createElement(k,{key:"fraction-multi-mapped-".concat(t.maxFractionMultiMappedReads),type:"text",defaultValue:t.maxFractionMultiMappedReads,onKeyUp:function(e){return a(e,"maxFractionMultiMappedReads",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(j,null,"Splice overhang base-pairs:"),"at least ",r.a.createElement(k,{key:"spliced-alignment-overhang-".concat(t.minSplicedAlignmentOverhang),type:"text",defaultValue:t.minSplicedAlignmentOverhang,onKeyUp:function(e){return a(e,"minSplicedAlignmentOverhang",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(j,null,"Donor/Acceptor Motifs:"),re.map((function(e){return r.a.createElement(j,{key:e},r.a.createElement(h.a,{label:"Show ".concat(e),checked:!t["hideMotif".concat(e)],onChange:function(t,a){return n(Object(L.a)({},"hideMotif".concat(e),!a.checked))}}))}))))})),_t=n(301);function jt(){var e=Object(i.a)(["\n  padding: 0px !important;\n  div {\n    overflow-y: visible !important;\n  }\n"]);return jt=function(){return e},e}function Tt(){var e=Object(i.a)(["\n  display: inline-block;\n  cursor: pointer;\n  border-radius: 2px;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.1);\n  width: 10px;\n  height: 12px;\n"]);return Tt=function(){return e},e}function Nt(){var e=Object(i.a)(["\n  display: inline-block;\n  cursor: pointer;\n  border-radius: 2px;\n  padding: 1px 2px;\n  background: #fff;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.1);\n"]);return Nt=function(){return e},e}var kt=s.a.div(Nt()),xt=s.a.div(Tt()),At=Object(s.a)(b.a).attrs({flowing:!0})(jt()),Ct=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState({color:e})},a.handleApply=function(e){a.props.colorChangedHandler(e.hex)},a.state={color:a.props.color},a}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(At,{on:"click",position:"left center",trigger:r.a.createElement(kt,null,r.a.createElement(xt,{style:{background:this.state.color}})),content:r.a.createElement(_t.SwatchesPicker,{color:this.state.color,onChangeComplete:this.handleApply,onChange:function(t){return e.setState({color:t})}})})}}]),n}(r.a.Component);function Rt(){var e=Object(i.a)(["\n  word-wrap: break-word;\n  word-break: break-all;  \n  white-space: normal;\n"]);return Rt=function(){return e},e}function Lt(){var e=Object(i.a)(["\n  padding: 0px !important;\n  box-shadow: none !important;\n"]);return Lt=function(){return e},e}function It(){var e=Object(i.a)(["\n  margin: 10px 0px 8px 0px;\n  font-style: italic;\n"]);return It=function(){return e},e}function Bt(){var e=Object(i.a)(["\n  font-weight: 700;\n  margin: 8px 0px;\n"]);return Bt=function(){return e},e}function Dt(){var e=Object(i.a)(["\n  margin-bottom: 8px; \n"]);return Dt=function(){return e},e}function Ut(){var e=Object(i.a)(["\n  color: gray;\n"]);return Ut=function(){return e},e}var Mt=s.a.span(Ut()),Gt=Object(s.a)(j)(Dt()),Pt=s.a.div(Bt()),Vt=s.a.div(It()),Ht=Object(s.a)(C.a).attrs({basic:!0,icon:!0})(Lt()),qt=s.a.span(Rt()),zt=r.a.createElement(Mt,null,"Use search box in left side-bar to select which samples to highlight."),Jt=function(e){var t=e.categoryName,n=e.rowName,a=e.sample,o=e.sampleSettings,l=e.unhighlightSample,c=e.updateSampleSettings;return r.a.createElement("div",{style:{whiteSpace:"nowrap"}},r.a.createElement(Ht,{onClick:function(){return l(t,n,a)}},r.a.createElement(E.a,{name:"delete"})),r.a.createElement(qt,null,a),r.a.createElement("span",{style:{marginLeft:"8px"}},r.a.createElement(Ct,{key:o.color,color:o.color||"blue",colorChangedHandler:function(e){return c(t,n,a,{color:e})}})))},Wt=function(e){var t=e.selectedSamplesByCategoryNameAndRowName,n=e.unhighlightSample,a=e.updateSampleSettings,o=[];return Object.entries(t).forEach((function(e){var t=Object(I.a)(e,2),l=t[0],c=t[1];Object.entries(c.selectedSamples||{}).forEach((function(e){var t=Object(I.a)(e,2),i=t[0],s=t[1];o.push(r.a.createElement("div",{key:"".concat(l,"!!").concat(i)},r.a.createElement(Vt,null,l,": ",i),s.map((function(e){return r.a.createElement(Jt,{key:e,categoryName:l,rowName:i,sample:e,sampleSettings:((c.sampleSettings||{})[i]||{})[e]||{},unhighlightSample:n,updateSampleSettings:a})}))))}))})),o.length>0?o:zt},Ft=Object(c.b)((function(e){return{gcnvOptions:Oe(e),selectedSamplesByCategoryNameAndRowName:ve(e)}}),(function(e){return{updateGcnvOptions:function(t){e({type:"UPDATE_GCNV_OPTIONS",updates:t})},unhighlightSample:function(t,n,a){e({type:"REMOVE_SELECTED_SAMPLES",categoryName:t,selectedSamplesByRowName:Object(L.a)({},n,[a])})},updateSampleSettings:function(t,n,a,r){e({type:"UPDATE_SAMPLE_SETTINGS",categoryName:t,sampleSettingsByRowName:Object(L.a)({},n,Object(L.a)({},a,r))})}}}))((function(e){var t=e.gcnvOptions,n=e.selectedSamplesByCategoryNameAndRowName,a=e.updateGcnvOptions,o=e.updateSampleSettings,l=e.unhighlightSample,c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode&&a(Object(L.a)({},t,n||e.target.value))};return r.a.createElement("div",null,r.a.createElement(_,null,"GCNV OPTIONS"),r.a.createElement("br",null),r.a.createElement(Gt,null,"Track height: ",r.a.createElement(k,{key:"track-height-".concat(t.trackHeight),type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return c(e,"trackHeight",parseInt(e.target.value,10))}})," px"),r.a.createElement(Gt,null,"Y-max: ",r.a.createElement(k,{key:"y-max-".concat(t.trackMax),type:"text",defaultValue:t.trackMax,onKeyUp:function(e){return c(e,"trackMax",parseInt(e.target.value,10))}})," copies"),r.a.createElement(Gt,null,r.a.createElement(Pt,null,"Highlighted samples:"),r.a.createElement(Wt,{selectedSamplesByCategoryNameAndRowName:n,unhighlightSample:l,updateSampleSettings:o})))})),Kt=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.locusList,n=e.enabledDataTypes,a=e.setLocus,o=e.setLocusList;return r.a.createElement("div",null,r.a.createElement($,{name:"Right Side Bar",locusList:t,setLocus:a,setLocusList:o}),n.includes("alignment")&&r.a.createElement(Et,null),n.includes("vcf")&&r.a.createElement(vt,null),(n.includes("coverage")||n.includes("junctions"))&&r.a.createElement(Ot,null),n.includes("gcnv_bed")&&r.a.createElement(Ft,null))}}]),n}(r.a.PureComponent),Xt=Object(c.b)((function(e){return{locusList:de(e),enabledDataTypes:xe(e)}}),(function(e){return{setLocus:function(t){e({type:"UPDATE_LOCUS",newValue:t})},setLocusList:function(t){e({type:"SET_RIGHT_SIDE_BAR_LOCUS_LIST",values:t})}}}))(Kt);function Yt(){var e=Object(i.a)(["\n  cursor: pointer;\n  margin-left: 20px;\n"]);return Yt=function(){return e},e}var Qt=s.a.a(Yt()),$t=function(){return r.a.createElement(K,{title:"About the Translational Genomics Group Viewer",size:"large",modalName:"AboutModal",trigger:r.a.createElement(Qt,null,"About")},"The Translational Genomics Group Viewer is a free, open-source web app for visualizing splice junctions, expression, and other sequencing data genome-wide using ",r.a.createElement("a",{href:"https://github.com/igvteam/igv.js",target:"_blank"},"IGV.js"),r.a.createElement("br",null),r.a.createElement("br",null),"Main features: ",r.a.createElement("br",null),r.a.createElement("ul",null,r.a.createElement("li",null,"Supports all file formats supported by IGV.js, including: .bed, .vcf, .bam, .cram, .bigWig, as well as several custom formats for splice junctions (.junctions.bed.gz) and gCNV copy-number variants (.gcnv.bed) "),r.a.createElement("li",null,"Includes reference tracks such as splice junctions from GTEx v8 muscle, blood, and fibroblast samples."),r.a.createElement("li",null,"Loads data files or reference tracks from any Google bucket to which you have read-access."),r.a.createElement("li",null,"Retrieves just the on-screen sections of the files directly from Google buckets."),r.a.createElement("li",null,"Allows gene or locus lists to be added to side bars for quick navigation across a list of regions."),r.a.createElement("li",null,"Fully customizable via .json config file - for example: TODO.")),r.a.createElement("a",{href:"https://github.com/broadinstitute/tgg-viewer/issues",target:"_blank"},"Issues"),"\xa0or ",r.a.createElement("a",{href:"https://github.com/broadinstitute/tgg-viewer/issues",target:"_blank"},"Feature Requests"),"\xa0can be submitted via ",r.a.createElement("a",{href:"https://github.com/broadinstitute/tgg-viewer",target:"_blank"},"GitHub"),".")},Zt=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.user;return e.googleUserEmail?r.a.createElement("div",null,"Signed in to Google Buckets as ",r.a.createElement("b",null,e.googleUserEmail)):r.a.createElement("div",null,"Signing in to Google Buckets...")}}]),n}(r.a.PureComponent),en=Object(c.b)((function(e){return{user:_e(e)}}))(Zt);function tn(){var e=Object(i.a)(["\n  text-align: right;\n  padding-right: 75px !important;\n"]);return tn=function(){return e},e}function nn(){var e=Object(i.a)(["\n  text-align: left;\n  padding-left: 75px !important;\n"]);return nn=function(){return e},e}function an(){var e=Object(i.a)(["\n  color: #444;\n  margin-bottom: 5px;\n"]);return an=function(){return e},e}var rn=Object(s.a)(u.a.Row)(an()),on=Object(s.a)(u.a.Column).attrs({width:6})(nn()),ln=Object(s.a)(u.a.Column).attrs({width:10})(tn()),cn=function(){return r.a.createElement(u.a,null,r.a.createElement(rn,null,r.a.createElement(on,null,r.a.createElement("b",null,"TGG Viewer:"),r.a.createElement($t,null)),r.a.createElement(ln,null,r.a.createElement(en,null))))},sn=n(302),un=function(e,t){var n;return function(){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];n&&clearTimeout(n),n=setTimeout((function(){t.apply(void 0,r),n=null}),e)}};function mn(){var e=Object(i.a)([""]);return mn=function(){return e},e}var pn={showIdeogram:!0,showNavigation:!0,showRuler:!0,showCenterGuide:!0,showCursorTrackingGuide:!0,showCommandBar:!0},dn=s.a.div(mn()),gn=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).setContainerElement=function(e){a.container=e},a.render=function(){return r.a.createElement(dn,null,r.a.createElement("div",{ref:a.setContainerElement}))},a.container=null,a.browser=null,a.ignoreNextTrackRemovedEvent=!1,a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(ie.a)(ce.a.mark((function e(){var t,n,a,r,o,l,c,i,s,u=this;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.container){e.next=2;break}return e.abrupt("return");case 2:return t=this.props,n=t.genome,a=t.locus,r=t.tracks,o=t.locusChangedHandler,l=t.trackRemovedHandler,c=t.userChangedHandler,i=Object(B.a)({},pn,{locus:a,genome:n,tracks:r}),e.next=6,new Promise((function(e){"undefined"!==typeof gapi&&gapi.load("client:auth2",(function(){gapi.client.load("storage","v1",(function(){gapi.client.init({clientId:"61200892608-qphtf65o323setqdcfj4hnf601mmetvs.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/devstorage.read_only",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/storage/v1/rest"]}),e()}))}))}));case 6:return e.next=8,se();case 8:return e.next=10,ue();case 10:s=e.sent,c(s),console.log("Calling igv.createBrowser(..)",i),sn.a.createBrowser(this.container,i).then((function(e){u.browser=e,o&&u.browser.on("locuschange",un(300,o)),l&&u.browser.on("trackremoved",(function(e){u.ignoreNextTrackRemovedEvent||l(e),u.ignoreNextTrackRemovedEvent=!1}))}));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shouldComponentUpdate",value:function(e){var t=this;if(!this.container||!this.browser)return!1;var n=this.props,a=n.tracks,r=n.selectedSamplesByCategoryNameAndRowName,o=n.enabledDataTypes,l=n.sjOptions,c=n.vcfOptions,i=n.bamOptions,s=n.gcnvOptions,u=this.browser.$searchInput.val(),m=e.locus;!e.locus||u&&m.replace(/,/g,"")===u.replace(/,/g,"")||this.browser.search(m);var p=e.tracks.reduce((function(e,t){return Object(B.a)(Object(L.a)({},t.name,t),e)}),{});return a.forEach((function(n){var a=p[n.name];if(a){var u=["merged","wig","spliceJunctions"].includes(n.type)&&(e.enabledDataTypes.includes("junctions")!==o.includes("junctions")||e.enabledDataTypes.includes("coverage")!==o.includes("coverage")||e.sjOptions!==l),m="variant"===n.type&&e.vcfOptions!==c,d="alignment"===n.type&&e.bamOptions!==i,g="gcnv"===n.type&&e.gcnvOptions!==s,f="gcnv"===n.type&&(!We.a.isEqual(((e.selectedSamplesByCategoryNameAndRowName[n.categoryName]||{}).selectedSamples||{})[n.rowName],((r[n.categoryName]||{}).selectedSamples||{})[n.rowName])||!We.a.isEqual(((e.selectedSamplesByCategoryNameAndRowName[n.categoryName]||{}).sampleSettings||{})[n.rowName],((r[n.categoryName]||{}).sampleSettings||{})[n.rowName]));console.log("gcnvTrackHighlightedSamplesChanged:",f,(e.selectedSamplesByCategoryNameAndRowName[n.categoryName]||{}).sampleSettings,(r[n.categoryName]||{}).sampleSettings),(u||m||d||g||f)&&(console.log("Reloading track",n.name),t.ignoreNextTrackRemovedEvent=!0,t.browser.removeTrackByName(n.name),t.browser.loadTrack(a)),delete p[n.name]}else try{t.ignoreNextTrackRemovedEvent=!0,console.log("Removing track",n.name),t.browser.removeTrackByName(n.name)}catch(b){console.warn("Unable to remove track",n.name,b)}})),Object.values(p).forEach((function(e){try{console.log("Loading track",e.name),t.browser.loadTrack(e)}catch(n){console.warn("Unable to add track",e.name,n)}})),!1}}]),n}(r.a.Component),fn=Object(c.b)((function(e){return{genome:fe(e),locus:pe(e),tracks:Re(e),enabledDataTypes:xe(e),selectedSamplesByCategoryNameAndRowName:ve(e),sjOptions:ye(e),vcfOptions:Se(e),bamOptions:we(e),gcnvOptions:Oe(e)}}),(function(e){return{locusChangedHandler:function(t){var n=t.label.replace(/,/g,"");e({type:"UPDATE_LOCUS",newValue:n})},userChangedHandler:function(t){e({type:"UPDATE_USER",updates:{googleUserEmail:t}})},trackRemovedHandler:function(t){console.log("Removing track",t.config.categoryName,t.config.name),e({type:"REMOVE_SELECTED_ROW_NAMES",categoryName:[t.config.categoryName],selectedRowNames:[t.config.name]})}}}))(gn),bn=n(590),hn=n(304),En=n.n(hn),vn=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){switch(this.props.status){case n.IN_PROGRESS:return r.a.createElement(E.a,{loading:!0,name:"spinner",style:{color:"#4183c4"}});case n.SUCCEEDED:return r.a.createElement(b.a,{trigger:r.a.createElement(E.a,{name:"check circle",style:{color:"#00C000"}}),content:this.props.successMessage||"Success",position:"top center",size:"small"});case n.ERROR:return r.a.createElement(b.a,{trigger:r.a.createElement(E.a,{name:"warning circle",style:{color:"#F00000"}}),content:this.props.errorMessage||"",position:"top center",size:"small"});default:return r.a.createElement(E.a,{name:"warning circle",style:{color:"rgb(0,0,0,0.0)"}})}}}]),n}(r.a.PureComponent);vn.NONE="NONE",vn.IN_PROGRESS="IN_PROGRESS",vn.SUCCEEDED="SUCCEEDED",vn.ERROR="ERROR";var yn=vn,Sn=n(194),wn=n.n(Sn),On=n(195),_n=n.n(On),jn={},Tn="gs://seqr-reference-data/GRCh38/rna-seq",Nn={genome:"hg38",locus:"chr15:92,835,700-93,031,800",dataTypesToShow:["junctions","coverage","vcf","gcnv_bed"],leftSideBarLocusList:[],rightSideBarLocusList:[],rowsInCategories:[{categoryName:"Reference Data",rows:[{name:"GTEx 100 Muscle",description:"100 randomly-chosen GTEx v3 muscle samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all 100 samples.",junctions:"".concat(Tn,"/GTEx_ref_data/muscle_100_GTEx_samples.junctions.bed.gz"),coverage:"".concat(Tn,"/GTEx_ref_data/muscle_100_GTEx_samples.bigWig")},{name:"GTEx 100 Blood",description:"100 randomly-chosen GTEx v3 blood samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all 100 samples.",junctions:"".concat(Tn,"/GTEx_ref_data/blood_100_GTEx_samples.junctions.bed.gz"),coverage:"".concat(Tn,"/GTEx_ref_data/blood_100_GTEx_samples.bigWig")},{name:"GTEx 100 Fibs",description:"100 randomly-chosen GTEx v3 fibroblast samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all 100 samples.",junctions:"".concat(Tn,"/GTEx_ref_data/fibs_100_GTEx_samples.junctions.bed.gz"),coverage:"".concat(Tn,"/GTEx_ref_data/fibs_100_GTEx_samples.bigWig")},{name:"GTEx All Muscle",description:"All 803 GTEx v3 muscle samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all samples.",junctions:"".concat(Tn,"/GTEx_ref_data/GTEX_muscle.803_samples.junctions.bed.gz"),coverage:"".concat(Tn,"/GTEx_ref_data/GTEX_muscle.803_samples.bigWig")},{name:"GTEx All Blood",description:"All 755 GTEx v3 blood samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all samples.",junctions:"".concat(Tn,"/GTEx_ref_data/GTEX_blood.755_samples.junctions.bed.gz"),coverage:"".concat(Tn,"/GTEx_ref_data/GTEX_blood.755_samples.bigWig")},{name:"GTEx All Fibs",description:"All 504 GTEx v3 fibroblast samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all samples.",junctions:"".concat(Tn,"/GTEx_ref_data/GTEX_fibs.504_samples.junctions.bed.gz"),coverage:"".concat(Tn,"/GTEx_ref_data/GTEX_fibs.504_samples.bigWig")},{name:"GTEx All Muscle - Norm.",description:"All 803 GTEx v3 muscle samples combined by summing raw coverage values across all samples and also summing normalized splice-junction-spanning read counts across all samples. The normalization is done by computing the normalized read count for each junction as normalized_read_count = raw_read_count * scalar. Here scalar = average_unique_reads_per_muscle_sample / (total_unqiue_reads_in_this_sample * number_of_muscle_samples), and average_unique_reads_per_muscle_sample = (total_unqiue_reads_in_all_muscle_samples / number_of_muscle_samples)",junctions:"".concat(Tn,"/GTEx_ref_data/GTEX_muscle.803_samples.normalized.junctions.bed.gz"),coverage:"".concat(Tn,"/GTEx_ref_data/GTEX_muscle.803_samples.bigWig")},{name:"GTEx All Blood - Norm.",description:"All 755 GTEx v3 blood samples combined by summing raw coverage values across all samples and also summing normalized splice-junction-spanning read counts across all samples. The normalization is done by computing the normalized read count for each junction as normalized_read_count = raw_read_count * scalar. Here scalar = average_unique_reads_per_blood_sample / (total_unqiue_reads_in_this_sample * number_of_blood_samples), and average_unique_reads_per_blood_sample = (total_unqiue_reads_in_all_blood_samples / number_of_blood_samples)",junctions:"".concat(Tn,"/GTEx_ref_data/GTEX_blood.755_samples.normalized.junctions.bed.gz"),coverage:"".concat(Tn,"/GTEx_ref_data/GTEX_blood.755_samples.bigWig")},{name:"GTEx All Fibs - Norm.",description:"All 504 GTEx v3 fibroblast samples combined by summing raw coverage values across all samples and also summing normalized splice-junction-spanning read counts across all samples. The normalization is done by computing the normalized read count for each junction as normalized_read_count = raw_read_count * scalar. Here scalar = average_unique_reads_per_fibs_sample / (total_unqiue_reads_in_this_sample * number_of_fibs_samples), and average_unique_reads_per_fibs_sample = (total_unqiue_reads_in_all_fibs_samples / number_of_fibs_samples)",junctions:"".concat(Tn,"/GTEx_ref_data/GTEX_fibs.504_samples.normalized.junctions.bed.gz"),coverage:"".concat(Tn,"/GTEx_ref_data/GTEX_fibs.504_samples.bigWig")},{name:"splice AI scores - SNVs",coverage:"".concat(Tn,"/spliceai/spliceai_scores.raw.snv.hg38.all.bigWig")},{name:"splice AI scores - SNVs - alt allele A",coverage:"".concat(Tn,"/spliceai/spliceai_scores.raw.snv.hg38.alt-allele-A.bigWig")},{name:"splice AI scores - SNVs - alt allele C",coverage:"".concat(Tn,"/spliceai/spliceai_scores.raw.snv.hg38.alt-allele-C.bigWig")},{name:"splice AI scores - SNVs - alt allele G",coverage:"".concat(Tn,"/spliceai/spliceai_scores.raw.snv.hg38.alt-allele-G.bigWig")},{name:"splice AI scores - SNVs - alt allele T",coverage:"".concat(Tn,"/spliceai/spliceai_scores.raw.snv.hg38.alt-allele-T.bigWig")}]},{categoryName:"Samples",rows:[]}],selectedRowNamesByCategoryName:{},sjOptions:{trackHeight:170,hideAnnotated:!1,hideUnannotated:!1,colorBy:"strand",minUniquelyMappedReads:0,minTotalReads:1,maxFractionMultiMappedReads:1,minSplicedAlignmentOverhang:0,thicknessBasedOn:"numUniqueReads",bounceHeightBasedOn:"random",labelUniqueReadCount:!0,labelMultiMappedReadCount:!1,labelTotalReadCount:!1,labelMotif:!1,labelAnnotatedJunction:!1,labelAnnotatedJunctionValue:" [A]"},vcfOptions:{displayMode:"EXPANDED"},bamOptions:{trackHeight:200,showSoftClips:!0,alignmentShading:"strand"},gcnvOptions:{trackHeight:200,trackMin:0,trackMax:5,autoscale:!1,onlyHandleClicksForHighlightedSamples:!0},initialSettingsUrl:""};Nn.initialSettings=JSON.parse(JSON.stringify(Nn));var kn={locus:"locus",dataTypesToShow:"show",selectedRowNamesByCategoryName:"selectedRows",selectedSamplesByCategoryNameAndRowName:"selectedSamples",sjOptions:"sjOptions",vcfOptions:"vcfOptions",bamOptions:"bamOptions",gcnvOptions:"gcnvOptions",initialSettingsUrl:"settingsUrl"},xn=["rowsInCategories","leftSideBarLocusList","rightSideBarLocusList"],An=function(){var e=xn.reduce((function(e,t){var n=function(e){try{var t=localStorage.getItem(e),n=_n.a.decompress(t);if(jn[e]=n,null===n)return;return JSON.parse(n)}catch(a){return}}(t);return void 0!==n&&(e[t]=n),e}),{}),t=Object.entries(kn).reduce((function(e,t){var n=Object(I.a)(t,2),a=n[0],r=n[1];return Object(B.a)({},e,Object(L.a)({},r,a))}),{}),n=window.location.hash.replace(/^#/,""),a=n?n.split("&").reduce((function(e,n){var a=n.split("="),r=a[0]in t?t[a[0]]:a[0];if("locus"===r)e=Object(B.a)({},e,Object(L.a)({},r,a[1]));else try{e[r]=wn.a.parse(a[1])}catch(o){console.error("Couldn't parse url hash param",a[0],": ",a[1])}return e}),{}):{};return Object(B.a)({},Nn,{},e,{},a)},Cn=function(e){xn.forEach((function(t){!function(e,t){try{var n=JSON.stringify(t);if(jn[e]===n)return;console.warn("LocalStorage: compressing ".concat(e));var a=_n.a.compress(n);localStorage.setItem(e,a),jn[e]=n}catch(r){console.warn("Unable to save state: ",e,t,r)}}(t,e[t])}));var t=Object.keys(e).filter((function(e){return e in kn})).reduce((function(t,n){var a="locus"===n?e[n].replace(",",""):wn.a.stringify(e[n]);return[].concat(Object(f.a)(t),["".concat(kn[n],"=").concat(a)])}),[]).join("&");window.location.hash="#".concat(t)};function Rn(){var e=Object(i.a)(["\n  margin-left: 20px !important;\n  margin-right: 15px !important;\n"]);return Rn=function(){return e},e}function Ln(){var e=Object(i.a)(["\n  margin-top: 100px;\n  width: calc(100% - 350px);\n"]);return Ln=function(){return e},e}function In(){var e=Object(i.a)(["\n  color: #999;\n  width: 100%;\n  text-align: center;\n  \n  .ui.label {\n    color: #444;\n    background-color: #f3f3f3;\n  }\n"]);return In=function(){return e},e}var Bn=s.a.div(In()),Dn=Object(s.a)(bn.a)(Ln()),Un=Object(s.a)(C.a)(Rn()),Mn=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).loadInitialSettingsUrl=function(){var e=Object(ie.a)(ce.a.mark((function e(t){var n,r,o,l,c,i,s,u,m,p,d,g;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.props,r=n.globalState,o=n.updateInitialSettingsUrl,l=n.setInitialSettingsUrlHasBeenApplied,c=n.resetGlobalState,t){e.next=6;break}return c(Object(B.a)({},Nn,{},{user:r.user})),o(""),l(),e.abrupt("return");case 6:if(-1!==t.search(":")&&-1!==t.search("/")){e.next=8;break}throw new Error('Invalid url: "'.concat(t,'"'));case 8:return i=-1!==t.search(".yaml")||-1!==t.search(".yml"),s=-1!==t.search(".json"),u=!i&&!s,e.next=13,fetch(t);case 13:if((m=e.sent).ok){e.next=16;break}throw new Error("Couldn't load URL. Error: ".concat(m.statusText.toLowerCase()," (").concat(m.status,")"));case 16:return e.next=18,m.text();case 18:if(p=e.sent,(d=null)||!i&&!u){e.next=30;break}e.prev=21,d=ne.a.safeLoad(p),e.next=30;break;case 25:if(e.prev=25,e.t0=e.catch(21),!i){e.next=30;break}return console.error("Unable to parse YAML file: ".concat(t,". ").concat(e.t0)),e.abrupt("return");case 30:if(d||!s&&!u){e.next=40;break}e.prev=31,d=JSON.parse(p),e.next=40;break;case 35:if(e.prev=35,e.t1=e.catch(31),!s){e.next=40;break}return console.error("Unable to parse JSON file: ".concat(t,". ").concat(e.t1)),e.abrupt("return");case 40:if(d){e.next=43;break}return console.error("Unable to parse JSON or YAML from: ".concat(t)),e.abrupt("return");case 43:(g=Object.keys(r).reduce((function(e,t){return t in d?Object(B.a)({},e,Object(L.a)({},t,d[t])):e}),{})).initialSettings=JSON.parse(JSON.stringify(g)),c(Object(B.a)({},r,{},g)),o(t),l();case 48:case"end":return e.stop()}}),e,null,[[21,25],[31,35]])})));return function(t){return e.apply(this,arguments)}}(),a.applyInitialSettingsUrl=function(){var e=Object(ie.a)(ce.a.mark((function e(t){return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({requestStatus:yn.IN_PROGRESS}),e.prev=1,e.next=4,a.loadInitialSettingsUrl(t);case 4:a.setState({requestStatus:yn.SUCCEEDED,successMessage:t?"Successfully loaded URL and applied settings":"Reset all settings to defaults"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),a.setState({requestStatus:yn.ERROR,errorMessage:e.t0.toString()});case 10:return e.next=12,En()(1e4);case 12:a.state.requestStatus!==yn.IN_PROGRESS&&a.setState({requestStatus:yn.NONE,errorMessage:""});case 13:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),a.exportCurrentSettings=function(){var e=["initialSettings","initialSettingsUrlHasBeenApplied","user","modals"],t=Object.keys(a.props.globalState).reduce((function(t,n){return e.includes(n)||(t[n]=a.props.globalState[n]),t}),{});return encodeURIComponent(JSON.stringify(t,null,5))},a.textInputValue=e.initialSettingsUrl||"",a.state={requestStatus:yn.NONE,successMessage:"",errorMessage:""},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(ie.a)(ce.a.mark((function e(){var t,n,a;return ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.initialSettingsUrl,a=t.initialSettingsUrlHasBeenApplied,!n||a){e.next=5;break}return console.log("Loading settings from url",n),e.next=5,this.applyInitialSettingsUrl(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.initialSettingsUrl;return r.a.createElement(Bn,{align:"center"},r.a.createElement(Dn,{label:"Initial settings:",defaultValue:t,placeholder:"URL of .yaml or .json settings file (eg. http://.../settings.json), or blank to reset all settings to defaults.",onChange:function(t){e.textInputValue=t.target.value}}),r.a.createElement(Un,{content:"Apply",onClick:function(){return e.applyInitialSettingsUrl(e.textInputValue)}}),r.a.createElement(yn,{status:this.state.requestStatus,errorMessage:this.state.errorMessage,successMessage:this.state.successMessage}),r.a.createElement(b.a,{content:"Export current settings to a .json file. If you upload this file to a public url (for example on github) and then paste the url here, these settings will be restored.",position:"right center",trigger:r.a.createElement("a",{download:"settings.json",href:"data:text/json;charset=utf-8,".concat(this.exportCurrentSettings())},r.a.createElement(C.a,{icon:"download"}))}))}}]),n}(r.a.PureComponent),Gn=Object(c.b)((function(e){return{globalState:e,initialSettingsUrl:Te(e),initialSettingsUrlHasBeenApplied:Ne(e)}}),(function(e){return{updateInitialSettingsUrl:function(t){e({type:"UPDATE_INITIAL_SETTINGS_URL",newValue:t})},setInitialSettingsUrlHasBeenApplied:function(){e({type:"UPDATE_INITIAL_SETTINGS_URL_HAS_BEEN_APPLIED",newValue:!0})},resetGlobalState:function(t){e({type:"RESET_GLOBAL_STATE",newState:t})}}}))(Mn);function Pn(){var e=Object(i.a)(["\n  padding: 10px 20px;\n"]);return Pn=function(){return e},e}var Vn=s.a.div(Pn()),Hn=function(){return r.a.createElement(Vn,null,r.a.createElement(u.a,null,r.a.createElement(u.a.Row,null,r.a.createElement(u.a.Column,{width:2,style:{minWidth:"".concat(210,"px")}},r.a.createElement(ht,null)),r.a.createElement(u.a.Column,{style:{minWidth:"800px",width:"calc(100% - ".concat(420,"px)")}},r.a.createElement(cn,null),r.a.createElement(fn,null),r.a.createElement(Gn,null)),r.a.createElement(u.a.Column,{width:2,style:{minWidth:"".concat(210,"px")}},r.a.createElement(Xt,null)))))},qn=n(76),zn=n(305),Jn=Object(qn.c)(Object.assign({genome:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},locus:D("UPDATE_LOCUS",""),rightSideBarLocusList:M("RIGHT_SIDE_BAR_LOCUS_LIST"),leftSideBarLocusList:M("LEFT_SIDE_BAR_LOCUS_LIST"),dataTypesToShow:M("DATA_TYPES_TO_SHOW"),rowsInCategories:function(e,t){return t&&t.categoryName&&t.rows?e.map((function(e){if(e.categoryName!==t.categoryName)return e;var n;switch(t.type){case"SET_ROWS":n=Object(f.a)(t.rows);break;case"ADD_ROWS":n=[].concat(Object(f.a)(e.rows),Object(f.a)(t.rows));break;default:n=e.rows}return Object(B.a)({},e,{rows:n})})):e||[]},selectedRowNamesByCategoryName:function(e,t){if(!t||!t.categoryName||!Array.isArray(t.selectedRowNames))return e||{};var n=e[t.categoryName]||[];switch(t.type){case"SET_SELECTED_ROW_NAMES":case"ADD_SELECTED_ROW_NAMES":case"REMOVE_SELECTED_ROW_NAMES":var a;if("SET_SELECTED_ROW_NAMES"===t.type)a=Array.from(new Set(t.selectedRowNames));else if("ADD_SELECTED_ROW_NAMES"===t.type)a=Array.from(new Set([].concat(Object(f.a)(n),Object(f.a)(t.selectedRowNames))));else{var r=t.selectedRowNames;a=n.filter((function(e){return!r.includes(e)}))}return Object(B.a)({},e,Object(L.a)({},t.categoryName,a));default:console.trace("Unknown action type: ".concat(t.type))}return e},selectedSamplesByCategoryNameAndRowName:function(e,t){if(!t||!t.categoryName||!t.selectedSamplesByRowName&&!t.sampleSettingsByRowName)return e||{};var n=e[t.categoryName]||{},a=n.selectedSamples||{},r=n.sampleSettings||{},o=a,l=r;switch(t.type){case"SET_SELECTED_SAMPLES":case"ADD_SELECTED_SAMPLES":case"REMOVE_SELECTED_SAMPLES":o="SET_SELECTED_SAMPLES"===t.type?Object(B.a)({},a,{},t.selectedSamplesByRowName):"ADD_SELECTED_SAMPLES"===t.type?Array.from(new Set([].concat(Object(f.a)(Object.keys(a)),Object(f.a)(Object.keys(t.selectedSamplesByRowName))))).reduce((function(e,n){return e[n]=Array.from(new Set([].concat(Object(f.a)(a[n]||[]),Object(f.a)(t.selectedSamplesByRowName[n]||[])))),e}),{}):Object.keys(a).reduce((function(e,n){var r=t.selectedSamplesByRowName[n]||[],o=(a[n]||[]).filter((function(e){return!r.includes(e)}));return o.length>0&&(e[n]=o),e}),{});break;case"UPDATE_SAMPLE_SETTINGS":l=Object(B.a)({},r),Object.keys(t.sampleSettingsByRowName).forEach((function(e){l[e]=t.sampleSettingsByRowName[e]}));break;default:return console.trace("Unknown action type: ".concat(t.type)),e}return Object(B.a)({},e,Object(L.a)({},t.categoryName,{selectedSamples:o,sampleSettings:l}))},sjOptions:U("UPDATE_SJ_OPTIONS"),vcfOptions:U("UPDATE_VCF_OPTIONS"),bamOptions:U("UPDATE_BAM_OPTIONS"),gcnvOptions:U("UPDATE_GCNV_OPTIONS"),user:U("UPDATE_USER"),initialSettings:D("UPDATE_INITIAL_SETTINGS",{}),initialSettingsUrl:D("UPDATE_INITIAL_SETTINGS_URL",""),initialSettingsUrlHasBeenApplied:D("UPDATE_INITIAL_SETTINGS_URL_HAS_BEEN_APPLIED",!1)},G)),Wn=function(e,t){if("RESET_GLOBAL_STATE"===t.type)return t.newState;var n=Jn(e,t);return Cn(n),n},Fn=function(){var e=An();return console.log("Initializing store to:",e),Object(qn.e)(Wn,e,Object(qn.d)(Object(qn.a)(zn.a)))};var Kn=function(){return r.a.createElement(c.a,{store:Fn()},r.a.createElement(Hn,null))};l.a.render(r.a.createElement(Kn,null),document.getElementById("root"))}},[[318,1,2]]]);
//# sourceMappingURL=main.2100b35f.chunk.js.map