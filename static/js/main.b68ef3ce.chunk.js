(this.webpackJsonprnaseq_viewer_react_app=this.webpackJsonprnaseq_viewer_react_app||[]).push([[0],{284:function(e,t,n){e.exports=n(473)},289:function(e,t,n){},473:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(45),o=n.n(l),c=(n(289),n(37)),i=n(19),s=n(20),u=n(493),p=n(11),m=n(18),d=n(21),f=n(22),h=n(23),g=n(490),b=n(474),E=n(83),v=n(276),O=n(492),y=n(489),j=n(25),S=n(27),w=n(26);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case e:if(void 0===r.updates)return console.error("Invalid ".concat(e," action: action.updates is undefined: "),r),a;var l=C({},a,{},r.updates);return n&&console.log("singleObjectReducer: applying action: ",r,"State changing from ",a," to ",l),l;default:return a}};return a},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case"SET_".concat(e):case"ADD_".concat(e):case"REMOVE_".concat(e):if(!Array.isArray(r.values))return console.error("Invalid ".concat(r.type," action: action.values is undefined or not an array: "),r),a;var l;if(r.type==="SET_".concat(e))l=Object(w.a)(r.values);else if(r.type==="ADD_".concat(e))l=[].concat(Object(w.a)(a),Object(w.a)(r.values));else{var o=r.values;l=a.filter((function(e){return!o.includes(e)}))}return n&&console.log("createArrayReducer: applying action: ",r,"State changing from ",a," to ",l),l;default:return a}};return a},x={modals:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,l=arguments.length>1?arguments[1]:void 0;if(!l)return r;switch(l.type){case e:if(void 0===l.updatesById)return console.error("Invalid ".concat(e," action. action.updatesById is undefined: "),l),r;var o=l.updatesById;if(t){if(!(t in o))return r;o=o[t]}var c=C({},r);return Object.entries(o).forEach((function(e){var t=Object(S.a)(e,2),n=t[0],a=t[1];null==a?delete c[n]:c[n]?c[n]=C({},c[n],{},a):c[n]=C({},a)})),a&&console.log("objectsByIdReducer: applying action: ",l,"State changing from: ",r," to ",c),c;default:return r}};return r}("UPDATE_MODAL_STATE")},N=function(e,t){return e.modals[t]&&e.modals[t].open};function L(){var e=Object(i.a)(["\n  margin-left: 10px !important;\n  width: 100px;\n"]);return L=function(){return e},e}function P(){var e=Object(i.a)(["\n  float: right;\n  padding: 0px 20px 20px 20px;\n"]);return P=function(){return e},e}function B(){var e=Object(i.a)(["\n  &.ui.button.basic {\n    white-space: nowrap;\n    border: none;\n    padding: ",";\n    color: "," !important;\n    text-decoration: none;\n    font-weight: ",';\n    box-shadow: none !important;\n    user-select: auto;\n    \n    &:hover, &:focus, &:active {\n      color: #1e70bf !important;\n      background: transparent !important;\n    }\n    \n    &[class*="right labeled"].icon {\n      padding-left: 0 !important;\n      padding-right: 2.1em !important;\n      \n      > .icon {\n        background-color: initial;\n      }\n    }\n  }\n']);return B=function(){return e},e}var _=Object(s.a)((function(e){e.color,e.padding;var t=Object(v.a)(e,["color","padding"]);return r.a.createElement(O.a,t)})).attrs({basic:!0})(B(),(function(e){return e.padding||0}),(function(e){return e.color||"#4183C4"}),(function(e){return e.fontWeight||"inherit"})),M=s.a.div(P()),R=Object(s.a)(O.a)(L()),D=function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){var e=!0;n.props.handleClose&&(e=n.props.handleClose()),e&&n.props.close()},n.handleSave=function(){var e=!0;n.props.handleSave&&(e=n.props.handleSave()),e&&n.props.close()},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.trigger?r.a.cloneElement(this.props.trigger,{onClick:this.props.open}):null;return r.a.createElement(y.a,{open:this.props.isOpen,trigger:e,onClose:this.handleClose,size:this.props.size},r.a.createElement(y.a.Header,null,this.props.title,r.a.createElement(_,{floated:"right",onClick:this.handleClose,icon:r.a.createElement(E.a,{name:"remove",color:"grey"})})),r.a.createElement(y.a.Content,null,this.props.children),r.a.createElement(M,null,r.a.createElement(R,{tabIndex:0,onClick:this.handleClose,type:"button"},"Cancel"),r.a.createElement(R,{tabIndex:0,onClick:this.handleSave,type:"submit",color:"blue"},"Save")))}}]),t}(r.a.Component);D.defaultProps={size:"small"};var I=Object(c.b)((function(e,t){return{isOpen:N(e,t.modalName)}}),(function(e,t){return{open:function(n){var a;n.preventDefault(),e((a=t.modalName,function(e){return e({type:"UPDATE_MODAL_STATE",updatesById:Object(j.a)({},a,{open:!0})})}))},close:function(){var n,a;e((n=t.modalName,a=!0,function(e,t){t().modals[n].confirmOnClose&&!a?e({type:"UPDATE_MODAL_STATE",updatesById:Object(j.a)({},n,{confirming:!0})}):e({type:"UPDATE_MODAL_STATE",updatesById:Object(j.a)({},n,{open:!1,confirming:!1,confirmOnClose:null})})}))}}}))(D),U=n(488),V=n(487);function J(){var e=Object(i.a)(["\n  cursor: pointer;\n"]);return J=function(){return e},e}var H=s.a.a(J()),q=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).render=function(){var e=n.props.locusList,t="Locus List - ".concat(n.props.name);return r.a.createElement(I,{title:t,size:"large",modalName:t,trigger:r.a.createElement(H,null,(e||[]).length>0?r.a.createElement("div",null,r.a.createElement("br",null),"Edit Locus List"):r.a.createElement("div",null,"Add Locus List To Side Bar")),handleSave:function(){var e=n.textAreaValue.split(/[,\s]+/).filter(Boolean);n.props.setLocusList(e)}},r.a.createElement(U.a,null,r.a.createElement(U.a.Field,{control:V.a,style:{minHeight:"300px"},defaultValue:n.textAreaValue,onKeyUp:function(e){n.textAreaValue=e.target.value},placeholder:"Enter genomic positions, intervals, and/or gene names separated by commas, spaces, or new lines.  These can be in any format recognized by the IGV search bar.  For example: DMD, ENST00000589830, chr1:55516888, 2:152341851-152591002"})),r.a.createElement("br",null),r.a.createElement("b",null,r.a.createElement("i",null,"NOTE:"))," This locus list will be saved across page refreshes in this browser, but is not recorded in the page url, so sharing a page link is not sufficient for sharing the locus list.")},n.textAreaValue=(n.props.locusList||[]).join("\n"),n}return Object(h.a)(t,e),t}(r.a.Component),G=function(e){var t=e.name,n=e.locusList,a=e.setLocus,l=e.setLocusList;return r.a.createElement("div",null,n.map((function(e,t){return r.a.createElement("div",{key:e},t+1,". \xa0 ",r.a.createElement(H,{onClick:function(){a(e)}},e))})),r.a.createElement(q,{name:t,locusList:n,setLocusList:l}))};function F(){var e=Object(i.a)(["\n  opacity: 0.95;\n"]);return F=function(){return e},e}function z(){var e=Object(i.a)(["\n  padding-top: 3px;\n"]);return z=function(){return e},e}function W(){var e=Object(i.a)([" \n  display: inline-block;\n  margin: 12px 0px 0px 0px !important;\n"]);return W=function(){return e},e}var K=s.a.h3(W()),Y=s.a.div(z()),X=Object(s.a)(g.a)(F()),Q=n(486),Z=n(491),$=n(172),ee=n.n($),te={".bigWig":"coverage",".junctions.bed.gz":"junctions",".bam":"bam",".cram":"bam",".vcf.gz":"vcf"},ne=["GT/AG","CT/AC","GC/AG","CT/GC","AT/AC","GT/AT","non-canonical"];function ae(){var e=Object(i.a)(["\n"]);return ae=function(){return e},e}function re(){var e=Object(i.a)(["\n  label {\n    margin: 10px 0px 10px 20px;\n    padding-left: 1.4em !important;\n  }\n"]);return re=function(){return e},e}function le(){var e=Object(i.a)(["\n  font-family: monospace;\n  background-color: #F7F7F7;\n"]);return le=function(){return e},e}function oe(){var e=Object(i.a)(["\n  font-family: monospace;\n  margin: 20px 30px;\n  padding: 10px;\n  background-color: #F7F7F7;\n  white-space: nowrap;\n"]);return oe=function(){return e},e}function ce(){var e=Object(i.a)(["\n  cursor: pointer;\n  padding: 10px 10px 10px 0px;\n  display: inline-block;\n"]);return ce=function(){return e},e}var ie=s.a.a(ce()),se=s.a.div(oe()),ue=s.a.span(le()),pe=Object(s.a)(Q.a)(re()),me=Object(s.a)(g.a).attrs({position:"bottom center"})(ae()),de=function(e){function t(e){var n;if(Object(p.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).getInitialState=function(){var e=n.props.samples&&n.props.samples.length>0?"yaml":"basic";return{format:e,textAreaValue:n.convertSamplesToTextAreaValue(n.props.samples||[],e),warningMessage:null,errorMessage:null}},n.parseTextAreaValueToSamples=function(e,t){if(!e.trim())return{samples:[],errorMessage:null};var n=[],a=null,r=[];if("basic"===t){var l=e.split(/[,\s]+/).filter(Boolean).reduce((function(e,t){var n=t.split("/"),a=n[n.length-1],l=Object.keys(te).filter((function(e){return a.endsWith(e)}));if(0===l.length)r.push(t);else{var o=l[0],c=a.replace(o,"");e[c]||(e[c]={}),e[c].name=c,e[c][te[o]]=t}return e}),{});n=Object.values(l)}else if("yaml"===t||"json"===t)try{n=ee.a.safeLoad(e)}catch(o){a="Unable to parse YAML: "+o}else if("json"===t)try{n=JSON.parse(e)}catch(o){a="Unable to parse JSON: "+o}return r.length>0&&(a="These paths have unexpected file suffixes: "+r.join(", ")),{samples:n,errorMessage:a}},n.convertSamplesToTextAreaValue=function(e,t){return 0===e.length?"":("basic"===t?n=e.map((function(e){return Object.keys(e).filter((function(e){return"name"!==e&&"description"!==e})).map((function(t){return e[t]}))})).flat().join("\n"):"yaml"===t?n=ee.a.safeDump(e,{flowLevel:2}):"json"===t&&(n=JSON.stringify(e,null,2)),n);var n},n.formatRadioButtonChangeHandler=function(e,t){var a=n.parseTextAreaValueToSamples(n.state.textAreaValue,n.state.format),r=a.samples,l=a.errorMessage;if(l)return e.preventDefault(),n.setState({errorMessage:l}),!1;if(t.checked){var o=t.label,c=n.convertSamplesToTextAreaValue(r,o);n.setState({format:o,textAreaValue:c})}},n.resetButtonClickHandler=function(){var e=n.convertSamplesToTextAreaValue(n.originalSamples,n.state.format);n.setState({textAreaValue:e})},n.render=function(){var e="".concat(n.props.title," Paths"),t=n.props.samples.some((function(e){return e.description||Object.keys(e).filter((function(e){return"name"!==e&&"description"!==e})).length>1}));return r.a.createElement(I,{title:e,size:"large",modalName:e,trigger:n.props.trigger,handleSave:function(){var e=n.parseTextAreaValueToSamples(n.state.textAreaValue,n.state.format),t=e.samples,a=e.errorMessage;return a?(n.setState({errorMessage:a}),!1):(n.props.setSamples(t),!0)},handleClose:function(){return n.setState(n.getInitialState()),!0}},r.a.createElement("div",null,"Enter google bucket path(s) for ",r.a.createElement("i",null,".bigWig"),", ",r.a.createElement("i",null,".junctions.bed.gz"),", ",r.a.createElement("i",null,".bam/.cram"),", or ",r.a.createElement("i",null,".vcf.gz")," files:",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("b",null,"Format:"),r.a.createElement(pe,{name:"format",label:"basic",disabled:t,checked:"basic"===n.state.format,onChange:n.formatRadioButtonChangeHandler}),r.a.createElement(me,{trigger:r.a.createElement(E.a,{style:{marginLeft:"8px"},name:"question circle outline"}),content:r.a.createElement("div",null,t&&r.a.createElement("div",null,r.a.createElement("b",null,"[Disabled]")," because some samples have multiple data files and/or a description.",r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("b",null,"Basic format"),":",r.a.createElement("br",null),r.a.createElement("br",null),"Enter a list of paths separated by commas, spaces or new lines. ",r.a.createElement("br",null),r.a.createElement("br",null),"Example:",r.a.createElement("br",null),r.a.createElement(se,null,"gs://your-bucket/dir/sample-name1.bigWig ",r.a.createElement("br",null),"gs://your-bucket/dir/sample2.bigWig ",r.a.createElement("br",null),"gs://your-bucket/dir/sample-name1.junctions.bed.gz ",r.a.createElement("br",null),"gs://your-bucket/dir/sample-name1.bam ",r.a.createElement("br",null),"gs://your-bucket/dir/sample2.junctions.bed.gz ",r.a.createElement("br",null)),"Paths that have the same prefix (like ",r.a.createElement(ue,null,"gs://your-bucket/dir/sample-name1")," in the example) will be interpreted as different data types from the same sample.",r.a.createElement("br",null),r.a.createElement("br",null),"The order of paths doesn't matter.")}),r.a.createElement(pe,{name:"format",label:"yaml",checked:"yaml"===n.state.format,onChange:n.formatRadioButtonChangeHandler}),r.a.createElement(me,{trigger:r.a.createElement(E.a,{style:{marginLeft:"8px"},name:"question circle outline"}),content:r.a.createElement("div",null,r.a.createElement("b",null,"YAML format"),":",r.a.createElement("br",null),r.a.createElement("br",null),"Provides per-sample file paths just like the Basic format, but allows additional meta-data to be specified - such as sample descriptions - as well as more flexibility in file names.",r.a.createElement("br",null),r.a.createElement(se,null,"- name: sample1 ",r.a.createElement("br",null),"\xa0 description: description of sample1 ",r.a.createElement("br",null),"\xa0 coverage: gs://your-bucket/dir/sample-name1.bigWig ",r.a.createElement("br",null),"\xa0 junctions: gs://your-bucket/dir2/sample-name1.junctions.bed.gz ",r.a.createElement("br",null),"\xa0 bam: gs://your-bucket/dir3/sample-name1.bam ",r.a.createElement("br",null),"\xa0 vcf: gs://your-bucket/dir3/sample-name1-wgs-variants.vcf.gz ",r.a.createElement("br",null),"- name: sample2 ",r.a.createElement("br",null),"\xa0 coverage: gs://your-bucket/dir/sample2.bigWig ",r.a.createElement("br",null),"\xa0 junctions: gs://your-bucket/dir2/sample2.junctions.bed.gz ",r.a.createElement("br",null)))}),r.a.createElement(pe,{name:"format",label:"json",checked:"json"===n.state.format,onChange:n.formatRadioButtonChangeHandler}),r.a.createElement(me,{trigger:r.a.createElement(E.a,{style:{marginLeft:"8px"},name:"question circle outline"}),content:r.a.createElement("div",null,r.a.createElement("b",null,"JSON format"),":",r.a.createElement("br",null),r.a.createElement("br",null),"Identical to YAML, but represented in the JSON format.",r.a.createElement("br",null),r.a.createElement(se,null,"[{",r.a.createElement("br",null),'"name": "sample1",',r.a.createElement("br",null),'"coverage": "gs://your-bucket/dir/sample-name1.bigWig",',r.a.createElement("br",null),'"junctions": "gs://your-bucket/dir2/sample-name1.junctions.bed.gz",',r.a.createElement("br",null),'"bam": "gs://your-bucket/dir3/sample-name1.bam",',r.a.createElement("br",null),'"vcf": "gs://your-bucket/dir3/sample-name1-wgs-variants.vcf.gz"',r.a.createElement("br",null),"}, {",r.a.createElement("br",null),'"name": "sample2",',r.a.createElement("br",null),'"coverage": "gs://your-bucket/dir/sample2.bigWig",',r.a.createElement("br",null),'"junctions": "gs://your-bucket/dir2/sample2.junctions.bed.gz"',r.a.createElement("br",null),"}]",r.a.createElement("br",null)))}),n.props.showResetButton&&r.a.createElement(ie,{style:{float:"right"},onClick:n.resetButtonClickHandler},"Reset To ",n.originalSamples.length," Original Samples"))),r.a.createElement(U.a,null,r.a.createElement(V.a,{style:{minHeight:"300px"},value:n.state.textAreaValue,onChange:function(e){n.setState({textAreaValue:e.target.value})},placeholder:"Enter file path(s)"})),r.a.createElement("br",null),r.a.createElement("b",null,r.a.createElement("i",null,"NOTE:"))," These paths will be saved across page refreshes in this browser, but will not be recorded in the page url, so sharing a page link is not sufficient for sharing the paths.",n.state.warningMessage&&r.a.createElement(Z.a,{color:"yellow"},n.state.warningMessage),n.state.errorMessage&&r.a.createElement(Z.a,{color:"red"},n.state.errorMessage))},n.state=n.getInitialState(),n.props.showResetButton){var a=window.INITIAL_SAMPLES_IN_CATEGORIES.filter((function(e){return e.categoryName===n.props.categoryName}));a.length>0&&(n.originalSamples=a[0].samples)}return n}return Object(h.a)(t,e),t}(r.a.Component),fe=Object(c.b)(null,(function(e){return{updateSamples:function(t,n,a){e({type:"".concat(t,"_SAMPLES"),categoryName:n,samples:a})}}}))((function(e){var t=e.category,n=e.updateSamples;return r.a.createElement("div",null,r.a.createElement(de,{key:"".concat(JSON.stringify(t.samples),"_add"),title:"Add ".concat(t.categoryName),categoryName:t.categoryName,samples:[],setSamples:function(e){return n("ADD",t.categoryName,e)},trigger:r.a.createElement(ie,null,"Add ",0===t.samples.length?t.categoryName:null," Paths")}),t.samples.length>0&&r.a.createElement(de,{key:"".concat(JSON.stringify(t.samples),"_edit"),title:"Edit ".concat(t.categoryName),categoryName:t.categoryName,samples:t.samples,setSamples:function(e){return n("SET",t.categoryName,e)},trigger:r.a.createElement(ie,null,"Edit Paths"),showResetButton:!0}))})),he=n(130),ge=n(2),be=n.n(ge),Ee=n(5),ve=function(){var e=Object(Ee.a)(be.a.mark((function e(){var t;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance();case 2:if((t=e.sent).isSignedIn.get()){e.next=6;break}return e.next=6,t.signIn();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(Ee.a)(be.a.mark((function e(){var t,n;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance();case 2:return t=e.sent,n=t.currentUser.get().getBasicProfile(),e.abrupt("return",n.getEmail());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=Object(Ee.a)(be.a.mark((function e(){var t,n;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance();case 2:return t=e.sent,n=t.currentUser.get(),t.isSignedIn.get()||n.reloadAuthResponse(),e.abrupt("return",n.getAuthResponse().access_token);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var we=function(e){return e.locus},ke=function(e){return e.rightSideBarLocusList},Ce=function(e){return e.leftSideBarLocusList},Ae=function(e){return e.genome},Te=function(e){return e.samplesInCategories},xe=function(e){return e.selectedSampleNamesByCategoryName},Ne=function(e){return e.sjOptions},Le=function(e){return e.vcfOptions},Pe=function(e){return e.bamOptions},Be=function(e){return e.user},_e=Object(he.a)(Te,(function(e){return e.reduce((function(e,t){return Se({},e,Object(j.a)({},t.categoryName,t.samples))}),{})})),Me=Object(he.a)(xe,_e,(function(e,t){return Object.entries(e).reduce((function(e,n){var a=Object(S.a)(n,2),r=a[0],l=a[1];return t[r]?Se({},e,Object(j.a)({},r,t[r].filter((function(e){return l.includes(e.name)})))):e}),{})})),Re=Object(he.a)(Me,Ne,Le,Pe,(function(e,t,n,a){var r=[];return Object.values(e).forEach((function(e){return e.forEach((function(e,l){var o,c;e.junctions&&t.showJunctions&&(o={type:"junctions",format:"bed",url:e.junctions,indexURL:"".concat(e.junctions,".tbi"),oauthToken:ye,order:10*l,name:e.name,height:t.trackHeight,minUniquelyMappedReads:t.minUniquelyMappedReads,minTotalReads:t.minTotalReads,maxFractionMultiMappedReads:t.maxFractionMultiMappedReads,minSplicedAlignmentOverhang:t.minSplicedAlignmentOverhang,thicknessBasedOn:t.thicknessBasedOn,bounceHeightBasedOn:t.bounceHeightBasedOn,colorBy:t.colorBy,colorByNumReadsThreshold:void 0!==t.colorByNumReadsThreshold?t.colorByNumReadsThreshold:5,hideStrand:t.showOnlyPlusStrand?"-":t.showOnlyMinusStrand?"+":void 0,labelUniqueReadCount:t.labelUniqueReadCount,labelMultiMappedReadCount:t.labelMultiMappedReadCount,labelTotalReadCount:t.labelTotalReadCount,labelMotif:t.labelMotif,labelAnnotatedJunction:t.labelAnnotatedJunction&&t.labelAnnotatedJunctionValue,hideAnnotatedJunctions:t.hideAnnotated,hideUnannotatedJunctions:t.hideUnannotated,hideMotifs:ne.filter((function(e){return t["hideMotif".concat(e)]}))}),e.coverage&&t.showCoverage&&(c={type:"wig",format:"bigwig",url:e.coverage,oauthToken:ye,name:e.name,height:t.trackHeight,order:10*l+1}),c&&o?(console.log("Adding ".concat(e.junctions," & ").concat(e.coverage," track #"),10*l+2),r.push({type:"merged",name:e.name,height:t.trackHeight,tracks:[c,o],order:10*l+2})):o?(console.log("Adding ".concat(e.junctions," track #"),10*l),r.push({type:"merged",name:e.name,height:t.trackHeight,tracks:[o],order:10*l+3})):c&&(console.log("Adding ".concat(e.coverage," track #"),10*l+1),r.push(c)),n.showVcfs&&e.vcf&&(console.log("Adding ".concat(e.vcf," track #"),10*l+4),r.push({type:"variant",format:"vcf",url:e.vcf,indexUrl:"".concat(e.vcf,".tbi"),indexed:!0,name:"".concat(e.name," vcf"),displayMode:n.displayMode,oauthToken:ye,order:10*l+4})),a.showBams&&e.bam&&(console.log("Adding ".concat(e.bam," track #"),10*l+5),r.push({type:"alignment",url:e.bam,indexed:!0,name:"".concat(e.name," bam"),height:a.trackHeight,colorBy:a.colorBy,viewAsPairs:a.viewAsPairs,showSoftClips:a.showSoftClips,oauthToken:ye,order:10*l+5}))}))})),r.push({name:"Gencode v32 Genes",format:"refgene",url:"gs://macarthurlab-rnaseq/reference_tracks/gencode_v32_knownGene.sorted.txt.gz",indexUrl:"gs://macarthurlab-rnaseq/reference_tracks/gencode_v32_knownGene.sorted.txt.gz.tbi",indexed:!0,searchable:!0,height:350,visibilityWindow:-1,displayMode:"EXPANDED",order:1000001,color:"rgb(76,171,225)",oauthToken:ye}),r}));function De(){var e=Object(i.a)(["\n  white-space: nowrap;\n"]);return De=function(){return e},e}function Ie(){var e=Object(i.a)(["\n  padding-left: 5px;\n  white-space: nowrap;\n"]);return Ie=function(){return e},e}function Ue(){var e=Object(i.a)(["\n   color: #E6A01B;\n   border: 3px solid #E6A01B;\n"]);return Ue=function(){return e},e}function Ve(){var e=Object(i.a)(["\n   color: #5CB6EA;\n   border: 3px solid #5CB6EA;\n"]);return Ve=function(){return e},e}function Je(){var e=Object(i.a)(["\n   color: #B5D29A;\n   border: 3px solid #B5D29A;\n"]);return Je=function(){return e},e}function He(){var e=Object(i.a)(["\n   color: #B0B0EC;\n   border: 3px solid #B0B0EC;\n"]);return He=function(){return e},e}function qe(){var e=Object(i.a)(["\n  display: inline-block;\n  width: 6px;\n  border-radius: 1px;\n  height: 10px;\n  cursor: pointer;\n"]);return qe=function(){return e},e}function Ge(){var e=Object(i.a)(["\n  display: inline-block;\n  margin: 0px 0px 0px 15px;\n  color: #999;\n  white-space: nowrap;\n"]);return Ge=function(){return e},e}var Fe=s.a.div(Ge()),ze=s.a.div.attrs({name:"stop"})(qe()),We=Object(s.a)(ze)(He()),Ke=Object(s.a)(ze)(Je()),Ye=Object(s.a)(ze)(Ve()),Xe=Object(s.a)(ze)(Ue()),Qe=s.a.span(Ie()),Ze=s.a.div(De()),$e=function(e){var t=e.sample;return r.a.createElement(g.a,{content:r.a.createElement("table",null,r.a.createElement("tbody",null,t.junctions&&r.a.createElement("tr",null,r.a.createElement("td",{style:{paddingRight:"10px"}},r.a.createElement("b",null,"Junctions:")),r.a.createElement("td",null,r.a.createElement(Ze,null,t.junctions))),t.coverage&&r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Coverage:")),r.a.createElement("td",null,r.a.createElement(Ze,null,t.coverage))),t.bam&&r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Bam:")),r.a.createElement("td",null,r.a.createElement(Ze,null,t.bam))),t.vcf&&r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Vcf:")),r.a.createElement("td",null,r.a.createElement(Ze,null,t.vcf))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("div",{style:{fontSize:"small",color:"grey",marginTop:"10px"}},"(click to copy paths)"))))),position:"right center",trigger:r.a.createElement(Qe,{onClick:function(){return navigator.clipboard.writeText("".concat(t.bam+"\n"||!1).concat(t.junctions+"\n"||!1).concat(t.coverage+"\n"||!1).concat(t.vcf+"\n"||!1))}},t.junctions&&r.a.createElement(We,null),t.coverage&&r.a.createElement(Ke,null),t.bam&&r.a.createElement(Ye,null),t.vcf&&r.a.createElement(Xe,null)),style:{marginLeft:"2px"}})},et=function(e){var t=e.category,n=e.updateSelectedSampleNames;return r.a.createElement("div",null,r.a.createElement(K,null,t.categoryName.toUpperCase()),t.samples.length>=12&&r.a.createElement(Fe,null,"(N=".concat(t.samples.length,") ")),t.samples.length>0&&r.a.createElement("div",null,r.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),n("SET",t.categoryName,[])}},"Uncheck All")))},tt=function(e){var t=e.samplesInCategories,n=e.selectedSampleNamesByCategoryName,a=e.updateSelectedSampleNames;return t.map((function(e,t){return r.a.createElement("div",{key:e.categoryName||t},r.a.createElement(et,{category:e,updateSelectedSampleNames:a}),e.samples.map((function(t,l){var o=n[e.categoryName]||[];return r.a.createElement(nt,{key:t.name||l,sample:t,categoryName:e.categoryName,selectedSampleNames:o,updateSelectedSampleNames:a})})),r.a.createElement(fe,{category:e}))}))},nt=function(e){var t=e.sample,n=e.categoryName,a=e.selectedSampleNames,l=e.updateSelectedSampleNames;return r.a.createElement(Ze,null,r.a.createElement(b.a,{label:t.name,checked:a.includes(t.name),"data-sample":t.name,onChange:function(e,t){return l(t.checked?"ADD":"REMOVE",n,[t["data-sample"]])}}),r.a.createElement(at,{sample:t}),r.a.createElement($e,{sample:t}))},at=function(e){var t=e.sample;return t.description?r.a.createElement(X,{inverted:!0,content:t.description,position:"right center",trigger:r.a.createElement(E.a,{style:{marginLeft:"10px"},name:"question circle outline"})}):null},rt=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(G,{name:"Left Side Bar",locusList:this.props.locusList,setLocus:this.props.setLocus,setLocusList:this.props.setLocusList}),r.a.createElement(K,null,"TRACK TYPES TO SHOW PER SAMPLE"),r.a.createElement(Y,null,r.a.createElement(b.a,{label:"RNA splice-junctions",defaultChecked:this.props.sjOptions.showJunctions,onChange:function(t,n){return e.props.updateSjOptions({showJunctions:n.checked})}}),r.a.createElement(Qe,null,r.a.createElement(g.a,{content:"This color stripe marks samples that have splice junction data. Select this checkbox to show a splice junction track for each sample selected below.",position:"right center",trigger:r.a.createElement(We,null)}))),r.a.createElement(Y,null,r.a.createElement(b.a,{label:"RNA coverage",defaultChecked:this.props.sjOptions.showCoverage,onChange:function(t,n){return e.props.updateSjOptions({showCoverage:n.checked})}}),r.a.createElement(Qe,null,r.a.createElement(g.a,{content:"This color stripe marks samples that have coverage data. Select this checkbox to show a coverage track for each sample selected below.",position:"right center",trigger:r.a.createElement(Ke,null)}))),r.a.createElement(Y,null,r.a.createElement(b.a,{label:"BAM track",defaultChecked:this.props.bamOptions.showBams,onChange:function(t,n){return e.props.updateBamOptions({showBams:n.checked})}}),r.a.createElement(Qe,null,r.a.createElement(g.a,{content:"This color stripe marks samples that have alignment data. Select this checkbox to show a bam track for each sample selected below.",position:"right center",trigger:r.a.createElement(Ye,null)}))),r.a.createElement(Y,null,r.a.createElement(b.a,{label:"VCF track",defaultChecked:this.props.vcfOptions.showVcfs,onChange:function(t,n){return e.props.updateVcfOptions({showVcfs:n.checked})}}),r.a.createElement(Qe,null,r.a.createElement(g.a,{content:"This color stripe marks samples that have splice junction data. Select this checkbox to show a vcf track for each sample selected below.",position:"right center",trigger:r.a.createElement(Xe,null)}))),r.a.createElement(tt,{samplesInCategories:this.props.samplesInCategories,selectedSampleNamesByCategoryName:this.props.selectedSampleNamesByCategoryName,updateSelectedSampleNames:this.props.updateSelectedSampleNames}))}}]),t}(r.a.Component),lt=Object(c.b)((function(e){return{locusList:Ce(e),samplesInCategories:Te(e),selectedSampleNamesByCategoryName:xe(e),sjOptions:Ne(e),vcfOptions:Le(e),bamOptions:Pe(e)}}),(function(e){return{setLocus:function(t){e({type:"UPDATE_LOCUS",newValue:t})},setLocusList:function(t){e({type:"SET_LEFT_SIDE_BAR_LOCUS_LIST",values:t})},updateSelectedSampleNames:function(t,n,a){e({type:"".concat(t,"_SELECTED_SAMPLE_NAMES"),categoryName:n,selectedSampleNames:a})},updateSjOptions:function(t){e({type:"UPDATE_SJ_OPTIONS",updates:t})},updateVcfOptions:function(t){e({type:"UPDATE_VCF_OPTIONS",updates:t})},updateBamOptions:function(t){e({type:"UPDATE_BAM_OPTIONS",updates:t})}}}))(rt);function ot(){var e=Object(i.a)(["\n  label {\n    margin-left: 10px;\n    margin-bottom: 10px;\n    padding-left: 1.4em !important;\n  }\n"]);return ot=function(){return e},e}function ct(){var e=Object(i.a)(["\n  margin-top: 5px !important;\n"]);return ct=function(){return e},e}function it(){var e=Object(i.a)(["\n  display: inline;\n  width: 50px;\n  margin-left: 5px;\n  padding-left: 5px;\n"]);return it=function(){return e},e}var st=s.a.input(it()),ut=Object(s.a)(E.a)(ct()),pt=Object(s.a)(Q.a)(ot()),mt=function(e){var t=e.sjOptions,n=e.handleTextInput;return"strand"===t.colorBy?r.a.createElement("div",null,r.a.createElement(ut,{name:"stop",style:{color:"#b0b0ec"}})," plus",r.a.createElement(ut,{name:"stop",style:{color:"#ecb0b0",marginLeft:"10px"}})," minus"):"motif"===t.colorBy?r.a.createElement("div",null,r.a.createElement(ut,{name:"stop",style:{color:"rgb(27,158,119)"}})," GT/AG ",r.a.createElement("br",null),r.a.createElement(ut,{name:"stop",style:{color:"rgb(217,95,2)"}})," CT/AC ",r.a.createElement("br",null),r.a.createElement(ut,{name:"stop",style:{color:"rgb(117,112,179)"}})," GC/AG ",r.a.createElement("br",null),r.a.createElement(ut,{name:"stop",style:{color:"rgb(231,41,138)"}})," CT/GC ",r.a.createElement("br",null),r.a.createElement(ut,{name:"stop",style:{color:"rgb(102,166,30)"}})," AT/AC ",r.a.createElement("br",null),r.a.createElement(ut,{name:"stop",style:{color:"rgb(230,171,2)"}})," GT/AT ",r.a.createElement("br",null),r.a.createElement(ut,{name:"stop",style:{color:"rgb(166,118,29)"}})," non-canonical ",r.a.createElement("br",null)):"numUniqueReads"===t.colorBy||"numReads"===t.colorBy?r.a.createElement("div",null,"# reads",r.a.createElement(ut,{name:"stop",style:{color:"#AAAAAA",marginLeft:"10px"}}),"\xa0\u2264 \xa0",r.a.createElement(st,{type:"text",defaultValue:void 0!==t.colorByNumReadsThreshold?t.colorByNumReadsThreshold:5,onKeyUp:function(e){return n(e,"colorByNumReadsThreshold")},style:{width:"35px"}}),"\xa0 < \xa0",r.a.createElement(ut,{name:"stop",style:{color:"blue"}})):"isAnnotatedJunction"===t.colorBy?r.a.createElement("div",null,r.a.createElement(ut,{name:"stop",style:{color:"#b0b0ec"}})," known junction ",r.a.createElement("br",null),r.a.createElement(ut,{name:"stop",style:{color:"orange"}})," novel junction"):r.a.createElement("div",null)},dt=function(e){var t=e.sjOptions,n=e.updateSjOptions,a=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode&&n(Object(j.a)({},t,a||e.target.value))};return r.a.createElement("div",null,r.a.createElement(K,null,"JUNCTION TRACK ",r.a.createElement("br",null),"OPTIONS"),r.a.createElement("br",null),r.a.createElement(Y,null,"Track height: ",r.a.createElement(st,{type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return a(e,"trackHeight",parseInt(e.target.value))}})," px"),r.a.createElement(Y,null,"Color by:"),r.a.createElement(Y,null,r.a.createElement("select",{defaultValue:t.colorBy,onChange:function(e){return n({colorBy:e.target.value})}},r.a.createElement("option",{value:"strand"},"strand"),r.a.createElement("option",{value:"motif"},"donor/acceptor motif"),r.a.createElement("option",{value:"numUniqueReads"},"# uniquely-mapped reads"),r.a.createElement("option",{value:"numReads"},"# total reads"),r.a.createElement("option",{value:"isAnnotatedJunction"},"is known junction")),r.a.createElement(mt,{sjOptions:t,handleTextInput:a})),r.a.createElement(Y,null,"Junction thickness:"),r.a.createElement(Y,null,r.a.createElement("select",{defaultValue:t.thicknessBasedOn,onChange:function(e){return n({thicknessBasedOn:e.target.value})}},r.a.createElement("option",{value:"numUniqueReads"},"# uniquely-mapped reads"),r.a.createElement("option",{value:"numReads"},"# total reads"),r.a.createElement("option",{value:"isAnnotatedJunction"},"is known junction"))),r.a.createElement(Y,null,"Junction bounce height:"),r.a.createElement(Y,null,r.a.createElement("select",{defaultValue:t.bounceHeightBasedOn,onChange:function(e){return n({bounceHeightBasedOn:e.target.value})}},r.a.createElement("option",{value:"random"},"random"),r.a.createElement("option",{value:"distance"},"distance"),r.a.createElement("option",{value:"thickness"},"thickness"))),r.a.createElement(Y,null,"Junction label:"),r.a.createElement(Y,null,r.a.createElement(b.a,{label:"# uniquely-mapped",defaultChecked:t.labelUniqueReadCount,onChange:function(e,t){return n({labelUniqueReadCount:t.checked})}})),r.a.createElement(Y,null,r.a.createElement(b.a,{label:"# multi-mapped",defaultChecked:t.labelMultiMappedReadCount,onChange:function(e,t){return n({labelMultiMappedReadCount:t.checked})}})),r.a.createElement(Y,null,r.a.createElement(b.a,{label:"# total reads",defaultChecked:t.labelTotalReadCount,onChange:function(e,t){return n({labelTotalReadCount:t.checked})}})),r.a.createElement(Y,null,r.a.createElement(b.a,{label:"donor/acceptor motif",defaultChecked:t.labelMotif,onChange:function(e,t){return n({labelMotif:t.checked})}})),r.a.createElement(Y,null,r.a.createElement(b.a,{label:"known junction:",defaultChecked:t.labelAnnotatedJunction,onChange:function(e,t){return n({labelAnnotatedJunction:t.checked})}}),r.a.createElement(st,{type:"text",defaultValue:t.labelAnnotatedJunctionValue,onKeyUp:function(e){return a(e,"labelAnnotatedJunctionValue")},style:{width:"35px"}})),r.a.createElement(K,null,"JUNCTION TRACK FILTERS"),r.a.createElement("br",null),r.a.createElement(Y,null,"Show Strands:",r.a.createElement(pt,{label:"both",name:"strandButton",checked:!t.showOnlyPlusStrand&&!t.showOnlyMinusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!1,showOnlyMinusStrand:!1})}}),r.a.createElement(pt,{label:"plus",name:"strandButton",checked:t.showOnlyPlusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!0,showOnlyMinusStrand:!1})}}),r.a.createElement(pt,{label:"minus",name:"strandButton",checked:t.showOnlyMinusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!1,showOnlyMinusStrand:!0})}})),r.a.createElement(Y,null,r.a.createElement(b.a,{label:"Show novel junctions",defaultChecked:!t.hideUnannotated,onChange:function(e,t){return n({hideUnannotated:!t.checked})}})),r.a.createElement(Y,null,r.a.createElement(b.a,{label:"Show known junctions",defaultChecked:!t.hideAnnotated,onChange:function(e,t){return n({hideAnnotated:!t.checked})}})),r.a.createElement(Y,null,r.a.createElement(b.a,{label:"Show novel junctions",defaultChecked:!t.hideUnannotated,onChange:function(e,t){return n({hideUnannotated:!t.checked})}})),r.a.createElement("div",null,r.a.createElement(Y,null,"Uniquely-mapped reads:"),"at least ",r.a.createElement(st,{type:"text",defaultValue:t.minUniquelyMappedReads,onKeyUp:function(e){return a(e,"minUniquelyMappedReads",parseInt(e.target.value))}})),r.a.createElement("div",null,r.a.createElement(Y,null,"Total reads:"),"at least ",r.a.createElement(st,{type:"text",defaultValue:t.minTotalReads,onKeyUp:function(e){return a(e,"minTotalReads",parseInt(e.target.value))}})),r.a.createElement("div",null,r.a.createElement(Y,null,"Fraction multi-mapped:",r.a.createElement(X,{inverted:!0,content:"Allows filtering of junctions where most reads that span the junction are multi-mapped reads. For example, setting this to 0.79 will hide junctions where 8 out of 10 (or more) reads that span the junction are not uniquely mapped reads.",position:"left center",on:"click",trigger:r.a.createElement(E.a,{style:{marginLeft:"8px"},name:"question circle outline"})})),"at most ",r.a.createElement(st,{type:"text",defaultValue:t.maxFractionMultiMappedReads,onKeyUp:function(e){return a(e,"maxFractionMultiMappedReads",parseInt(e.target.value))}})),r.a.createElement("div",null,r.a.createElement(Y,null,"Splice overhang base-pairs:"),"at least ",r.a.createElement(st,{type:"text",defaultValue:t.minSplicedAlignmentOverhang,onKeyUp:function(e){return a(e,"minSplicedAlignmentOverhang",parseInt(e.target.value))}})),r.a.createElement("div",null,r.a.createElement(Y,null,"Donor/Acceptor Motifs:"),ne.map((function(e){return r.a.createElement(Y,{key:e},r.a.createElement(b.a,{label:"Show ".concat(e),defaultChecked:!t["hideMotif".concat(e)],onChange:function(t,a){return n(Object(j.a)({},"hideMotif".concat(e),!a.checked))}}))}))))},ft=function(e){var t=e.bamOptions,n=e.updateBamOptions;return r.a.createElement("div",null,r.a.createElement(K,null,"BAM TRACK ",r.a.createElement("br",null),"OPTIONS"),r.a.createElement("br",null),r.a.createElement(Y,null,"Track height: ",r.a.createElement(st,{type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode&&n(Object(j.a)({},t,a||e.target.value))}(e,"trackHeight",parseInt(e.target.value))}})," px"),r.a.createElement(Y,null,r.a.createElement(b.a,{label:"View as pairs",defaultChecked:t.viewAsPairs,onChange:function(e,t){return n({viewAsPairs:t.checked})}})),r.a.createElement(Y,null,r.a.createElement(b.a,{label:"Show soft-clips",defaultChecked:t.showSoftClips,onChange:function(e,t){return n({showSoftClips:t.checked})}})),r.a.createElement(Y,null,"Color by:"),r.a.createElement(Y,null,r.a.createElement("select",{defaultValue:t.colorBy,onChange:function(e){return n({colorBy:e.target.value})}},r.a.createElement("option",{value:"strand"},"Strand"),r.a.createElement("option",{value:"firstOfPairStrand"},"First-of-pair strand"),r.a.createElement("option",{value:"pairOrientation"},"Pair orientation"),r.a.createElement("option",{value:"fragmentLength"},"Insert size (TLEN)"),r.a.createElement("option",{value:"none"},"None"))))},ht=function(e){var t=e.vcfOptions,n=e.updateVcfOptions;return r.a.createElement("div",null,r.a.createElement(K,null,"VCF TRACK ",r.a.createElement("br",null),"OPTIONS"),r.a.createElement("br",null),r.a.createElement(Y,null,"Display mode: \xa0 ",r.a.createElement("select",{defaultValue:t.displayMode,onChange:function(e){return n({displayMode:e.target.value})}},r.a.createElement("option",{value:"COLLAPSED"},"Collapse"),r.a.createElement("option",{value:"SQUISHED"},"Squish"),r.a.createElement("option",{value:"EXPANDED"},"Expand"))))},gt=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(G,{name:"Right Side Bar",locusList:this.props.locusList,setLocus:this.props.setLocus,setLocusList:this.props.setLocusList}),this.props.bamOptions.showBams&&r.a.createElement(ft,{bamOptions:this.props.bamOptions,updateBamOptions:this.props.updateBamOptions}),this.props.vcfOptions.showVcfs&&r.a.createElement(ht,{vcfOptions:this.props.vcfOptions,updateVcfOptions:this.props.updateVcfOptions}),(this.props.sjOptions.showCoverage||this.props.sjOptions.showJunctions)&&r.a.createElement(dt,{sjOptions:this.props.sjOptions,updateSjOptions:this.props.updateSjOptions}))}}]),t}(r.a.Component),bt=Object(c.b)((function(e){return{locusList:ke(e),sjOptions:Ne(e),vcfOptions:Le(e),bamOptions:Pe(e)}}),(function(e){return{setLocus:function(t){e({type:"UPDATE_LOCUS",newValue:t})},setLocusList:function(t){e({type:"SET_RIGHT_SIDE_BAR_LOCUS_LIST",values:t})},updateSjOptions:function(t){e({type:"UPDATE_SJ_OPTIONS",updates:t})},updateBamOptions:function(t){e({type:"UPDATE_BAM_OPTIONS",updates:t})},updateVcfOptions:function(t){e({type:"UPDATE_VCF_OPTIONS",updates:t})}}}))(gt),Et=n(270),vt=function(e,t){var n;return function(){for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];n&&clearTimeout(n),n=setTimeout((function(){t.apply(void 0,r),n=null}),e)}};function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(n),!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jt(){var e=Object(i.a)([""]);return jt=function(){return e},e}var St={showIdeogram:!0,showNavigation:!0,showRuler:!0,showCenterGuide:!0,showCursorTrackingGuide:!0,showCommandBar:!0},wt=s.a.div(jt()),kt=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(d.a)(this,Object(f.a)(t).call(this,e))).setContainerElement=function(e){n.container=e},n.render=function(){return r.a.createElement(wt,null,r.a.createElement("div",{ref:n.setContainerElement}))},n.shouldComponentUpdate=function(e){if(!n.container)return!1;e.locus&&e.locus!==n.props.locus&&n.browser.search(e.locus);var t=e.tracks.reduce((function(e,t){return yt(Object(j.a)({},t.name,t),e)}),{});console.log("IGV.nextProps:",e);var a=!0,r=!1,l=void 0;try{for(var o,c=n.props.tracks[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var i=o.value,s=t[i.name];if(s)(e.sjOptions!==n.props.sjOptions&&["merged","wig","junctions"].includes(i.type)||e.vcfOptions!==n.props.vcfOptions&&"variant"===i.type||e.bamOptions!==n.props.bamOptions&&"alignment"===i.type)&&(n.ignoreNextTrackRemovedEvent=!0,n.browser.removeTrackByName(i.name),n.browser.loadTrack(s)),delete t[i.name];else try{n.ignoreNextTrackRemovedEvent=!0,n.browser.removeTrackByName(i.name)}catch(d){console.warn("Unable to remove track",i.name,d)}}}catch(f){r=!0,l=f}finally{try{a||null==c.return||c.return()}finally{if(r)throw l}}for(var u=0,p=Object.values(t);u<p.length;u++){var m=p[u];try{n.browser.loadTrack(m)}catch(d){console.warn("Unable to add track",m.name,d)}}return!1},n.container=null,n.browser=null,n.ignoreNextTrackRemovedEvent=!1,n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(Ee.a)(be.a.mark((function e(){var t,n,a=this;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.container){e.next=2;break}return e.abrupt("return");case 2:return t=yt({},St,{locus:this.props.locus,genome:this.props.genome,tracks:this.props.tracks}),e.next=5,new Promise((function(e){"undefined"!==typeof gapi&&gapi.load("client:auth2",(function(){gapi.client.load("storage","v1",(function(){gapi.client.init({clientId:"61200892608-qphtf65o323setqdcfj4hnf601mmetvs.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/devstorage.read_only",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/storage/v1/rest"]}),e()}))}))}));case 5:return e.next=7,ve();case 7:return e.next=9,Oe();case 9:n=e.sent,this.props.userChangedHandler(n),Et.a.createBrowser(this.container,t).then((function(e){a.browser=e,a.props.locusChangedHandler&&a.browser.on("locuschange",vt(300,a.props.locusChangedHandler)),a.props.trackRemovedHandler&&a.browser.on("trackremoved",(function(e){a.ignoreNextTrackRemovedEvent||a.props.trackRemovedHandler(e),a.ignoreNextTrackRemovedEvent=!1}))}));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),t}(r.a.Component),Ct=Object(c.b)((function(e){return{genome:Ae(e),locus:we(e),tracks:Re(e),sjOptions:Ne(e),vcfOptions:Le(e),bamOptions:Pe(e)}}),(function(e){return{locusChangedHandler:function(t){var n=t.label.replace(/,/g,"");e({type:"UPDATE_LOCUS",newValue:n})},userChangedHandler:function(t){e({type:"UPDATE_USER",updates:{googleUserEmail:t}})},trackRemovedHandler:function(t){e({type:"REMOVE_SELECTED_SAMPLE_NAMES",values:[t.name]})}}}))(kt);function At(){var e=Object(i.a)(["\n  text-align: right;\n  margin: 70px 70px 0px 0px;\n  color: #999;\n"]);return At=function(){return e},e}var Tt=s.a.div(At()),xt=function(e){function t(){return Object(p.a)(this,t),Object(d.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.props.user.googleUserEmail?r.a.createElement(Tt,null,"Signed in to Google Buckets as ",r.a.createElement("b",null,this.props.user.googleUserEmail)):r.a.createElement(Tt,null)}}]),t}(r.a.Component),Nt=Object(c.b)((function(e){return{user:Be(e)}}))(xt);function Lt(){var e=Object(i.a)(["\n  padding: 10px 20px;\n"]);return Lt=function(){return e},e}var Pt=s.a.div(Lt()),Bt=function(){return r.a.createElement(Pt,null,r.a.createElement(u.a,null,r.a.createElement(u.a.Row,null,r.a.createElement(u.a.Column,{width:2,style:{minWidth:"".concat(210,"px")}},r.a.createElement(lt,null)),r.a.createElement(u.a.Column,{style:{minWidth:"800px",width:"calc(100% - ".concat(420,"px)")}},r.a.createElement(Ct,null),r.a.createElement(Nt,null)),r.a.createElement(u.a.Column,{width:2,style:{minWidth:"".concat(210,"px")}},r.a.createElement(bt,null)))))},_t=n(54);function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dt=Object(_t.c)(Object.assign({genome:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},locus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case e:return void 0===r.newValue?(console.error("Invalid ".concat(e," action: action.newValue is undefined: "),r),a):(n&&console.log("singleValueReducer: applying action: ",r,"State changing from ",a," to ",r.newValue),r.newValue);default:return a}};return a}("UPDATE_LOCUS",""),rightSideBarLocusList:T("RIGHT_SIDE_BAR_LOCUS_LIST"),leftSideBarLocusList:T("LEFT_SIDE_BAR_LOCUS_LIST"),samplesInCategories:function(e,t){return t&&t.categoryName&&t.samples?e.map((function(e){if(e.categoryName!==t.categoryName)return e;var n;switch(t.type){case"SET_SAMPLES":n=Object(w.a)(t.samples);break;case"ADD_SAMPLES":n=[].concat(Object(w.a)(e.samples),Object(w.a)(t.samples));break;default:n=e.samples}return Rt({},e,{samples:n})})):e||[]},selectedSampleNamesByCategoryName:function(e,t){if(!t||!t.categoryName||!Array.isArray(t.selectedSampleNames))return e||{};var n=e[t.categoryName]||[];switch(t.type){case"SET_SELECTED_SAMPLE_NAMES":case"ADD_SELECTED_SAMPLE_NAMES":case"REMOVE_SELECTED_SAMPLE_NAMES":var a;if("SET_SELECTED_SAMPLE_NAMES"===t.type)a=Object(w.a)(t.selectedSampleNames);else if("ADD_SELECTED_SAMPLE_NAMES"===t.type)a=[].concat(Object(w.a)(n),Object(w.a)(t.selectedSampleNames));else{var r=t.selectedSampleNames;a=n.filter((function(e){return!r.includes(e)}))}return Rt({},e,Object(j.a)({},t.categoryName,a))}return e},sjOptions:A("UPDATE_SJ_OPTIONS"),vcfOptions:A("UPDATE_VCF_OPTIONS"),bamOptions:A("UPDATE_BAM_OPTIONS"),user:A("UPDATE_USER")},x)),It=n(272),Ut=n(173),Vt=n.n(Ut),Jt=function(e){try{var t=localStorage.getItem(e);if(null===t)return;return JSON.parse(t)}catch(n){return}};function Ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(n),!0).forEach((function(t){Object(j.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gt=qt({genome:"hg38",locus:"chr15:92,835,700-93,031,800",sjOptions:{trackHeight:170,showCoverage:!0,showJunctions:!0,hideAnnotated:!1,hideUnannotated:!1,colorBy:"strand",minUniquelyMappedReads:1,minTotalReads:1,maxFractionMultiMappedReads:1,minSplicedAlignmentOverhang:0,thicknessBasedOn:"numUniqueReads",bounceHeightBasedOn:"random",labelUniqueReadCount:!0,labelMultiMappedReadCount:!0,labelTotalReadCount:!1,labelMotif:!0,labelAnnotatedJunction:!1,labelAnnotatedJunctionValue:" [A]"},vcfOptions:{displayMode:"EXPANDED"},bamOptions:{trackHeight:200,showSoftClips:!0,colorBy:"strand"}},window.IGV_SETTINGS||{}),Ft=["locus","selectedSampleNamesByCategoryName","sjOptions","vcfOptions","bamOptions"],zt=["samplesInCategories","leftSideBarLocusList","rightSideBarLocusList"],Wt=Object(_t.d)(Object(_t.a)(It.a,(function(e){return function(t){return function(n){var a=t(n),r=e.getState();zt.forEach((function(e){!function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(a){}}(e,r[e])}));var l=Object.keys(r).filter((function(e){return Ft.includes(e)})).reduce((function(e,t){return qt({},e,Object(j.a)({},t,r[t]))}),{});return window.location.hash="#".concat(Vt.a.stringify(l)),a}}}))),Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gt;return zt.forEach((function(e){var n=Jt(e);void 0!==n&&(t[e]=n)})),t=qt({},t,{},Vt.a.parse(window.location.hash.replace(/^#/,""))),console.log("Initializing store to:",t),Object(_t.e)(e,t,Wt)};var Yt=function(){return r.a.createElement(c.a,{store:Kt(Dt)},r.a.createElement(Bt,null))};o.a.render(r.a.createElement(Yt,null),document.getElementById("root"))}},[[284,1,2]]]);
//# sourceMappingURL=main.b68ef3ce.chunk.js.map