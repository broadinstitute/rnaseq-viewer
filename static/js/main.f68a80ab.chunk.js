(this.webpackJsonprnaseq_viewer=this.webpackJsonprnaseq_viewer||[]).push([[0],{319:function(e,t,n){e.exports=n(577)},324:function(e,t,n){},577:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(56),c=n.n(o),l=(n(324),n(28)),i=n(13),s=n(14),u=n(598),d=n(11),p=n(12),m=n(24),g=n(25),f=n(26),h=n(578),b=n(595),E=n(77);function v(){var e=Object(i.a)(["\n  display: inline;\n  width: 50px;\n  margin-left: 5px;\n  padding-left: 5px;\n"]);return v=function(){return e},e}function y(){var e=Object(i.a)(["\n  margin: 10px 0px; \n"]);return y=function(){return e},e}function w(){var e=Object(i.a)(["\n  padding-top: 3px;\n"]);return w=function(){return e},e}function S(){var e=Object(i.a)(["\n  margin-top: 5px !important;\n"]);return S=function(){return e},e}function O(){var e=Object(i.a)(["\n  opacity: 0.95;\n"]);return O=function(){return e},e}function k(){var e=Object(i.a)([" \n  display: inline-block;\n  margin: 12px 0px 0px 0px !important;\n"]);return k=function(){return e},e}var j=s.a.h3(k()),N=Object(s.a)(b.a)(O()),x=Object(s.a)(E.a)(S()),R=s.a.div(w()),T=Object(s.a)(R)(y()),C=s.a.input(v()),A=n(32),_=n(27),L=n(579),M=n(284);function D(){var e=Object(i.a)(["\n  padding: 0px !important;\n  div {\n    overflow-y: visible !important;\n  }\n"]);return D=function(){return e},e}function I(){var e=Object(i.a)(["\n  display: inline-block;\n  cursor: pointer;\n  border-radius: 2px;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.1);\n  width: 10px;\n  height: 12px;\n"]);return I=function(){return e},e}function U(){var e=Object(i.a)(["\n  display: inline-block;\n  cursor: pointer;\n  border-radius: 2px;\n  padding: 1px 2px;\n  background: #fff;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.1);\n"]);return U=function(){return e},e}var B=s.a.div(U()),P=s.a.div(I()),V=Object(s.a)(b.a).attrs({flowing:!0})(D()),G=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState({color:e})},a.handleApply=function(e){a.props.colorChangedHandler(e.hex)},a.state={color:a.props.color},a}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(V,{on:"click",position:"left center",trigger:r.a.createElement(B,null,r.a.createElement(P,{style:{background:this.state.color}})),content:r.a.createElement(M.SwatchesPicker,{color:this.state.color,onChangeComplete:this.handleApply,onChange:function(t){return e.setState({color:t})}})})}}]),n}(r.a.Component),H=["GT/AG","CT/AC","GC/AG","CT/GC","AT/AC","GT/AT","non-canonical"],F=n(23),q=n(78),J=n(2),z=n.n(J),W=n(6),K=function(){var e=Object(W.a)(z.a.mark((function e(){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance();case 2:if((t=e.sent).isSignedIn.get()){e.next=6;break}return e.next=6,t.signIn();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(W.a)(z.a.mark((function e(){var t,n,a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance();case 2:return t=e.sent,n=t&&t.currentUser&&t.currentUser.get(),a=n&&n.getBasicProfile(),e.abrupt("return",a&&a.getEmail());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=Object(W.a)(z.a.mark((function e(){var t,n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance();case 2:return t=e.sent,n=t&&t.currentUser&&t.currentUser.get(),t.isSignedIn.get()||n.reloadAuthResponse(),e.abrupt("return",n.getAuthResponse().access_token);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(e){return e.locus},$=function(e){return e.rightSideBarLocusList},Z=function(e){return e.leftSideBarLocusList},ee=function(e){return e.genome},te=function(e){return e.dataTypesToShow},ne=function(e){return e.rowsInCategories},ae=function(e){return e.selectedRowNamesByCategoryName},re=function(e){return e.selectedSamplesByCategoryNameAndRowName},oe=function(e){return e.sjOptions},ce=function(e){return e.vcfOptions},le=function(e){return e.bamOptions},ie=function(e){return e.gcnvOptions},se=function(e){return e.user},ue=function(e){return e.initialSettingsUrl},de=Object(q.a)(ne,(function(e){return Object(f.a)(e.reduce((function(e,t){return t.rows.forEach((function(t){t.data&&t.data.filter((function(e){return e.type})).map((function(e){return e.type})).forEach((function(t){e.add(t)}))})),e}),new Set))})),pe=Object(q.a)(ne,(function(e){return Object(f.a)(e.reduce((function(e,t){return t.rows.forEach((function(t){if(t.data){var n=t.data.filter((function(e){return e.type})).map((function(e){return e.type}));new Set(n).size>=2&&n.forEach((function(t){e.add(t)}))}})),e}),new Set))})),me=Object(q.a)(de,pe,te,(function(e,t,n){return e.filter((function(e){return!t.includes(e)||n.includes(e)}))})),ge=Object(q.a)(ne,(function(e){return e.reduce((function(e,t){return Object(F.a)({},e,Object(A.a)({},t.categoryName,t.rows))}),{})})),fe=Object(q.a)(ae,ge,(function(e,t){return Object.entries(e).reduce((function(e,n){var a=Object(_.a)(n,2),r=a[0],o=a[1];return t[r]?Object(F.a)({},e,Object(A.a)({},r,t[r].filter((function(e){return o.includes(e.name)})))):e}),{})})),he=Object(q.a)(fe,re,te,oe,ce,le,ie,(function(e,t,n,a,r,o,c){var l=[];return Object.entries(e).forEach((function(e){var i=Object(_.a)(e,2),s=i[0];return i[1].forEach((function(e,i){var u,d;(e.data||[]).forEach((function(p,m){if(n.includes(p.type))if("gcnv_bed"===p.type)console.log("Adding ".concat(p.url," track #")),l.push({type:"gcnv",format:"gcnv",name:"".concat(e.name," ").concat(p.label||""),url:p.url,indexURL:"".concat(p.url,".tbi"),height:c.trackHeight,min:c.trackMin,max:c.trackMax,autoscale:c.autoscale,highlightSamples:(((t[s]||{}).selectedSamples||{})[e.name]||[]).reduce((function(n,a){return n[a]=((((t[s]||{}).sampleSettings||{})[e.name]||{})[a]||{}).color||"blue",n}),{}),onlyHandleClicksForHighlightedSamples:c.onlyHandleClicksForHighlightedSamples,oauthToken:X,order:100*i+m,rowName:e.name,categoryName:s});else if("junctions"===p.type){if(u)return void console.error('More than one "junctions" track found in row',e);u={type:"spliceJunctions",format:"bed",url:p.url,indexURL:"".concat(p.url,".tbi"),oauthToken:X,order:10*i,name:e.name,height:a.trackHeight,minUniquelyMappedReads:a.minUniquelyMappedReads,minTotalReads:a.minTotalReads,maxFractionMultiMappedReads:a.maxFractionMultiMappedReads,minSplicedAlignmentOverhang:a.minSplicedAlignmentOverhang,thicknessBasedOn:a.thicknessBasedOn,bounceHeightBasedOn:a.bounceHeightBasedOn,colorBy:a.colorBy,colorByNumReadsThreshold:void 0!==a.colorByNumReadsThreshold?a.colorByNumReadsThreshold:5,hideStrand:a.showOnlyPlusStrand?"-":a.showOnlyMinusStrand?"+":void 0,labelUniqueReadCount:a.labelUniqueReadCount,labelMultiMappedReadCount:a.labelMultiMappedReadCount,labelTotalReadCount:a.labelTotalReadCount,labelMotif:a.labelMotif,labelAnnotatedJunction:a.labelAnnotatedJunction&&a.labelAnnotatedJunctionValue,hideAnnotatedJunctions:a.hideAnnotated,hideUnannotatedJunctions:a.hideUnannotated,hideMotifs:H.filter((function(e){return a["hideMotif".concat(e)]})),rowName:e.name,categoryName:s}}else if("coverage"===p.type){if(d)return void console.error('More than one "coverage" track found in row',e);d={type:"wig",format:"bigwig",url:p.url,oauthToken:X,name:e.name,height:a.trackHeight,order:10*i+m,rowName:e.name,categoryName:s},p.url.includes("spliceai")&&(d.color=function(e){return e<.5?"rgb(180,180,180)":e<.8?"rgb(180,180,0)":"rgb(200,0,0)"})}else["bed","gff3","gtf","genePred","genePredExt","peaks","narrowPeak","broadPeak","bigBed","bedpe"].includes(p.type)?(console.log("Adding ".concat(p.url," track #")),l.push({type:"annotation",format:"bed",name:"".concat(e.name," ").concat(p.label||""),url:p.url,indexURL:"".concat(p.url,".tbi"),height:c.trackHeight})):("vcf"===p.type||p.url.includes(".vcf"))&&n.includes("vcf")?(console.log("Adding ".concat(p.url," track #")),l.push({type:"variant",format:"vcf",url:p.url,indexURL:"".concat(p.url,".tbi"),indexed:!0,name:"".concat(e.name," ").concat(p.label||"vcf"),displayMode:r.displayMode,oauthToken:X,order:100*i+m,rowName:e.name,categoryName:s})):("alignment"===p.type||p.url.includes(".bam")||p.url.includes(".cram"))&&(console.log("Adding ".concat(p.url," track #")),l.push({type:"alignment",url:p.url,indexed:!0,name:"".concat(e.name," ").concat(p.label||"bam"),height:o.trackHeight,colorBy:o.colorBy,viewAsPairs:o.viewAsPairs,showSoftClips:o.showSoftClips,oauthToken:X,order:100*i+m,rowName:e.name,categoryName:s}));else console.log("Skipping hidden track: ".concat(p.url))})),d&&u?(console.log("Adding ".concat(u.url," & ").concat(d.url," track")),l.push({type:"merged",name:u.name,height:a.trackHeight,tracks:[d,u],order:10*i+2,rowName:e.name,categoryName:s})):u?(console.log("Adding ".concat(u.url," track")),l.push(u)):d&&(console.log("Adding ".concat(d.url," track")),l.push(d))}))})),l.push({name:"Gencode v32 Genes",format:"refgene",url:"gs://tgg-viewer/ref/GRCh38/gencode_v32/gencode_v32_knownGene.sorted.txt.gz",indexURL:"gs://tgg-viewer/ref/GRCh38/gencode_v32/gencode_v32_knownGene.sorted.txt.gz.tbi",indexed:!0,searchable:!0,height:350,visibilityWindow:-1,displayMode:"EXPANDED",order:1000001,color:"rgb(76,171,225)",oauthToken:X}),l}));function be(){var e=Object(i.a)(["\n  word-wrap: break-word;\n  word-break: break-all;  \n  white-space: normal;\n"]);return be=function(){return e},e}function Ee(){var e=Object(i.a)(["\n  padding: 0px !important;\n  box-shadow: none !important;\n"]);return Ee=function(){return e},e}function ve(){var e=Object(i.a)(["\n  margin: 10px 0px 8px 0px;\n  font-style: italic;\n"]);return ve=function(){return e},e}var ye=s.a.span(ve()),we=Object(s.a)(L.a).attrs({basic:!0,icon:!0})(Ee()),Se=s.a.span(be()),Oe=function(e){var t=e.categoryName,n=e.rowName,a=e.sample,o=e.sampleSettings,c=e.hideSample,l=e.updateSampleSettings,i=e.numSelectedSamplesInRow;return r.a.createElement("div",{style:{whiteSpace:"nowrap"}},r.a.createElement(we,{onClick:function(){return c(t,n,a,i)}},r.a.createElement(E.a,{name:"delete"})),r.a.createElement(Se,null,a),r.a.createElement("span",{style:{marginLeft:"8px"}},r.a.createElement(G,{key:o.color,color:o.color||"blue",colorChangedHandler:function(e){return l(t,n,a,{color:e})}})))},ke=Object(l.b)((function(e){return{selectedSamplesByCategoryNameAndRowName:re(e)}}),(function(e){return{updateGcnvOptions:function(t){e({type:"UPDATE_GCNV_OPTIONS",updates:t})},hideRow:function(t,n){e({type:"REMOVE_SELECTED_ROW_NAMES",categoryName:t,selectedRowNames:[n]})},hideSample:function(t,n,a,r){r<=1&&e({type:"REMOVE_SELECTED_ROW_NAMES",categoryName:t,selectedRowNames:[n]}),e({type:"REMOVE_SELECTED_SAMPLES",categoryName:t,selectedSamplesByRowName:Object(A.a)({},n,[a])})},updateSampleSettings:function(t,n,a,r){e({type:"UPDATE_SAMPLE_SETTINGS",categoryName:t,sampleSettingsByRowNameAndSampleName:Object(A.a)({},n,Object(A.a)({},a,r))})}}}))((function(e){var t=e.selectedSamplesByCategoryNameAndRowName,n=e.hideRow,a=e.hideSample,o=e.updateSampleSettings,c=[];return Object.entries(t).forEach((function(e){var t=Object(_.a)(e,2),l=t[0],i=t[1];Object.entries(i.selectedSamples||{}).forEach((function(e){var t=Object(_.a)(e,2),s=t[0],u=t[1];c.push(r.a.createElement("div",{key:"".concat(l,"!!").concat(s)},r.a.createElement("div",{style:{whiteSpace:"nowrap",margin:"15px 0px 7px 0px"}},r.a.createElement(ye,null,"".concat(l,": ").concat(s))),u.map((function(e){return r.a.createElement(Oe,{key:e,categoryName:l,rowName:s,sample:e,sampleSettings:((i.sampleSettings||{})[s]||{})[e]||{},hideRow:n,hideSample:a,updateSampleSettings:o,numSelectedSamplesInRow:u.length})}))))}))})),c.length>0?c:null})),je=n(593),Ne=n(592),xe=n(594),Re=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case e:return void 0===r.newValue?(console.error("Invalid ".concat(e," action: action.newValue is undefined: "),r),a):(n&&console.log("singleValueReducer: applying action: ",r,"State changing from ",a," to ",r.newValue),r.newValue);default:return a}};return a},Te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case e:if(void 0===r.updates)return console.error("Invalid ".concat(e," action: action.updates is undefined: "),r),a;var o=Object(F.a)({},a,{},r.updates);return n&&console.log("singleObjectReducer: applying action: ",r,"State changing from ",a," to ",o),o;default:return a}};return a},Ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case"SET_".concat(e):case"ADD_".concat(e):case"REMOVE_".concat(e):if(!Array.isArray(r.values))return console.error("Invalid ".concat(r.type," action: action.values is undefined or not an array: "),r),a;var o;if(r.type==="SET_".concat(e))o=Object(f.a)(r.values);else if(r.type==="ADD_".concat(e))o=[].concat(Object(f.a)(a),Object(f.a)(r.values));else{var c=r.values;o=a.filter((function(e){return!c.includes(e)}))}return n&&console.log("createArrayReducer: applying action: ",r,"State changing from ",a," to ",o),o;default:return a}};return a},Ae={modals:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,o=arguments.length>1?arguments[1]:void 0;if(!o)return r;switch(o.type){case e:if(void 0===o.updatesById)return console.error("Invalid ".concat(e," action. action.updatesById is undefined: "),o),r;var c=o.updatesById;if(t){if(!(t in c))return r;c=c[t]}var l=Object(F.a)({},r);return Object.entries(c).forEach((function(e){var t=Object(_.a)(e,2),n=t[0],a=t[1];null==a?delete l[n]:l[n]?l[n]=Object(F.a)({},l[n],{},a):l[n]=Object(F.a)({},a)})),a&&console.log("objectsByIdReducer: applying action: ",o,"State changing from: ",r," to ",l),l;default:return r}};return r}("UPDATE_MODAL_STATE")},_e=function(e,t){return e.modals[t]&&e.modals[t].open};function Le(){var e=Object(i.a)(["\n  margin-left: 10px !important;\n  width: 100px;\n"]);return Le=function(){return e},e}function Me(){var e=Object(i.a)(["\n  float: right;\n  padding: 0px 20px 20px 20px;\n"]);return Me=function(){return e},e}function De(){var e=Object(i.a)(["\n  &.ui.button.basic {\n    white-space: nowrap;\n    border: none;\n    padding: ",";\n    color: "," !important;\n    text-decoration: none;\n    font-weight: ",';\n    box-shadow: none !important;\n    user-select: auto;\n    \n    &:hover, &:focus, &:active {\n      color: #1e70bf !important;\n      background: transparent !important;\n    }\n    \n    &[class*="right labeled"].icon {\n      padding-left: 0 !important;\n      padding-right: 2.1em !important;\n      \n      > .icon {\n        background-color: initial;\n      }\n    }\n  }\n']);return De=function(){return e},e}var Ie=Object(s.a)(L.a).attrs({basic:!0})(De(),(function(e){return e.padding||0}),(function(e){return e.color||"#4183C4"}),(function(e){return e.fontWeight||"inherit"})),Ue=s.a.div(Me()),Be=Object(s.a)(L.a)(Le()),Pe=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(d.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleClose=function(){var t=!0;e.props.handleClose&&(t=e.props.handleClose()),t&&e.props.close()},e.handleSave=function(){var t=!0;e.props.handleSave&&(t=e.props.handleSave()),t&&e.props.close()},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.trigger?r.a.cloneElement(this.props.trigger,{onClick:this.props.open}):null;return r.a.createElement(xe.a,{open:this.props.isOpen,trigger:e,onClose:this.handleClose,size:this.props.size},r.a.createElement(xe.a.Header,null,this.props.title,r.a.createElement(Ie,{floated:"right",onClick:this.handleClose,icon:r.a.createElement(E.a,{name:"remove",color:"grey"})})),r.a.createElement(xe.a.Content,null,this.props.children),r.a.createElement(Ue,null,r.a.createElement(Be,{tabIndex:0,onClick:this.handleClose,type:"button"},"Cancel"),r.a.createElement(Be,{tabIndex:0,onClick:this.handleSave,type:"submit",color:"blue"},this.props.handleSave?"Save":"Ok")))}}]),n}(r.a.PureComponent);Pe.defaultProps={size:"small"};var Ve=Object(l.b)((function(e,t){return{isOpen:_e(e,t.modalName)}}),(function(e,t){return{open:function(n){var a;n.preventDefault(),e((a=t.modalName,function(e){return e({type:"UPDATE_MODAL_STATE",updatesById:Object(A.a)({},a,{open:!0})})}))},close:function(){var n,a;e((n=t.modalName,a=!0,function(e,t){t().modals[n].confirmOnClose&&!a?e({type:"UPDATE_MODAL_STATE",updatesById:Object(A.a)({},n,{confirming:!0})}):e({type:"UPDATE_MODAL_STATE",updatesById:Object(A.a)({},n,{open:!1,confirming:!1,confirmOnClose:null})})}))}}}))(Pe);function Ge(){var e=Object(i.a)(["\n  cursor: pointer;\n"]);return Ge=function(){return e},e}var He=s.a.a(Ge()),Fe=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var a;Object(d.a)(this,n),(a=t.call(this,e)).render=function(){var e=a.props,t=e.locusList,n=e.name,o=e.setLocusList,c="Locus List - ".concat(n);return r.a.createElement(Ve,{title:c,size:"large",modalName:c,trigger:r.a.createElement(He,null,(t||[]).length>0?r.a.createElement("div",null,r.a.createElement("br",null),"Edit Locus List"):r.a.createElement("div",null,"Add Locus List To Side Bar")),handleSave:function(){var e=a.textAreaValue.split(/[,\s]+/).filter(Boolean);return o(e),!0}},r.a.createElement(je.a,null,r.a.createElement(je.a.Field,{control:Ne.a,style:{minHeight:"300px"},defaultValue:a.textAreaValue,onKeyUp:function(e){a.textAreaValue=e.target.value},placeholder:"Enter genomic positions, intervals, and/or gene names separated by commas, spaces, or new lines.  These can be in any format recognized by the IGV search bar.  For example: DMD, ENST00000589830, chr1:55516888, 2:152341851-152591002"})),r.a.createElement("br",null),r.a.createElement("b",null,r.a.createElement("i",null,"NOTE:"))," This locus list will be saved across page refreshes in this browser, \xa0 but will not be recorded in the page url like other settings.\xa0 Sharing or bookmarking this page won't include the contents of this list.")};var o=a.props.locusList;return a.textAreaValue=(o||[]).join("\n"),a}return n}(r.a.PureComponent),qe=function(e){var t=e.name,n=e.locusList,a=e.setLocus,o=e.setLocusList;return r.a.createElement("div",null,n.map((function(e,t){return r.a.createElement("div",{key:"".concat(e," ").concat(t)},t+1,". \xa0 ",r.a.createElement(He,{onClick:function(){a(e)}},e))})),r.a.createElement(Fe,{name:t,locusList:n,setLocusList:o}))},Je=n(596);function ze(){var e=Object(i.a)(["\n"]);return ze=function(){return e},e}function We(){var e=Object(i.a)(["\n  font-family: monospace;\n  background-color: #F7F7F7;\n"]);return We=function(){return e},e}function Ke(){var e=Object(i.a)(["\n  font-family: monospace;\n  margin: 20px 30px;\n  padding: 10px;\n  background-color: #F7F7F7;\n  white-space: nowrap;\n"]);return Ke=function(){return e},e}function Ye(){var e=Object(i.a)(["\n  cursor: pointer;\n  padding: 10px 10px 10px 0px;\n  display: inline-block;\n"]);return Ye=function(){return e},e}var Xe=s.a.a(Ye()),Qe=s.a.div(Ke()),$e=s.a.span(We()),Ze=Object(s.a)(b.a).attrs({position:"right center"})(ze()),et={".bigWig":"coverage",".bw":"coverage",".junctions.bed":"junctions",".spliceJunctions.bed":"junctions",".junctions.bed.gz":"junctions",".spliceJunctions.bed.gz":"junctions",".bam":"bam",".cram":"bam",".vcf":"vcf",".vcf.gz":"vcf",".wig":"wig",".bedGraph":"wig",".bed":"annotation",".bed.gz":"annotation",".gff3":"annotation",".gtf":"annotation",".gtf.gz":"annotation",".genePred":"annotation",".bigBed":"annotation"},tt=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).getInitialState=function(){return{textAreaValue:"",warningMessage:null,errorMessage:null}},a.parseTextAreaValueToRows=function(e){if(!e.trim())return{rows:[],errorMessage:null};var t=null,n=[],a=e.split(/[,\s]+/).filter(Boolean).reduce((function(e,t){var a=t.split("/"),r=a[a.length-1],o=Object.keys(et).filter((function(e){return r.endsWith(e)}));if(0===o.length)n.push(t);else{var c=o[0],l=r.replace(c,"");e[l]||(e[l]={data:[]}),e[l].name=l,e[l].data.push({type:et[c],url:t})}return e}),{});return n.length>0&&(t="These paths have file suffixes that are not recognized: ".concat(n.join(", "))),{newRows:Object.values(a),errorMessage:t}},a.handleModalSave=function(){var e=a.props.addRows,t=a.state.textAreaValue,n=a.parseTextAreaValueToRows(t),r=n.newRows,o=n.errorMessage;return o?(a.setState({errorMessage:o}),!1):(e(r),!0)},a.handleModalClose=function(){return a.setState(a.getInitialState()),!0},a.render=function(){var e=a.props,t=e.title,n=e.trigger,o=a.state,c=o.textAreaValue,l=o.warningMessage,i=o.errorMessage,s="".concat(t," Rows");return r.a.createElement(Ve,{title:s,size:"large",modalName:s,trigger:n,handleSave:a.handleModalSave,handleClose:a.handleModalClose},r.a.createElement("div",null,"Enter google bucket path(s) for data files: \xa0",r.a.createElement(Ze,{trigger:r.a.createElement(E.a,{style:{margin:"10px 0px"},name:"question circle outline"}),content:r.a.createElement("div",null,r.a.createElement("b",null,"Format"),":",r.a.createElement("br",null),r.a.createElement("br",null),"Enter a list of data file paths separated by commas, spaces or new lines. ",r.a.createElement("br",null),r.a.createElement("br",null),"Example:",r.a.createElement("br",null),r.a.createElement(Qe,null,"gs://your-bucket/dir/sample-name1.bigWig ",r.a.createElement("br",null),"gs://your-bucket/dir/sample2.bigWig ",r.a.createElement("br",null),"gs://your-bucket/dir/sample-name1.junctions.bed.gz ",r.a.createElement("br",null),"gs://your-bucket/dir/sample-name1.bam ",r.a.createElement("br",null),"gs://your-bucket/dir/sample2.junctions.bed.gz ",r.a.createElement("br",null)),"Paths that have the same prefix (eg. ",r.a.createElement($e,null,"gs://your-bucket/dir/sample-name1")," above) will be interpreted as different data types for same sample.",r.a.createElement("br",null),"The order of paths doesn't matter.",r.a.createElement("br",null),r.a.createElement("br",null),"IGV.js track types will be inferred from file extensions as follows:",r.a.createElement("br",null),r.a.createElement("div",{style:{margin:"10px 30px"}},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement("b",null," File Extension ")," "),r.a.createElement("td",null," ",r.a.createElement("b",null,"IGV.js Track Type")," ")),Object.entries(et).filter((function(e){return!Object(_.a)(e,1)[0].endsWith(".bed")})).map((function(e,t){var n=Object(_.a)(e,2),a=n[0],o=n[1];return r.a.createElement("tr",{key:"".concat(a," ").concat(o," ").concat(t)},r.a.createElement("td",null,a),r.a.createElement("td",null,o))}))))))}),r.a.createElement("br",null)),r.a.createElement(je.a,null,r.a.createElement(Ne.a,{style:{minHeight:"300px"},value:c,onChange:function(e){a.setState({textAreaValue:e.target.value})},placeholder:"Enter file path(s)"})),r.a.createElement("br",null),r.a.createElement("b",null,r.a.createElement("i",null,"NOTE:"))," These paths will be saved across page refreshes in this browser, but will not be recorded in the page url like other settings. Sharing or bookmarking this page won't include these paths.",l&&r.a.createElement(Je.a,{color:"yellow"},l),i&&r.a.createElement(Je.a,{color:"red"},i))},a.state=a.getInitialState(),a}return n}(r.a.PureComponent),nt=Object(l.b)(null,(function(e){return{addRows:function(t,n){e({type:"ADD_ROWS",categoryName:t,rows:n})}}}))((function(e){var t=e.category,n=e.addRows;return r.a.createElement("div",null,r.a.createElement(tt,{title:"Add ".concat(t.categoryName),categoryName:t.categoryName,addRows:function(e){return n(t.categoryName,e)},trigger:r.a.createElement(Xe,null,"Add ",0===t.rows.length?t.categoryName:null," Rows")}))})),at=n(59),rt=n.n(at),ot=n(597);function ct(){var e=Object(i.a)(["\n  margin: 13px 0px; \n  .prompt {\n    border-radius: 2px !important;\n    width: 155px;\n  }\n  \n  input {\n      max-width: none !important;\n      padding: 5px !important;\n  }\n  \n  .input {\n    -webkit-box-shadow: 0px 0px 1px 0px rgba(0,0,0) !important;\n    -moz-box-shadow: 0px 0px 1px 0px rgba(0,0,0) !important;\n    box-shadow: 0px 0px 1px 0px rgba(0,0,0) !important;\n  }\n  \n  .results {\n      min-width: max-content;\n  }\n\n  .red-text {\n    .title {\n      color: #CC0000 !important;\n      font-weight: 500 !important;\n     }\n  }\n"]);return ct=function(){return e},e}function lt(){var e=Object(i.a)(["\n  margin: 5px 0px;\n"]);return lt=function(){return e},e}var it=s.a.div(lt()),st=Object(s.a)(ot.a)(ct()),ut={isLoading:!1,results:[],value:""},dt=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).handleResultSelect=function(t,n){var a=n.result;e.setState({value:""});var r=a.id.split("!!"),o=r[0],c=r[1],l=r[2],i=r[3];i?(("ADD"===o||e.getSelectedSamplesForRow(c,l).length<=1)&&e.props.updateSelectedRowNames(o,c,[l]),e.props.updateSelectedSamples(o,c,Object(A.a)({},l,[i]))):e.props.updateSelectedRowNames(o,c,[l])},e.getSelectedRowNames=function(t){return e.props.selectedRowNamesByCategoryName[t]||[]},e.isRowSelected=function(t,n){return e.getSelectedRowNames(t).includes(n)},e.getSelectedSamplesByRowName=function(t){return(e.props.selectedSamplesByCategoryNameAndRowName[t]||{}).selectedSamples||{}},e.getSelectedSamplesForRow=function(t,n){return e.getSelectedSamplesByRowName(t)[n]||[]},e.isSampleSelected=function(t,n,a){return e.getSelectedSamplesForRow(t,n).includes(a)},e.addRowsToHide=function(t,n){return Object.keys(e.props.selectedRowNamesByCategoryName).forEach((function(a){n>=12||e.props.selectedRowNamesByCategoryName[a].forEach((function(e){if(!(n>=12)){t[a]=t[a]||[];var r={action:"REMOVE",categoryName:a,rowName:e};rt.a.some(t[a],r)||(t[a].push(r),n+=1)}}))})),n},e.addSamplesToHide=function(t,n){return Object.keys(e.props.selectedSamplesByCategoryNameAndRowName).forEach((function(a){n>=12||Object.keys(e.getSelectedSamplesByRowName(a)).forEach((function(r){n>=12||!e.isRowSelected(a,r)||e.getSelectedSamplesForRow(a,r).forEach((function(e){if(!(n>=12)){t[a]=t[a]||[];var o={action:"REMOVE",categoryName:a,rowName:r,sample:e};rt.a.some(t[a],o)||(t[a].push(o),n+=1)}}))}))})),n},e.addMatchingSamplesFromRow=function(t,n,a,r,o){if(!n.data)return o;var c=n.data.filter((function(e){return e.samples&&e.samples.length>0}));return c.length>1&&console.warn("Found row with multiple data items each of which has a samples array. This may behave unexpectedly if there are duplicate samples"),c.forEach((function(c){(c.samples||[]).forEach((function(c){if(!(o>=12)&&a.test(c)){r[t]=r[t]||[];var l={action:e.isRowSelected(t,n.name)&&e.isSampleSelected(t,n.name,c)?"REMOVE":"ADD",categoryName:t,rowName:n.name,sample:c};rt.a.some(r[t],l)||(r[t].push(l),o+=1)}}))})),o},e.addMatchingRowsAndSamples=function(t,n,a){var r={};return e.props.rowsInCategories.forEach((function(o){if(!(a>=12)){var c=o.categoryName;o.rows.forEach((function(o){if(!(a>=12)){if(t.test(o.name)){r[c]=r[c]||[],r[c].push(o),n[c]=n[c]||[];var l={action:e.isRowSelected(c,o.name)?"REMOVE":"ADD",categoryName:c,rowName:o.name};rt.a.some(n[c],l)||(n[c].push(l),a+=1)}a=e.addMatchingSamplesFromRow(c,o,t,n,a)}}))}})),Object.entries(r).forEach((function(t){var r=Object(_.a)(t,2),o=r[0],c=r[1];a>=12||(n[o]=n[o]||[],c.forEach((function(t){a>=12||(a=e.addMatchingSamplesFromRow(o,t,/.*/,n,a))})))})),a},e.handleSearchChange=function(t,n){var a=n.value;e.setState({isLoading:!0,value:a}),setTimeout((function(){if(e.state.value.length<1)return e.setState(ut);var t=new RegExp(rt.a.escapeRegExp(e.state.value),"i"),n={},a=0;t.test("Hide")&&(a=e.addRowsToHide(n,a)),(t.test("Hide")||t.test("Hide sample"))&&(a=e.addSamplesToHide(n,a)),e.addMatchingRowsAndSamples(t,n,a);var r=e.props.rowsInCategories.length>1,o=r?{}:[];return Object.keys(n).forEach((function(e){r&&(o[e]={name:e,results:[]});var t=r?o[e].results:o;n[e].forEach((function(n){if(n.sample){var a="ADD"===n.action?"Show sample":"Hide sample";t.push({id:"".concat(n.action,"!!").concat(e,"!!").concat(n.rowName,"!!").concat(n.sample),title:"".concat(a," ").concat(n.rowName," > ").concat(n.sample),className:"ADD"!==n.action&&"red-text"})}else{var r="ADD"===n.action?"Show":"Hide";t.push({id:"".concat(n.action,"!!").concat(e,"!!").concat(n.rowName),title:"".concat(r," ").concat(n.rowName),className:"ADD"!==n.action&&"red-text"})}}))})),e.setState({isLoading:!1,results:o})}),1)},e.render=function(){var t=e.state,n=t.isLoading,a=t.value,o=t.results;return r.a.createElement(it,null,r.a.createElement(j,null,"Select Data"),r.a.createElement(st,{category:e.props.rowsInCategories.length>1,loading:n,onResultSelect:e.handleResultSelect,onSearchChange:e.handleSearchChange,placeholder:"Select data",results:o,value:a}))},e.state=ut,e}return n}(r.a.Component),pt=Object(l.b)((function(e){return{rowsInCategories:ne(e),selectedRowNamesByCategoryName:ae(e),selectedSamplesByCategoryNameAndRowName:re(e)}}),(function(e){return{updateSelectedRowNames:function(t,n,a){e({type:"".concat(t,"_SELECTED_ROW_NAMES"),categoryName:n,selectedRowNames:a})},updateSelectedSamples:function(t,n,a){e({type:"".concat(t,"_SELECTED_SAMPLES"),categoryName:n,selectedSamplesByRowName:a})}}}))(dt);function mt(){var e=Object(i.a)(["\n  white-space: nowrap;\n"]);return mt=function(){return e},e}function gt(){var e=Object(i.a)(["\n  padding-left: 5px;\n  white-space: nowrap;\n"]);return gt=function(){return e},e}function ft(){var e=Object(i.a)(["\n  cursor: pointer;\n  padding: 10px 10px 10px 0px;\n  display: inline-block;\n"]);return ft=function(){return e},e}function ht(){var e=Object(i.a)(["\n  color: ",";\n  border: 3px solid ",";\n  display: inline-block;\n  width: 6px;\n  border-radius: 1px;\n  height: 10px;\n  cursor: pointer;\n"]);return ht=function(){return e},e}function bt(){var e=Object(i.a)(["\n  display: inline-block;\n  margin: 0px 0px 0px 15px;\n  color: #999;\n  white-space: nowrap;\n"]);return bt=function(){return e},e}var Et=s.a.div(bt()),vt=s.a.div.attrs({name:"stop"})(ht(),(function(e){return e.color}),(function(e){return e.color})),yt={junctions:"#B0B0EC",coverage:"#B5D29A",alignment:"#5DB6E9",vcf:"#E6A01B",gcnv_bed:"#AA3333",default:"#000000"},wt={coverage:"Coverage",junctions:"Splice Junctions",vcf:"Variants (VCF)",gcnv_bed:"gCNV",alignment:"Reads (BAM)",bed:"Annotations (BED)",gff3:"Annotations (GFF3)",gtf:"Annotations (GTF)",genePred:"Annotations (genePred)",bigBed:"Annotations (bigBed)"},St=s.a.a(ft()),Ot=s.a.span(gt()),kt=s.a.div(mt()),jt=function(e){var t=e.dataTypesUsersCanToggle,n=e.enabledDataTypes,a=e.updateDataTypesToShow;if(t.length<2)return null;var o=Object(f.a)(t).map((function(e,t){var o=wt[e]||e.charAt(0).toUpperCase()+e.slice(1);return r.a.createElement(R,{key:"".concat(e," ").concat(t)},r.a.createElement(h.a,{label:"".concat(o.toLocaleString()),checked:n.includes(e),onChange:function(t,n){return a(n.checked?"ADD":"REMOVE",[e])}}),r.a.createElement(Ot,null,r.a.createElement(b.a,{content:"This stripe marks rows that have ".concat(o.toLowerCase()," data. Use the checkbox on the left to show or hide ").concat(o.toLowerCase()," tracks for all rows selected below."),position:"right center",trigger:r.a.createElement(vt,{color:yt[e]||yt.default})})))}));return r.a.createElement("div",null,r.a.createElement(j,null,"Show Track Types"),o)},Nt=function(e){var t=e.row;return r.a.createElement(b.a,{flowing:!0,content:r.a.createElement("table",null,r.a.createElement("tbody",null,(t.data||[]).map((function(e,t){return r.a.createElement("tr",{key:"".concat(e.url," ").concat(e.type," ").concat(t)},r.a.createElement("td",{style:{paddingRight:"10px"}},r.a.createElement("b",null,e.type&&(wt[e.type]||e.type.toUpperCase()),":")),r.a.createElement("td",null,r.a.createElement(kt,null,e.url)),r.a.createElement("td",{style:{color:"gray",whiteSpace:"nowrap",paddingLeft:"15px"}},e.samples?"(".concat(e.samples.length," samples)"):null))})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("div",{style:{fontSize:"small",color:"grey",marginTop:"10px"}},"(click to copy paths)"))))),position:"right center",trigger:r.a.createElement(Ot,{onClick:function(){var e=(t.data||[]).map((function(e){return e.url})).join("\n");navigator.clipboard.writeText(e)}},(t.data||[]).map((function(e,t){return r.a.createElement(vt,{key:"".concat(e.url," ").concat(e.type," ").concat(t),color:yt[e.type]||yt.default})}))),style:{marginLeft:"2px"}})},xt=function(e){var t=e.category,n=e.updateSelectedRowNames;return r.a.createElement("div",null,r.a.createElement(j,null,t.categoryName),t.rows.length>=12&&r.a.createElement(Et,null,"(N=".concat(t.rows.length,") ")),t.rows.length>0&&r.a.createElement("div",null,r.a.createElement(St,{onClick:function(e){e.preventDefault(),n("SET",t.categoryName,[])}},"Uncheck All")))},Rt=function(e){var t=e.rowsInCategories,n=e.selectedRowNamesByCategoryName,a=e.updateSelectedRowNames;return t.map((function(e,t){return r.a.createElement("div",{key:"".concat(e.categoryName," ").concat(t)},r.a.createElement(xt,{category:e,updateSelectedRowNames:a}),e.rows.map((function(t,o){var c=n[e.categoryName]||[];return r.a.createElement(Tt,{key:"".concat(t.name," ").concat(o),row:t,categoryName:e.categoryName,selectedRowNames:c,updateSelectedRowNames:a})})),r.a.createElement(nt,{category:e}))}))},Tt=function(e){var t=e.row,n=e.categoryName,a=e.selectedRowNames,o=e.updateSelectedRowNames;return r.a.createElement(kt,null,r.a.createElement(h.a,{label:t.name,checked:a.includes(t.name),"data-row":t.name,onChange:function(e,t){return o(t.checked?"ADD":"REMOVE",n,[t["data-row"]])}}),r.a.createElement(Ct,{row:t}),r.a.createElement(Nt,{row:t}))},Ct=function(e){var t=e.row;return t.description?r.a.createElement(N,{flowing:!0,content:r.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.description}}),position:"right center",trigger:r.a.createElement(E.a,{style:{marginLeft:"10px"},name:"question circle outline"})}):null},At=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.locusList,n=e.rowsInCategories,a=e.dataTypesUsersCanToggle,o=e.enabledDataTypes,c=e.selectedRowNamesByCategoryName,l=e.setLocus,i=e.setLocusList,s=e.updateDataTypesToShow,u=e.updateSelectedRowNames;return r.a.createElement("div",null,r.a.createElement(qe,{name:"Left Side Bar",locusList:t,setLocus:l,setLocusList:i}),r.a.createElement(jt,{dataTypesUsersCanToggle:a,enabledDataTypes:o,updateDataTypesToShow:s}),r.a.createElement(pt,null),r.a.createElement(T,null,r.a.createElement(ke,null)),r.a.createElement(Rt,{rowsInCategories:n,selectedRowNamesByCategoryName:c,updateSelectedRowNames:u}))}}]),n}(r.a.PureComponent),_t=Object(l.b)((function(e){return{locusList:Z(e),rowsInCategories:ne(e),dataTypesUsersCanToggle:pe(e),enabledDataTypes:me(e),selectedRowNamesByCategoryName:ae(e)}}),(function(e){return{setLocus:function(t){e({type:"UPDATE_LOCUS",newValue:t})},setLocusList:function(t){e({type:"SET_LEFT_SIDE_BAR_LOCUS_LIST",values:t})},updateDataTypesToShow:function(t,n){e({type:"".concat(t,"_DATA_TYPES_TO_SHOW"),values:n})},updateSelectedRowNames:function(t,n,a){e({type:"".concat(t,"_SELECTED_ROW_NAMES"),categoryName:n,selectedRowNames:a})},updateSjOptions:function(t){e({type:"UPDATE_SJ_OPTIONS",updates:t})},updateVcfOptions:function(t){e({type:"UPDATE_VCF_OPTIONS",updates:t})},updateBamOptions:function(t){e({type:"UPDATE_BAM_OPTIONS",updates:t})}}}))(At),Lt={},Mt=Object(l.b)((function(e){return{bamOptions:le(e)}}),(function(e){return{updateBamOptions:function(t){e({type:"UPDATE_BAM_OPTIONS",updates:t})}}}))((function(e){var t=e.bamOptions,n=e.updateBamOptions;return r.a.createElement("div",null,r.a.createElement(j,null,"BAM Track ",r.a.createElement("br",null),"Options"),r.a.createElement("br",null),r.a.createElement(R,null,r.a.createElement(h.a,{label:"View as pairs",checked:t.viewAsPairs,onChange:function(e,t){return n({viewAsPairs:t.checked})}})),r.a.createElement(R,null,r.a.createElement(h.a,{label:"Show soft-clips",checked:t.showSoftClips,onChange:function(e,t){return n({showSoftClips:t.checked})}})),r.a.createElement(R,null,"Color by:",r.a.createElement("select",{value:t.colorBy,onChange:function(e){return n({colorBy:e.target.value})}},r.a.createElement("option",{value:"strand"},"Strand"),r.a.createElement("option",{value:"firstOfPairStrand"},"First-of-pair strand"),r.a.createElement("option",{value:"pairOrientation"},"Pair orientation"),r.a.createElement("option",{value:"fragmentLength"},"Insert size (TLEN)"),r.a.createElement("option",{value:"none"},"None"))),r.a.createElement(T,null,"Track height: ",r.a.createElement(C,{key:"track-height-".concat(t.trackHeight),type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return function(e,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode?n(Object(F.a)({},t,{},Lt)):Lt[a]=r}(e,"trackHeight",parseInt(e.target.value,10))}})," px"),r.a.createElement(T,null,r.a.createElement(L.a,{compact:!0,size:"small",onClick:function(){n(Object(F.a)({},t,{},Lt))}},"Apply")))})),Dt=Object(l.b)((function(e){return{vcfOptions:ce(e)}}),(function(e){return{updateVcfOptions:function(t){e({type:"UPDATE_VCF_OPTIONS",updates:t})}}}))((function(e){var t=e.vcfOptions,n=e.updateVcfOptions;return r.a.createElement("div",null,r.a.createElement(j,null,"VCF Track ",r.a.createElement("br",null),"Options"),r.a.createElement("br",null),r.a.createElement(R,null,"Display mode: \xa0",r.a.createElement("select",{value:t.displayMode,onChange:function(e){return n({displayMode:e.target.value})}},r.a.createElement("option",{value:"COLLAPSED"},"Collapse"),r.a.createElement("option",{value:"SQUISHED"},"Squish"),r.a.createElement("option",{value:"EXPANDED"},"Expand"))))})),It=n(590);function Ut(){var e=Object(i.a)(["\n  label {\n    margin-left: 10px;\n    margin-bottom: 10px;\n    padding-left: 1.4em !important;\n  }\n"]);return Ut=function(){return e},e}var Bt=Object(s.a)(It.a)(Ut()),Pt=function(e){var t=e.sjOptions,n=e.handleTextInput;return"strand"===t.colorBy?r.a.createElement("div",null,r.a.createElement(x,{name:"stop",style:{color:"#b0b0ec"}})," plus",r.a.createElement(x,{name:"stop",style:{color:"#ecb0b0",marginLeft:"10px"}})," minus"):"motif"===t.colorBy?r.a.createElement("div",null,r.a.createElement(x,{name:"stop",style:{color:"rgb(27,158,119)"}})," GT/AG ",r.a.createElement("br",null),r.a.createElement(x,{name:"stop",style:{color:"rgb(217,95,2)"}})," CT/AC ",r.a.createElement("br",null),r.a.createElement(x,{name:"stop",style:{color:"rgb(117,112,179)"}})," GC/AG ",r.a.createElement("br",null),r.a.createElement(x,{name:"stop",style:{color:"rgb(231,41,138)"}})," CT/GC ",r.a.createElement("br",null),r.a.createElement(x,{name:"stop",style:{color:"rgb(102,166,30)"}})," AT/AC ",r.a.createElement("br",null),r.a.createElement(x,{name:"stop",style:{color:"rgb(230,171,2)"}})," GT/AT ",r.a.createElement("br",null),r.a.createElement(x,{name:"stop",style:{color:"rgb(166,118,29)"}})," non-canonical ",r.a.createElement("br",null)):"numUniqueReads"===t.colorBy||"numReads"===t.colorBy?r.a.createElement("div",null,"# reads",r.a.createElement(x,{name:"stop",style:{color:"#AAAAAA",marginLeft:"10px"}}),"\xa0\u2264 \xa0",r.a.createElement(C,{type:"text",key:"num-reads-".concat(t.colorByNumReadsThreshold),defaultValue:void 0!==t.colorByNumReadsThreshold?t.colorByNumReadsThreshold:5,onKeyUp:function(e){return n(e,"colorByNumReadsThreshold")},style:{width:"35px"}}),"\xa0 < \xa0",r.a.createElement(x,{name:"stop",style:{color:"blue"}})):"isAnnotatedJunction"===t.colorBy?r.a.createElement("div",null,r.a.createElement(x,{name:"stop",style:{color:"#b0b0ec"}})," known junction ",r.a.createElement("br",null),r.a.createElement(x,{name:"stop",style:{color:"orange"}})," novel junction"):r.a.createElement("div",null)},Vt={},Gt=Object(l.b)((function(e){return{sjOptions:oe(e)}}),(function(e){return{updateSjOptions:function(t){e({type:"UPDATE_SJ_OPTIONS",updates:t})}}}))((function(e){var t=e.sjOptions,n=e.updateSjOptions,a=function(e,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode?n(Object(F.a)({},t,{},Vt)):Vt[a]=r};return r.a.createElement("div",null,r.a.createElement(j,null,"Junctions Track ",r.a.createElement("br",null),"Options"),r.a.createElement("br",null),r.a.createElement(R,null,"Color by:"),r.a.createElement(R,null,r.a.createElement("select",{value:t.colorBy,onChange:function(e){return n({colorBy:e.target.value})}},r.a.createElement("option",{value:"strand"},"strand"),r.a.createElement("option",{value:"motif"},"donor/acceptor motif"),r.a.createElement("option",{value:"numUniqueReads"},"# uniquely-mapped reads"),r.a.createElement("option",{value:"numReads"},"# total reads"),r.a.createElement("option",{value:"isAnnotatedJunction"},"is known junction")),r.a.createElement(Pt,{sjOptions:t,handleTextInput:a})),r.a.createElement(R,null,"Junction thickness:"),r.a.createElement(R,null,r.a.createElement("select",{value:t.thicknessBasedOn,onChange:function(e){return n({thicknessBasedOn:e.target.value})}},r.a.createElement("option",{value:"numUniqueReads"},"# uniquely-mapped reads"),r.a.createElement("option",{value:"numReads"},"# total reads"),r.a.createElement("option",{value:"isAnnotatedJunction"},"is known junction"))),r.a.createElement(R,null,"Junction bounce height:"),r.a.createElement(R,null,r.a.createElement("select",{value:t.bounceHeightBasedOn,onChange:function(e){return n({bounceHeightBasedOn:e.target.value})}},r.a.createElement("option",{value:"random"},"random"),r.a.createElement("option",{value:"distance"},"distance"),r.a.createElement("option",{value:"thickness"},"thickness"))),r.a.createElement(R,null,"Junction label:"),r.a.createElement(R,null,r.a.createElement(h.a,{label:"# uniquely-mapped",checked:t.labelUniqueReadCount,onChange:function(e,t){return n({labelUniqueReadCount:t.checked})}})),r.a.createElement(R,null,r.a.createElement(h.a,{label:"# multi-mapped",checked:t.labelMultiMappedReadCount,onChange:function(e,t){return n({labelMultiMappedReadCount:t.checked})}})),r.a.createElement(R,null,r.a.createElement(h.a,{label:"# total reads",checked:t.labelTotalReadCount,onChange:function(e,t){return n({labelTotalReadCount:t.checked})}})),r.a.createElement(R,null,r.a.createElement(h.a,{label:"donor/acceptor motif",checked:t.labelMotif,onChange:function(e,t){return n({labelMotif:t.checked})}})),r.a.createElement(R,null,r.a.createElement(h.a,{label:"known junction:",checked:t.labelAnnotatedJunction,onChange:function(e,t){return n({labelAnnotatedJunction:t.checked})}}),r.a.createElement(C,{key:"junction-label-".concat(t.labelAnnotatedJunctionValue),type:"text",defaultValue:t.labelAnnotatedJunctionValue,onKeyUp:function(e){return a(e,"labelAnnotatedJunctionValue")},style:{width:"35px"}})),r.a.createElement(j,null,"Junctions Track Filters"),r.a.createElement("br",null),r.a.createElement(R,null,"Show Strands:",r.a.createElement(Bt,{label:"both",name:"strandButton",checked:!t.showOnlyPlusStrand&&!t.showOnlyMinusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!1,showOnlyMinusStrand:!1})}}),r.a.createElement(Bt,{label:"plus",name:"strandButton",checked:t.showOnlyPlusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!0,showOnlyMinusStrand:!1})}}),r.a.createElement(Bt,{label:"minus",name:"strandButton",checked:t.showOnlyMinusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!1,showOnlyMinusStrand:!0})}})),r.a.createElement(R,null,r.a.createElement(h.a,{label:"Show known junctions",checked:!t.hideAnnotated,onChange:function(e,t){return n({hideAnnotated:!t.checked})}})),r.a.createElement(R,null,r.a.createElement(h.a,{label:"Show novel junctions",checked:!t.hideUnannotated,onChange:function(e,t){return n({hideUnannotated:!t.checked})}})),r.a.createElement("div",null,r.a.createElement(R,null,"Uniquely-mapped reads:"),"at least ",r.a.createElement(C,{key:"uniquely-mapped-reads-".concat(t.minUniquelyMappedReads),type:"text",defaultValue:t.minUniquelyMappedReads,onKeyUp:function(e){return a(e,"minUniquelyMappedReads",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(R,null,"Total reads:"),"at least ",r.a.createElement(C,{key:"total-reads-".concat(t.minTotalReads),type:"text",defaultValue:t.minTotalReads,onKeyUp:function(e){return a(e,"minTotalReads",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(R,null,"Fraction multi-mapped:",r.a.createElement(N,{inverted:!0,content:"Allows filtering of junctions where most reads that span the junction are multi-mapped reads. For example, setting this to 0.79 will hide junctions where 8 out of 10 (or more) reads that span the junction are not uniquely mapped reads.",position:"left center",on:"click",trigger:r.a.createElement(E.a,{style:{marginLeft:"8px"},name:"question circle outline"})})),"at most ",r.a.createElement(C,{key:"fraction-multi-mapped-".concat(t.maxFractionMultiMappedReads),type:"text",defaultValue:t.maxFractionMultiMappedReads,onKeyUp:function(e){return a(e,"maxFractionMultiMappedReads",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(R,null,"Splice overhang base-pairs:"),"at least ",r.a.createElement(C,{key:"spliced-alignment-overhang-".concat(t.minSplicedAlignmentOverhang),type:"text",defaultValue:t.minSplicedAlignmentOverhang,onKeyUp:function(e){return a(e,"minSplicedAlignmentOverhang",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(R,null,"Donor/Acceptor Motifs:"),H.map((function(e){return r.a.createElement(R,{key:e},r.a.createElement(h.a,{label:"Show ".concat(e),checked:!t["hideMotif".concat(e)],onChange:function(t,a){return n(Object(A.a)({},"hideMotif".concat(e),!a.checked))}}))}))),r.a.createElement(T,null,"Track height: ",r.a.createElement(C,{key:"track-height-".concat(t.trackHeight),type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return a(e,"trackHeight",parseInt(e.target.value,10))}})," px"),r.a.createElement(T,null,r.a.createElement(L.a,{compact:!0,size:"small",onClick:function(){n(Object(F.a)({},t,{},Vt))}},"Apply")))})),Ht={},Ft=Object(l.b)((function(e){return{gcnvOptions:ie(e)}}),(function(e){return{updateGcnvOptions:function(t){e({type:"UPDATE_GCNV_OPTIONS",updates:t})}}}))((function(e){var t=e.gcnvOptions,n=e.updateGcnvOptions,a=function(e,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode?n(Object(F.a)({},t,{},Ht)):Ht[a]=r};return r.a.createElement("div",null,r.a.createElement(j,null,"gCNV Options"),r.a.createElement("br",null),r.a.createElement(T,null,r.a.createElement(h.a,{label:"Enable clicking background samples",checked:!t.onlyHandleClicksForHighlightedSamples,onChange:function(e,a){return n(Object(F.a)({},t,{onlyHandleClicksForHighlightedSamples:!a.checked}))}})),r.a.createElement(T,null,"Y-min: ",r.a.createElement(C,{key:"y-max-".concat(t.trackMin),type:"text",defaultValue:t.trackMin,onKeyUp:function(e){return a(e,"trackMin",parseInt(e.target.value,10))}})," copies"),r.a.createElement(T,null,"Y-max: ",r.a.createElement(C,{key:"y-max-".concat(t.trackMax),type:"text",defaultValue:t.trackMax,onKeyUp:function(e){return a(e,"trackMax",parseInt(e.target.value,10))}})," copies"),r.a.createElement(T,null,"Track height: ",r.a.createElement(C,{key:"track-height-".concat(t.trackHeight),type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return a(e,"trackHeight",parseInt(e.target.value,10))}})," px"),r.a.createElement(T,null,r.a.createElement(L.a,{compact:!0,size:"small",onClick:function(){n(Object(F.a)({},t,{},Ht))}},"Apply")))})),qt=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.locusList,n=e.enabledDataTypes,a=e.setLocus,o=e.setLocusList;return r.a.createElement("div",null,r.a.createElement(qe,{name:"Right Side Bar",locusList:t,setLocus:a,setLocusList:o}),n.includes("alignment")&&r.a.createElement(Mt,null),n.includes("vcf")&&r.a.createElement(Dt,null),n.includes("junctions")&&r.a.createElement(Gt,null),n.includes("gcnv_bed")&&r.a.createElement(Ft,null))}}]),n}(r.a.PureComponent),Jt=Object(l.b)((function(e){return{locusList:$(e),enabledDataTypes:me(e)}}),(function(e){return{setLocus:function(t){e({type:"UPDATE_LOCUS",newValue:t})},setLocusList:function(t){e({type:"SET_RIGHT_SIDE_BAR_LOCUS_LIST",values:t})}}}))(qt);function zt(){var e=Object(i.a)(["\n  cursor: pointer;\n  margin-left: 20px;\n"]);return zt=function(){return e},e}var Wt=s.a.a(zt()),Kt=function(){return r.a.createElement(Ve,{title:"About the TGG Viewer",size:"large",modalName:"AboutModal",trigger:r.a.createElement(Wt,null,"About")},"The Translational Genomics Group (TGG) Viewer is a free, open-source web app for visualizing splice junctions, copy number, and other data genome-wide using ",r.a.createElement("a",{href:"https://github.com/igvteam/igv.js",target:"_blank"},"IGV.js"),r.a.createElement("br",null),r.a.createElement("br",null),"Main features: ",r.a.createElement("br",null),r.a.createElement("ul",null,r.a.createElement("li",null,"Supports most file formats supported by IGV.js, including: .bed, .vcf, .bam, .cram, .bigWig, as well as several custom formats for splice junctions (.junctions.bed.gz) and gCNV copy-number variants (.gcnv.bed.gz) "),r.a.createElement("li",null,"Includes custom reference tracks such as splice junctions from GTEx v8 muscle, blood, and fibroblast samples."),r.a.createElement("li",null,"Supports adding gene or locus lists to left or right side bar for quick navigation across a list of regions."),r.a.createElement("li",null,"Can load data files or reference tracks from any Google bucket to which you have read-access."),r.a.createElement("li",null,"Retrieves just the on-screen sections of the files directly from Google buckets."),r.a.createElement("li",null,"All settings, gene lists, and data paths can be exported and later restored or shared with others via a .json config file. To export all current settings, click the ",r.a.createElement(E.a,{name:"download"})," button, upload the .json file to github (or another public url), and then to restore the settings, paste the file's URL into the Initial Settings input, and Apply. "),r.a.createElement("li",null,"The page url also records page settings so that they can be bookmarked or shared, but does not include gene lists.")),r.a.createElement("a",{href:"https://github.com/broadinstitute/tgg-viewer/issues",target:"_blank"},"Issues"),"\xa0or ",r.a.createElement("a",{href:"https://github.com/broadinstitute/tgg-viewer/issues",target:"_blank"},"Feature Requests"),"\xa0can be submitted via ",r.a.createElement("a",{href:"https://github.com/broadinstitute/tgg-viewer",target:"_blank"},"GitHub"),".")},Yt=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.user;return e.googleUserEmail?r.a.createElement("div",null,"Signed in to Google Buckets as ",r.a.createElement("b",null,e.googleUserEmail)):r.a.createElement("div",null,"Signing in to Google Buckets...")}}]),n}(r.a.PureComponent),Xt=Object(l.b)((function(e){return{user:se(e)}}))(Yt);function Qt(){var e=Object(i.a)(["\n  text-align: right;\n  padding-right: 75px !important;\n"]);return Qt=function(){return e},e}function $t(){var e=Object(i.a)(["\n  text-align: left;\n  padding-left: 75px !important;\n"]);return $t=function(){return e},e}function Zt(){var e=Object(i.a)(["\n  color: #444;\n  margin-bottom: 5px;\n"]);return Zt=function(){return e},e}var en=Object(s.a)(u.a.Row)(Zt()),tn=Object(s.a)(u.a.Column).attrs({width:6})($t()),nn=Object(s.a)(u.a.Column).attrs({width:10})(Qt()),an=function(){return r.a.createElement(u.a,null,r.a.createElement(en,null,r.a.createElement(tn,null,r.a.createElement("b",null,"TGG Viewer:"),r.a.createElement(Kt,null)),r.a.createElement(nn,null,r.a.createElement(Xt,null))))},rn=n(301),on=n(302),cn=function(e,t){var n;return function(){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];n&&clearTimeout(n),n=setTimeout((function(){t.apply(void 0,r),n=null}),e)}},ln={showIdeogram:!0,showNavigation:!0,showRuler:!0,showCenterGuide:!0,showCursorTrackingGuide:!0,showCommandBar:!0},sn=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).setContainerElement=function(e){a.container=e},a.render=function(){return r.a.createElement("div",null,r.a.createElement("div",{ref:a.setContainerElement}))},a.shouldTrackBeReloaded=function(e,t,n){var a=t.selectedSamplesByCategoryNameAndRowName,r=t.enabledDataTypes,o=t.sjOptions,c=t.vcfOptions,l=t.bamOptions,i=t.gcnvOptions,s=["merged","wig","spliceJunctions"].includes(e.type)&&(n.enabledDataTypes.includes("junctions")!==r.includes("junctions")||n.enabledDataTypes.includes("coverage")!==r.includes("coverage")||n.sjOptions!==o),u="variant"===e.type&&n.vcfOptions!==c,d="alignment"===e.type&&n.bamOptions!==l,p="gcnv"===e.type&&n.gcnvOptions!==i,m="gcnv"===e.type&&(!rt.a.isEqual(((n.selectedSamplesByCategoryNameAndRowName[e.categoryName]||{}).selectedSamples||{})[e.rowName],((a[e.categoryName]||{}).selectedSamples||{})[e.rowName])||!rt.a.isEqual(((n.selectedSamplesByCategoryNameAndRowName[e.categoryName]||{}).sampleSettings||{})[e.rowName],((a[e.categoryName]||{}).sampleSettings||{})[e.rowName]));return s||u||d||p||m},a.getTrackId=function(e){return"".concat(e.url,"|").concat(e.categoryName,"|").concat(e.rowName)},a.getIgvTrackView=function(e){var t=a.getTrackId(e),n=a.browser.trackViews.filter((function(e){var n=(e.track||{}).config||{};return t===a.getTrackId(n)}));return n.length>0&&n[0]},a.reloadRemoveAndAddTracks=function(e){var t=e.tracks.reduce((function(e,t){return Object(F.a)(Object(A.a)({},t.name,t),e)}),{});a.props.tracks.forEach((function(n){var r=t[n.name];if(r)a.shouldTrackBeReloaded(n,a.props,e)&&(console.log("Reloading track",n.name),a.ignoreNextTrackRemovedEvent=!0,a.browser.removeTrackByName(n.name),a.getIgvTrackView(n)||a.browser.loadTrack(r)),delete t[n.name];else try{console.log("Removing track",n.name),a.ignoreNextTrackRemovedEvent=!0,a.browser.removeTrackByName(n.name)}catch(o){console.warn("Unable to remove track",n.name,o)}})),Object.values(t).forEach((function(e){try{a.getIgvTrackView(e)||(console.log("Loading new track",e.name),a.browser.loadTrack(e))}catch(t){console.warn("Unable to add track",e.name,t)}}))},a.container=null,a.browser=null,a.ignoreNextTrackRemovedEvent=!1,a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(W.a)(z.a.mark((function e(){var t,n,a,r,o,c,l,i=this;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.container){e.next=2;break}return e.abrupt("return");case 2:t=this.props,n=t.genome,a=t.locus,r=t.tracks,o=t.locusChangedHandler,c=t.trackRemovedHandler,l=Object(F.a)({},ln,{locus:a,genome:n,tracks:r}),console.log("Calling igv.createBrowser(..)",l),on.a.createBrowser(this.container,l).then((function(e){i.browser=e,window.igvBrowser=e,o&&i.browser.on("locuschange",cn(300,o)),c&&i.browser.on("trackremoved",(function(e){i.ignoreNextTrackRemovedEvent||c(e.config.categoryName,e.config.rowName),i.ignoreNextTrackRemovedEvent=!1}))}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shouldComponentUpdate",value:function(e){if(!this.container||!this.browser)return!1;var t=this.browser.$searchInput.val(),n=e.locus;return!e.locus||t&&n.replace(/,/g,"")===t.replace(/,/g,"")||this.browser.search(n),this.reloadRemoveAndAddTracks(e),!1}}]),n}(r.a.Component),un=Object(l.b)((function(e){return{genome:ee(e),locus:Q(e),tracks:he(e),enabledDataTypes:me(e),selectedSamplesByCategoryNameAndRowName:re(e),sjOptions:oe(e),vcfOptions:ce(e),bamOptions:le(e),gcnvOptions:ie(e)}}),(function(e){return{locusChangedHandler:function(t){var n=t.label.replace(/,/g,"");e({type:"UPDATE_LOCUS",newValue:n})},trackRemovedHandler:function(t,n){e({type:"REMOVE_SELECTED_ROW_NAMES",categoryName:t,selectedRowNames:[n]})}}}))(sn);function dn(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin-top: 50px;\n  margin-left: 100px;\n  word-wrap: break-word;\n  word-break: break-all;\n"]);return dn=function(){return e},e}function pn(){var e=Object(i.a)(["\n  display: flex;\n  justify-content: center;\n  margin-top: 50px;\n"]);return pn=function(){return e},e}var mn=s.a.div(pn()),gn=s.a.div(dn()),fn=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handleGoogleSignIn=function(e){var t=e&&e.getBasicProfile(),n=t&&t.getEmail();a.setState({show:n?"igv":"signin-button"}),a.props.userChangedHandler(n)},a.render=function(){if("igv"===a.state.show)return r.a.createElement(un,null);if("signin-button"===a.state.show){var e=0,t=new Set;return a.props.rowsInCategories.forEach((function(n){n.rows.forEach((function(n){n.data&&n.data.forEach((function(n){if(n.url&&n.url.startsWith("gs://")){e+=1;var a=n.url.split("/")[2];"tgg-viewer"!==a&&t.add(a)}}))}))})),0===e?r.a.createElement(gn,null,"No dataset paths loaded. \xa0 Please specify an Initial settings url."):r.a.createElement("div",null,r.a.createElement(gn,null,r.a.createElement("div",null,"Retrieved ",e," data paths from settings file: ",r.a.createElement("a",{href:a.props.initialSettingsUrl,target:"_blank"},a.props.initialSettingsUrl),r.a.createElement("br",null),r.a.createElement("br",null)),t.size>0&&r.a.createElement("div",null,"To view this data, you should have read access to the following Google Storage buckets:",r.a.createElement("ul",null,Array.from(t).map((function(e){return r.a.createElement("li",{key:e},r.a.createElement("a",{href:"https://console.cloud.google.com/storage/browser/".concat(e),target:"_blank"},e))}))))),r.a.createElement(mn,null,r.a.createElement(rn.GoogleLogin,{clientId:window.TGG_VIEWER_CLIENT_ID,theme:"dark",buttonText:"Sign in with Google",onSuccess:a.handleGoogleSignIn,onFailure:a.handleGoogleSignIn,cookiePolicy:"single_host_origin"})))}return null},a.state={},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(W.a)(z.a.mark((function e(){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e){"undefined"!==typeof gapi&&gapi.load("client:auth2",(function(){gapi.client.load("storage","v1",(function(){gapi.client.init({clientId:"61200892608-qphtf65o323setqdcfj4hnf601mmetvs.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/devstorage.read_only",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/storage/v1/rest"]}),e()}))}))}));case 3:return e.next=5,K();case 5:e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error("Error during google sign-in:",e.t0),this.setState({show:"signin-button"}),e.abrupt("return");case 12:return e.next=14,Y();case 14:t=e.sent,this.setState({show:t?"igv":"signin-button"}),this.props.userChangedHandler(t);case 17:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()}]),n}(r.a.Component),hn=Object(l.b)((function(e){return{rowsInCategories:ne(e),initialSettingsUrl:ue(e)}}),(function(e){return{userChangedHandler:function(t){e({type:"UPDATE_USER",updates:{googleUserEmail:t}})}}}))(fn),bn=n(591),En=n(304),vn=n.n(En),yn=n(305),wn=n.n(yn),Sn=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){switch(this.props.status){case n.IN_PROGRESS:return r.a.createElement(E.a,{loading:!0,name:"spinner",style:{color:"#4183c4"}});case n.SUCCEEDED:return r.a.createElement(b.a,{trigger:r.a.createElement(E.a,{name:"check circle",style:{color:"#00C000"}}),content:this.props.successMessage||"Success",position:"top center",size:"small"});case n.ERROR:return r.a.createElement(b.a,{trigger:r.a.createElement(E.a,{name:"warning circle",style:{color:"#F00000"}}),content:this.props.errorMessage||"",position:"top center",size:"small"});default:return r.a.createElement(E.a,{name:"warning circle",style:{color:"rgb(0,0,0,0.0)"}})}}}]),n}(r.a.PureComponent);Sn.NONE="NONE",Sn.IN_PROGRESS="IN_PROGRESS",Sn.SUCCEEDED="SUCCEEDED",Sn.ERROR="ERROR";var On=Sn,kn=n(193),jn=n.n(kn),Nn=n(194),xn=n.n(Nn),Rn={},Tn={genome:"hg38",locus:"chr15:92,835,700-93,031,800",dataTypesToShow:["junctions","coverage","vcf","gcnv_bed"],leftSideBarLocusList:[],rightSideBarLocusList:[],rowsInCategories:[],selectedRowNamesByCategoryName:{},sjOptions:{trackHeight:170,hideAnnotated:!1,hideUnannotated:!1,colorBy:"strand",minUniquelyMappedReads:0,minTotalReads:1,maxFractionMultiMappedReads:1,minSplicedAlignmentOverhang:0,thicknessBasedOn:"numUniqueReads",bounceHeightBasedOn:"random",labelUniqueReadCount:!0,labelMultiMappedReadCount:!1,labelTotalReadCount:!1,labelMotif:!1,labelAnnotatedJunction:!1,labelAnnotatedJunctionValue:" [A]"},vcfOptions:{displayMode:"EXPANDED"},bamOptions:{trackHeight:200,showSoftClips:!0,alignmentShading:"strand"},gcnvOptions:{trackHeight:200,trackMin:0,trackMax:5,autoscale:!1,onlyHandleClicksForHighlightedSamples:!0},initialSettingsUrl:""},Cn=["leftSideBarLocusList","rightSideBarLocusList"],An=function(){return Cn.reduce((function(e,t){var n=function(e){try{var t=localStorage.getItem(e),n=xn.a.decompress(t);if(Rn[e]=n,null===n)return;return JSON.parse(n)}catch(a){return}}(t);return void 0!==n&&(e[t]=n),e}),{})},_n={locus:"locus",dataTypesToShow:"show",selectedRowNamesByCategoryName:"selectedRows",selectedSamplesByCategoryNameAndRowName:"selectedSamples",sjOptions:"sjOptions",vcfOptions:"vcfOptions",bamOptions:"bamOptions",gcnvOptions:"gcnvOptions",initialSettingsUrl:"settingsUrl"},Ln=function(){var e=Object.entries(_n).reduce((function(e,t){var n=Object(_.a)(t,2),a=n[0],r=n[1];return Object(F.a)({},e,Object(A.a)({},r,a))}),{}),t=window.location.hash.replace(/^#/,"");return t?t.split("&").reduce((function(t,n){var a=n.split("="),r=a[0]in e?e[a[0]]:a[0];if("locus"===r)t=Object(F.a)({},t,Object(A.a)({},r,a[1]));else try{t[r]=jn.a.parse(a[1])}catch(o){console.error("Couldn't parse url hash param",a[0],": ",a[1])}return t}),{}):{}},Mn=function(e){Cn.forEach((function(t){!function(e,t){try{var n=JSON.stringify(t);if(Rn[e]===n)return;console.warn("LocalStorage: compressing ".concat(e));var a=xn.a.compress(n);localStorage.setItem(e,a),Rn[e]=n}catch(r){console.warn("Unable to save state: ",e,t,r)}}(t,e[t])}));var t=Object.keys(e).filter((function(e){return e in _n})).reduce((function(t,n){var a="locus"===n?e[n].replace(",",""):jn.a.stringify(e[n]);return[].concat(Object(f.a)(t),["".concat(_n[n],"=").concat(a)])}),[]).join("&");window.location.hash="#".concat(t)};function Dn(){var e=Object(i.a)(["\n  margin-left: 20px !important;\n  margin-right: 15px !important;\n"]);return Dn=function(){return e},e}function In(){var e=Object(i.a)(["\n  margin-top: 100px;\n  width: calc(100% - 350px);\n"]);return In=function(){return e},e}function Un(){var e=Object(i.a)(["\n  color: #999;\n  width: 100%;\n  text-align: center;\n  \n  .ui.label {\n    color: #444;\n    background-color: #f3f3f3;\n  }\n"]);return Un=function(){return e},e}var Bn=s.a.div(Un()),Pn=Object(s.a)(bn.a)(In()),Vn=Object(s.a)(L.a)(Dn()),Gn=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).loadInitialSettingsUrl=function(){var e=Object(W.a)(z.a.mark((function e(t,n){var r,o,c,l,i,s,u,d,p,m,g,f,h,b;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.props,o=r.globalState,c=r.updateInitialSettingsUrl,l=r.resetGlobalState,t){e.next=5;break}return l(Object(F.a)({},Tn,{},{user:o.user})),c(""),e.abrupt("return");case 5:if(n||(i=An(),s=Ln()),-1!==t.search(":")&&-1!==t.search("/")){e.next=8;break}throw new Error('Invalid url: "'.concat(t,'"'));case 8:return u=-1!==t.search(".yaml")||-1!==t.search(".yml"),d=-1!==t.search(".json"),p=!u&&!d,e.next=13,fetch(t);case 13:if((m=e.sent).ok){e.next=16;break}throw new Error("Couldn't load URL. Error: ".concat(m.statusText.toLowerCase()," (").concat(m.status,")"));case 16:return e.next=18,m.text();case 18:if(g=e.sent,(f=null)||!u&&!p){e.next=30;break}e.prev=21,f=wn.a.safeLoad(g),e.next=30;break;case 25:if(e.prev=25,e.t0=e.catch(21),!u){e.next=30;break}return console.error("Unable to parse YAML file: ".concat(t,". ").concat(e.t0)),e.abrupt("return");case 30:if(f||!d&&!p){e.next=40;break}e.prev=31,f=JSON.parse(g),e.next=40;break;case 35:if(e.prev=35,e.t1=e.catch(31),!d){e.next=40;break}return console.error("Unable to parse JSON file: ".concat(t,". ").concat(e.t1)),e.abrupt("return");case 40:if(f){e.next=43;break}return console.error("Unable to parse JSON or YAML from: ".concat(t)),e.abrupt("return");case 43:h=Object.keys(o).reduce((function(e,t){return t in f?Object(F.a)({},e,Object(A.a)({},t,f[t])):e}),{}),console.log("Retrieved state from config file:",h),b=Object(F.a)({},o,{},h),n||(console.log("Applying settings from local storage",i),console.log("Applying settings from url hash",s),b=Object(F.a)({},b,{},i,{},s)),console.log("Setting global state to",b),l(b),c(t);case 50:case"end":return e.stop()}}),e,null,[[21,25],[31,35]])})));return function(t,n){return e.apply(this,arguments)}}(),a.applyInitialSettingsUrl=function(){var e=Object(W.a)(z.a.mark((function e(t){var n,r=arguments;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]&&r[1],a.setState({requestStatus:On.IN_PROGRESS}),t.startsWith("https://github.com/")&&(t=t.replace("https://github.com","https://raw.githubusercontent.com").replace("blob/","")),e.prev=3,e.next=6,a.loadInitialSettingsUrl(t,n);case 6:a.setState({requestStatus:On.SUCCEEDED,successMessage:t?"Successfully loaded URL and applied settings":"Reset all settings to defaults"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a.setState({requestStatus:On.ERROR,errorMessage:e.t0.toString()});case 12:return e.next=14,vn()(1e4);case 14:a.state.requestStatus!==On.IN_PROGRESS&&a.setState({requestStatus:On.NONE,errorMessage:""});case 15:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),a.exportCurrentSettings=function(){var e=["user","modals"],t=Object.keys(a.props.globalState).reduce((function(t,n){return e.includes(n)||(t[n]=a.props.globalState[n]),t}),{});return encodeURIComponent(JSON.stringify(t,null,5))},a.textInputValue=e.initialSettingsUrl||"",a.state={requestStatus:On.NONE,successMessage:"",errorMessage:""},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(W.a)(z.a.mark((function e(){var t;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.props.initialSettingsUrl)){e.next=5;break}return console.log("Loading settings from",t),e.next=5,this.applyInitialSettingsUrl(t,!1);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.initialSettingsUrl;return r.a.createElement(Bn,{align:"center"},r.a.createElement(Pn,{label:"Initial settings:",defaultValue:t,placeholder:"URL of .yaml or .json settings file (eg. http://.../settings.json), or blank to reset all settings to defaults.",onChange:function(t){e.textInputValue=t.target.value},onKeyUp:function(t){return 13===t.keyCode&&e.applyInitialSettingsUrl(t.target.value,!0)}}),r.a.createElement(Vn,{content:"Apply",onClick:function(){return e.applyInitialSettingsUrl(e.textInputValue,!0)}}),r.a.createElement(On,{status:this.state.requestStatus,errorMessage:this.state.errorMessage,successMessage:this.state.successMessage}),r.a.createElement(b.a,{content:"Export current settings to a .json file. If you then upload this file to a public url (for example to github) and then paste the url here, these settings will be restored.",position:"right center",trigger:r.a.createElement("a",{download:"settings.json",href:"data:text/json;charset=utf-8,".concat(this.exportCurrentSettings())},r.a.createElement(L.a,{icon:"download"}))}))}}]),n}(r.a.PureComponent),Hn=Object(l.b)((function(e){return{globalState:e,initialSettingsUrl:ue(e)}}),(function(e){return{updateInitialSettingsUrl:function(t){e({type:"UPDATE_INITIAL_SETTINGS_URL",newValue:t})},resetGlobalState:function(t){e({type:"RESET_GLOBAL_STATE",newState:t})}}}))(Gn);function Fn(){var e=Object(i.a)(["\n  min-width: calc(99% - ","px) !important;\n"]);return Fn=function(){return e},e}function qn(){var e=Object(i.a)(["\n  min-width: ","px !important;\n"]);return qn=function(){return e},e}function Jn(){var e=Object(i.a)(["\n  padding: 10px 20px;\n"]);return Jn=function(){return e},e}var zn=s.a.div(Jn()),Wn=Object(s.a)(u.a.Column)(qn(),210),Kn=Object(s.a)(u.a.Column)(Fn(),425),Yn=function(){return r.a.createElement(zn,null,r.a.createElement(u.a,null,r.a.createElement(u.a.Row,null,r.a.createElement(Wn,null,r.a.createElement(_t,null)),r.a.createElement(Kn,null,r.a.createElement(an,null),r.a.createElement(hn,null),r.a.createElement(Hn,null)),r.a.createElement(Wn,null,r.a.createElement(Jt,null)))))},Xn=n(76),Qn=n(306),$n=Object(Xn.c)(Object.assign({genome:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},locus:Re("UPDATE_LOCUS",""),rightSideBarLocusList:Ce("RIGHT_SIDE_BAR_LOCUS_LIST"),leftSideBarLocusList:Ce("LEFT_SIDE_BAR_LOCUS_LIST"),dataTypesToShow:Ce("DATA_TYPES_TO_SHOW"),rowsInCategories:function(e,t){return t&&t.categoryName&&t.rows?e.map((function(e){if(e.categoryName!==t.categoryName)return e;var n;switch(t.type){case"SET_ROWS":n=Object(f.a)(t.rows);break;case"ADD_ROWS":var a=e.rows.map((function(e){return e.name}));n=[].concat(Object(f.a)(e.rows),Object(f.a)(t.rows.filter((function(e){return!a.includes(e.name)}))));break;default:n=e.rows}return Object(F.a)({},e,{rows:n})})):e||[]},selectedRowNamesByCategoryName:function(e,t){if(!t||!t.categoryName||!Array.isArray(t.selectedRowNames))return e||{};var n=e[t.categoryName]||[];switch(t.type){case"SET_SELECTED_ROW_NAMES":case"ADD_SELECTED_ROW_NAMES":case"REMOVE_SELECTED_ROW_NAMES":var a;if("SET_SELECTED_ROW_NAMES"===t.type)a=Array.from(new Set(t.selectedRowNames));else if("ADD_SELECTED_ROW_NAMES"===t.type)a=Array.from(new Set([].concat(Object(f.a)(n),Object(f.a)(t.selectedRowNames))));else{var r=t.selectedRowNames;a=n.filter((function(e){return!r.includes(e)}))}return Object(F.a)({},e,Object(A.a)({},t.categoryName,a));default:console.trace("Unknown action type: ".concat(t.type))}return e},selectedSamplesByCategoryNameAndRowName:function(e,t){if(!t||!t.categoryName||!t.selectedSamplesByRowName&&!t.sampleSettingsByRowNameAndSampleName)return e||{};var n=e[t.categoryName]||{},a=n.selectedSamples||{},r=n.sampleSettings||{},o=a,c=r;switch(t.type){case"SET_SELECTED_SAMPLES":case"ADD_SELECTED_SAMPLES":case"REMOVE_SELECTED_SAMPLES":o="SET_SELECTED_SAMPLES"===t.type?Object(F.a)({},a,{},t.selectedSamplesByRowName):"ADD_SELECTED_SAMPLES"===t.type?Array.from(new Set([].concat(Object(f.a)(Object.keys(a)),Object(f.a)(Object.keys(t.selectedSamplesByRowName))))).reduce((function(e,n){return e[n]=Array.from(new Set([].concat(Object(f.a)(a[n]||[]),Object(f.a)(t.selectedSamplesByRowName[n]||[])))),e}),{}):Object.keys(a).reduce((function(e,n){var r=t.selectedSamplesByRowName[n]||[],o=(a[n]||[]).filter((function(e){return!r.includes(e)}));return o.length>0&&(e[n]=o),e}),{});break;case"UPDATE_SAMPLE_SETTINGS":c=Object(F.a)({},r,{},t.sampleSettingsByRowNameAndSampleName),Object.keys(t.sampleSettingsByRowNameAndSampleName).forEach((function(e){var n=r[e]||{},a=t.sampleSettingsByRowNameAndSampleName[e],o=Object(F.a)({},n,{},a);Object.entries(a).forEach((function(e){var t=Object(_.a)(e,2),a=t[0],r=t[1],c=Object(F.a)({},n[a]||{},{},r);o[a]=c})),c[e]=o}));break;default:return console.trace("Unknown action type: ".concat(t.type)),e}return Object(F.a)({},e,Object(A.a)({},t.categoryName,{selectedSamples:o,sampleSettings:c}))},sjOptions:Te("UPDATE_SJ_OPTIONS"),vcfOptions:Te("UPDATE_VCF_OPTIONS"),bamOptions:Te("UPDATE_BAM_OPTIONS"),gcnvOptions:Te("UPDATE_GCNV_OPTIONS"),user:Te("UPDATE_USER"),initialSettingsUrl:Re("UPDATE_INITIAL_SETTINGS_URL","")},Ae)),Zn=function(e,t){if("RESET_GLOBAL_STATE"===t.type)return t.newState;var n=$n(e,t);return Mn(n),n},ea=function(){var e=function(){var e=An(),t=Ln();return Object(F.a)({},Tn,{},e,{},t)}();return console.log("Initializing store to:",e),Object(Xn.e)(Zn,e,Object(Xn.d)(Object(Xn.a)(Qn.a)))};var ta=function(){return r.a.createElement(l.a,{store:ea()},r.a.createElement(Yn,null))};c.a.render(r.a.createElement(ta,null),document.getElementById("root"))}},[[319,1,2]]]);
//# sourceMappingURL=main.f68a80ab.chunk.js.map