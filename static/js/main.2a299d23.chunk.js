(this.webpackJsonprnaseq_viewer=this.webpackJsonprnaseq_viewer||[]).push([[0],{291:function(e,t,n){e.exports=n(493)},296:function(e,t,n){},493:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(46),o=n.n(l),c=(n(296),n(34)),i=n(16),s=n(17),u=n(514),m=n(9),d=n(19),p=n(20),g=n(21),f=n(22),b=n(512),h=n(494),E=n(67),v=n(510),y=n(509),O=n(495),j=n(511),S=n(27),_=n(26),T=n(25),w=n(28),C=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case e:return void 0===r.newValue?(console.error("Invalid ".concat(e," action: action.newValue is undefined: "),r),a):(n&&console.log("singleValueReducer: applying action: ",r,"State changing from ",a," to ",r.newValue),r.newValue);default:return a}};return a},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case e:if(void 0===r.updates)return console.error("Invalid ".concat(e," action: action.updates is undefined: "),r),a;var l=Object(w.a)({},a,{},r.updates);return n&&console.log("singleObjectReducer: applying action: ",r,"State changing from ",a," to ",l),l;default:return a}};return a},A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case"SET_".concat(e):case"ADD_".concat(e):case"REMOVE_".concat(e):if(!Array.isArray(r.values))return console.error("Invalid ".concat(r.type," action: action.values is undefined or not an array: "),r),a;var l;if(r.type==="SET_".concat(e))l=Object(T.a)(r.values);else if(r.type==="ADD_".concat(e))l=[].concat(Object(T.a)(a),Object(T.a)(r.values));else{var o=r.values;l=a.filter((function(e){return!o.includes(e)}))}return n&&console.log("createArrayReducer: applying action: ",r,"State changing from ",a," to ",l),l;default:return a}};return a},x={modals:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,l=arguments.length>1?arguments[1]:void 0;if(!l)return r;switch(l.type){case e:if(void 0===l.updatesById)return console.error("Invalid ".concat(e," action. action.updatesById is undefined: "),l),r;var o=l.updatesById;if(t){if(!(t in o))return r;o=o[t]}var c=Object(w.a)({},r);return Object.entries(o).forEach((function(e){var t=Object(_.a)(e,2),n=t[0],a=t[1];null==a?delete c[n]:c[n]?c[n]=Object(w.a)({},c[n],{},a):c[n]=Object(w.a)({},a)})),a&&console.log("objectsByIdReducer: applying action: ",l,"State changing from: ",r," to ",c),c;default:return r}};return r}("UPDATE_MODAL_STATE")},N=function(e,t){return e.modals[t]&&e.modals[t].open};function L(){var e=Object(i.a)(["\n  margin-left: 10px !important;\n  width: 100px;\n"]);return L=function(){return e},e}function B(){var e=Object(i.a)(["\n  float: right;\n  padding: 0px 20px 20px 20px;\n"]);return B=function(){return e},e}function M(){var e=Object(i.a)(["\n  &.ui.button.basic {\n    white-space: nowrap;\n    border: none;\n    padding: ",";\n    color: "," !important;\n    text-decoration: none;\n    font-weight: ",';\n    box-shadow: none !important;\n    user-select: auto;\n    \n    &:hover, &:focus, &:active {\n      color: #1e70bf !important;\n      background: transparent !important;\n    }\n    \n    &[class*="right labeled"].icon {\n      padding-left: 0 !important;\n      padding-right: 2.1em !important;\n      \n      > .icon {\n        background-color: initial;\n      }\n    }\n  }\n']);return M=function(){return e},e}var R=Object(s.a)(O.a).attrs({basic:!0})(M(),(function(e){return e.padding||0}),(function(e){return e.color||"#4183C4"}),(function(e){return e.fontWeight||"inherit"})),I=s.a.div(B()),U=Object(s.a)(O.a)(L()),P=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(p.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){var e=!0;n.props.handleClose&&(e=n.props.handleClose()),e&&n.props.close()},n.handleSave=function(){var e=!0;n.props.handleSave&&(e=n.props.handleSave()),e&&n.props.close()},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.trigger?r.a.cloneElement(this.props.trigger,{onClick:this.props.open}):null;return r.a.createElement(j.a,{open:this.props.isOpen,trigger:e,onClose:this.handleClose,size:this.props.size},r.a.createElement(j.a.Header,null,this.props.title,r.a.createElement(R,{floated:"right",onClick:this.handleClose,icon:r.a.createElement(E.a,{name:"remove",color:"grey"})})),r.a.createElement(j.a.Content,null,this.props.children),r.a.createElement(I,null,r.a.createElement(U,{tabIndex:0,onClick:this.handleClose,type:"button"},"Cancel"),r.a.createElement(U,{tabIndex:0,onClick:this.handleSave,type:"submit",color:"blue"},"Save")))}}]),t}(r.a.PureComponent);P.defaultProps={size:"small"};var D=Object(c.b)((function(e,t){return{isOpen:N(e,t.modalName)}}),(function(e,t){return{open:function(n){var a;n.preventDefault(),e((a=t.modalName,function(e){return e({type:"UPDATE_MODAL_STATE",updatesById:Object(S.a)({},a,{open:!0})})}))},close:function(){var n,a;e((n=t.modalName,a=!0,function(e,t){t().modals[n].confirmOnClose&&!a?e({type:"UPDATE_MODAL_STATE",updatesById:Object(S.a)({},n,{confirming:!0})}):e({type:"UPDATE_MODAL_STATE",updatesById:Object(S.a)({},n,{open:!1,confirming:!1,confirmOnClose:null})})}))}}}))(P);function V(){var e=Object(i.a)(["\n  cursor: pointer;\n"]);return V=function(){return e},e}var G=s.a.a(V()),J=function(e){function t(e){var n;Object(m.a)(this,t),(n=Object(p.a)(this,Object(g.a)(t).call(this,e))).render=function(){var e=n.props,t=e.locusList,a=e.name,l=e.setLocusList,o="Locus List - ".concat(a);return r.a.createElement(D,{title:o,size:"large",modalName:o,trigger:r.a.createElement(G,null,(t||[]).length>0?r.a.createElement("div",null,r.a.createElement("br",null),"Edit Locus List"):r.a.createElement("div",null,"Add Locus List To Side Bar")),handleSave:function(){var e=n.textAreaValue.split(/[,\s]+/).filter(Boolean);l(e)}},r.a.createElement(v.a,null,r.a.createElement(v.a.Field,{control:y.a,style:{minHeight:"300px"},defaultValue:n.textAreaValue,onKeyUp:function(e){n.textAreaValue=e.target.value},placeholder:"Enter genomic positions, intervals, and/or gene names separated by commas, spaces, or new lines.  These can be in any format recognized by the IGV search bar.  For example: DMD, ENST00000589830, chr1:55516888, 2:152341851-152591002"})),r.a.createElement("br",null),r.a.createElement("b",null,r.a.createElement("i",null,"NOTE:"))," This locus list will be saved across page refreshes in this browser, but is not recorded in the page url, so sharing a page link is not sufficient for sharing the locus list.")};var a=n.props.locusList;return n.textAreaValue=(a||[]).join("\n"),n}return Object(f.a)(t,e),t}(r.a.PureComponent),z=function(e){var t=e.name,n=e.locusList,a=e.setLocus,l=e.setLocusList;return r.a.createElement("div",null,n.map((function(e,t){return r.a.createElement("div",{key:e},t+1,". \xa0 ",r.a.createElement(G,{onClick:function(){a(e)}},e))})),r.a.createElement(J,{name:t,locusList:n,setLocusList:l}))};function q(){var e=Object(i.a)(["\n  opacity: 0.95;\n"]);return q=function(){return e},e}function H(){var e=Object(i.a)(["\n  padding-top: 3px;\n"]);return H=function(){return e},e}function F(){var e=Object(i.a)([" \n  display: inline-block;\n  margin: 12px 0px 0px 0px !important;\n"]);return F=function(){return e},e}var W=s.a.h3(F()),X=s.a.div(H()),K=Object(s.a)(b.a)(q()),Y=n(507),Q=n(513),Z=n(174),$=n.n(Z),ee={".bigWig":"coverage",".junctions.bed":"spliceJunctions",".spliceJunctions.bed":"spliceJunctions",".junctions.bed.gz":"spliceJunctions",".spliceJunctions.bed.gz":"spliceJunctions",".bam":"bam",".cram":"bam",".vcf":"vcf",".vcf.gz":"vcf"},te=["GT/AG","CT/AC","GC/AG","CT/GC","AT/AC","GT/AT","non-canonical"],ne=n(131),ae=n(1),re=n.n(ae),le=function(){var e;return re.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,re.a.awrap(gapi.auth2.getAuthInstance());case 2:if((e=t.sent).isSignedIn.get()){t.next=6;break}return t.next=6,re.a.awrap(e.signIn());case 6:case"end":return t.stop()}}))},oe=function(){var e,t;return re.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,re.a.awrap(gapi.auth2.getAuthInstance());case 2:return e=n.sent,t=e.currentUser.get().getBasicProfile(),n.abrupt("return",t.getEmail());case 5:case"end":return n.stop()}}))},ce=function(){var e,t;return re.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,re.a.awrap(gapi.auth2.getAuthInstance());case 2:return e=n.sent,t=e.currentUser.get(),e.isSignedIn.get()||t.reloadAuthResponse(),n.abrupt("return",t.getAuthResponse().access_token);case 6:case"end":return n.stop()}}))},ie=function(e){return e.locus},se=function(e){return e.rightSideBarLocusList},ue=function(e){return e.leftSideBarLocusList},me=function(e){return e.genome},de=function(e){return e.samplesInCategories},pe=function(e){return e.selectedSampleNamesByCategoryName},ge=function(e){return e.sjOptions},fe=function(e){return e.vcfOptions},be=function(e){return e.bamOptions},he=function(e){return e.user},Ee=function(e){return e.initialSettingsUrl},ve=function(e){return e.initialSettings},ye=Object(ne.a)(de,(function(e){return e.reduce((function(e,t){return Object(w.a)({},e,Object(S.a)({},t.categoryName,t.samples))}),{})})),Oe=Object(ne.a)(pe,ye,(function(e,t){return Object.entries(e).reduce((function(e,n){var a=Object(_.a)(n,2),r=a[0],l=a[1];return t[r]?Object(w.a)({},e,Object(S.a)({},r,t[r].filter((function(e){return l.includes(e.name)})))):e}),{})})),je=Object(ne.a)(Oe,ge,fe,be,(function(e,t,n,a){var r=[];return Object.values(e).forEach((function(e){return e.forEach((function(e,l){var o,c;e.junctions&&t.showJunctions&&(o={type:"spliceJunctions",format:"bed",url:e.junctions,indexURL:"".concat(e.junctions,".tbi"),oauthToken:ce,order:10*l,name:e.name,height:t.trackHeight,minUniquelyMappedReads:t.minUniquelyMappedReads,minTotalReads:t.minTotalReads,maxFractionMultiMappedReads:t.maxFractionMultiMappedReads,minSplicedAlignmentOverhang:t.minSplicedAlignmentOverhang,thicknessBasedOn:t.thicknessBasedOn,bounceHeightBasedOn:t.bounceHeightBasedOn,colorBy:t.colorBy,colorByNumReadsThreshold:void 0!==t.colorByNumReadsThreshold?t.colorByNumReadsThreshold:5,hideStrand:t.showOnlyPlusStrand?"-":t.showOnlyMinusStrand?"+":void 0,labelUniqueReadCount:t.labelUniqueReadCount,labelMultiMappedReadCount:t.labelMultiMappedReadCount,labelTotalReadCount:t.labelTotalReadCount,labelMotif:t.labelMotif,labelAnnotatedJunction:t.labelAnnotatedJunction&&t.labelAnnotatedJunctionValue,hideAnnotatedJunctions:t.hideAnnotated,hideUnannotatedJunctions:t.hideUnannotated,hideMotifs:te.filter((function(e){return t["hideMotif".concat(e)]}))}),e.coverage&&t.showCoverage&&(c={type:"wig",format:"bigwig",url:e.coverage,oauthToken:ce,name:e.name,height:t.trackHeight,order:10*l+1}),c&&o?(console.log("Adding ".concat(e.junctions," & ").concat(e.coverage," track #"),10*l+2),r.push({type:"merged",name:e.name,height:t.trackHeight,tracks:[c,o],order:10*l+2})):o?(console.log("Adding ".concat(e.junctions," track #"),10*l),r.push({type:"merged",name:e.name,height:t.trackHeight,tracks:[o],order:10*l+3})):c&&(console.log("Adding ".concat(e.coverage," track #"),10*l+1),r.push(c)),n.showVcfs&&e.vcf&&(console.log("Adding ".concat(e.vcf," track #"),10*l+4),r.push({type:"variant",format:"vcf",url:e.vcf,indexUrl:"".concat(e.vcf,".tbi"),indexed:!0,name:"".concat(e.name," vcf"),displayMode:n.displayMode,oauthToken:ce,order:10*l+4})),a.showBams&&e.bam&&(console.log("Adding ".concat(e.bam," track #"),10*l+5),r.push({type:"alignment",url:e.bam,indexed:!0,name:"".concat(e.name," bam"),height:a.trackHeight,colorBy:a.colorBy,viewAsPairs:a.viewAsPairs,showSoftClips:a.showSoftClips,oauthToken:ce,order:10*l+5}))}))})),r.push({name:"Gencode v32 Genes",format:"refgene",url:"gs://macarthurlab-rnaseq/reference_tracks/gencode_v32_knownGene.sorted.txt.gz",indexUrl:"gs://macarthurlab-rnaseq/reference_tracks/gencode_v32_knownGene.sorted.txt.gz.tbi",indexed:!0,searchable:!0,height:350,visibilityWindow:-1,displayMode:"EXPANDED",order:1000001,color:"rgb(76,171,225)",oauthToken:ce}),r}));function Se(){var e=Object(i.a)(["\n"]);return Se=function(){return e},e}function _e(){var e=Object(i.a)(["\n  label {\n    margin: 10px 0px 10px 20px;\n    padding-left: 1.4em !important;\n  }\n"]);return _e=function(){return e},e}function Te(){var e=Object(i.a)(["\n  font-family: monospace;\n  background-color: #F7F7F7;\n"]);return Te=function(){return e},e}function we(){var e=Object(i.a)(["\n  font-family: monospace;\n  margin: 20px 30px;\n  padding: 10px;\n  background-color: #F7F7F7;\n  white-space: nowrap;\n"]);return we=function(){return e},e}function Ce(){var e=Object(i.a)(["\n  cursor: pointer;\n  padding: 10px 10px 10px 0px;\n  display: inline-block;\n"]);return Ce=function(){return e},e}var ke=s.a.a(Ce()),Ae=s.a.div(we()),xe=s.a.span(Te()),Ne=Object(s.a)(Y.a)(_e()),Le=Object(s.a)(b.a).attrs({position:"bottom center"})(Se()),Be=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(g.a)(t).call(this,e))).getInitialState=function(){var e=n.props.samples,t=e&&e.length>0?"yaml":"basic";return{format:t,textAreaValue:n.convertSamplesToTextAreaValue(e||[],t),warningMessage:null,errorMessage:null}},n.parseTextAreaValueToSamples=function(e,t){if(!e.trim())return{samples:[],errorMessage:null};var n=[],a=null,r=[];if("basic"===t){var l=e.split(/[,\s]+/).filter(Boolean).reduce((function(e,t){var n=t.split("/"),a=n[n.length-1],l=Object.keys(ee).filter((function(e){return a.endsWith(e)}));if(0===l.length)r.push(t);else{var o=l[0],c=a.replace(o,"");e[c]||(e[c]={}),e[c].name=c,e[c][ee[o]]=t}return e}),{});n=Object.values(l)}else if("yaml"===t||"json"===t)try{n=$.a.safeLoad(e)}catch(o){a="Unable to parse YAML: ".concat(o)}else if("json"===t)try{n=JSON.parse(e)}catch(o){a="Unable to parse JSON: ".concat(o)}return r.length>0&&(a="These paths have unexpected file suffixes: ".concat(r.join(", "))),{samples:n,errorMessage:a}},n.convertSamplesToTextAreaValue=function(e,t){return e&&0!==e.length?("basic"===t?n=e.map((function(e){return Object.keys(e).filter((function(e){return"name"!==e&&"description"!==e})).map((function(t){return e[t]}))})).flat().join("\n"):"yaml"===t?n=$.a.safeDump(e,{flowLevel:2}):"json"===t&&(n=JSON.stringify(e,null,2)),n):"";var n},n.formatRadioButtonChangeHandler=function(e,t){var a=n.state,r=a.textAreaValue,l=a.format,o=n.parseTextAreaValueToSamples(r,l),c=o.samples,i=o.errorMessage;return i?(e.preventDefault(),n.setState({errorMessage:i}),!1):(n.setState({errorMessage:""}),t.checked&&n.setState({format:t.label,textAreaValue:n.convertSamplesToTextAreaValue(c,t.label)}),!0)},n.getInitialSamplesInCategory=function(){var e=n.props,t=e.categoryName,a=e.showResetButton,r=e.initialSamplesInCategories;if(a&&r){var l=r.filter((function(e){return e.categoryName===t}));if(l.length>0)return l[0].samples}return[]},n.resetButtonClickHandler=function(){var e=n.state.format,t=n.getInitialSamplesInCategory(),a=n.convertSamplesToTextAreaValue(t,e);n.setState({textAreaValue:a})},n.handleModalSave=function(){var e=n.props.setSamples,t=n.state,a=t.textAreaValue,r=t.format,l=n.parseTextAreaValueToSamples(a,r),o=l.samples,c=l.errorMessage;return c?(n.setState({errorMessage:c}),!1):(e(o),!0)},n.handleModalClose=function(){return n.setState(n.getInitialState()),!0},n.render=function(){var e,t=n.props,a=t.samples,l=t.title,o=t.showResetButton,c=t.trigger,i=n.state,s=i.format,u=i.textAreaValue,m=i.warningMessage,d=i.errorMessage,p="".concat(l," Paths");o&&(e=n.getInitialSamplesInCategory());var g=a.some((function(e){return e.description||Object.keys(e).filter((function(e){return"name"!==e&&"description"!==e})).length>1}));return r.a.createElement(D,{title:p,size:"large",modalName:p,trigger:c,handleSave:n.handleModalSave,handleClose:n.handleModalClose},r.a.createElement("div",null,"Enter google bucket path(s) for ",r.a.createElement("i",null,".bigWig"),", ",r.a.createElement("i",null,".junctions.bed.gz"),", ",r.a.createElement("i",null,".bam/.cram"),", or ",r.a.createElement("i",null,".vcf.gz")," files:",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("b",null,"Format:"),r.a.createElement(Ne,{name:"format",label:"basic",disabled:g,checked:"basic"===s,onChange:n.formatRadioButtonChangeHandler}),r.a.createElement(Le,{trigger:r.a.createElement(E.a,{style:{marginLeft:"8px"},name:"question circle outline"}),content:r.a.createElement("div",null,g&&r.a.createElement("div",null,r.a.createElement("b",null,"[Disabled]")," because some samples have multiple data files and/or a description.",r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement("b",null,"Basic format"),":",r.a.createElement("br",null),r.a.createElement("br",null),"Enter a list of paths separated by commas, spaces or new lines. ",r.a.createElement("br",null),r.a.createElement("br",null),"Example:",r.a.createElement("br",null),r.a.createElement(Ae,null,"gs://your-bucket/dir/sample-name1.bigWig ",r.a.createElement("br",null),"gs://your-bucket/dir/sample2.bigWig ",r.a.createElement("br",null),"gs://your-bucket/dir/sample-name1.junctions.bed.gz ",r.a.createElement("br",null),"gs://your-bucket/dir/sample-name1.bam ",r.a.createElement("br",null),"gs://your-bucket/dir/sample2.junctions.bed.gz ",r.a.createElement("br",null)),"Paths that have the same prefix (like ",r.a.createElement(xe,null,"gs://your-bucket/dir/sample-name1")," in the example) will be interpreted as different data types from the same sample.",r.a.createElement("br",null),r.a.createElement("br",null),"The order of paths doesn't matter.")}),r.a.createElement(Ne,{name:"format",label:"yaml",checked:"yaml"===s,onChange:n.formatRadioButtonChangeHandler}),r.a.createElement(Le,{trigger:r.a.createElement(E.a,{style:{marginLeft:"8px"},name:"question circle outline"}),content:r.a.createElement("div",null,r.a.createElement("b",null,"YAML format"),":",r.a.createElement("br",null),r.a.createElement("br",null),"Provides per-sample file paths just like the Basic format, but allows additional meta-data to be specified - such as sample descriptions - as well as more flexibility in file names.",r.a.createElement("br",null),r.a.createElement(Ae,null,"- name: sample1 ",r.a.createElement("br",null),"\xa0 description: description of sample1 ",r.a.createElement("br",null),"\xa0 coverage: gs://your-bucket/dir/sample-name1.bigWig ",r.a.createElement("br",null),"\xa0 junctions: gs://your-bucket/dir2/sample-name1.junctions.bed.gz ",r.a.createElement("br",null),"\xa0 bam: gs://your-bucket/dir3/sample-name1.bam ",r.a.createElement("br",null),"\xa0 vcf: gs://your-bucket/dir3/sample-name1-wgs-variants.vcf.gz ",r.a.createElement("br",null),"- name: sample2 ",r.a.createElement("br",null),"\xa0 coverage: gs://your-bucket/dir/sample2.bigWig ",r.a.createElement("br",null),"\xa0 junctions: gs://your-bucket/dir2/sample2.junctions.bed.gz ",r.a.createElement("br",null)))}),r.a.createElement(Ne,{name:"format",label:"json",checked:"json"===s,onChange:n.formatRadioButtonChangeHandler}),r.a.createElement(Le,{trigger:r.a.createElement(E.a,{style:{marginLeft:"8px"},name:"question circle outline"}),content:r.a.createElement("div",null,r.a.createElement("b",null,"JSON format"),":",r.a.createElement("br",null),r.a.createElement("br",null),"Identical to YAML, but represented in the JSON format.",r.a.createElement("br",null),r.a.createElement(Ae,null,"[{",r.a.createElement("br",null),' "name": "sample1",',r.a.createElement("br",null),' "coverage": "gs://your-bucket/dir/sample-name1.bigWig", ',r.a.createElement("br",null),' "junctions": "gs://your-bucket/dir2/sample-name1.junctions.bed.gz", ',r.a.createElement("br",null),' "bam": "gs://your-bucket/dir3/sample-name1.bam", ',r.a.createElement("br",null),' "vcf": "gs://your-bucket/dir3/sample-name1-wgs-variants.vcf.gz" ',r.a.createElement("br",null),"}, {",r.a.createElement("br",null),' "name": "sample2", ',r.a.createElement("br",null),' "coverage": "gs://your-bucket/dir/sample2.bigWig", ',r.a.createElement("br",null),' "junctions": "gs://your-bucket/dir2/sample2.junctions.bed.gz" ',r.a.createElement("br",null),"}]",r.a.createElement("br",null)))}),o&&r.a.createElement(ke,{style:{float:"right"},onClick:n.resetButtonClickHandler},"Reset To ",e?e.length:0," Original Samples"))),r.a.createElement(v.a,null,r.a.createElement(y.a,{style:{minHeight:"300px"},value:u,onChange:function(e){n.setState({textAreaValue:e.target.value})},placeholder:"Enter file path(s)"})),r.a.createElement("br",null),r.a.createElement("b",null,r.a.createElement("i",null,"NOTE:"))," These paths will be saved across page refreshes in this browser, but will not be recorded in the page url like other settings. Sharing or bookmarking this page url won't include these paths.",m&&r.a.createElement(Q.a,{color:"yellow"},m),d&&r.a.createElement(Q.a,{color:"red"},d))},n.state=n.getInitialState(),n}return Object(f.a)(t,e),t}(r.a.PureComponent),Me=Object(c.b)((function(e){return{initialSamplesInCategories:ve(e).samplesInCategories}}),(function(e){return{updateSamples:function(t,n,a){e({type:"".concat(t,"_SAMPLES"),categoryName:n,samples:a})}}}))((function(e){var t=e.category,n=e.initialSamplesInCategories,a=e.updateSamples;return r.a.createElement("div",null,r.a.createElement(Be,{key:"".concat(JSON.stringify(t.samples),"_add"),title:"Add ".concat(t.categoryName),categoryName:t.categoryName,samples:[],setSamples:function(e){return a("ADD",t.categoryName,e)},initialSamplesInCategories:n,trigger:r.a.createElement(ke,null,"Add ",0===t.samples.length?t.categoryName:null," Paths")}),t.samples.length>0&&r.a.createElement(Be,{key:"".concat(JSON.stringify(t.samples),"_edit"),title:"Edit ".concat(t.categoryName),categoryName:t.categoryName,samples:t.samples,setSamples:function(e){return a("SET",t.categoryName,e)},initialSamplesInCategories:n,trigger:r.a.createElement(ke,null,"Edit Paths"),showResetButton:!0}))}));function Re(){var e=Object(i.a)(["\n  white-space: nowrap;\n"]);return Re=function(){return e},e}function Ie(){var e=Object(i.a)(["\n  padding-left: 5px;\n  white-space: nowrap;\n"]);return Ie=function(){return e},e}function Ue(){var e=Object(i.a)(["\n  cursor: pointer;\n  padding: 10px 10px 10px 0px;\n  display: inline-block;\n"]);return Ue=function(){return e},e}function Pe(){var e=Object(i.a)(["\n   color: #E6A01B;\n   border: 3px solid #E6A01B;\n"]);return Pe=function(){return e},e}function De(){var e=Object(i.a)(["\n   color: #5CB6EA;\n   border: 3px solid #5CB6EA;\n"]);return De=function(){return e},e}function Ve(){var e=Object(i.a)(["\n   color: #B5D29A;\n   border: 3px solid #B5D29A;\n"]);return Ve=function(){return e},e}function Ge(){var e=Object(i.a)(["\n   color: #B0B0EC;\n   border: 3px solid #B0B0EC;\n"]);return Ge=function(){return e},e}function Je(){var e=Object(i.a)(["\n  display: inline-block;\n  width: 6px;\n  border-radius: 1px;\n  height: 10px;\n  cursor: pointer;\n"]);return Je=function(){return e},e}function ze(){var e=Object(i.a)(["\n  display: inline-block;\n  margin: 0px 0px 0px 15px;\n  color: #999;\n  white-space: nowrap;\n"]);return ze=function(){return e},e}var qe=s.a.div(ze()),He=s.a.div.attrs({name:"stop"})(Je()),Fe=Object(s.a)(He)(Ge()),We=Object(s.a)(He)(Ve()),Xe=Object(s.a)(He)(De()),Ke=Object(s.a)(He)(Pe()),Ye=s.a.a(Ue()),Qe=s.a.span(Ie()),Ze=s.a.div(Re()),$e=function(e){var t=e.sample;return r.a.createElement(b.a,{content:r.a.createElement("table",null,r.a.createElement("tbody",null,t.junctions&&r.a.createElement("tr",null,r.a.createElement("td",{style:{paddingRight:"10px"}},r.a.createElement("b",null,"Junctions:")),r.a.createElement("td",null,r.a.createElement(Ze,null,t.junctions))),t.coverage&&r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Coverage:")),r.a.createElement("td",null,r.a.createElement(Ze,null,t.coverage))),t.bam&&r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Bam:")),r.a.createElement("td",null,r.a.createElement(Ze,null,t.bam))),t.vcf&&r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("b",null,"Vcf:")),r.a.createElement("td",null,r.a.createElement(Ze,null,t.vcf))),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("div",{style:{fontSize:"small",color:"grey",marginTop:"10px"}},"(click to copy paths)"))))),position:"right center",trigger:r.a.createElement(Qe,{onClick:function(){var e="";t.coverage&&(e+="".concat(t.coverage,"\n")),t.junctions&&(e+="".concat(t.junctions,"\n")),t.vcf&&(e+="".concat(t.vcf,"\n")),t.bam&&(e+="".concat(t.bam,"\n")),navigator.clipboard.writeText(e)}},t.junctions&&r.a.createElement(Fe,null),t.coverage&&r.a.createElement(We,null),t.bam&&r.a.createElement(Xe,null),t.vcf&&r.a.createElement(Ke,null)),style:{marginLeft:"2px"}})},et=function(e){var t=e.category,n=e.updateSelectedSampleNames;return r.a.createElement("div",null,r.a.createElement(W,null,t.categoryName.toUpperCase()),t.samples.length>=12&&r.a.createElement(qe,null,"(N=".concat(t.samples.length,") ")),t.samples.length>0&&r.a.createElement("div",null,r.a.createElement(Ye,{onClick:function(e){e.preventDefault(),n("SET",t.categoryName,[])}},"Uncheck All")))},tt=function(e){var t=e.samplesInCategories,n=e.selectedSampleNamesByCategoryName,a=e.updateSelectedSampleNames;return t.map((function(e,t){return r.a.createElement("div",{key:e.categoryName||t},r.a.createElement(et,{category:e,updateSelectedSampleNames:a}),e.samples.map((function(t,l){var o=n[e.categoryName]||[];return r.a.createElement(nt,{key:t.name||l,sample:t,categoryName:e.categoryName,selectedSampleNames:o,updateSelectedSampleNames:a})})),r.a.createElement(Me,{category:e}))}))},nt=function(e){var t=e.sample,n=e.categoryName,a=e.selectedSampleNames,l=e.updateSelectedSampleNames;return r.a.createElement(Ze,null,r.a.createElement(h.a,{label:t.name,checked:a.includes(t.name),"data-sample":t.name,onChange:function(e,t){return l(t.checked?"ADD":"REMOVE",n,[t["data-sample"]])}}),r.a.createElement(at,{sample:t}),r.a.createElement($e,{sample:t}))},at=function(e){var t=e.sample;return t.description?r.a.createElement(K,{inverted:!0,content:t.description,position:"right center",trigger:r.a.createElement(E.a,{style:{marginLeft:"10px"},name:"question circle outline"})}):null},rt=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.locusList,n=e.samplesInCategories,a=e.selectedSampleNamesByCategoryName,l=e.sjOptions,o=e.vcfOptions,c=e.bamOptions,i=e.setLocus,s=e.setLocusList,u=e.updateSelectedSampleNames,m=e.updateSjOptions,d=e.updateVcfOptions,p=e.updateBamOptions;return r.a.createElement("div",null,r.a.createElement(z,{name:"Left Side Bar",locusList:t,setLocus:i,setLocusList:s}),r.a.createElement(W,null,"TRACK TYPES TO SHOW PER SAMPLE"),r.a.createElement(X,null,r.a.createElement(h.a,{label:"RNA splice junctions",defaultChecked:l.showJunctions,onChange:function(e,t){return m({showJunctions:t.checked})}}),r.a.createElement(Qe,null,r.a.createElement(b.a,{content:"This color stripe marks samples that have splice junction data. Select this checkbox to show a splice junction track for each sample selected below.",position:"right center",trigger:r.a.createElement(Fe,null)}))),r.a.createElement(X,null,r.a.createElement(h.a,{label:"RNA coverage",defaultChecked:l.showCoverage,onChange:function(e,t){return m({showCoverage:t.checked})}}),r.a.createElement(Qe,null,r.a.createElement(b.a,{content:"This color stripe marks samples that have coverage data. Select this checkbox to show a coverage track for each sample selected below.",position:"right center",trigger:r.a.createElement(We,null)}))),r.a.createElement(X,null,r.a.createElement(h.a,{label:"BAM track",defaultChecked:c.showBams,onChange:function(e,t){return p({showBams:t.checked})}}),r.a.createElement(Qe,null,r.a.createElement(b.a,{content:"This color stripe marks samples that have alignment data. Select this checkbox to show a bam track for each sample selected below.",position:"right center",trigger:r.a.createElement(Xe,null)}))),r.a.createElement(X,null,r.a.createElement(h.a,{label:"VCF track",defaultChecked:o.showVcfs,onChange:function(e,t){return d({showVcfs:t.checked})}}),r.a.createElement(Qe,null,r.a.createElement(b.a,{content:"This color stripe marks samples that have splice junction data. Select this checkbox to show a vcf track for each sample selected below.",position:"right center",trigger:r.a.createElement(Ke,null)}))),r.a.createElement(tt,{samplesInCategories:n,selectedSampleNamesByCategoryName:a,updateSelectedSampleNames:u}))}}]),t}(r.a.PureComponent),lt=Object(c.b)((function(e){return{locusList:ue(e),samplesInCategories:de(e),selectedSampleNamesByCategoryName:pe(e),sjOptions:ge(e),vcfOptions:fe(e),bamOptions:be(e)}}),(function(e){return{setLocus:function(t){e({type:"UPDATE_LOCUS",newValue:t})},setLocusList:function(t){e({type:"SET_LEFT_SIDE_BAR_LOCUS_LIST",values:t})},updateSelectedSampleNames:function(t,n,a){e({type:"".concat(t,"_SELECTED_SAMPLE_NAMES"),categoryName:n,selectedSampleNames:a})},updateSjOptions:function(t){e({type:"UPDATE_SJ_OPTIONS",updates:t})},updateVcfOptions:function(t){e({type:"UPDATE_VCF_OPTIONS",updates:t})},updateBamOptions:function(t){e({type:"UPDATE_BAM_OPTIONS",updates:t})}}}))(rt);function ot(){var e=Object(i.a)(["\n  label {\n    margin-left: 10px;\n    margin-bottom: 10px;\n    padding-left: 1.4em !important;\n  }\n"]);return ot=function(){return e},e}function ct(){var e=Object(i.a)(["\n  margin-top: 5px !important;\n"]);return ct=function(){return e},e}function it(){var e=Object(i.a)(["\n  display: inline;\n  width: 50px;\n  margin-left: 5px;\n  padding-left: 5px;\n"]);return it=function(){return e},e}var st=s.a.input(it()),ut=Object(s.a)(E.a)(ct()),mt=Object(s.a)(Y.a)(ot()),dt=function(e){var t=e.sjOptions,n=e.handleTextInput;return"strand"===t.colorBy?r.a.createElement("div",null,r.a.createElement(ut,{name:"stop",style:{color:"#b0b0ec"}})," plus",r.a.createElement(ut,{name:"stop",style:{color:"#ecb0b0",marginLeft:"10px"}})," minus"):"motif"===t.colorBy?r.a.createElement("div",null,r.a.createElement(ut,{name:"stop",style:{color:"rgb(27,158,119)"}})," GT/AG ",r.a.createElement("br",null),r.a.createElement(ut,{name:"stop",style:{color:"rgb(217,95,2)"}})," CT/AC ",r.a.createElement("br",null),r.a.createElement(ut,{name:"stop",style:{color:"rgb(117,112,179)"}})," GC/AG ",r.a.createElement("br",null),r.a.createElement(ut,{name:"stop",style:{color:"rgb(231,41,138)"}})," CT/GC ",r.a.createElement("br",null),r.a.createElement(ut,{name:"stop",style:{color:"rgb(102,166,30)"}})," AT/AC ",r.a.createElement("br",null),r.a.createElement(ut,{name:"stop",style:{color:"rgb(230,171,2)"}})," GT/AT ",r.a.createElement("br",null),r.a.createElement(ut,{name:"stop",style:{color:"rgb(166,118,29)"}})," non-canonical ",r.a.createElement("br",null)):"numUniqueReads"===t.colorBy||"numReads"===t.colorBy?r.a.createElement("div",null,"# reads",r.a.createElement(ut,{name:"stop",style:{color:"#AAAAAA",marginLeft:"10px"}}),"\xa0\u2264 \xa0",r.a.createElement(st,{type:"text",defaultValue:void 0!==t.colorByNumReadsThreshold?t.colorByNumReadsThreshold:5,onKeyUp:function(e){return n(e,"colorByNumReadsThreshold")},style:{width:"35px"}}),"\xa0 < \xa0",r.a.createElement(ut,{name:"stop",style:{color:"blue"}})):"isAnnotatedJunction"===t.colorBy?r.a.createElement("div",null,r.a.createElement(ut,{name:"stop",style:{color:"#b0b0ec"}})," known junction ",r.a.createElement("br",null),r.a.createElement(ut,{name:"stop",style:{color:"orange"}})," novel junction"):r.a.createElement("div",null)},pt=function(e){var t=e.sjOptions,n=e.updateSjOptions,a=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode&&n(Object(S.a)({},t,a||e.target.value))};return r.a.createElement("div",null,r.a.createElement(W,null,"JUNCTION TRACK ",r.a.createElement("br",null),"OPTIONS"),r.a.createElement("br",null),r.a.createElement(X,null,"Track height: ",r.a.createElement(st,{type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return a(e,"trackHeight",parseInt(e.target.value,10))}})," px"),r.a.createElement(X,null,"Color by:"),r.a.createElement(X,null,r.a.createElement("select",{defaultValue:t.colorBy,onChange:function(e){return n({colorBy:e.target.value})}},r.a.createElement("option",{value:"strand"},"strand"),r.a.createElement("option",{value:"motif"},"donor/acceptor motif"),r.a.createElement("option",{value:"numUniqueReads"},"# uniquely-mapped reads"),r.a.createElement("option",{value:"numReads"},"# total reads"),r.a.createElement("option",{value:"isAnnotatedJunction"},"is known junction")),r.a.createElement(dt,{sjOptions:t,handleTextInput:a})),r.a.createElement(X,null,"Junction thickness:"),r.a.createElement(X,null,r.a.createElement("select",{defaultValue:t.thicknessBasedOn,onChange:function(e){return n({thicknessBasedOn:e.target.value})}},r.a.createElement("option",{value:"numUniqueReads"},"# uniquely-mapped reads"),r.a.createElement("option",{value:"numReads"},"# total reads"),r.a.createElement("option",{value:"isAnnotatedJunction"},"is known junction"))),r.a.createElement(X,null,"Junction bounce height:"),r.a.createElement(X,null,r.a.createElement("select",{defaultValue:t.bounceHeightBasedOn,onChange:function(e){return n({bounceHeightBasedOn:e.target.value})}},r.a.createElement("option",{value:"random"},"random"),r.a.createElement("option",{value:"distance"},"distance"),r.a.createElement("option",{value:"thickness"},"thickness"))),r.a.createElement(X,null,"Junction label:"),r.a.createElement(X,null,r.a.createElement(h.a,{label:"# uniquely-mapped",defaultChecked:t.labelUniqueReadCount,onChange:function(e,t){return n({labelUniqueReadCount:t.checked})}})),r.a.createElement(X,null,r.a.createElement(h.a,{label:"# multi-mapped",defaultChecked:t.labelMultiMappedReadCount,onChange:function(e,t){return n({labelMultiMappedReadCount:t.checked})}})),r.a.createElement(X,null,r.a.createElement(h.a,{label:"# total reads",defaultChecked:t.labelTotalReadCount,onChange:function(e,t){return n({labelTotalReadCount:t.checked})}})),r.a.createElement(X,null,r.a.createElement(h.a,{label:"donor/acceptor motif",defaultChecked:t.labelMotif,onChange:function(e,t){return n({labelMotif:t.checked})}})),r.a.createElement(X,null,r.a.createElement(h.a,{label:"known junction:",defaultChecked:t.labelAnnotatedJunction,onChange:function(e,t){return n({labelAnnotatedJunction:t.checked})}}),r.a.createElement(st,{type:"text",defaultValue:t.labelAnnotatedJunctionValue,onKeyUp:function(e){return a(e,"labelAnnotatedJunctionValue")},style:{width:"35px"}})),r.a.createElement(W,null,"JUNCTION TRACK FILTERS"),r.a.createElement("br",null),r.a.createElement(X,null,"Show Strands:",r.a.createElement(mt,{label:"both",name:"strandButton",checked:!t.showOnlyPlusStrand&&!t.showOnlyMinusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!1,showOnlyMinusStrand:!1})}}),r.a.createElement(mt,{label:"plus",name:"strandButton",checked:t.showOnlyPlusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!0,showOnlyMinusStrand:!1})}}),r.a.createElement(mt,{label:"minus",name:"strandButton",checked:t.showOnlyMinusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!1,showOnlyMinusStrand:!0})}})),r.a.createElement(X,null,r.a.createElement(h.a,{label:"Show known junctions",defaultChecked:!t.hideAnnotated,onChange:function(e,t){return n({hideAnnotated:!t.checked})}})),r.a.createElement(X,null,r.a.createElement(h.a,{label:"Show novel junctions",defaultChecked:!t.hideUnannotated,onChange:function(e,t){return n({hideUnannotated:!t.checked})}})),r.a.createElement("div",null,r.a.createElement(X,null,"Uniquely-mapped reads:"),"at least ",r.a.createElement(st,{type:"text",defaultValue:t.minUniquelyMappedReads,onKeyUp:function(e){return a(e,"minUniquelyMappedReads",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(X,null,"Total reads:"),"at least ",r.a.createElement(st,{type:"text",defaultValue:t.minTotalReads,onKeyUp:function(e){return a(e,"minTotalReads",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(X,null,"Fraction multi-mapped:",r.a.createElement(K,{inverted:!0,content:"Allows filtering of junctions where most reads that span the junction are multi-mapped reads. For example, setting this to 0.79 will hide junctions where 8 out of 10 (or more) reads that span the junction are not uniquely mapped reads.",position:"left center",on:"click",trigger:r.a.createElement(E.a,{style:{marginLeft:"8px"},name:"question circle outline"})})),"at most ",r.a.createElement(st,{type:"text",defaultValue:t.maxFractionMultiMappedReads,onKeyUp:function(e){return a(e,"maxFractionMultiMappedReads",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(X,null,"Splice overhang base-pairs:"),"at least ",r.a.createElement(st,{type:"text",defaultValue:t.minSplicedAlignmentOverhang,onKeyUp:function(e){return a(e,"minSplicedAlignmentOverhang",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(X,null,"Donor/Acceptor Motifs:"),te.map((function(e){return r.a.createElement(X,{key:e},r.a.createElement(h.a,{label:"Show ".concat(e),defaultChecked:!t["hideMotif".concat(e)],onChange:function(t,a){return n(Object(S.a)({},"hideMotif".concat(e),!a.checked))}}))}))))},gt=function(e){var t=e.bamOptions,n=e.updateBamOptions;return r.a.createElement("div",null,r.a.createElement(W,null,"BAM TRACK ",r.a.createElement("br",null),"OPTIONS"),r.a.createElement("br",null),r.a.createElement(X,null,"Track height: ",r.a.createElement(st,{type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode&&n(Object(S.a)({},t,a||e.target.value))}(e,"trackHeight",parseInt(e.target.value,10))}})," px"),r.a.createElement(X,null,r.a.createElement(h.a,{label:"View as pairs",defaultChecked:t.viewAsPairs,onChange:function(e,t){return n({viewAsPairs:t.checked})}})),r.a.createElement(X,null,r.a.createElement(h.a,{label:"Show soft-clips",defaultChecked:t.showSoftClips,onChange:function(e,t){return n({showSoftClips:t.checked})}})),r.a.createElement(X,null,"Color by:"),r.a.createElement(X,null,r.a.createElement("select",{defaultValue:t.colorBy,onChange:function(e){return n({colorBy:e.target.value})}},r.a.createElement("option",{value:"strand"},"Strand"),r.a.createElement("option",{value:"firstOfPairStrand"},"First-of-pair strand"),r.a.createElement("option",{value:"pairOrientation"},"Pair orientation"),r.a.createElement("option",{value:"fragmentLength"},"Insert size (TLEN)"),r.a.createElement("option",{value:"none"},"None"))))},ft=function(e){var t=e.vcfOptions,n=e.updateVcfOptions;return r.a.createElement("div",null,r.a.createElement(W,null,"VCF TRACK ",r.a.createElement("br",null),"OPTIONS"),r.a.createElement("br",null),r.a.createElement(X,null,"Display mode: \xa0",r.a.createElement("select",{defaultValue:t.displayMode,onChange:function(e){return n({displayMode:e.target.value})}},r.a.createElement("option",{value:"COLLAPSED"},"Collapse"),r.a.createElement("option",{value:"SQUISHED"},"Squish"),r.a.createElement("option",{value:"EXPANDED"},"Expand"))))},bt=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.locusList,n=e.sjOptions,a=e.vcfOptions,l=e.bamOptions,o=e.updateSjOptions,c=e.updateVcfOptions,i=e.updateBamOptions,s=e.setLocus,u=e.setLocusList;return r.a.createElement("div",null,r.a.createElement(z,{name:"Right Side Bar",locusList:t,setLocus:s,setLocusList:u}),l.showBams&&r.a.createElement(gt,{bamOptions:l,updateBamOptions:i}),a.showVcfs&&r.a.createElement(ft,{vcfOptions:a,updateVcfOptions:c}),(n.showCoverage||n.showJunctions)&&r.a.createElement(pt,{sjOptions:n,updateSjOptions:o}))}}]),t}(r.a.PureComponent),ht=Object(c.b)((function(e){return{locusList:se(e),sjOptions:ge(e),vcfOptions:fe(e),bamOptions:be(e)}}),(function(e){return{setLocus:function(t){e({type:"UPDATE_LOCUS",newValue:t})},setLocusList:function(t){e({type:"SET_RIGHT_SIDE_BAR_LOCUS_LIST",values:t})},updateSjOptions:function(t){e({type:"UPDATE_SJ_OPTIONS",updates:t})},updateBamOptions:function(t){e({type:"UPDATE_BAM_OPTIONS",updates:t})},updateVcfOptions:function(t){e({type:"UPDATE_VCF_OPTIONS",updates:t})}}}))(bt),Et=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.user;return e.googleUserEmail?r.a.createElement("div",null,"Signed in to Google Buckets as ",r.a.createElement("b",null,e.googleUserEmail)):r.a.createElement("div",null,"Signing in to Google Buckets...")}}]),t}(r.a.PureComponent),vt=Object(c.b)((function(e){return{user:he(e)}}))(Et);function yt(){var e=Object(i.a)(["\n  text-align: right;\n  padding-right: 75px !important;\n"]);return yt=function(){return e},e}function Ot(){var e=Object(i.a)(["\n  text-align: left;\n  padding-left: 75px !important;\n"]);return Ot=function(){return e},e}function jt(){var e=Object(i.a)(["\n  color: #444;\n  margin-bottom: 5px;\n"]);return jt=function(){return e},e}var St=Object(s.a)(u.a.Row)(jt()),_t=Object(s.a)(u.a.Column).attrs({width:6})(Ot()),Tt=Object(s.a)(u.a.Column).attrs({width:10})(yt()),wt=function(){return r.a.createElement(u.a,null,r.a.createElement(St,null,r.a.createElement(_t,null,r.a.createElement("b",null,"RNA-seq Viewer:"),"\xa0 \xa0 \xa0",r.a.createElement("a",{href:window.location},"More Details")),r.a.createElement(Tt,null,r.a.createElement(vt,null))))},Ct=n(277),kt=function(e,t){var n;return function(){for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];n&&clearTimeout(n),n=setTimeout((function(){t.apply(void 0,r),n=null}),e)}};function At(){var e=Object(i.a)([""]);return At=function(){return e},e}var xt={showIdeogram:!0,showNavigation:!0,showRuler:!0,showCenterGuide:!0,showCursorTrackingGuide:!0,showCommandBar:!0},Nt=s.a.div(At()),Lt=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(p.a)(this,Object(g.a)(t).call(this,e))).setContainerElement=function(e){n.container=e},n.render=function(){return r.a.createElement(Nt,null,r.a.createElement("div",{ref:n.setContainerElement}))},n.container=null,n.browser=null,n.ignoreNextTrackRemovedEvent=!1,n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e,t,n,a,r,l,o,c,i,s=this;return re.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:if(this.container){u.next=2;break}return u.abrupt("return");case 2:return e=this.props,t=e.genome,n=e.locus,a=e.tracks,r=e.locusChangedHandler,l=e.trackRemovedHandler,o=e.userChangedHandler,c=Object(w.a)({},xt,{locus:n,genome:t,tracks:a}),u.next=6,re.a.awrap(new Promise((function(e){"undefined"!==typeof gapi&&gapi.load("client:auth2",(function(){gapi.client.load("storage","v1",(function(){gapi.client.init({clientId:"61200892608-qphtf65o323setqdcfj4hnf601mmetvs.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/devstorage.read_only",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/storage/v1/rest"]}),e()}))}))})));case 6:return u.next=8,re.a.awrap(le());case 8:return u.next=10,re.a.awrap(oe());case 10:i=u.sent,o(i),Ct.a.createBrowser(this.container,c).then((function(e){s.browser=e,r&&s.browser.on("locuschange",kt(300,r)),l&&s.browser.on("trackremoved",(function(e){s.ignoreNextTrackRemovedEvent||l(e),s.ignoreNextTrackRemovedEvent=!1}))}));case 13:case"end":return u.stop()}}),null,this)}},{key:"shouldComponentUpdate",value:function(e){var t=this;if(!this.container)return!1;var n=this.props,a=n.locus,r=n.tracks,l=n.sjOptions,o=n.vcfOptions,c=n.bamOptions;e.locus&&e.locus!==a&&this.browser.search(e.locus);var i=e.tracks.reduce((function(e,t){return Object(w.a)(Object(S.a)({},t.name,t),e)}),{});return console.log("IGV.nextProps:",e),r.forEach((function(n){var a=i[n.name];if(a)(e.sjOptions!==l&&["merged","wig","spliceJunctions"].includes(n.type)||e.vcfOptions!==o&&"variant"===n.type||e.bamOptions!==c&&"alignment"===n.type)&&(t.ignoreNextTrackRemovedEvent=!0,t.browser.removeTrackByName(n.name),t.browser.loadTrack(a)),delete i[n.name];else try{t.ignoreNextTrackRemovedEvent=!0,t.browser.removeTrackByName(n.name)}catch(r){console.warn("Unable to remove track",n.name,r)}})),Object.values(i).forEach((function(e){try{t.browser.loadTrack(e)}catch(n){console.warn("Unable to add track",e.name,n)}})),!1}}]),t}(r.a.Component),Bt=Object(c.b)((function(e){return{genome:me(e),locus:ie(e),tracks:je(e),sjOptions:ge(e),vcfOptions:fe(e),bamOptions:be(e)}}),(function(e){return{locusChangedHandler:function(t){var n=t.label.replace(/,/g,"");e({type:"UPDATE_LOCUS",newValue:n})},userChangedHandler:function(t){e({type:"UPDATE_USER",updates:{googleUserEmail:t}})},trackRemovedHandler:function(t){e({type:"REMOVE_SELECTED_SAMPLE_NAMES",values:[t.name]})}}}))(Lt),Mt=n(508);function Rt(){var e=Object(i.a)(["\n  margin-left: 20px !important;\n"]);return Rt=function(){return e},e}function It(){var e=Object(i.a)(["\n  margin-top: 100px;\n  width: calc(100% - 300px);\n"]);return It=function(){return e},e}function Ut(){var e=Object(i.a)(["\n  color: #999;\n  width: 100%;\n  text-align: center;\n  \n  .ui.label {\n    color: #444;\n    background-color: #f3f3f3;\n  }\n"]);return Ut=function(){return e},e}var Pt=s.a.div(Ut()),Dt=Object(s.a)(Mt.a)(It()),Vt=Object(s.a)(O.a)(Rt()),Gt=function(e){function t(){return Object(m.a)(this,t),Object(p.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.initialSettingsUrl;return r.a.createElement(Pt,{align:"center"},r.a.createElement(Dt,{label:"Initial settings:",defaultValue:e,placeholder:"URL of .yaml or .json settings file (eg. http://.../settings.json)"}),r.a.createElement(Vt,{content:"Save URL"}))}}]),t}(r.a.PureComponent),Jt=Object(c.b)((function(e){return{initialSettingsUrl:Ee(e)}}))(Gt);function zt(){var e=Object(i.a)(["\n  padding: 10px 20px;\n"]);return zt=function(){return e},e}var qt=s.a.div(zt()),Ht=function(){return r.a.createElement(qt,null,r.a.createElement(u.a,null,r.a.createElement(u.a.Row,null,r.a.createElement(u.a.Column,{width:2,style:{minWidth:"".concat(210,"px")}},r.a.createElement(lt,null)),r.a.createElement(u.a.Column,{style:{minWidth:"800px",width:"calc(100% - ".concat(420,"px)")}},r.a.createElement(wt,null),r.a.createElement(Bt,null),r.a.createElement(Jt,null)),r.a.createElement(u.a.Column,{width:2,style:{minWidth:"".concat(210,"px")}},r.a.createElement(ht,null)))))},Ft=n(56),Wt=Object(Ft.c)(Object.assign({genome:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},locus:C("UPDATE_LOCUS",""),rightSideBarLocusList:A("RIGHT_SIDE_BAR_LOCUS_LIST"),leftSideBarLocusList:A("LEFT_SIDE_BAR_LOCUS_LIST"),samplesInCategories:function(e,t){return t&&t.categoryName&&t.samples?e.map((function(e){if(e.categoryName!==t.categoryName)return e;var n;switch(t.type){case"SET_SAMPLES":n=Object(T.a)(t.samples);break;case"ADD_SAMPLES":n=[].concat(Object(T.a)(e.samples),Object(T.a)(t.samples));break;default:n=e.samples}return Object(w.a)({},e,{samples:n})})):e||[]},selectedSampleNamesByCategoryName:function(e,t){if(!t||!t.categoryName||!Array.isArray(t.selectedSampleNames))return e||{};var n=e[t.categoryName]||[];switch(t.type){case"SET_SELECTED_SAMPLE_NAMES":case"ADD_SELECTED_SAMPLE_NAMES":case"REMOVE_SELECTED_SAMPLE_NAMES":var a;if("SET_SELECTED_SAMPLE_NAMES"===t.type)a=Object(T.a)(t.selectedSampleNames);else if("ADD_SELECTED_SAMPLE_NAMES"===t.type)a=[].concat(Object(T.a)(n),Object(T.a)(t.selectedSampleNames));else{var r=t.selectedSampleNames;a=n.filter((function(e){return!r.includes(e)}))}return Object(w.a)({},e,Object(S.a)({},t.categoryName,a));default:console.trace("Unknown action type: ".concat(t.type))}return e},sjOptions:k("UPDATE_SJ_OPTIONS"),vcfOptions:k("UPDATE_VCF_OPTIONS"),bamOptions:k("UPDATE_BAM_OPTIONS"),user:k("UPDATE_USER"),initialSettingsUrl:C("UPDATE_INITIAL_SETTINGS_URL","https://raw.githubusercontent.com/macarthur-lab/rnaseq-methods/master/rnaseq_viewer/settings.yaml",!0),initialSettings:C("UPDATE_INITIAL_SETTINGS",{})},x)),Xt=n(279),Kt=n(175),Yt=n.n(Kt),Qt=function(e){try{var t=localStorage.getItem(e);if(null===t)return;return JSON.parse(t)}catch(n){return}},Zt="gs://macarthurlab-rnaseq/reference_tracks/GTEx_ref_data",$t={genome:"hg38",locus:"chr15:92,835,700-93,031,800",sjOptions:{trackHeight:170,showCoverage:!0,showJunctions:!0,hideAnnotated:!1,hideUnannotated:!1,colorBy:"strand",minUniquelyMappedReads:1,minTotalReads:1,maxFractionMultiMappedReads:1,minSplicedAlignmentOverhang:0,thicknessBasedOn:"numUniqueReads",bounceHeightBasedOn:"random",labelUniqueReadCount:!0,labelMultiMappedReadCount:!1,labelTotalReadCount:!1,labelMotif:!1,labelAnnotatedJunction:!1,labelAnnotatedJunctionValue:" [A]"},vcfOptions:{displayMode:"EXPANDED"},bamOptions:{trackHeight:200,showSoftClips:!0,alignmentShading:"strand"},samplesInCategories:[{categoryName:"Reference Data",samples:[{name:"GTEx 100 Muscle",description:"100 randomly-chosen GTEx v3 muscle samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all 100 samples.",junctions:"".concat(Zt,"/muscle_100_GTEx_samples.junctions.bed.gz"),coverage:"".concat(Zt,"/muscle_100_GTEx_samples.bigWig")},{name:"GTEx 100 Blood",description:"100 randomly-chosen GTEx v3 blood samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all 100 samples.",junctions:"".concat(Zt,"/blood_100_GTEx_samples.junctions.bed.gz"),coverage:"".concat(Zt,"/blood_100_GTEx_samples.bigWig")},{name:"GTEx 100 Fibs",description:"100 randomly-chosen GTEx v3 fibroblast samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all 100 samples.",junctions:"".concat(Zt,"/fibs_100_GTEx_samples.junctions.bed.gz"),coverage:"".concat(Zt,"/fibs_100_GTEx_samples.bigWig")},{name:"GTEx All Muscle",description:"All 803 GTEx v3 muscle samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all samples.",junctions:"".concat(Zt,"/GTEX_muscle.803_samples.junctions.bed.gz"),coverage:"".concat(Zt,"/GTEX_muscle.803_samples.bigWig")},{name:"GTEx All Blood",description:"All 755 GTEx v3 blood samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all samples.",junctions:"".concat(Zt,"/GTEX_blood.755_samples.junctions.bed.gz"),coverage:"".concat(Zt,"/GTEX_blood.755_samples.bigWig")},{name:"GTEx All Fibs",description:"All 504 GTEx v3 fibroblast samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all samples.",junctions:"".concat(Zt,"/GTEX_fibs.504_samples.junctions.bed.gz"),coverage:"".concat(Zt,"/GTEX_fibs.504_samples.bigWig")},{name:"GTEx All Muscle - Norm.",description:"All 803 GTEx v3 muscle samples combined by summing raw coverage values across all samples and also summing normalized splice-junction-spanning read counts across all samples. The normalization is done by computing the normalized read count for each junction as normalized_read_count = raw_read_count * scalar. Here scalar = average_unique_reads_per_muscle_sample / (total_unqiue_reads_in_this_sample * number_of_muscle_samples), and average_unique_reads_per_muscle_sample = (total_unqiue_reads_in_all_muscle_samples / number_of_muscle_samples)",junctions:"".concat(Zt,"/GTEX_muscle.803_samples.normalized.junctions.bed.gz"),coverage:"".concat(Zt,"/GTEX_muscle.803_samples.bigWig")},{name:"GTEx All Blood - Norm.",description:"All 755 GTEx v3 blood samples combined by summing raw coverage values across all samples and also summing normalized splice-junction-spanning read counts across all samples. The normalization is done by computing the normalized read count for each junction as normalized_read_count = raw_read_count * scalar. Here scalar = average_unique_reads_per_blood_sample / (total_unqiue_reads_in_this_sample * number_of_blood_samples), and average_unique_reads_per_blood_sample = (total_unqiue_reads_in_all_blood_samples / number_of_blood_samples)",junctions:"".concat(Zt,"/GTEX_blood.755_samples.normalized.junctions.bed.gz"),coverage:"".concat(Zt,"/GTEX_blood.755_samples.bigWig")},{name:"GTEx All Fibs - Norm.",description:"All 504 GTEx v3 fibroblast samples combined by summing raw coverage values across all samples and also summing normalized splice-junction-spanning read counts across all samples. The normalization is done by computing the normalized read count for each junction as normalized_read_count = raw_read_count * scalar. Here scalar = average_unique_reads_per_fibs_sample / (total_unqiue_reads_in_this_sample * number_of_fibs_samples), and average_unique_reads_per_fibs_sample = (total_unqiue_reads_in_all_fibs_samples / number_of_fibs_samples)",junctions:"".concat(Zt,"/GTEX_fibs.504_samples.normalized.junctions.bed.gz"),coverage:"".concat(Zt,"/GTEX_fibs.504_samples.bigWig")}]},{categoryName:"Samples",samples:[]}],selectedSampleNamesByCategoryName:{},leftSideBarLocusList:[],rightSideBarLocusList:[]};$t.initialSettings=JSON.parse(JSON.stringify($t));var en={locus:"locus",selectedSampleNamesByCategoryName:"selectedSamples",sjOptions:"sjOptions",bamOptions:"bamOptions",vcfOptions:"vcfOptions",initialSettingsUrl:"initialSettingUrl"},tn=["samplesInCategories","leftSideBarLocusList","rightSideBarLocusList"],nn=Object(Ft.d)(Object(Ft.a)(Xt.a,(function(e){return function(t){return function(n){var a=t(n),r=e.getState();tn.forEach((function(e){!function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(a){}}(e,r[e])}));var l=Object.keys(r).filter((function(e){return e in en})).reduce((function(e,t){var n="locus"===t?r[t].replace(",",""):Yt.a.stringify(r[t]);return[].concat(Object(T.a)(e),["".concat(en[t],"=").concat(n)])}),[]).join("&");return window.location.hash="#".concat(l),a}}}))),an=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$t;tn.forEach((function(e){var n=Qt(e);void 0!==n&&(t[e]=n)}));var n=Object.entries(en).reduce((function(e,t){var n=Object(_.a)(t,2),a=n[0],r=n[1];return Object(w.a)({},e,Object(S.a)({},r,a))}),{}),a=window.location.hash.replace(/^#/,""),r=a&&a.split("&").reduce((function(e,t){var a=t.split("="),r=a[0]in n?n[a[0]]:a[0];if("locus"===r)e=Object(w.a)({},e,Object(S.a)({},r,a[1]));else try{e[r]=Yt.a.parse(a[1])}catch(l){console.error("Couldn't parse url hash param",a[0],": ",a[1])}return e}),{});return r&&(t=Object(w.a)({},t,{},r)),console.log("Initializing store to:"),console.log(t),Object(Ft.e)(e,t,nn)};var rn=function(){return r.a.createElement(c.a,{store:an(Wt)},r.a.createElement(Ht,null))};o.a.render(r.a.createElement(rn,null),document.getElementById("root"))}},[[291,1,2]]]);
//# sourceMappingURL=main.2a299d23.chunk.js.map