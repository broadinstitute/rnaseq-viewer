(this.webpackJsonprnaseq_viewer=this.webpackJsonprnaseq_viewer||[]).push([[0],{318:function(e,t,n){e.exports=n(576)},323:function(e,t,n){},576:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(56),c=n.n(o),l=(n(323),n(32)),i=n(14),s=n(15),u=n(597),p=n(11),d=n(12),m=n(24),g=n(25),f=n(26),h=n(577),b=n(594),E=n(77);function v(){var e=Object(i.a)(["\n  display: inline;\n  width: 50px;\n  margin-left: 5px;\n  padding-left: 5px;\n"]);return v=function(){return e},e}function y(){var e=Object(i.a)(["\n  margin: 10px 0px; \n"]);return y=function(){return e},e}function S(){var e=Object(i.a)(["\n  padding-top: 3px;\n"]);return S=function(){return e},e}function w(){var e=Object(i.a)(["\n  margin-top: 5px !important;\n"]);return w=function(){return e},e}function O(){var e=Object(i.a)(["\n  opacity: 0.95;\n"]);return O=function(){return e},e}function k(){var e=Object(i.a)([" \n  display: inline-block;\n  margin: 12px 0px 0px 0px !important;\n"]);return k=function(){return e},e}var j=s.a.h3(k()),N=Object(s.a)(b.a)(O()),R=Object(s.a)(E.a)(w()),x=s.a.div(S()),T=Object(s.a)(x)(y()),A=s.a.input(v()),C=n(592),_=n(591),L=n(578),B=n(593),D=n(31),M=n(27),U=n(23),I=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case e:return void 0===r.newValue?(console.error("Invalid ".concat(e," action: action.newValue is undefined: "),r),a):(n&&console.log("singleValueReducer: applying action: ",r,"State changing from ",a," to ",r.newValue),r.newValue);default:return a}};return a},P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case e:if(void 0===r.updates)return console.error("Invalid ".concat(e," action: action.updates is undefined: "),r),a;var o=Object(U.a)({},a,{},r.updates);return n&&console.log("singleObjectReducer: applying action: ",r,"State changing from ",a," to ",o),o;default:return a}};return a},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case"SET_".concat(e):case"ADD_".concat(e):case"REMOVE_".concat(e):if(!Array.isArray(r.values))return console.error("Invalid ".concat(r.type," action: action.values is undefined or not an array: "),r),a;var o;if(r.type==="SET_".concat(e))o=Object(f.a)(r.values);else if(r.type==="ADD_".concat(e))o=[].concat(Object(f.a)(a),Object(f.a)(r.values));else{var c=r.values;o=a.filter((function(e){return!c.includes(e)}))}return n&&console.log("createArrayReducer: applying action: ",r,"State changing from ",a," to ",o),o;default:return a}};return a},H={modals:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,o=arguments.length>1?arguments[1]:void 0;if(!o)return r;switch(o.type){case e:if(void 0===o.updatesById)return console.error("Invalid ".concat(e," action. action.updatesById is undefined: "),o),r;var c=o.updatesById;if(t){if(!(t in c))return r;c=c[t]}var l=Object(U.a)({},r);return Object.entries(c).forEach((function(e){var t=Object(M.a)(e,2),n=t[0],a=t[1];null==a?delete l[n]:l[n]?l[n]=Object(U.a)({},l[n],{},a):l[n]=Object(U.a)({},a)})),a&&console.log("objectsByIdReducer: applying action: ",o,"State changing from: ",r," to ",l),l;default:return r}};return r}("UPDATE_MODAL_STATE")},G=function(e,t){return e.modals[t]&&e.modals[t].open};function F(){var e=Object(i.a)(["\n  margin-left: 10px !important;\n  width: 100px;\n"]);return F=function(){return e},e}function q(){var e=Object(i.a)(["\n  float: right;\n  padding: 0px 20px 20px 20px;\n"]);return q=function(){return e},e}function J(){var e=Object(i.a)(["\n  &.ui.button.basic {\n    white-space: nowrap;\n    border: none;\n    padding: ",";\n    color: "," !important;\n    text-decoration: none;\n    font-weight: ",';\n    box-shadow: none !important;\n    user-select: auto;\n    \n    &:hover, &:focus, &:active {\n      color: #1e70bf !important;\n      background: transparent !important;\n    }\n    \n    &[class*="right labeled"].icon {\n      padding-left: 0 !important;\n      padding-right: 2.1em !important;\n      \n      > .icon {\n        background-color: initial;\n      }\n    }\n  }\n']);return J=function(){return e},e}var z=Object(s.a)(L.a).attrs({basic:!0})(J(),(function(e){return e.padding||0}),(function(e){return e.color||"#4183C4"}),(function(e){return e.fontWeight||"inherit"})),W=s.a.div(q()),K=Object(s.a)(L.a)(F()),Y=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(p.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleClose=function(){var t=!0;e.props.handleClose&&(t=e.props.handleClose()),t&&e.props.close()},e.handleSave=function(){var t=!0;e.props.handleSave&&(t=e.props.handleSave()),t&&e.props.close()},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.trigger?r.a.cloneElement(this.props.trigger,{onClick:this.props.open}):null;return r.a.createElement(B.a,{open:this.props.isOpen,trigger:e,onClose:this.handleClose,size:this.props.size},r.a.createElement(B.a.Header,null,this.props.title,r.a.createElement(z,{floated:"right",onClick:this.handleClose,icon:r.a.createElement(E.a,{name:"remove",color:"grey"})})),r.a.createElement(B.a.Content,null,this.props.children),r.a.createElement(W,null,r.a.createElement(K,{tabIndex:0,onClick:this.handleClose,type:"button"},"Cancel"),r.a.createElement(K,{tabIndex:0,onClick:this.handleSave,type:"submit",color:"blue"},this.props.handleSave?"Save":"Ok")))}}]),n}(r.a.PureComponent);Y.defaultProps={size:"small"};var X=Object(l.b)((function(e,t){return{isOpen:G(e,t.modalName)}}),(function(e,t){return{open:function(n){var a;n.preventDefault(),e((a=t.modalName,function(e){return e({type:"UPDATE_MODAL_STATE",updatesById:Object(D.a)({},a,{open:!0})})}))},close:function(){var n,a;e((n=t.modalName,a=!0,function(e,t){t().modals[n].confirmOnClose&&!a?e({type:"UPDATE_MODAL_STATE",updatesById:Object(D.a)({},n,{confirming:!0})}):e({type:"UPDATE_MODAL_STATE",updatesById:Object(D.a)({},n,{open:!1,confirming:!1,confirmOnClose:null})})}))}}}))(Y);function Q(){var e=Object(i.a)(["\n  cursor: pointer;\n"]);return Q=function(){return e},e}var $=s.a.a(Q()),Z=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var a;Object(p.a)(this,n),(a=t.call(this,e)).render=function(){var e=a.props,t=e.locusList,n=e.name,o=e.setLocusList,c="Locus List - ".concat(n);return r.a.createElement(X,{title:c,size:"large",modalName:c,trigger:r.a.createElement($,null,(t||[]).length>0?r.a.createElement("div",null,r.a.createElement("br",null),"Edit Locus List"):r.a.createElement("div",null,"Add Locus List To Side Bar")),handleSave:function(){var e=a.textAreaValue.split(/[,\s]+/).filter(Boolean);return o(e),!0}},r.a.createElement(C.a,null,r.a.createElement(C.a.Field,{control:_.a,style:{minHeight:"300px"},defaultValue:a.textAreaValue,onKeyUp:function(e){a.textAreaValue=e.target.value},placeholder:"Enter genomic positions, intervals, and/or gene names separated by commas, spaces, or new lines.  These can be in any format recognized by the IGV search bar.  For example: DMD, ENST00000589830, chr1:55516888, 2:152341851-152591002"})),r.a.createElement("br",null),r.a.createElement("b",null,r.a.createElement("i",null,"NOTE:"))," This locus list will be saved across page refreshes in this browser, \xa0 but will not be recorded in the page url like other settings.\xa0 Sharing or bookmarking this page won't include the contents of this list.")};var o=a.props.locusList;return a.textAreaValue=(o||[]).join("\n"),a}return n}(r.a.PureComponent),ee=function(e){var t=e.name,n=e.locusList,a=e.setLocus,o=e.setLocusList;return r.a.createElement("div",null,n.map((function(e,t){return r.a.createElement("div",{key:"".concat(e," ").concat(t)},t+1,". \xa0 ",r.a.createElement($,{onClick:function(){a(e)}},e))})),r.a.createElement(Z,{name:t,locusList:n,setLocusList:o}))},te=n(595);function ne(){var e=Object(i.a)(["\n"]);return ne=function(){return e},e}function ae(){var e=Object(i.a)(["\n  font-family: monospace;\n  background-color: #F7F7F7;\n"]);return ae=function(){return e},e}function re(){var e=Object(i.a)(["\n  font-family: monospace;\n  margin: 20px 30px;\n  padding: 10px;\n  background-color: #F7F7F7;\n  white-space: nowrap;\n"]);return re=function(){return e},e}function oe(){var e=Object(i.a)(["\n  cursor: pointer;\n  padding: 10px 10px 10px 0px;\n  display: inline-block;\n"]);return oe=function(){return e},e}var ce=s.a.a(oe()),le=s.a.div(re()),ie=s.a.span(ae()),se=Object(s.a)(b.a).attrs({position:"right center"})(ne()),ue={".bigWig":"coverage",".bw":"coverage",".junctions.bed":"junctions",".spliceJunctions.bed":"junctions",".junctions.bed.gz":"junctions",".spliceJunctions.bed.gz":"junctions",".bam":"bam",".cram":"bam",".vcf":"vcf",".vcf.gz":"vcf",".wig":"wig",".bedGraph":"wig",".bed":"bed",".bed.gz":"bed"},pe=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).getInitialState=function(){return{textAreaValue:"",warningMessage:null,errorMessage:null}},a.parseTextAreaValueToRows=function(e){if(!e.trim())return{rows:[],errorMessage:null};var t=null,n=[],a=e.split(/[,\s]+/).filter(Boolean).reduce((function(e,t){var a=t.split("/"),r=a[a.length-1],o=Object.keys(ue).filter((function(e){return r.endsWith(e)}));if(0===o.length)n.push(t);else{var c=o[0],l=r.replace(c,"");e[l]||(e[l]={data:[]}),e[l].name=l,e[l].data.push({type:ue[c],url:t})}return e}),{});return n.length>0&&(t="These paths have file suffixes that are not recognized: ".concat(n.join(", "))),{newRows:Object.values(a),errorMessage:t}},a.handleModalSave=function(){var e=a.props.addRows,t=a.state.textAreaValue,n=a.parseTextAreaValueToRows(t),r=n.newRows,o=n.errorMessage;return o?(a.setState({errorMessage:o}),!1):(e(r),!0)},a.handleModalClose=function(){return a.setState(a.getInitialState()),!0},a.render=function(){var e=a.props,t=e.title,n=e.trigger,o=a.state,c=o.textAreaValue,l=o.warningMessage,i=o.errorMessage,s="".concat(t," Rows");return r.a.createElement(X,{title:s,size:"large",modalName:s,trigger:n,handleSave:a.handleModalSave,handleClose:a.handleModalClose},r.a.createElement("div",null,"Enter google bucket path(s) for data files: \xa0",r.a.createElement(se,{trigger:r.a.createElement(E.a,{style:{margin:"10px 0px"},name:"question circle outline"}),content:r.a.createElement("div",null,r.a.createElement("b",null,"Format"),":",r.a.createElement("br",null),r.a.createElement("br",null),"Enter a list of data file paths separated by commas, spaces or new lines. ",r.a.createElement("br",null),r.a.createElement("br",null),"Example:",r.a.createElement("br",null),r.a.createElement(le,null,"gs://your-bucket/dir/sample-name1.bigWig ",r.a.createElement("br",null),"gs://your-bucket/dir/sample2.bigWig ",r.a.createElement("br",null),"gs://your-bucket/dir/sample-name1.junctions.bed.gz ",r.a.createElement("br",null),"gs://your-bucket/dir/sample-name1.bam ",r.a.createElement("br",null),"gs://your-bucket/dir/sample2.junctions.bed.gz ",r.a.createElement("br",null)),"Paths that have the same prefix (eg. ",r.a.createElement(ie,null,"gs://your-bucket/dir/sample-name1")," above) will be interpreted as different data types for same sample.",r.a.createElement("br",null),"The order of paths doesn't matter.",r.a.createElement("br",null),r.a.createElement("br",null),"IGV.js track types will be inferred from file extensions as follows:",r.a.createElement("br",null),r.a.createElement("div",{style:{margin:"10px 30px"}},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement("b",null," File Extension ")," "),r.a.createElement("td",null," ",r.a.createElement("b",null,"IGV.js Track Type")," ")),Object.entries(ue).filter((function(e){return!Object(M.a)(e,1)[0].endsWith(".bed")})).map((function(e,t){var n=Object(M.a)(e,2),a=n[0],o=n[1];return r.a.createElement("tr",{key:"".concat(a," ").concat(o," ").concat(t)},r.a.createElement("td",null,a),r.a.createElement("td",null,o))}))))))}),r.a.createElement("br",null)),r.a.createElement(C.a,null,r.a.createElement(_.a,{style:{minHeight:"300px"},value:c,onChange:function(e){a.setState({textAreaValue:e.target.value})},placeholder:"Enter file path(s)"})),r.a.createElement("br",null),r.a.createElement("b",null,r.a.createElement("i",null,"NOTE:"))," These paths will be saved across page refreshes in this browser, but will not be recorded in the page url like other settings. Sharing or bookmarking this page won't include these paths.",l&&r.a.createElement(te.a,{color:"yellow"},l),i&&r.a.createElement(te.a,{color:"red"},i))},a.state=a.getInitialState(),a}return n}(r.a.PureComponent),de=Object(l.b)(null,(function(e){return{addRows:function(t,n){e({type:"ADD_ROWS",categoryName:t,rows:n})}}}))((function(e){var t=e.category,n=e.addRows;return r.a.createElement("div",null,r.a.createElement(pe,{title:"Add ".concat(t.categoryName),categoryName:t.categoryName,addRows:function(e){return n(t.categoryName,e)},trigger:r.a.createElement(ce,null,"Add ",0===t.rows.length?t.categoryName:null," Rows")}))})),me=n(59),ge=n.n(me),fe=n(596),he=n(93),be=n(2),Ee=n.n(be),ve=n(6),ye=function(){var e=Object(ve.a)(Ee.a.mark((function e(){var t;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance();case 2:if((t=e.sent).isSignedIn.get()){e.next=6;break}return e.next=6,t.signIn();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=Object(ve.a)(Ee.a.mark((function e(){var t,n;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance();case 2:return t=e.sent,n=t.currentUser.get().getBasicProfile(),e.abrupt("return",n.getEmail());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=Object(ve.a)(Ee.a.mark((function e(){var t,n;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance();case 2:return t=e.sent,n=t.currentUser.get(),t.isSignedIn.get()||n.reloadAuthResponse(),e.abrupt("return",n.getAuthResponse().access_token);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oe=["GT/AG","CT/AC","GC/AG","CT/GC","AT/AC","GT/AT","non-canonical"],ke=function(e){return e.locus},je=function(e){return e.rightSideBarLocusList},Ne=function(e){return e.leftSideBarLocusList},Re=function(e){return e.genome},xe=function(e){return e.dataTypesToShow},Te=function(e){return e.rowsInCategories},Ae=function(e){return e.selectedRowNamesByCategoryName},Ce=function(e){return e.selectedSamplesByCategoryNameAndRowName},_e=function(e){return e.sjOptions},Le=function(e){return e.vcfOptions},Be=function(e){return e.bamOptions},De=function(e){return e.gcnvOptions},Me=function(e){return e.user},Ue=function(e){return e.initialSettingsUrl},Ie=function(e){return e.initialSettingsUrlHasBeenApplied},Pe=Object(he.a)(Te,(function(e){return Object(f.a)(e.reduce((function(e,t){return t.rows.forEach((function(t){t.data&&t.data.forEach((function(t){t.type&&e.add(t.type)}))})),e}),new Set))})),Ve=Object(he.a)(Pe,xe,(function(e,t){return e.length<2?e:e.filter((function(e){return t.includes(e)}))})),He=Object(he.a)(Te,(function(e){return e.reduce((function(e,t){return Object(U.a)({},e,Object(D.a)({},t.categoryName,t.rows))}),{})})),Ge=Object(he.a)(Ae,He,(function(e,t){return Object.entries(e).reduce((function(e,n){var a=Object(M.a)(n,2),r=a[0],o=a[1];return t[r]?Object(U.a)({},e,Object(D.a)({},r,t[r].filter((function(e){return o.includes(e.name)})))):e}),{})})),Fe=Object(he.a)(Ge,Ce,xe,_e,Le,Be,De,(function(e,t,n,a,r,o,c){var l=[];return Object.entries(e).forEach((function(e){var i=Object(M.a)(e,2),s=i[0];return i[1].forEach((function(e,i){var u,p;(e.data||[]).forEach((function(d,m){"gcnv_bed"===d.type?(console.log("Adding ".concat(d.url," track #"),100*i+m),l.push({type:"gcnv",format:"gcnv",name:"".concat(e.name," ").concat(d.label||""),url:d.url,indexURL:"".concat(d.url,".tbi"),height:c.trackHeight,min:c.trackMin,max:c.trackMax,autoscale:c.autoscale,highlightSamples:(((t[s]||{}).selectedSamples||{})[e.name]||[]).reduce((function(n,a){return n[a]=((((t[s]||{}).sampleSettings||{})[e.name]||{})[a]||{}).color||"blue",n}),{}),onlyHandleClicksForHighlightedSamples:c.onlyHandleClicksForHighlightedSamples,oauthToken:we,order:100*i+m,rowName:e.name,categoryName:s})):("junctions"===d.type||d.url.includes("junctions.bed"))&&n.includes("junctions")?u={type:"spliceJunctions",format:"bed",url:d.url,indexURL:"".concat(d.url,".tbi"),oauthToken:we,order:10*i,name:e.name,height:a.trackHeight,minUniquelyMappedReads:a.minUniquelyMappedReads,minTotalReads:a.minTotalReads,maxFractionMultiMappedReads:a.maxFractionMultiMappedReads,minSplicedAlignmentOverhang:a.minSplicedAlignmentOverhang,thicknessBasedOn:a.thicknessBasedOn,bounceHeightBasedOn:a.bounceHeightBasedOn,colorBy:a.colorBy,colorByNumReadsThreshold:void 0!==a.colorByNumReadsThreshold?a.colorByNumReadsThreshold:5,hideStrand:a.showOnlyPlusStrand?"-":a.showOnlyMinusStrand?"+":void 0,labelUniqueReadCount:a.labelUniqueReadCount,labelMultiMappedReadCount:a.labelMultiMappedReadCount,labelTotalReadCount:a.labelTotalReadCount,labelMotif:a.labelMotif,labelAnnotatedJunction:a.labelAnnotatedJunction&&a.labelAnnotatedJunctionValue,hideAnnotatedJunctions:a.hideAnnotated,hideUnannotatedJunctions:a.hideUnannotated,hideMotifs:Oe.filter((function(e){return a["hideMotif".concat(e)]})),rowName:e.name,categoryName:s}:("coverage"===d.type||d.url.includes(".bigWig"))&&n.includes("coverage")?(p={type:"wig",format:"bigwig",url:d.url,oauthToken:we,name:e.name,height:a.trackHeight,order:10*i+m,rowName:e.name,categoryName:s},d.url.includes("spliceai")&&(p.color=function(e){return e<.5?"rgb(180,180,180)":e<.8?"rgb(180,180,0)":"rgb(200,0,0)"})):("vcf"===d.type||d.url.includes(".vcf"))&&n.includes("vcf")?(console.log("Adding ".concat(d.url," track #"),100*i+m),l.push({type:"variant",format:"vcf",url:d.url,indexURL:"".concat(d.url,".tbi"),indexed:!0,name:"".concat(e.name," ").concat(d.label||"vcf"),displayMode:r.displayMode,oauthToken:we,order:100*i+m,rowName:e.name,categoryName:s})):("alignment"===d.type||d.url.includes(".bam")||d.url.includes(".cram"))&&n.includes("alignment")&&(console.log("Adding ".concat(d.url," track #"),100*i+m),l.push({type:"alignment",url:d.url,indexed:!0,name:"".concat(e.name," ").concat(d.label||"bam"),height:o.trackHeight,colorBy:o.colorBy,viewAsPairs:o.viewAsPairs,showSoftClips:o.showSoftClips,oauthToken:we,order:100*i+m,rowName:e.name,categoryName:s}))})),p&&u?(console.log("Adding ".concat(u.url," & ").concat(p.url," track")),l.push({type:"merged",name:u.name,height:a.trackHeight,tracks:[p,u],order:10*i+2,rowName:e.name,categoryName:s})):u?(console.log("Adding ".concat(u.url," track")),l.push(u)):p&&(console.log("Adding ".concat(p.url," track")),l.push(p))}))})),l.push({name:"Gencode v32 Genes",format:"refgene",url:"gs://tgg-viewer/ref/GRCh38/gencode_v32/gencode_v32_knownGene.sorted.txt.gz",indexURL:"gs://tgg-viewer/ref/GRCh38/gencode_v32/gencode_v32_knownGene.sorted.txt.gz.tbi",indexed:!0,searchable:!0,height:350,visibilityWindow:-1,displayMode:"EXPANDED",order:1000001,color:"rgb(76,171,225)",oauthToken:we}),l}));function qe(){var e=Object(i.a)(["\n  margin: 12px 0px 15px 0px; \n  .prompt {\n    border-radius: 2px !important;\n    width: 155px;\n  }\n  \n  input {\n      max-width: none !important;\n      padding: 5px !important;\n  }\n  \n  .input {\n    -webkit-box-shadow: 0px 0px 1px 0px rgba(0,0,0) !important;\n    -moz-box-shadow: 0px 0px 1px 0px rgba(0,0,0) !important;\n    box-shadow: 0px 0px 1px 0px rgba(0,0,0) !important;\n  }\n  \n  .results {\n      min-width: max-content;\n  }\n\n  .red-text {\n    .title {\n      color: #CC0000 !important;\n      font-weight: 500 !important;\n     }\n  }\n"]);return qe=function(){return e},e}var Je=Object(s.a)(fe.a)(qe()),ze={isLoading:!1,results:[],value:""},We=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).handleResultSelect=function(t,n){var a=n.result;e.setState({value:""});var r=a.id.split("!!"),o=r[0],c=r[1],l=r[2],i=r[3];i?("ADD"===o&&e.props.updateSelectedRowNames(o,c,[l]),e.props.updateSelectedSamples(o,c,Object(D.a)({},l,[i]))):e.props.updateSelectedRowNames(o,c,[l])},e.getSelectedRowNames=function(t){return e.props.selectedRowNamesByCategoryName[t]||[]},e.isRowSelected=function(t,n){return e.getSelectedRowNames(t).includes(n)},e.getSelectedSamplesByRowName=function(t){return(e.props.selectedSamplesByCategoryNameAndRowName[t]||{}).selectedSamples||{}},e.getSelectedSamplesForRow=function(t,n){return e.getSelectedSamplesByRowName(t)[n]||[]},e.isSampleSelected=function(t,n,a){return e.getSelectedSamplesForRow(t,n).includes(a)},e.addRowsToHide=function(t,n){return Object.keys(e.props.selectedRowNamesByCategoryName).forEach((function(a){n>=12||e.props.selectedRowNamesByCategoryName[a].forEach((function(e){if(!(n>=12)){t[a]=t[a]||[];var r={action:"REMOVE",categoryName:a,rowName:e};ge.a.some(t[a],r)||(t[a].push(r),n+=1)}}))})),n},e.addSamplesToHide=function(t,n){return Object.keys(e.props.selectedSamplesByCategoryNameAndRowName).forEach((function(a){n>=12||Object.keys(e.getSelectedSamplesByRowName(a)).forEach((function(r){n>=12||!e.isRowSelected(a,r)||e.getSelectedSamplesForRow(a,r).forEach((function(e){if(!(n>=12)){t[a]=t[a]||[];var o={action:"REMOVE",categoryName:a,rowName:r,sample:e};ge.a.some(t[a],o)||(t[a].push(o),n+=1)}}))}))})),n},e.addMatchingSamplesFromRow=function(t,n,a,r,o){if(!n.data)return o;var c=n.data.filter((function(e){return e.samples&&e.samples.length>0}));return c.length>1&&console.warn("Found row with multiple data items each of which has a samples array. This may behave unexpectedly if there are duplicate samples"),c.forEach((function(c){(c.samples||[]).forEach((function(c){if(!(o>=12)&&a.test(c)){r[t]=r[t]||[];var l={action:e.isRowSelected(t,n.name)&&e.isSampleSelected(t,n.name,c)?"REMOVE":"ADD",categoryName:t,rowName:n.name,sample:c};ge.a.some(r[t],l)||(r[t].push(l),o+=1)}}))})),o},e.addMatchingRowsAndSamples=function(t,n,a){var r={};return e.props.rowsInCategories.forEach((function(o){if(!(a>=12)){var c=o.categoryName;o.rows.forEach((function(o){if(!(a>=12)){if(t.test(o.name)){r[c]=r[c]||[],r[c].push(o),n[c]=n[c]||[];var l={action:e.isRowSelected(c,o.name)?"REMOVE":"ADD",categoryName:c,rowName:o.name};ge.a.some(n[c],l)||(n[c].push(l),a+=1)}a=e.addMatchingSamplesFromRow(c,o,t,n,a)}}))}})),Object.entries(r).forEach((function(t){var r=Object(M.a)(t,2),o=r[0],c=r[1];a>=12||(n[o]=n[o]||[],c.forEach((function(t){a>=12||(a=e.addMatchingSamplesFromRow(o,t,/.*/,n,a))})))})),a},e.handleSearchChange=function(t,n){var a=n.value;e.setState({isLoading:!0,value:a}),setTimeout((function(){if(e.state.value.length<1)return e.setState(ze);var t=new RegExp(ge.a.escapeRegExp(e.state.value),"i"),n={},a=0;t.test("Hide")&&(a=e.addRowsToHide(n,a)),(t.test("Hide")||t.test("Hide sample"))&&(a=e.addSamplesToHide(n,a)),e.addMatchingRowsAndSamples(t,n,a);var r=e.props.rowsInCategories.length>1,o=r?{}:[];return Object.keys(n).forEach((function(e){r&&(o[e]={name:e,results:[]});var t=r?o[e].results:o;n[e].forEach((function(n){if(n.sample){var a="ADD"===n.action?"Show sample":"Hide sample";t.push({id:"".concat(n.action,"!!").concat(e,"!!").concat(n.rowName,"!!").concat(n.sample),title:"".concat(a," ").concat(n.rowName," > ").concat(n.sample),className:"ADD"!==n.action&&"red-text"})}else{var r="ADD"===n.action?"Show":"Hide";t.push({id:"".concat(n.action,"!!").concat(e,"!!").concat(n.rowName),title:"".concat(r," ").concat(n.rowName),className:"ADD"!==n.action&&"red-text"})}}))})),e.setState({isLoading:!1,results:o})}),1)},e.render=function(){var t=e.state,n=t.isLoading,a=t.value,o=t.results;return r.a.createElement("div",null,r.a.createElement(j,null,"Select Data"),r.a.createElement(Je,{category:e.props.rowsInCategories.length>1,loading:n,onResultSelect:e.handleResultSelect,onSearchChange:e.handleSearchChange,placeholder:"Select data",results:o,value:a}))},e.state=ze,e}return n}(r.a.Component),Ke=Object(l.b)((function(e){return{rowsInCategories:Te(e),selectedRowNamesByCategoryName:Ae(e),selectedSamplesByCategoryNameAndRowName:Ce(e)}}),(function(e){return{updateSelectedRowNames:function(t,n,a){e({type:"".concat(t,"_SELECTED_ROW_NAMES"),categoryName:n,selectedRowNames:a})},updateSelectedSamples:function(t,n,a){e({type:"".concat(t,"_SELECTED_SAMPLES"),categoryName:n,selectedSamplesByRowName:a})}}}))(We);function Ye(){var e=Object(i.a)(["\n  white-space: nowrap;\n"]);return Ye=function(){return e},e}function Xe(){var e=Object(i.a)(["\n  padding-left: 5px;\n  white-space: nowrap;\n"]);return Xe=function(){return e},e}function Qe(){var e=Object(i.a)(["\n  cursor: pointer;\n  padding: 10px 10px 10px 0px;\n  display: inline-block;\n"]);return Qe=function(){return e},e}function $e(){var e=Object(i.a)(["\n  color: ",";\n  border: 3px solid ",";\n  display: inline-block;\n  width: 6px;\n  border-radius: 1px;\n  height: 10px;\n  cursor: pointer;\n"]);return $e=function(){return e},e}function Ze(){var e=Object(i.a)(["\n  display: inline-block;\n  margin: 0px 0px 0px 15px;\n  color: #999;\n  white-space: nowrap;\n"]);return Ze=function(){return e},e}var et=s.a.div(Ze()),tt=s.a.div.attrs({name:"stop"})($e(),(function(e){return e.color}),(function(e){return e.color})),nt={junctions:"#B0B0EC",coverage:"#B5D29A",alignment:"#5DB6E9",vcf:"#E6A01B",gcnv_bed:"#AA3333",default:"#000000"},at={junctions:"Splice Junctions",vcf:"Variants (VCF)",gcnv_bed:"gCNV",alignment:"Reads (BAM)"},rt=s.a.a(Qe()),ot=s.a.span(Xe()),ct=s.a.div(Ye()),lt=function(e){var t=e.allDataTypes,n=e.enabledDataTypes,a=e.updateDataTypesToShow;if(t.length<2)return null;var o=Object(f.a)(t).map((function(e,t){var o=at[e]||e.charAt(0).toUpperCase()+e.slice(1);return r.a.createElement(x,{key:"".concat(e," ").concat(t)},r.a.createElement(h.a,{label:"".concat(o.toLocaleString()),checked:n.includes(e),onChange:function(t,n){return a(n.checked?"ADD":"REMOVE",[e])}}),r.a.createElement(ot,null,r.a.createElement(b.a,{content:"This stripe marks rows that have ".concat(o.toLowerCase()," data. Use the checkbox on the left to show or hide ").concat(o.toLowerCase()," tracks for all rows selected below."),position:"right center",trigger:r.a.createElement(tt,{color:nt[e]||nt.default})})))}));return r.a.createElement("div",null,r.a.createElement(j,null,"Show Track Types"),o)},it=function(e){var t=e.row;return r.a.createElement(b.a,{flowing:!0,content:r.a.createElement("table",null,r.a.createElement("tbody",null,(t.data||[]).map((function(e,t){return r.a.createElement("tr",{key:"".concat(e.url," ").concat(e.type," ").concat(t)},r.a.createElement("td",{style:{paddingRight:"10px"}},r.a.createElement("b",null,e.type&&(at[e.type]||e.type.toUpperCase()),":")),r.a.createElement("td",null,r.a.createElement(ct,null,e.url)),r.a.createElement("td",{style:{color:"gray",whiteSpace:"nowrap",paddingLeft:"15px"}},e.samples?"(".concat(e.samples.length," samples)"):null))})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("div",{style:{fontSize:"small",color:"grey",marginTop:"10px"}},"(click to copy paths)"))))),position:"right center",trigger:r.a.createElement(ot,{onClick:function(){var e=(t.data||[]).map((function(e){return e.url})).join("\n");navigator.clipboard.writeText(e)}},(t.data||[]).map((function(e,t){return r.a.createElement(tt,{key:"".concat(e.url," ").concat(e.type," ").concat(t),color:nt[e.type]||nt.default})}))),style:{marginLeft:"2px"}})},st=function(e){var t=e.category,n=e.updateSelectedRowNames;return r.a.createElement("div",null,r.a.createElement(j,null,t.categoryName),t.rows.length>=12&&r.a.createElement(et,null,"(N=".concat(t.rows.length,") ")),t.rows.length>0&&r.a.createElement("div",null,r.a.createElement(rt,{onClick:function(e){e.preventDefault(),n("SET",t.categoryName,[])}},"Uncheck All")))},ut=function(e){var t=e.rowsInCategories,n=e.selectedRowNamesByCategoryName,a=e.updateSelectedRowNames;return t.map((function(e,t){return r.a.createElement("div",{key:"".concat(e.categoryName," ").concat(t)},r.a.createElement(st,{category:e,updateSelectedRowNames:a}),e.rows.map((function(t,o){var c=n[e.categoryName]||[];return r.a.createElement(pt,{key:"".concat(t.name," ").concat(o),row:t,categoryName:e.categoryName,selectedRowNames:c,updateSelectedRowNames:a})})),r.a.createElement(de,{category:e}))}))},pt=function(e){var t=e.row,n=e.categoryName,a=e.selectedRowNames,o=e.updateSelectedRowNames;return r.a.createElement(ct,null,r.a.createElement(h.a,{label:t.name,checked:a.includes(t.name),"data-row":t.name,onChange:function(e,t){return o(t.checked?"ADD":"REMOVE",n,[t["data-row"]])}}),r.a.createElement(dt,{row:t}),r.a.createElement(it,{row:t}))},dt=function(e){var t=e.row;return t.description?r.a.createElement(N,{inverted:!0,content:t.description,position:"right center",trigger:r.a.createElement(E.a,{style:{marginLeft:"10px"},name:"question circle outline"})}):null},mt=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.locusList,n=e.rowsInCategories,a=e.allDataTypes,o=e.enabledDataTypes,c=e.selectedRowNamesByCategoryName,l=e.setLocus,i=e.setLocusList,s=e.updateDataTypesToShow,u=e.updateSelectedRowNames;return r.a.createElement("div",null,r.a.createElement(ee,{name:"Left Side Bar",locusList:t,setLocus:l,setLocusList:i}),r.a.createElement(lt,{allDataTypes:a,enabledDataTypes:o,updateDataTypesToShow:s}),r.a.createElement(Ke,null),r.a.createElement(ut,{rowsInCategories:n,selectedRowNamesByCategoryName:c,updateSelectedRowNames:u}))}}]),n}(r.a.PureComponent),gt=Object(l.b)((function(e){return{locusList:Ne(e),rowsInCategories:Te(e),allDataTypes:Pe(e),enabledDataTypes:Ve(e),selectedRowNamesByCategoryName:Ae(e)}}),(function(e){return{setLocus:function(t){e({type:"UPDATE_LOCUS",newValue:t})},setLocusList:function(t){e({type:"SET_LEFT_SIDE_BAR_LOCUS_LIST",values:t})},updateDataTypesToShow:function(t,n){e({type:"".concat(t,"_DATA_TYPES_TO_SHOW"),values:n})},updateSelectedRowNames:function(t,n,a){e({type:"".concat(t,"_SELECTED_ROW_NAMES"),categoryName:n,selectedRowNames:a})},updateSjOptions:function(t){e({type:"UPDATE_SJ_OPTIONS",updates:t})},updateVcfOptions:function(t){e({type:"UPDATE_VCF_OPTIONS",updates:t})},updateBamOptions:function(t){e({type:"UPDATE_BAM_OPTIONS",updates:t})}}}))(mt),ft={},ht=Object(l.b)((function(e){return{bamOptions:Be(e)}}),(function(e){return{updateBamOptions:function(t){e({type:"UPDATE_BAM_OPTIONS",updates:t})}}}))((function(e){var t=e.bamOptions,n=e.updateBamOptions;return r.a.createElement("div",null,r.a.createElement(j,null,"BAM Track ",r.a.createElement("br",null),"Options"),r.a.createElement("br",null),r.a.createElement(x,null,r.a.createElement(h.a,{label:"View as pairs",checked:t.viewAsPairs,onChange:function(e,t){return n({viewAsPairs:t.checked})}})),r.a.createElement(x,null,r.a.createElement(h.a,{label:"Show soft-clips",checked:t.showSoftClips,onChange:function(e,t){return n({showSoftClips:t.checked})}})),r.a.createElement(x,null,"Color by:",r.a.createElement("select",{value:t.colorBy,onChange:function(e){return n({colorBy:e.target.value})}},r.a.createElement("option",{value:"strand"},"Strand"),r.a.createElement("option",{value:"firstOfPairStrand"},"First-of-pair strand"),r.a.createElement("option",{value:"pairOrientation"},"Pair orientation"),r.a.createElement("option",{value:"fragmentLength"},"Insert size (TLEN)"),r.a.createElement("option",{value:"none"},"None"))),r.a.createElement(T,null,"Track height: ",r.a.createElement(A,{key:"track-height-".concat(t.trackHeight),type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return function(e,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode?n(Object(U.a)({},t,{},ft)):ft[a]=r}(e,"trackHeight",parseInt(e.target.value,10))}})," px"),r.a.createElement(T,null,r.a.createElement(L.a,{compact:!0,size:"small",onClick:function(){n(Object(U.a)({},t,{},ft))}},"Apply")))})),bt=Object(l.b)((function(e){return{vcfOptions:Le(e)}}),(function(e){return{updateVcfOptions:function(t){e({type:"UPDATE_VCF_OPTIONS",updates:t})}}}))((function(e){var t=e.vcfOptions,n=e.updateVcfOptions;return r.a.createElement("div",null,r.a.createElement(j,null,"VCF Track ",r.a.createElement("br",null),"Options"),r.a.createElement("br",null),r.a.createElement(x,null,"Display mode: \xa0",r.a.createElement("select",{value:t.displayMode,onChange:function(e){return n({displayMode:e.target.value})}},r.a.createElement("option",{value:"COLLAPSED"},"Collapse"),r.a.createElement("option",{value:"SQUISHED"},"Squish"),r.a.createElement("option",{value:"EXPANDED"},"Expand"))))})),Et=n(589);function vt(){var e=Object(i.a)(["\n  label {\n    margin-left: 10px;\n    margin-bottom: 10px;\n    padding-left: 1.4em !important;\n  }\n"]);return vt=function(){return e},e}var yt=Object(s.a)(Et.a)(vt()),St=function(e){var t=e.sjOptions,n=e.handleTextInput;return"strand"===t.colorBy?r.a.createElement("div",null,r.a.createElement(R,{name:"stop",style:{color:"#b0b0ec"}})," plus",r.a.createElement(R,{name:"stop",style:{color:"#ecb0b0",marginLeft:"10px"}})," minus"):"motif"===t.colorBy?r.a.createElement("div",null,r.a.createElement(R,{name:"stop",style:{color:"rgb(27,158,119)"}})," GT/AG ",r.a.createElement("br",null),r.a.createElement(R,{name:"stop",style:{color:"rgb(217,95,2)"}})," CT/AC ",r.a.createElement("br",null),r.a.createElement(R,{name:"stop",style:{color:"rgb(117,112,179)"}})," GC/AG ",r.a.createElement("br",null),r.a.createElement(R,{name:"stop",style:{color:"rgb(231,41,138)"}})," CT/GC ",r.a.createElement("br",null),r.a.createElement(R,{name:"stop",style:{color:"rgb(102,166,30)"}})," AT/AC ",r.a.createElement("br",null),r.a.createElement(R,{name:"stop",style:{color:"rgb(230,171,2)"}})," GT/AT ",r.a.createElement("br",null),r.a.createElement(R,{name:"stop",style:{color:"rgb(166,118,29)"}})," non-canonical ",r.a.createElement("br",null)):"numUniqueReads"===t.colorBy||"numReads"===t.colorBy?r.a.createElement("div",null,"# reads",r.a.createElement(R,{name:"stop",style:{color:"#AAAAAA",marginLeft:"10px"}}),"\xa0\u2264 \xa0",r.a.createElement(A,{type:"text",key:"num-reads-".concat(t.colorByNumReadsThreshold),defaultValue:void 0!==t.colorByNumReadsThreshold?t.colorByNumReadsThreshold:5,onKeyUp:function(e){return n(e,"colorByNumReadsThreshold")},style:{width:"35px"}}),"\xa0 < \xa0",r.a.createElement(R,{name:"stop",style:{color:"blue"}})):"isAnnotatedJunction"===t.colorBy?r.a.createElement("div",null,r.a.createElement(R,{name:"stop",style:{color:"#b0b0ec"}})," known junction ",r.a.createElement("br",null),r.a.createElement(R,{name:"stop",style:{color:"orange"}})," novel junction"):r.a.createElement("div",null)},wt={},Ot=Object(l.b)((function(e){return{sjOptions:_e(e)}}),(function(e){return{updateSjOptions:function(t){e({type:"UPDATE_SJ_OPTIONS",updates:t})}}}))((function(e){var t=e.sjOptions,n=e.updateSjOptions,a=function(e,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode?n(Object(U.a)({},t,{},wt)):wt[a]=r};return r.a.createElement("div",null,r.a.createElement(j,null,"Junctions Track ",r.a.createElement("br",null),"Options"),r.a.createElement("br",null),r.a.createElement(x,null,"Color by:"),r.a.createElement(x,null,r.a.createElement("select",{value:t.colorBy,onChange:function(e){return n({colorBy:e.target.value})}},r.a.createElement("option",{value:"strand"},"strand"),r.a.createElement("option",{value:"motif"},"donor/acceptor motif"),r.a.createElement("option",{value:"numUniqueReads"},"# uniquely-mapped reads"),r.a.createElement("option",{value:"numReads"},"# total reads"),r.a.createElement("option",{value:"isAnnotatedJunction"},"is known junction")),r.a.createElement(St,{sjOptions:t,handleTextInput:a})),r.a.createElement(x,null,"Junction thickness:"),r.a.createElement(x,null,r.a.createElement("select",{value:t.thicknessBasedOn,onChange:function(e){return n({thicknessBasedOn:e.target.value})}},r.a.createElement("option",{value:"numUniqueReads"},"# uniquely-mapped reads"),r.a.createElement("option",{value:"numReads"},"# total reads"),r.a.createElement("option",{value:"isAnnotatedJunction"},"is known junction"))),r.a.createElement(x,null,"Junction bounce height:"),r.a.createElement(x,null,r.a.createElement("select",{value:t.bounceHeightBasedOn,onChange:function(e){return n({bounceHeightBasedOn:e.target.value})}},r.a.createElement("option",{value:"random"},"random"),r.a.createElement("option",{value:"distance"},"distance"),r.a.createElement("option",{value:"thickness"},"thickness"))),r.a.createElement(x,null,"Junction label:"),r.a.createElement(x,null,r.a.createElement(h.a,{label:"# uniquely-mapped",checked:t.labelUniqueReadCount,onChange:function(e,t){return n({labelUniqueReadCount:t.checked})}})),r.a.createElement(x,null,r.a.createElement(h.a,{label:"# multi-mapped",checked:t.labelMultiMappedReadCount,onChange:function(e,t){return n({labelMultiMappedReadCount:t.checked})}})),r.a.createElement(x,null,r.a.createElement(h.a,{label:"# total reads",checked:t.labelTotalReadCount,onChange:function(e,t){return n({labelTotalReadCount:t.checked})}})),r.a.createElement(x,null,r.a.createElement(h.a,{label:"donor/acceptor motif",checked:t.labelMotif,onChange:function(e,t){return n({labelMotif:t.checked})}})),r.a.createElement(x,null,r.a.createElement(h.a,{label:"known junction:",checked:t.labelAnnotatedJunction,onChange:function(e,t){return n({labelAnnotatedJunction:t.checked})}}),r.a.createElement(A,{key:"junction-label-".concat(t.labelAnnotatedJunctionValue),type:"text",defaultValue:t.labelAnnotatedJunctionValue,onKeyUp:function(e){return a(e,"labelAnnotatedJunctionValue")},style:{width:"35px"}})),r.a.createElement(j,null,"Junctions Track Filters"),r.a.createElement("br",null),r.a.createElement(x,null,"Show Strands:",r.a.createElement(yt,{label:"both",name:"strandButton",checked:!t.showOnlyPlusStrand&&!t.showOnlyMinusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!1,showOnlyMinusStrand:!1})}}),r.a.createElement(yt,{label:"plus",name:"strandButton",checked:t.showOnlyPlusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!0,showOnlyMinusStrand:!1})}}),r.a.createElement(yt,{label:"minus",name:"strandButton",checked:t.showOnlyMinusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!1,showOnlyMinusStrand:!0})}})),r.a.createElement(x,null,r.a.createElement(h.a,{label:"Show known junctions",checked:!t.hideAnnotated,onChange:function(e,t){return n({hideAnnotated:!t.checked})}})),r.a.createElement(x,null,r.a.createElement(h.a,{label:"Show novel junctions",checked:!t.hideUnannotated,onChange:function(e,t){return n({hideUnannotated:!t.checked})}})),r.a.createElement("div",null,r.a.createElement(x,null,"Uniquely-mapped reads:"),"at least ",r.a.createElement(A,{key:"uniquely-mapped-reads-".concat(t.minUniquelyMappedReads),type:"text",defaultValue:t.minUniquelyMappedReads,onKeyUp:function(e){return a(e,"minUniquelyMappedReads",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(x,null,"Total reads:"),"at least ",r.a.createElement(A,{key:"total-reads-".concat(t.minTotalReads),type:"text",defaultValue:t.minTotalReads,onKeyUp:function(e){return a(e,"minTotalReads",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(x,null,"Fraction multi-mapped:",r.a.createElement(N,{inverted:!0,content:"Allows filtering of junctions where most reads that span the junction are multi-mapped reads. For example, setting this to 0.79 will hide junctions where 8 out of 10 (or more) reads that span the junction are not uniquely mapped reads.",position:"left center",on:"click",trigger:r.a.createElement(E.a,{style:{marginLeft:"8px"},name:"question circle outline"})})),"at most ",r.a.createElement(A,{key:"fraction-multi-mapped-".concat(t.maxFractionMultiMappedReads),type:"text",defaultValue:t.maxFractionMultiMappedReads,onKeyUp:function(e){return a(e,"maxFractionMultiMappedReads",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(x,null,"Splice overhang base-pairs:"),"at least ",r.a.createElement(A,{key:"spliced-alignment-overhang-".concat(t.minSplicedAlignmentOverhang),type:"text",defaultValue:t.minSplicedAlignmentOverhang,onKeyUp:function(e){return a(e,"minSplicedAlignmentOverhang",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(x,null,"Donor/Acceptor Motifs:"),Oe.map((function(e){return r.a.createElement(x,{key:e},r.a.createElement(h.a,{label:"Show ".concat(e),checked:!t["hideMotif".concat(e)],onChange:function(t,a){return n(Object(D.a)({},"hideMotif".concat(e),!a.checked))}}))}))),r.a.createElement(T,null,"Track height: ",r.a.createElement(A,{key:"track-height-".concat(t.trackHeight),type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return a(e,"trackHeight",parseInt(e.target.value,10))}})," px"),r.a.createElement(T,null,r.a.createElement(L.a,{compact:!0,size:"small",onClick:function(){n(Object(U.a)({},t,{},wt))}},"Apply")))})),kt=n(300);function jt(){var e=Object(i.a)(["\n  padding: 0px !important;\n  div {\n    overflow-y: visible !important;\n  }\n"]);return jt=function(){return e},e}function Nt(){var e=Object(i.a)(["\n  display: inline-block;\n  cursor: pointer;\n  border-radius: 2px;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.1);\n  width: 10px;\n  height: 12px;\n"]);return Nt=function(){return e},e}function Rt(){var e=Object(i.a)(["\n  display: inline-block;\n  cursor: pointer;\n  border-radius: 2px;\n  padding: 1px 2px;\n  background: #fff;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.1);\n"]);return Rt=function(){return e},e}var xt=s.a.div(Rt()),Tt=s.a.div(Nt()),At=Object(s.a)(b.a).attrs({flowing:!0})(jt()),Ct=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState({color:e})},a.handleApply=function(e){a.props.colorChangedHandler(e.hex)},a.state={color:a.props.color},a}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(At,{on:"click",position:"left center",trigger:r.a.createElement(xt,null,r.a.createElement(Tt,{style:{background:this.state.color}})),content:r.a.createElement(kt.SwatchesPicker,{color:this.state.color,onChangeComplete:this.handleApply,onChange:function(t){return e.setState({color:t})}})})}}]),n}(r.a.Component);function _t(){var e=Object(i.a)(["\n  word-wrap: break-word;\n  word-break: break-all;  \n  white-space: normal;\n"]);return _t=function(){return e},e}function Lt(){var e=Object(i.a)(["\n  padding: 0px !important;\n  box-shadow: none !important;\n"]);return Lt=function(){return e},e}function Bt(){var e=Object(i.a)(["\n  margin: 10px 0px 8px 0px;\n  font-style: italic;\n"]);return Bt=function(){return e},e}function Dt(){var e=Object(i.a)(["\n  font-weight: 700;\n  margin: 8px 0px;\n"]);return Dt=function(){return e},e}function Mt(){var e=Object(i.a)(["\n  color: gray;\n"]);return Mt=function(){return e},e}var Ut=s.a.span(Mt()),It=s.a.div(Dt()),Pt=s.a.span(Bt()),Vt=Object(s.a)(L.a).attrs({basic:!0,icon:!0})(Lt()),Ht=s.a.span(_t()),Gt=r.a.createElement(Ut,null,"Use search box in left side-bar to select which samples to highlight."),Ft=function(e){var t=e.categoryName,n=e.rowName,a=e.sample,o=e.sampleSettings,c=e.hideSample,l=e.updateSampleSettings;return r.a.createElement("div",{style:{whiteSpace:"nowrap"}},r.a.createElement(Vt,{onClick:function(){return c(t,n,a)}},r.a.createElement(E.a,{name:"delete"})),r.a.createElement(Ht,null,a),r.a.createElement("span",{style:{marginLeft:"8px"}},r.a.createElement(Ct,{key:o.color,color:o.color||"blue",colorChangedHandler:function(e){return l(t,n,a,{color:e})}})))},qt=function(e){var t=e.selectedSamplesByCategoryNameAndRowName,n=e.hideRow,a=e.hideSample,o=e.updateSampleSettings,c=[];return Object.entries(t).forEach((function(e){var t=Object(M.a)(e,2),l=t[0],i=t[1];Object.entries(i.selectedSamples||{}).forEach((function(e){var t=Object(M.a)(e,2),s=t[0],u=t[1];c.push(r.a.createElement("div",{key:"".concat(l,"!!").concat(s)},r.a.createElement("div",{style:{whiteSpace:"nowrap",margin:"15px 0px 7px 0px"}},r.a.createElement(Vt,{onClick:function(){return n(l,s)}},r.a.createElement(E.a,{name:"delete"})),r.a.createElement(Pt,null,l,": ",s)),u.map((function(e){return r.a.createElement(Ft,{key:e,categoryName:l,rowName:s,sample:e,sampleSettings:((i.sampleSettings||{})[s]||{})[e]||{},hideRow:n,hideSample:a,updateSampleSettings:o})}))))}))})),c.length>0?c:Gt},Jt={},zt=Object(l.b)((function(e){return{gcnvOptions:De(e),selectedSamplesByCategoryNameAndRowName:Ce(e)}}),(function(e){return{updateGcnvOptions:function(t){e({type:"UPDATE_GCNV_OPTIONS",updates:t})},hideRow:function(t,n){e({type:"REMOVE_SELECTED_ROW_NAMES",categoryName:t,selectedRowNames:[n]})},hideSample:function(t,n,a){e({type:"REMOVE_SELECTED_SAMPLES",categoryName:t,selectedSamplesByRowName:Object(D.a)({},n,[a])})},updateSampleSettings:function(t,n,a,r){e({type:"UPDATE_SAMPLE_SETTINGS",categoryName:t,sampleSettingsByRowNameAndSampleName:Object(D.a)({},n,Object(D.a)({},a,r))})}}}))((function(e){var t=e.gcnvOptions,n=e.selectedSamplesByCategoryNameAndRowName,a=e.updateGcnvOptions,o=e.updateSampleSettings,c=e.hideRow,l=e.hideSample,i=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode?a(Object(U.a)({},t,{},Jt)):Jt[n]=r};return r.a.createElement("div",null,r.a.createElement(j,null,"gCNV Options"),r.a.createElement("br",null),r.a.createElement(T,null,r.a.createElement(h.a,{label:"Enable clicking background samples",checked:!t.onlyHandleClicksForHighlightedSamples,onChange:function(e,n){return a(Object(U.a)({},t,{onlyHandleClicksForHighlightedSamples:!n.checked}))}})),r.a.createElement(T,null,"Y-min: ",r.a.createElement(A,{key:"y-max-".concat(t.trackMin),type:"text",defaultValue:t.trackMin,onKeyUp:function(e){return i(e,"trackMin",parseInt(e.target.value,10))}})," copies"),r.a.createElement(T,null,"Y-max: ",r.a.createElement(A,{key:"y-max-".concat(t.trackMax),type:"text",defaultValue:t.trackMax,onKeyUp:function(e){return i(e,"trackMax",parseInt(e.target.value,10))}})," copies"),r.a.createElement(T,null,"Track height: ",r.a.createElement(A,{key:"track-height-".concat(t.trackHeight),type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return i(e,"trackHeight",parseInt(e.target.value,10))}})," px"),r.a.createElement(T,null,r.a.createElement(L.a,{compact:!0,size:"small",onClick:function(){a(Object(U.a)({},t,{},Jt))}},"Apply")),r.a.createElement(T,null,r.a.createElement(It,null,"Selected data:"),r.a.createElement(qt,{selectedSamplesByCategoryNameAndRowName:n,hideRow:c,hideSample:l,updateSampleSettings:o})))})),Wt=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.locusList,n=e.enabledDataTypes,a=e.setLocus,o=e.setLocusList;return r.a.createElement("div",null,r.a.createElement(ee,{name:"Right Side Bar",locusList:t,setLocus:a,setLocusList:o}),n.includes("alignment")&&r.a.createElement(ht,null),n.includes("vcf")&&r.a.createElement(bt,null),(n.includes("coverage")||n.includes("junctions"))&&r.a.createElement(Ot,null),n.includes("gcnv_bed")&&r.a.createElement(zt,null))}}]),n}(r.a.PureComponent),Kt=Object(l.b)((function(e){return{locusList:je(e),enabledDataTypes:Ve(e)}}),(function(e){return{setLocus:function(t){e({type:"UPDATE_LOCUS",newValue:t})},setLocusList:function(t){e({type:"SET_RIGHT_SIDE_BAR_LOCUS_LIST",values:t})}}}))(Wt);function Yt(){var e=Object(i.a)(["\n  cursor: pointer;\n  margin-left: 20px;\n"]);return Yt=function(){return e},e}var Xt=s.a.a(Yt()),Qt=function(){return r.a.createElement(X,{title:"About the TGG Viewer",size:"large",modalName:"AboutModal",trigger:r.a.createElement(Xt,null,"About")},"The Translational Genomics Group (TGG) Viewer is a free, open-source web app for visualizing splice junctions, copy number, and other data genome-wide using ",r.a.createElement("a",{href:"https://github.com/igvteam/igv.js",target:"_blank"},"IGV.js"),r.a.createElement("br",null),r.a.createElement("br",null),"Main features: ",r.a.createElement("br",null),r.a.createElement("ul",null,r.a.createElement("li",null,"Supports most file formats supported by IGV.js, including: .bed, .vcf, .bam, .cram, .bigWig, as well as several custom formats for splice junctions (.junctions.bed.gz) and gCNV copy-number variants (.gcnv.bed.gz) "),r.a.createElement("li",null,"Includes custom reference tracks such as splice junctions from GTEx v8 muscle, blood, and fibroblast samples."),r.a.createElement("li",null,"Supports adding gene or locus lists to left or right side bar for quick navigation across a list of regions."),r.a.createElement("li",null,"Can load data files or reference tracks from any Google bucket to which you have read-access."),r.a.createElement("li",null,"Retrieves just the on-screen sections of the files directly from Google buckets."),r.a.createElement("li",null,"All settings, gene lists, and data paths can be exported and later restored or shared with others via a .json config file. To export all current settings, click the ",r.a.createElement(E.a,{name:"download"})," button, upload the .json file to github (or another public url), and then to restore the settings, paste the file's URL into the Initial Settings input, and Apply. "),r.a.createElement("li",null,"The page url also records page settings so that they can be bookmarked or shared, but does not include gene lists.")),r.a.createElement("a",{href:"https://github.com/broadinstitute/tgg-viewer/issues",target:"_blank"},"Issues"),"\xa0or ",r.a.createElement("a",{href:"https://github.com/broadinstitute/tgg-viewer/issues",target:"_blank"},"Feature Requests"),"\xa0can be submitted via ",r.a.createElement("a",{href:"https://github.com/broadinstitute/tgg-viewer",target:"_blank"},"GitHub"),".")},$t=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.user;return e.googleUserEmail?r.a.createElement("div",null,"Signed in to Google Buckets as ",r.a.createElement("b",null,e.googleUserEmail)):r.a.createElement("div",null,"Signing in to Google Buckets...")}}]),n}(r.a.PureComponent),Zt=Object(l.b)((function(e){return{user:Me(e)}}))($t);function en(){var e=Object(i.a)(["\n  text-align: right;\n  padding-right: 75px !important;\n"]);return en=function(){return e},e}function tn(){var e=Object(i.a)(["\n  text-align: left;\n  padding-left: 75px !important;\n"]);return tn=function(){return e},e}function nn(){var e=Object(i.a)(["\n  color: #444;\n  margin-bottom: 5px;\n"]);return nn=function(){return e},e}var an=Object(s.a)(u.a.Row)(nn()),rn=Object(s.a)(u.a.Column).attrs({width:6})(tn()),on=Object(s.a)(u.a.Column).attrs({width:10})(en()),cn=function(){return r.a.createElement(u.a,null,r.a.createElement(an,null,r.a.createElement(rn,null,r.a.createElement("b",null,"TGG Viewer:"),r.a.createElement(Qt,null)),r.a.createElement(on,null,r.a.createElement(Zt,null))))},ln=n(301),sn=function(e,t){var n;return function(){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];n&&clearTimeout(n),n=setTimeout((function(){t.apply(void 0,r),n=null}),e)}},un={showIdeogram:!0,showNavigation:!0,showRuler:!0,showCenterGuide:!0,showCursorTrackingGuide:!0,showCommandBar:!0},pn=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).setContainerElement=function(e){a.container=e},a.render=function(){return r.a.createElement("div",null,r.a.createElement("div",{ref:a.setContainerElement}))},a.shouldTrackBeReloaded=function(e,t,n){var a=t.selectedSamplesByCategoryNameAndRowName,r=t.enabledDataTypes,o=t.sjOptions,c=t.vcfOptions,l=t.bamOptions,i=t.gcnvOptions,s=["merged","wig","spliceJunctions"].includes(e.type)&&(n.enabledDataTypes.includes("junctions")!==r.includes("junctions")||n.enabledDataTypes.includes("coverage")!==r.includes("coverage")||n.sjOptions!==o),u="variant"===e.type&&n.vcfOptions!==c,p="alignment"===e.type&&n.bamOptions!==l,d="gcnv"===e.type&&n.gcnvOptions!==i,m="gcnv"===e.type&&(!ge.a.isEqual(((n.selectedSamplesByCategoryNameAndRowName[e.categoryName]||{}).selectedSamples||{})[e.rowName],((a[e.categoryName]||{}).selectedSamples||{})[e.rowName])||!ge.a.isEqual(((n.selectedSamplesByCategoryNameAndRowName[e.categoryName]||{}).sampleSettings||{})[e.rowName],((a[e.categoryName]||{}).sampleSettings||{})[e.rowName]));return s||u||p||d||m},a.getTrackId=function(e){return"".concat(e.url,"|").concat(e.categoryName,"|").concat(e.rowName)},a.getIgvTrackView=function(e){var t=a.getTrackId(e),n=a.browser.trackViews.filter((function(e){var n=(e.track||{}).config||{};return t===a.getTrackId(n)}));return n.length>0&&n[0]},a.reloadRemoveAndAddTracks=function(e){var t=e.tracks.reduce((function(e,t){return Object(U.a)(Object(D.a)({},t.name,t),e)}),{});a.props.tracks.forEach((function(n){var r=t[n.name];if(r)a.shouldTrackBeReloaded(n,a.props,e)&&(console.log("Reloading track",n.name),a.ignoreNextTrackRemovedEvent=!0,a.browser.removeTrackByName(n.name),a.getIgvTrackView(n)||a.browser.loadTrack(r)),delete t[n.name];else try{console.log("Removing track",n.name),a.ignoreNextTrackRemovedEvent=!0,a.browser.removeTrackByName(n.name)}catch(o){console.warn("Unable to remove track",n.name,o)}})),Object.values(t).forEach((function(e){try{a.getIgvTrackView(e)||(console.log("Loading new track",e.name),a.browser.loadTrack(e))}catch(t){console.warn("Unable to add track",e.name,t)}}))},a.container=null,a.browser=null,a.ignoreNextTrackRemovedEvent=!1,a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(ve.a)(Ee.a.mark((function e(){var t,n,a,r,o,c,l,i,s,u=this;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.container){e.next=2;break}return e.abrupt("return");case 2:return t=this.props,n=t.genome,a=t.locus,r=t.tracks,o=t.locusChangedHandler,c=t.trackRemovedHandler,l=t.userChangedHandler,i=Object(U.a)({},un,{locus:a,genome:n,tracks:r}),e.next=6,new Promise((function(e){"undefined"!==typeof gapi&&gapi.load("client:auth2",(function(){gapi.client.load("storage","v1",(function(){gapi.client.init({clientId:"61200892608-qphtf65o323setqdcfj4hnf601mmetvs.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/devstorage.read_only",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/storage/v1/rest"]}),e()}))}))}));case 6:return e.next=8,ye();case 8:return e.next=10,Se();case 10:s=e.sent,l(s),console.log("Calling igv.createBrowser(..)",i),ln.a.createBrowser(this.container,i).then((function(e){u.browser=e,window.igvBrowser=e,o&&u.browser.on("locuschange",sn(300,o)),c&&u.browser.on("trackremoved",(function(e){u.ignoreNextTrackRemovedEvent||c(e.config.categoryName,e.config.rowName),u.ignoreNextTrackRemovedEvent=!1}))}));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shouldComponentUpdate",value:function(e){if(!this.container||!this.browser)return!1;var t=this.browser.$searchInput.val(),n=e.locus;return!e.locus||t&&n.replace(/,/g,"")===t.replace(/,/g,"")||this.browser.search(n),this.reloadRemoveAndAddTracks(e),!1}}]),n}(r.a.Component),dn=Object(l.b)((function(e){return{genome:Re(e),locus:ke(e),tracks:Fe(e),enabledDataTypes:Ve(e),selectedSamplesByCategoryNameAndRowName:Ce(e),sjOptions:_e(e),vcfOptions:Le(e),bamOptions:Be(e),gcnvOptions:De(e)}}),(function(e){return{locusChangedHandler:function(t){var n=t.label.replace(/,/g,"");e({type:"UPDATE_LOCUS",newValue:n})},userChangedHandler:function(t){e({type:"UPDATE_USER",updates:{googleUserEmail:t}})},trackRemovedHandler:function(t,n){e({type:"REMOVE_SELECTED_ROW_NAMES",categoryName:t,selectedRowNames:[n]})}}}))(pn),mn=n(590),gn=n(303),fn=n.n(gn),hn=n(304),bn=n.n(hn),En=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){switch(this.props.status){case n.IN_PROGRESS:return r.a.createElement(E.a,{loading:!0,name:"spinner",style:{color:"#4183c4"}});case n.SUCCEEDED:return r.a.createElement(b.a,{trigger:r.a.createElement(E.a,{name:"check circle",style:{color:"#00C000"}}),content:this.props.successMessage||"Success",position:"top center",size:"small"});case n.ERROR:return r.a.createElement(b.a,{trigger:r.a.createElement(E.a,{name:"warning circle",style:{color:"#F00000"}}),content:this.props.errorMessage||"",position:"top center",size:"small"});default:return r.a.createElement(E.a,{name:"warning circle",style:{color:"rgb(0,0,0,0.0)"}})}}}]),n}(r.a.PureComponent);En.NONE="NONE",En.IN_PROGRESS="IN_PROGRESS",En.SUCCEEDED="SUCCEEDED",En.ERROR="ERROR";var vn=En,yn=n(193),Sn=n.n(yn),wn=n(194),On=n.n(wn),kn={},jn={genome:"hg38",locus:"chr15:92,835,700-93,031,800",dataTypesToShow:["junctions","coverage","vcf","gcnv_bed"],leftSideBarLocusList:[],rightSideBarLocusList:[],rowsInCategories:[],selectedRowNamesByCategoryName:{},sjOptions:{trackHeight:170,hideAnnotated:!1,hideUnannotated:!1,colorBy:"strand",minUniquelyMappedReads:0,minTotalReads:1,maxFractionMultiMappedReads:1,minSplicedAlignmentOverhang:0,thicknessBasedOn:"numUniqueReads",bounceHeightBasedOn:"random",labelUniqueReadCount:!0,labelMultiMappedReadCount:!1,labelTotalReadCount:!1,labelMotif:!1,labelAnnotatedJunction:!1,labelAnnotatedJunctionValue:" [A]"},vcfOptions:{displayMode:"EXPANDED"},bamOptions:{trackHeight:200,showSoftClips:!0,alignmentShading:"strand"},gcnvOptions:{trackHeight:200,trackMin:0,trackMax:5,autoscale:!1,onlyHandleClicksForHighlightedSamples:!0},initialSettingsUrl:""},Nn={locus:"locus",dataTypesToShow:"show",selectedRowNamesByCategoryName:"selectedRows",selectedSamplesByCategoryNameAndRowName:"selectedSamples",sjOptions:"sjOptions",vcfOptions:"vcfOptions",bamOptions:"bamOptions",gcnvOptions:"gcnvOptions",initialSettingsUrl:"settingsUrl"},Rn=["rowsInCategories","leftSideBarLocusList","rightSideBarLocusList"],xn=function(){var e=Rn.reduce((function(e,t){var n=function(e){try{var t=localStorage.getItem(e),n=On.a.decompress(t);if(kn[e]=n,null===n)return;return JSON.parse(n)}catch(a){return}}(t);return void 0!==n&&(e[t]=n),e}),{}),t=Object.entries(Nn).reduce((function(e,t){var n=Object(M.a)(t,2),a=n[0],r=n[1];return Object(U.a)({},e,Object(D.a)({},r,a))}),{}),n=window.location.hash.replace(/^#/,""),a=n?n.split("&").reduce((function(e,n){var a=n.split("="),r=a[0]in t?t[a[0]]:a[0];if("locus"===r)e=Object(U.a)({},e,Object(D.a)({},r,a[1]));else try{e[r]=Sn.a.parse(a[1])}catch(o){console.error("Couldn't parse url hash param",a[0],": ",a[1])}return e}),{}):{};return Object(U.a)({},jn,{},e,{},a)},Tn=function(e){Rn.forEach((function(t){!function(e,t){try{var n=JSON.stringify(t);if(kn[e]===n)return;console.warn("LocalStorage: compressing ".concat(e));var a=On.a.compress(n);localStorage.setItem(e,a),kn[e]=n}catch(r){console.warn("Unable to save state: ",e,t,r)}}(t,e[t])}));var t=Object.keys(e).filter((function(e){return e in Nn})).reduce((function(t,n){var a="locus"===n?e[n].replace(",",""):Sn.a.stringify(e[n]);return[].concat(Object(f.a)(t),["".concat(Nn[n],"=").concat(a)])}),[]).join("&");window.location.hash="#".concat(t)};function An(){var e=Object(i.a)(["\n  margin-left: 20px !important;\n  margin-right: 15px !important;\n"]);return An=function(){return e},e}function Cn(){var e=Object(i.a)(["\n  margin-top: 100px;\n  width: calc(100% - 350px);\n"]);return Cn=function(){return e},e}function _n(){var e=Object(i.a)(["\n  color: #999;\n  width: 100%;\n  text-align: center;\n  \n  .ui.label {\n    color: #444;\n    background-color: #f3f3f3;\n  }\n"]);return _n=function(){return e},e}var Ln=s.a.div(_n()),Bn=Object(s.a)(mn.a)(Cn()),Dn=Object(s.a)(L.a)(An()),Mn=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).loadInitialSettingsUrl=function(){var e=Object(ve.a)(Ee.a.mark((function e(t){var n,r,o,c,l,i,s,u,p,d,m,g;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.props,r=n.globalState,o=n.updateInitialSettingsUrl,c=n.setInitialSettingsUrlHasBeenApplied,l=n.resetGlobalState,t){e.next=6;break}return l(Object(U.a)({},jn,{},{user:r.user})),o(""),c(),e.abrupt("return");case 6:if(-1!==t.search(":")&&-1!==t.search("/")){e.next=8;break}throw new Error('Invalid url: "'.concat(t,'"'));case 8:return i=-1!==t.search(".yaml")||-1!==t.search(".yml"),s=-1!==t.search(".json"),u=!i&&!s,e.next=13,fetch(t);case 13:if((p=e.sent).ok){e.next=16;break}throw new Error("Couldn't load URL. Error: ".concat(p.statusText.toLowerCase()," (").concat(p.status,")"));case 16:return e.next=18,p.text();case 18:if(d=e.sent,(m=null)||!i&&!u){e.next=30;break}e.prev=21,m=bn.a.safeLoad(d),e.next=30;break;case 25:if(e.prev=25,e.t0=e.catch(21),!i){e.next=30;break}return console.error("Unable to parse YAML file: ".concat(t,". ").concat(e.t0)),e.abrupt("return");case 30:if(m||!s&&!u){e.next=40;break}e.prev=31,m=JSON.parse(d),e.next=40;break;case 35:if(e.prev=35,e.t1=e.catch(31),!s){e.next=40;break}return console.error("Unable to parse JSON file: ".concat(t,". ").concat(e.t1)),e.abrupt("return");case 40:if(m){e.next=43;break}return console.error("Unable to parse JSON or YAML from: ".concat(t)),e.abrupt("return");case 43:g=Object.keys(r).reduce((function(e,t){return t in m?Object(U.a)({},e,Object(D.a)({},t,m[t])):e}),{}),l(Object(U.a)({},r,{},g)),o(t),c();case 47:case"end":return e.stop()}}),e,null,[[21,25],[31,35]])})));return function(t){return e.apply(this,arguments)}}(),a.applyInitialSettingsUrl=function(){var e=Object(ve.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({requestStatus:vn.IN_PROGRESS}),t.startsWith("https://github.com/")&&(t=t.replace("https://github.com","https://raw.githubusercontent.com").replace("blob/","")),e.prev=2,e.next=5,a.loadInitialSettingsUrl(t);case 5:a.setState({requestStatus:vn.SUCCEEDED,successMessage:t?"Successfully loaded URL and applied settings":"Reset all settings to defaults"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),a.setState({requestStatus:vn.ERROR,errorMessage:e.t0.toString()});case 11:return e.next=13,fn()(1e4);case 13:a.state.requestStatus!==vn.IN_PROGRESS&&a.setState({requestStatus:vn.NONE,errorMessage:""});case 14:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}(),a.exportCurrentSettings=function(){var e=["initialSettings","initialSettingsUrlHasBeenApplied","user","modals"],t=Object.keys(a.props.globalState).reduce((function(t,n){return e.includes(n)||(t[n]=a.props.globalState[n]),t}),{});return encodeURIComponent(JSON.stringify(t,null,5))},a.textInputValue=e.initialSettingsUrl||"",a.state={requestStatus:vn.NONE,successMessage:"",errorMessage:""},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(ve.a)(Ee.a.mark((function e(){var t,n,a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.initialSettingsUrl,a=t.initialSettingsUrlHasBeenApplied,!n||a){e.next=5;break}return console.log("Loading settings from url",n),e.next=5,this.applyInitialSettingsUrl(n);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.initialSettingsUrl;return r.a.createElement(Ln,{align:"center"},r.a.createElement(Bn,{label:"Initial settings:",defaultValue:t,placeholder:"URL of .yaml or .json settings file (eg. http://.../settings.json), or blank to reset all settings to defaults.",onChange:function(t){e.textInputValue=t.target.value},onKeyUp:function(t){return 13===t.keyCode&&e.applyInitialSettingsUrl(t.target.value)}}),r.a.createElement(Dn,{content:"Apply",onClick:function(){return e.applyInitialSettingsUrl(e.textInputValue)}}),r.a.createElement(vn,{status:this.state.requestStatus,errorMessage:this.state.errorMessage,successMessage:this.state.successMessage}),r.a.createElement(b.a,{content:"Export current settings to a .json file. If you then upload this file to a public url (for example to github) and then paste the url here, these settings will be restored.",position:"right center",trigger:r.a.createElement("a",{download:"settings.json",href:"data:text/json;charset=utf-8,".concat(this.exportCurrentSettings())},r.a.createElement(L.a,{icon:"download"}))}))}}]),n}(r.a.PureComponent),Un=Object(l.b)((function(e){return{globalState:e,initialSettingsUrl:Ue(e),initialSettingsUrlHasBeenApplied:Ie(e)}}),(function(e){return{updateInitialSettingsUrl:function(t){e({type:"UPDATE_INITIAL_SETTINGS_URL",newValue:t})},setInitialSettingsUrlHasBeenApplied:function(){e({type:"UPDATE_INITIAL_SETTINGS_URL_HAS_BEEN_APPLIED",newValue:!0})},resetGlobalState:function(t){e({type:"RESET_GLOBAL_STATE",newState:t})}}}))(Mn);function In(){var e=Object(i.a)(["\n  min-width: calc(99% - ","px) !important;\n"]);return In=function(){return e},e}function Pn(){var e=Object(i.a)(["\n  min-width: ","px !important;\n"]);return Pn=function(){return e},e}function Vn(){var e=Object(i.a)(["\n  padding: 10px 20px;\n"]);return Vn=function(){return e},e}var Hn=s.a.div(Vn()),Gn=Object(s.a)(u.a.Column)(Pn(),210),Fn=Object(s.a)(u.a.Column)(In(),425),qn=function(){return r.a.createElement(Hn,null,r.a.createElement(u.a,null,r.a.createElement(u.a.Row,null,r.a.createElement(Gn,null,r.a.createElement(gt,null)),r.a.createElement(Fn,null,r.a.createElement(cn,null),r.a.createElement(dn,null),r.a.createElement(Un,null)),r.a.createElement(Gn,null,r.a.createElement(Kt,null)))))},Jn=n(76),zn=n(305),Wn=Object(Jn.c)(Object.assign({genome:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},locus:I("UPDATE_LOCUS",""),rightSideBarLocusList:V("RIGHT_SIDE_BAR_LOCUS_LIST"),leftSideBarLocusList:V("LEFT_SIDE_BAR_LOCUS_LIST"),dataTypesToShow:V("DATA_TYPES_TO_SHOW"),rowsInCategories:function(e,t){return t&&t.categoryName&&t.rows?e.map((function(e){if(e.categoryName!==t.categoryName)return e;var n;switch(t.type){case"SET_ROWS":n=Object(f.a)(t.rows);break;case"ADD_ROWS":var a=e.rows.map((function(e){return e.name}));n=[].concat(Object(f.a)(e.rows),Object(f.a)(t.rows.filter((function(e){return!a.includes(e.name)}))));break;default:n=e.rows}return Object(U.a)({},e,{rows:n})})):e||[]},selectedRowNamesByCategoryName:function(e,t){if(!t||!t.categoryName||!Array.isArray(t.selectedRowNames))return e||{};var n=e[t.categoryName]||[];switch(t.type){case"SET_SELECTED_ROW_NAMES":case"ADD_SELECTED_ROW_NAMES":case"REMOVE_SELECTED_ROW_NAMES":var a;if("SET_SELECTED_ROW_NAMES"===t.type)a=Array.from(new Set(t.selectedRowNames));else if("ADD_SELECTED_ROW_NAMES"===t.type)a=Array.from(new Set([].concat(Object(f.a)(n),Object(f.a)(t.selectedRowNames))));else{var r=t.selectedRowNames;a=n.filter((function(e){return!r.includes(e)}))}return Object(U.a)({},e,Object(D.a)({},t.categoryName,a));default:console.trace("Unknown action type: ".concat(t.type))}return e},selectedSamplesByCategoryNameAndRowName:function(e,t){if(!t||!t.categoryName||!t.selectedSamplesByRowName&&!t.sampleSettingsByRowNameAndSampleName)return e||{};var n=e[t.categoryName]||{},a=n.selectedSamples||{},r=n.sampleSettings||{},o=a,c=r;switch(t.type){case"SET_SELECTED_SAMPLES":case"ADD_SELECTED_SAMPLES":case"REMOVE_SELECTED_SAMPLES":o="SET_SELECTED_SAMPLES"===t.type?Object(U.a)({},a,{},t.selectedSamplesByRowName):"ADD_SELECTED_SAMPLES"===t.type?Array.from(new Set([].concat(Object(f.a)(Object.keys(a)),Object(f.a)(Object.keys(t.selectedSamplesByRowName))))).reduce((function(e,n){return e[n]=Array.from(new Set([].concat(Object(f.a)(a[n]||[]),Object(f.a)(t.selectedSamplesByRowName[n]||[])))),e}),{}):Object.keys(a).reduce((function(e,n){var r=t.selectedSamplesByRowName[n]||[],o=(a[n]||[]).filter((function(e){return!r.includes(e)}));return o.length>0&&(e[n]=o),e}),{});break;case"UPDATE_SAMPLE_SETTINGS":c=Object(U.a)({},r,{},t.sampleSettingsByRowNameAndSampleName),Object.keys(t.sampleSettingsByRowNameAndSampleName).forEach((function(e){var n=r[e]||{},a=t.sampleSettingsByRowNameAndSampleName[e],o=Object(U.a)({},n,{},a);Object.entries(a).forEach((function(e){var t=Object(M.a)(e,2),a=t[0],r=t[1],c=Object(U.a)({},n[a]||{},{},r);o[a]=c})),c[e]=o}));break;default:return console.trace("Unknown action type: ".concat(t.type)),e}return Object(U.a)({},e,Object(D.a)({},t.categoryName,{selectedSamples:o,sampleSettings:c}))},sjOptions:P("UPDATE_SJ_OPTIONS"),vcfOptions:P("UPDATE_VCF_OPTIONS"),bamOptions:P("UPDATE_BAM_OPTIONS"),gcnvOptions:P("UPDATE_GCNV_OPTIONS"),user:P("UPDATE_USER"),initialSettingsUrl:I("UPDATE_INITIAL_SETTINGS_URL",""),initialSettingsUrlHasBeenApplied:I("UPDATE_INITIAL_SETTINGS_URL_HAS_BEEN_APPLIED",!1)},H)),Kn=function(e,t){if("RESET_GLOBAL_STATE"===t.type)return t.newState;var n=Wn(e,t);return Tn(n),n},Yn=function(){var e=xn();return console.log("Initializing store to:",e),Object(Jn.e)(Kn,e,Object(Jn.d)(Object(Jn.a)(zn.a)))};var Xn=function(){return r.a.createElement(l.a,{store:Yn()},r.a.createElement(qn,null))};c.a.render(r.a.createElement(Xn,null),document.getElementById("root"))}},[[318,1,2]]]);
//# sourceMappingURL=main.c6bcde13.chunk.js.map