(this.webpackJsonprnaseq_viewer=this.webpackJsonprnaseq_viewer||[]).push([[0],{314:function(e,t,n){e.exports=n(574)},319:function(e,t,n){},574:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(57),c=n.n(o),l=(n(319),n(26)),i=n(13),s=n(14),u=n(595),m=n(6),p=n(8),d=n(23),g=n(22),h=n(32),f=n(575),b=n(592),E=n(77),v=n(272),y=n.n(v);function w(){var e=Object(i.a)(["\n  display: inline;\n  width: 50px;\n  margin-left: 5px;\n  padding-left: 5px;\n"]);return w=function(){return e},e}function S(){var e=Object(i.a)(["\n  margin: 10px 0px; \n"]);return S=function(){return e},e}function O(){var e=Object(i.a)(["\n  padding-top: 3px;\n  z-index: 100000;\n"]);return O=function(){return e},e}function k(){var e=Object(i.a)(["\n  margin-top: 5px !important;\n"]);return k=function(){return e},e}function j(){var e=Object(i.a)(["\n  opacity: 0.95;\n"]);return j=function(){return e},e}function x(){var e=Object(i.a)([" \n  display: inline-block;\n  margin: 12px 0px 0px 0px !important;\n"]);return x=function(){return e},e}var T=s.a.h3(x()),R=Object(s.a)(b.a)(j()),C=Object(s.a)(E.a)(k()),N=s.a.div(O()),A=Object(s.a)(N)(S()),_=s.a.input(w()),L=n(31),I=n(28),B=n(576),D=n(280);function U(){var e=Object(i.a)(["\n  padding: 0px !important;\n  div {\n    overflow-y: visible !important;\n  }\n"]);return U=function(){return e},e}function P(){var e=Object(i.a)(["\n  display: inline-block;\n  cursor: pointer;\n  border-radius: 2px;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.1);\n  width: 10px;\n  height: 12px;\n"]);return P=function(){return e},e}function M(){var e=Object(i.a)(["\n  display: inline-block;\n  cursor: pointer;\n  border-radius: 2px;\n  padding: 1px 2px;\n  background: #fff;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.1);\n"]);return M=function(){return e},e}var V=s.a.div(M()),W=s.a.div(P()),G=Object(s.a)(b.a).attrs({flowing:!0})(U()),J=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleChange=function(e){a.setState({color:e})},a.handleApply=function(e){a.props.colorChangedHandler(e.hex)},a.state={color:a.props.color},a}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement(G,{on:"click",position:"left center",trigger:r.a.createElement(V,null,r.a.createElement(W,{style:{background:this.state.color}})),content:r.a.createElement(D.SwatchesPicker,{color:this.state.color,onChangeComplete:this.handleApply,onChange:function(t){return e.setState({color:t})}})})}}]),n}(r.a.Component),H=["GT/AG","CT/AC","GC/AG","CT/GC","AT/AC","GT/AT","non-canonical"],q=n(25),F=n(78),z=n(1),K=n.n(z),Y=n(5),X=function(){var e=Object(Y.a)(K.a.mark((function e(){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance();case 2:if((t=e.sent).isSignedIn.get()){e.next=6;break}return e.next=6,t.signIn();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(Y.a)(K.a.mark((function e(){var t,n,a;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance();case 2:return t=e.sent,n=t&&t.currentUser&&t.currentUser.get(),a=n&&n.getBasicProfile(),e.abrupt("return",a&&a.getEmail());case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(Y.a)(K.a.mark((function e(){var t,n;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance();case 2:return t=e.sent,n=t&&t.currentUser&&t.currentUser.get(),t.isSignedIn.get()||n.reloadAuthResponse(),e.abrupt("return",n.getAuthResponse().access_token);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(e){return e.locus},ee=function(e){return e.rightSideBarLocusList},te=function(e){return e.leftSideBarLocusList},ne=function(e){return e.genome},ae=function(e){return e.rowsInCategories},re=function(e){return e.selectedRowNamesByCategoryName},oe=function(e){return e.selectedSamplesByCategoryNameAndRowName},ce=function(e){return e.sjOptions},le=function(e){return e.vcfOptions},ie=function(e){return e.bamOptions},se=function(e){return e.gcnvOptions},ue=function(e){return e.user},me=function(e){return e.initialSettingsUrl},pe=Object(F.a)(ae,(function(e){return Object(h.a)(e.reduce((function(e,t){return t.rows.forEach((function(t){t.data&&t.data.filter((function(e){return e.type})).map((function(e){return e.type})).forEach((function(t){e.add(t)}))})),e}),new Set))})),de=Object(F.a)(ae,(function(e){return Object(h.a)(e.reduce((function(e,t){return t.rows.forEach((function(t){if(t.data){var n=t.data.filter((function(e){return e.type})).map((function(e){return e.type}));new Set(n).size>=2&&n.forEach((function(t){e.add(t)}))}})),e}),new Set))})),ge=Object(F.a)(pe,de,(function(e){return e.dataTypesToShow}),(function(e,t,n){return e.filter((function(e){return!t.includes(e)||n.includes(e)}))})),he=Object(F.a)(ae,(function(e){return e.reduce((function(e,t){return Object(q.a)({},e,Object(L.a)({},t.categoryName,t.rows))}),{})})),fe=Object(F.a)(re,he,(function(e,t){return Object.entries(e).reduce((function(e,n){var a=Object(I.a)(n,2),r=a[0],o=a[1];return t[r]?Object(q.a)({},e,Object(L.a)({},r,t[r].filter((function(e){return o.includes(e.name)})))):e}),{})})),be=Object(F.a)(fe,oe,(function(e){return e.trackOrder}),ge,ce,le,ie,se,(function(e,t,n,a,r,o,c,l){var i=[];Object.entries(e).forEach((function(e){var s=Object(I.a)(e,2),u=s[0];return s[1].forEach((function(e,s){var m,p;(e.data||[]).forEach((function(d,g){if(a.includes(d.type)){var h=function(e){var t=n.indexOf(e);return-1!==t?t+=5e4:t=100*s+g,t};if("gcnv_bed"===d.type){var f="".concat(e.name," ").concat(d.label||""),b=h(f);console.log("Adding ".concat(f," (").concat(d.url,") track: order ").concat(b)),i.push({type:"gcnv",format:"gcnv",name:f,url:d.url,indexURL:d.indexURL||"".concat(d.url,".tbi"),height:l.trackHeight,min:l.trackMin,max:l.trackMax,autoscale:l.autoscale,highlightSamples:(((t[u]||{}).selectedSamples||{})[e.name]||[]).reduce((function(n,a){return n[a]=((((t[u]||{}).sampleSettings||{})[e.name]||{})[a]||{}).color||"blue",n}),{}),onlyHandleClicksForHighlightedSamples:l.onlyHandleClicksForHighlightedSamples,oauthToken:$,order:b,rowName:e.name,categoryName:u})}else if("junctions"===d.type){if(m)return void console.error('More than one "junctions" track found in row',e);m={type:"spliceJunctions",format:"bed",url:d.url,indexURL:d.indexURL||"".concat(d.url,".tbi"),oauthToken:$,name:e.name,order:h(e.name),height:r.trackHeight,minUniquelyMappedReads:r.minUniquelyMappedReads,minTotalReads:r.minTotalReads,maxFractionMultiMappedReads:r.maxFractionMultiMappedReads,minSplicedAlignmentOverhang:r.minSplicedAlignmentOverhang,minSamplesWithThisJunction:r.minSamplesWithThisJunction,maxSamplesWithThisJunction:r.maxSamplesWithThisJunction,minPercentSamplesWithThisJunction:r.minPercentSamplesWithThisJunction,maxPercentSamplesWithThisJunction:r.maxPercentSamplesWithThisJunction,minJunctionEndsVisible:r.minJunctionEndsVisible,thicknessBasedOn:r.thicknessBasedOn,bounceHeightBasedOn:r.bounceHeightBasedOn,colorBy:r.colorBy,colorByNumReadsThreshold:void 0!==r.colorByNumReadsThreshold?r.colorByNumReadsThreshold:5,hideStrand:r.showOnlyPlusStrand?"-":r.showOnlyMinusStrand?"+":void 0,labelWith:r.labelWith,labelWithInParen:r.labelWithInParen,hideAnnotatedJunctions:r.hideAnnotated,hideUnannotatedJunctions:r.hideUnannotated,hideMotifs:H.filter((function(e){return r["hideMotif".concat(e)]})),rowName:e.name,categoryName:u}}else if("coverage"===d.type){if(p)return void console.error('More than one "coverage" track found in row',e);p={type:"wig",format:"bigwig",url:d.url,oauthToken:$,name:e.name,order:h(e.name),height:r.trackHeight,rowName:e.name,categoryName:u},d.url.includes("spliceai")&&(p.color=function(e){return e<.5?"rgb(180,180,180)":e<.8?"rgb(180,180,0)":"rgb(200,0,0)"})}else if(["bed","gff3","gtf","genePred","genePredExt","peaks","narrowPeak","broadPeak","bigBed","bedpe"].includes(d.type)){var E="".concat(e.name," ").concat(d.label||""),v=h(E);console.log("Adding ".concat(E," (").concat(d.url,") ").concat(d.type," track: order ").concat(v)),i.push({type:"annotation",format:d.type,name:E,order:v,url:d.url,oauthToken:$,indexURL:d.indexURL||"".concat(d.url,".tbi"),height:100})}else if(("vcf"===d.type||d.url.includes(".vcf"))&&a.includes("vcf")){var y="".concat(e.name," ").concat(d.label||"vcf"),w=h(y);console.log("Adding ".concat(y," (").concat(d.url,") track: order ").concat(w)),i.push({type:"variant",format:"vcf",url:d.url,indexURL:d.indexURL||"".concat(d.url,".tbi"),indexed:!0,name:y,order:w,displayMode:o.displayMode,oauthToken:$,rowName:e.name,categoryName:u})}else if("alignment"===d.type||d.url.includes(".bam")||d.url.includes(".cram")){var S="".concat(e.name," ").concat(d.label||"bam"),O=h(S);console.log("Adding ".concat(S," (").concat(d.url,") track: order ").concat(O)),i.push({type:"alignment",url:d.url,indexURL:d.indexURL||("".concat(d.url).endsWith("cram")?"".concat(d.url,".crai"):"".concat(d.url).endsWith("bam")?"".concat(d.url,".bai"):null),indexed:!0,name:S,order:O,height:c.trackHeight,colorBy:c.colorBy,viewAsPairs:c.viewAsPairs,showSoftClips:c.showSoftClips,oauthToken:$,rowName:e.name,categoryName:u})}}else console.log("Skipping hidden track: ".concat(d.url))})),p&&m?(console.log("Adding ".concat(m.name," (").concat(m.url," & ").concat(p.url,") track: order ").concat(m.order)),i.push({type:"merged",name:m.name,order:m.order,height:r.trackHeight,tracks:[p,m],rowName:e.name,categoryName:u})):m?(console.log("Adding ".concat(m.name," (").concat(m.url,") track: order ").concat(m.order)),i.push(m)):p&&(console.log("Adding ".concat(p.name," (").concat(p.url,") track: order ").concat(p.order)),i.push(p))}))}));var s=n.indexOf("Gencode v32 Genes");return-1!==s?s+=5e4:s=1000001,i.push({name:"Gencode v32 Genes",format:"refgene",url:"gs://tgg-viewer/ref/GRCh38/gencode_v32/gencode_v32_knownGene.sorted.txt.gz",indexURL:"gs://tgg-viewer/ref/GRCh38/gencode_v32/gencode_v32_knownGene.sorted.txt.gz.tbi",indexed:!0,searchable:!0,height:350,visibilityWindow:-1,displayMode:"EXPANDED",order:s,color:"rgb(76,171,225)",oauthToken:$}),i}));function Ee(){var e=Object(i.a)(["\n  word-wrap: break-word;\n  word-break: break-all;  \n  white-space: normal;\n"]);return Ee=function(){return e},e}function ve(){var e=Object(i.a)(["\n  padding: 0px !important;\n  box-shadow: none !important;\n"]);return ve=function(){return e},e}function ye(){var e=Object(i.a)(["\n  margin: 10px 0px 8px 0px;\n  font-style: italic;\n"]);return ye=function(){return e},e}var we=s.a.span(ye()),Se=Object(s.a)(B.a).attrs({basic:!0,icon:!0})(ve()),Oe=s.a.span(Ee()),ke=function(e){var t=e.categoryName,n=e.rowName,a=e.sample,o=e.sampleSettings,c=e.hideSample,l=e.updateSampleSettings,i=e.numSelectedSamplesInRow;return r.a.createElement("div",{style:{whiteSpace:"nowrap"}},r.a.createElement(Se,{onClick:function(){return c(t,n,a,i)}},r.a.createElement(E.a,{name:"delete"})),r.a.createElement(Oe,null,a),r.a.createElement("span",{style:{marginLeft:"8px"}},r.a.createElement(J,{key:o.color,color:o.color||"blue",colorChangedHandler:function(e){return l(t,n,a,{color:e})}})))},je=Object(l.b)((function(e){return{selectedSamplesByCategoryNameAndRowName:oe(e)}}),(function(e){return{updateGcnvOptions:function(t){e({type:"UPDATE_GCNV_OPTIONS",updates:t})},hideRow:function(t,n){e({type:"REMOVE_SELECTED_ROW_NAMES",categoryName:t,selectedRowNames:[n]})},hideSample:function(t,n,a,r){r<=1&&e({type:"REMOVE_SELECTED_ROW_NAMES",categoryName:t,selectedRowNames:[n]}),e({type:"REMOVE_SELECTED_SAMPLES",categoryName:t,selectedSamplesByRowName:Object(L.a)({},n,[a])})},updateSampleSettings:function(t,n,a,r){e({type:"UPDATE_SAMPLE_SETTINGS",categoryName:t,sampleSettingsByRowNameAndSampleName:Object(L.a)({},n,Object(L.a)({},a,r))})}}}))((function(e){var t=e.selectedSamplesByCategoryNameAndRowName,n=e.hideRow,a=e.hideSample,o=e.updateSampleSettings,c=[];return Object.entries(t).forEach((function(e){var t=Object(I.a)(e,2),l=t[0],i=t[1];Object.entries(i.selectedSamples||{}).forEach((function(e){var t=Object(I.a)(e,2),s=t[0],u=t[1];c.push(r.a.createElement("div",{key:"".concat(l,"!!").concat(s)},r.a.createElement("div",{style:{whiteSpace:"nowrap",margin:"15px 0px 7px 0px"}},r.a.createElement(we,null,"".concat(l,": ").concat(s))),u.map((function(e){return r.a.createElement(ke,{key:e,categoryName:l,rowName:s,sample:e,sampleSettings:((i.sampleSettings||{})[s]||{})[e]||{},hideRow:n,hideSample:a,updateSampleSettings:o,numSelectedSamplesInRow:u.length})}))))}))})),c.length>0?c:null})),xe=n(590),Te=n(589),Re=n(591),Ce=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case e:return void 0===r.newValue?(console.error("Invalid ".concat(e," action: action.newValue is undefined: "),r),a):(n&&console.log("singleValueReducer: applying action: ",r,"State changing from ",a," to ",r.newValue),r.newValue);default:return a}};return a},Ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case e:if(void 0===r.updates)return console.error("Invalid ".concat(e," action: action.updates is undefined: "),r),a;var o=Object(q.a)({},a,{},r.updates);return n&&console.log("singleObjectReducer: applying action: ",r,"State changing from ",a," to ",o),o;default:return a}};return a},Ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case"SET_".concat(e):case"ADD_".concat(e):case"REMOVE_".concat(e):if(!Array.isArray(r.values))return console.error("Invalid ".concat(r.type," action: action.values is undefined or not an array: "),r),a;var o;if(r.type==="SET_".concat(e))o=Object(h.a)(r.values);else if(r.type==="ADD_".concat(e))o=[].concat(Object(h.a)(a),Object(h.a)(r.values));else{var c=r.values;o=a.filter((function(e){return!c.includes(e)}))}return n&&console.log("createArrayReducer: applying action: ",r,"State changing from ",a," to ",o),o;default:return a}};return a},_e={modals:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,o=arguments.length>1?arguments[1]:void 0;if(!o)return r;switch(o.type){case e:if(void 0===o.updatesById)return console.error("Invalid ".concat(e," action. action.updatesById is undefined: "),o),r;var c=o.updatesById;if(t){if(!(t in c))return r;c=c[t]}var l=Object(q.a)({},r);return Object.entries(c).forEach((function(e){var t=Object(I.a)(e,2),n=t[0],a=t[1];null==a?delete l[n]:l[n]?l[n]=Object(q.a)({},l[n],{},a):l[n]=Object(q.a)({},a)})),a&&console.log("objectsByIdReducer: applying action: ",o,"State changing from: ",r," to ",l),l;default:return r}};return r}("UPDATE_MODAL_STATE")},Le=function(e,t){return e.modals[t]&&e.modals[t].open};function Ie(){var e=Object(i.a)(["\n  margin-left: 10px !important;\n  width: 100px;\n"]);return Ie=function(){return e},e}function Be(){var e=Object(i.a)(["\n  float: right;\n  padding: 0px 20px 20px 20px;\n"]);return Be=function(){return e},e}function De(){var e=Object(i.a)(["\n  &.ui.button.basic {\n    white-space: nowrap;\n    border: none;\n    padding: ",";\n    color: "," !important;\n    text-decoration: none;\n    font-weight: ",';\n    box-shadow: none !important;\n    user-select: auto;\n    \n    &:hover, &:focus, &:active {\n      color: #1e70bf !important;\n      background: transparent !important;\n    }\n    \n    &[class*="right labeled"].icon {\n      padding-left: 0 !important;\n      padding-right: 2.1em !important;\n      \n      > .icon {\n        background-color: initial;\n      }\n    }\n  }\n']);return De=function(){return e},e}var Ue=Object(s.a)(B.a).attrs({basic:!0})(De(),(function(e){return e.padding||0}),(function(e){return e.color||"#4183C4"}),(function(e){return e.fontWeight||"inherit"})),Pe=s.a.div(Be()),Me=Object(s.a)(B.a)(Ie()),Ve=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleClose=function(){var t=!0;e.props.handleClose&&(t=e.props.handleClose()),t&&e.props.close()},e.handleSave=function(){var t=!0;e.props.handleSave&&(t=e.props.handleSave()),t&&e.props.close()},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.trigger?r.a.cloneElement(this.props.trigger,{onClick:this.props.open}):null;return r.a.createElement(Re.a,{open:this.props.isOpen,trigger:e,onClose:this.handleClose,size:this.props.size},r.a.createElement(Re.a.Header,null,this.props.title,r.a.createElement(Ue,{floated:"right",onClick:this.handleClose,icon:r.a.createElement(E.a,{name:"remove",color:"grey"})})),r.a.createElement(Re.a.Content,null,this.props.children),r.a.createElement(Pe,null,r.a.createElement(Me,{tabIndex:0,onClick:this.handleClose,type:"button"},"Cancel"),r.a.createElement(Me,{tabIndex:0,onClick:this.handleSave,type:"submit",color:"blue"},this.props.handleSave?"Save":"Ok")))}}]),n}(r.a.PureComponent);Ve.defaultProps={size:"small"};var We=Object(l.b)((function(e,t){return{isOpen:Le(e,t.modalName)}}),(function(e,t){return{open:function(n){var a;n.preventDefault(),e((a=t.modalName,function(e){return e({type:"UPDATE_MODAL_STATE",updatesById:Object(L.a)({},a,{open:!0})})}))},close:function(){var n,a;e((n=t.modalName,a=!0,function(e,t){t().modals[n].confirmOnClose&&!a?e({type:"UPDATE_MODAL_STATE",updatesById:Object(L.a)({},n,{confirming:!0})}):e({type:"UPDATE_MODAL_STATE",updatesById:Object(L.a)({},n,{open:!1,confirming:!1,confirmOnClose:null})})}))}}}))(Ve);function Ge(){var e=Object(i.a)(["\n  cursor: pointer;\n"]);return Ge=function(){return e},e}var Je=s.a.a(Ge()),He=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(e){var a;Object(m.a)(this,n),(a=t.call(this,e)).render=function(){var e=a.props,t=e.locusList,n=e.name,o=e.setLocusList,c="Locus List - ".concat(n);return r.a.createElement(We,{title:c,size:"large",modalName:c,trigger:r.a.createElement(Je,null,(t||[]).length>0?r.a.createElement("div",null,r.a.createElement("br",null),"Edit Locus List"):r.a.createElement("div",null,"Add Locus List To Side Bar")),handleSave:function(){var e=a.textAreaValue.split(/[,\s]+/).filter(Boolean);return o(e),!0}},r.a.createElement(xe.a,null,r.a.createElement(xe.a.Field,{control:Te.a,style:{minHeight:"300px"},defaultValue:a.textAreaValue,onKeyUp:function(e){a.textAreaValue=e.target.value},placeholder:"Enter genomic positions, intervals, and/or gene names separated by commas, spaces, or new lines.  These can be in any format recognized by the IGV search bar.  For example: DMD, ENST00000589830, chr1:55516888, 2:152341851-152591002"})),r.a.createElement("br",null),r.a.createElement("b",null,r.a.createElement("i",null,"NOTE:"))," This locus list will be saved across page refreshes in this browser, \xa0 but will not be recorded in the page url like other settings.\xa0 Sharing or bookmarking this page won't include the contents of this list.")};var o=a.props.locusList;return a.textAreaValue=(o||[]).join("\n"),a}return n}(r.a.PureComponent),qe=function(e){var t=e.name,n=e.locusList,a=e.setLocus,o=e.setLocusList;return r.a.createElement("div",null,n.map((function(e,t){return r.a.createElement("div",{key:"".concat(e," ").concat(t)},t+1,". \xa0 ",r.a.createElement(Je,{onClick:function(){a(e)}},e))})),r.a.createElement(He,{name:t,locusList:n,setLocusList:o}))},Fe=n(593);function ze(){var e=Object(i.a)(["\n"]);return ze=function(){return e},e}function Ke(){var e=Object(i.a)(["\n  font-family: monospace;\n  background-color: #F7F7F7;\n"]);return Ke=function(){return e},e}function Ye(){var e=Object(i.a)(["\n  font-family: monospace;\n  margin: 20px 30px;\n  padding: 10px;\n  background-color: #F7F7F7;\n  white-space: nowrap;\n"]);return Ye=function(){return e},e}function Xe(){var e=Object(i.a)(["\n  cursor: pointer;\n  padding: 10px 10px 10px 0px;\n  display: inline-block;\n"]);return Xe=function(){return e},e}var Qe=s.a.a(Xe()),$e=s.a.div(Ye()),Ze=s.a.span(Ke()),et=Object(s.a)(b.a).attrs({position:"right center"})(ze()),tt={".bigWig":"coverage",".bw":"coverage",".junctions.bed":"junctions",".spliceJunctions.bed":"junctions",".junctions.bed.gz":"junctions",".spliceJunctions.bed.gz":"junctions",".bam":"bam",".cram":"bam",".vcf":"vcf",".vcf.gz":"vcf",".wig":"wig",".bedGraph":"wig",".gcnv.bed":"gcnv_bed",".gcnv.bed.gz":"gcnv_bed",".bed":"bed",".bed.gz":"bed",".gff3":"gff",".gtf":"gtf",".gtf.gz":"gtf",".genePred":"genePred",".bigBed":"bigBed"},nt=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).getInitialState=function(){return{textAreaValue:"",warningMessage:null,errorMessage:null}},a.parseTextAreaValueToRows=function(e){if(!e.trim())return{rows:[],errorMessage:null};var t=null,n=[],a=e.split(/[,\s]+/).filter(Boolean).reduce((function(e,t){var a=t.split("/"),r=a[a.length-1],o=Object.keys(tt).filter((function(e){return r.endsWith(e)}));if(0===o.length)n.push(t);else{var c=o[0],l=r.replace(c,"");e[l]||(e[l]={data:[]}),e[l].name=l,e[l].data.push({type:tt[c],url:t})}return e}),{});return n.length>0&&(t="These paths have file suffixes that are not recognized: ".concat(n.join(", "))),{newRows:Object.values(a),errorMessage:t}},a.handleModalSave=function(){var e=a.props.addRows,t=a.state.textAreaValue,n=a.parseTextAreaValueToRows(t),r=n.newRows,o=n.errorMessage;return o?(a.setState({errorMessage:o}),!1):(e(r),a.setState(a.getInitialState()),!0)},a.handleModalClose=function(){return a.setState(a.getInitialState()),!0},a.render=function(){var e=a.props,t=e.title,n=e.trigger,o=a.state,c=o.textAreaValue,l=o.warningMessage,i=o.errorMessage,s="".concat(t," Rows");return r.a.createElement(We,{title:s,size:"large",modalName:s,trigger:n,handleSave:a.handleModalSave,handleClose:a.handleModalClose},r.a.createElement("div",null,"Enter google bucket path(s) for data files: \xa0",r.a.createElement(et,{trigger:r.a.createElement(E.a,{style:{margin:"10px 0px"},name:"question circle outline"}),content:r.a.createElement("div",null,r.a.createElement("b",null,"Format"),":",r.a.createElement("br",null),r.a.createElement("br",null),"Enter a list of data file paths separated by commas, spaces or new lines. ",r.a.createElement("br",null),r.a.createElement("br",null),"Example:",r.a.createElement("br",null),r.a.createElement($e,null,"gs://your-bucket/dir/sample-name1.bigWig ",r.a.createElement("br",null),"gs://your-bucket/dir/sample2.bigWig ",r.a.createElement("br",null),"gs://your-bucket/dir/sample-name1.junctions.bed.gz ",r.a.createElement("br",null),"gs://your-bucket/dir/sample-name1.bam ",r.a.createElement("br",null),"gs://your-bucket/dir/sample2.junctions.bed.gz ",r.a.createElement("br",null)),"Paths that have the same prefix (eg. ",r.a.createElement(Ze,null,"gs://your-bucket/dir/sample-name1")," above) will be interpreted as different data types from the same sample.",r.a.createElement("br",null),"The order of paths doesn't matter.",r.a.createElement("br",null),r.a.createElement("br",null),"IGV.js track types will be inferred from file extensions as follows:",r.a.createElement("br",null),r.a.createElement("div",{style:{margin:"10px 30px"}},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null," ",r.a.createElement("b",null," File Extension ")," "),r.a.createElement("td",null," ",r.a.createElement("b",null,"IGV.js Track Type")," ")),Object.entries(tt).filter((function(e){return!Object(I.a)(e,1)[0].endsWith(".bed")})).map((function(e,t){var n=Object(I.a)(e,2),a=n[0],o=n[1];return r.a.createElement("tr",{key:"".concat(a," ").concat(o," ").concat(t)},r.a.createElement("td",null,a),r.a.createElement("td",null,o))}))))))}),r.a.createElement("br",null)),r.a.createElement(xe.a,null,r.a.createElement(Te.a,{style:{minHeight:"300px"},value:c,onChange:function(e){a.setState({textAreaValue:e.target.value})},placeholder:"Enter file path(s)"})),r.a.createElement("br",null),r.a.createElement("b",null,r.a.createElement("i",null,"NOTE:"))," These paths will be saved across page refreshes in this browser, but will not be recorded in the page url like other settings. Sharing or bookmarking this page won't include these paths.",l&&r.a.createElement(Fe.a,{color:"yellow"},l),i&&r.a.createElement(Fe.a,{color:"red"},i))},a.state=a.getInitialState(),a}return n}(r.a.PureComponent),at=Object(l.b)(null,(function(e){return{addRows:function(t,n){e({type:"ADD_ROWS",categoryName:t,rows:n})}}}))((function(e){var t=e.category,n=e.addRows;return r.a.createElement("div",null,r.a.createElement(nt,{title:"Add ".concat(t.categoryName),categoryName:t.categoryName,addRows:function(e){return n(t.categoryName,e)},trigger:r.a.createElement(Qe,null,"Add ",0===t.rows.length?t.categoryName:null," Rows")}))})),rt=n(60),ot=n.n(rt),ct=n(594);function lt(){var e=Object(i.a)(["\n  margin: 13px 0px; \n  .prompt {\n    border-radius: 2px !important;\n    width: 155px;\n  }\n  \n  input {\n      max-width: none !important;\n      padding: 5px !important;\n  }\n  \n  .input {\n    -webkit-box-shadow: 0px 0px 1px 0px rgba(0,0,0) !important;\n    -moz-box-shadow: 0px 0px 1px 0px rgba(0,0,0) !important;\n    box-shadow: 0px 0px 1px 0px rgba(0,0,0) !important;\n  }\n  \n  .results {\n      min-width: max-content;\n  }\n\n  .red-text {\n    .title {\n      color: #CC0000 !important;\n      font-weight: 500 !important;\n     }\n  }\n"]);return lt=function(){return e},e}function it(){var e=Object(i.a)(["\n  margin: 5px 0px;\n"]);return it=function(){return e},e}var st=s.a.div(it()),ut=Object(s.a)(ct.a)(lt()),mt={isLoading:!1,results:[],value:""},pt=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(m.a)(this,n),(e=t.call(this)).handleResultSelect=function(t,n){var a=n.result;e.setState({value:""});var r=a.id.split("!!"),o=r[0],c=r[1],l=r[2],i=r[3];i?(("ADD"===o||e.getSelectedSamplesForRow(c,l).length<=1)&&e.props.updateSelectedRowNames(o,c,[l]),e.props.updateSelectedSamples(o,c,Object(L.a)({},l,[i]))):e.props.updateSelectedRowNames(o,c,[l])},e.getSelectedRowNames=function(t){return e.props.selectedRowNamesByCategoryName[t]||[]},e.isRowSelected=function(t,n){return e.getSelectedRowNames(t).includes(n)},e.getSelectedSamplesByRowName=function(t){return(e.props.selectedSamplesByCategoryNameAndRowName[t]||{}).selectedSamples||{}},e.getSelectedSamplesForRow=function(t,n){return e.getSelectedSamplesByRowName(t)[n]||[]},e.isSampleSelected=function(t,n,a){return e.getSelectedSamplesForRow(t,n).includes(a)},e.addRowsToHide=function(t,n){return Object.keys(e.props.selectedRowNamesByCategoryName).forEach((function(a){n>=12||e.props.selectedRowNamesByCategoryName[a].forEach((function(e){if(!(n>=12)){t[a]=t[a]||[];var r={action:"REMOVE",categoryName:a,rowName:e};ot.a.some(t[a],r)||(t[a].push(r),n+=1)}}))})),n},e.addSamplesToHide=function(t,n){return Object.keys(e.props.selectedSamplesByCategoryNameAndRowName).forEach((function(a){n>=12||Object.keys(e.getSelectedSamplesByRowName(a)).forEach((function(r){n>=12||!e.isRowSelected(a,r)||e.getSelectedSamplesForRow(a,r).forEach((function(e){if(!(n>=12)){t[a]=t[a]||[];var o={action:"REMOVE",categoryName:a,rowName:r,sample:e};ot.a.some(t[a],o)||(t[a].push(o),n+=1)}}))}))})),n},e.addMatchingSamplesFromRow=function(t,n,a,r,o){if(!n.data)return o;var c=n.data.filter((function(e){return e.samples&&e.samples.length>0}));return c.length>1&&console.warn("Found row with multiple data items each of which has a samples array. This may behave unexpectedly if there are duplicate samples"),c.forEach((function(c){(c.samples||[]).forEach((function(c){if(!(o>=12)&&a.test(c)){r[t]=r[t]||[];var l={action:e.isRowSelected(t,n.name)&&e.isSampleSelected(t,n.name,c)?"REMOVE":"ADD",categoryName:t,rowName:n.name,sample:c};ot.a.some(r[t],l)||(r[t].push(l),o+=1)}}))})),o},e.addMatchingRowsAndSamples=function(t,n,a){var r={};return e.props.rowsInCategories.forEach((function(o){if(!(a>=12)){var c=o.categoryName;o.rows.forEach((function(o){if(!(a>=12)){if(t.test(o.name)){r[c]=r[c]||[],r[c].push(o),n[c]=n[c]||[];var l={action:e.isRowSelected(c,o.name)?"REMOVE":"ADD",categoryName:c,rowName:o.name};ot.a.some(n[c],l)||(n[c].push(l),a+=1)}a=e.addMatchingSamplesFromRow(c,o,t,n,a)}}))}})),Object.entries(r).forEach((function(t){var r=Object(I.a)(t,2),o=r[0],c=r[1];a>=12||(n[o]=n[o]||[],c.forEach((function(t){a>=12||(a=e.addMatchingSamplesFromRow(o,t,/.*/,n,a))})))})),a},e.handleSearchChange=function(t,n){var a=n.value;e.setState({isLoading:!0,value:a}),setTimeout((function(){if(e.state.value.length<1)return e.setState(mt);var t=new RegExp(ot.a.escapeRegExp(e.state.value),"i"),n={},a=0;t.test("Hide")&&(a=e.addRowsToHide(n,a)),(t.test("Hide")||t.test("Hide sample"))&&(a=e.addSamplesToHide(n,a)),e.addMatchingRowsAndSamples(t,n,a);var r=e.props.rowsInCategories.length>1,o=r?{}:[];return Object.keys(n).forEach((function(e){r&&(o[e]={name:e,results:[]});var t=r?o[e].results:o;n[e].forEach((function(n){if(n.sample){var a="ADD"===n.action?"Show sample":"Hide sample";t.push({id:"".concat(n.action,"!!").concat(e,"!!").concat(n.rowName,"!!").concat(n.sample),title:"".concat(a," ").concat(n.rowName," > ").concat(n.sample),className:"ADD"!==n.action?"red-text":null})}else{var r="ADD"===n.action?"Show":"Hide";t.push({id:"".concat(n.action,"!!").concat(e,"!!").concat(n.rowName),title:"".concat(r," ").concat(n.rowName),className:"ADD"!==n.action?"red-text":null})}}))})),e.setState({isLoading:!1,results:o})}),1)},e.render=function(){var t=e.state,n=t.isLoading,a=t.value,o=t.results;return r.a.createElement(st,null,r.a.createElement(T,null,"Select Data"),r.a.createElement(ut,{category:e.props.rowsInCategories.length>1,loading:n,onResultSelect:e.handleResultSelect,onFocus:e.handleSearchChange,onSearchChange:e.handleSearchChange,placeholder:"Select data",results:o,value:a}))},e.state=mt,e}return n}(r.a.Component),dt=Object(l.b)((function(e){return{rowsInCategories:ae(e),selectedRowNamesByCategoryName:re(e),selectedSamplesByCategoryNameAndRowName:oe(e)}}),(function(e){return{updateSelectedRowNames:function(t,n,a){e({type:"".concat(t,"_SELECTED_ROW_NAMES"),categoryName:n,selectedRowNames:a})},updateSelectedSamples:function(t,n,a){e({type:"".concat(t,"_SELECTED_SAMPLES"),categoryName:n,selectedSamplesByRowName:a})}}}))(pt);function gt(){var e=Object(i.a)(["\n  white-space: nowrap;\n"]);return gt=function(){return e},e}function ht(){var e=Object(i.a)(["\n  padding-left: 5px;\n  white-space: nowrap;\n"]);return ht=function(){return e},e}function ft(){var e=Object(i.a)(["\n  cursor: pointer;\n  padding: 10px 10px 10px 0px;\n  display: inline-block;\n"]);return ft=function(){return e},e}function bt(){var e=Object(i.a)(["\n  color: ",";\n  background-color: ",";\n  border: 3px solid ",";\n  display: inline-block;\n  width: 6px;\n  border-radius: 1px;\n  height: 10px;\n  cursor: pointer;\n"]);return bt=function(){return e},e}function Et(){var e=Object(i.a)(["\n  display: inline-block;\n  margin: 0px 0px 0px 15px;\n  color: #999;\n  white-space: nowrap;\n"]);return Et=function(){return e},e}var vt=s.a.div(Et()),yt=s.a.div.attrs({name:"stop"})(bt(),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color})),wt={junctions:"#B0B0EC",coverage:"#B5D29A",alignment:"#5DB6E9",vcf:"#E6A01B",gcnv_bed:"#AA3333",default:"#000000"},St={coverage:"Coverage",junctions:"Splice Junctions",vcf:"Variants (VCF)",gcnv_bed:"gCNV",alignment:"Reads (BAM)",bed:"Annotations (BED)",gff3:"Annotations (GFF3)",gtf:"Annotations (GTF)",genePred:"Annotations (genePred)",bigBed:"Annotations (bigBed)"},Ot=s.a.a(ft()),kt=s.a.span(ht()),jt=s.a.div(gt()),xt=function(e){var t=e.dataTypesUsersCanToggle,n=e.enabledDataTypes,a=e.updateDataTypesToShow;if(t.length<2)return null;var o=Object(h.a)(t).map((function(e,t){var o=St[e]||e.charAt(0).toUpperCase()+e.slice(1);return r.a.createElement(N,{key:"".concat(e," ").concat(t)},r.a.createElement(f.a,{label:"".concat(o.toLocaleString()),checked:n.includes(e),onChange:function(t,n){return a(n.checked?"ADD":"REMOVE",[e])}}),r.a.createElement(kt,null,r.a.createElement(b.a,{content:"This stripe marks rows that have ".concat(o.toLowerCase()," data. Use the checkbox on the left to show or hide ").concat(o.toLowerCase()," tracks for all rows selected below."),position:"right center",trigger:r.a.createElement(yt,{color:wt[e]||wt.default})})))}));return r.a.createElement("div",null,r.a.createElement(T,null,"Show Track Types"),o)},Tt=function(e){var t=e.row;return r.a.createElement(b.a,{flowing:!0,content:r.a.createElement("table",null,r.a.createElement("tbody",null,(t.data||[]).map((function(e,t){return r.a.createElement("tr",{key:"".concat(e.url," ").concat(e.type," ").concat(t)},r.a.createElement("td",{style:{paddingRight:"10px"}},r.a.createElement("b",null,e.type&&(St[e.type]||e.type.toUpperCase()),":")),r.a.createElement("td",null,r.a.createElement(jt,null,e.url)),r.a.createElement("td",{style:{color:"gray",whiteSpace:"nowrap",paddingLeft:"15px"}},e.samples?"(".concat(e.samples.length," samples)"):null))})),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:2},r.a.createElement("div",{style:{fontSize:"small",color:"grey",marginTop:"10px"}},"(click to copy paths)"))))),position:"right center",trigger:r.a.createElement(kt,{onClick:function(){var e=(t.data||[]).map((function(e){return e.url})).join("\n");navigator.clipboard.writeText(e)}},(t.data||[]).map((function(e,t){return r.a.createElement(yt,{key:"".concat(e.url," ").concat(e.type," ").concat(t),color:wt[e.type]||wt.default})}))),style:{marginLeft:"2px"}})},Rt=function(e){var t=e.category,n=e.updateSelectedRowNames;return r.a.createElement("div",null,r.a.createElement(T,null,t.categoryName),t.rows.length>=12&&r.a.createElement(vt,null,"(N=".concat(t.rows.length,") ")),t.rows.length>0&&r.a.createElement("div",null,r.a.createElement(Ot,{onClick:function(e){e.preventDefault(),n("SET",t.categoryName,[])}},"Uncheck All")))},Ct=function(e){var t=e.rowsInCategories,n=e.selectedRowNamesByCategoryName,a=e.updateSelectedRowNames;return t.map((function(e,o){return r.a.createElement("div",{key:"".concat(e.categoryName," ").concat(o)},r.a.createElement(Rt,{category:e,updateSelectedRowNames:a}),e.rows.map((function(t,o){var c=n[e.categoryName]||[];return r.a.createElement(Nt,{key:"".concat(t.name," ").concat(o),row:t,categoryName:e.categoryName,selectedRowNames:c,updateSelectedRowNames:a})})),o===t.length-1?r.a.createElement(at,{category:e}):null)}))},Nt=function(e){var t=e.row,n=e.categoryName,a=e.selectedRowNames,o=e.updateSelectedRowNames;return r.a.createElement(jt,null,r.a.createElement(f.a,{label:t.name,checked:a.includes(t.name),"data-row":t.name,onChange:function(e,t){return o(t.checked?"ADD":"REMOVE",n,[t["data-row"]])}}),r.a.createElement(At,{row:t}),r.a.createElement(Tt,{row:t}))},At=function(e){var t=e.row;return t.description?r.a.createElement(R,{flowing:!0,content:t.description&&r.a.createElement("div",{dangerouslySetInnerHTML:{__html:y.a.sanitize(t.description)}}),position:"right center",trigger:r.a.createElement(E.a,{style:{marginLeft:"10px"},name:"question circle outline"})}):null},_t=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.locusList,n=e.rowsInCategories,a=e.dataTypesUsersCanToggle,o=e.enabledDataTypes,c=e.selectedRowNamesByCategoryName,l=e.setLocus,i=e.setLocusList,s=e.updateDataTypesToShow,u=e.updateSelectedRowNames;return r.a.createElement("div",null,r.a.createElement(qe,{name:"Left Side Bar",locusList:t,setLocus:l,setLocusList:i}),r.a.createElement(xt,{dataTypesUsersCanToggle:a,enabledDataTypes:o,updateDataTypesToShow:s}),r.a.createElement(dt,null),r.a.createElement(A,null,r.a.createElement(je,null)),r.a.createElement(Ct,{rowsInCategories:n,selectedRowNamesByCategoryName:c,updateSelectedRowNames:u}))}}]),n}(r.a.PureComponent),Lt=Object(l.b)((function(e){return{locusList:te(e),rowsInCategories:ae(e),dataTypesUsersCanToggle:de(e),enabledDataTypes:ge(e),selectedRowNamesByCategoryName:re(e)}}),(function(e){return{setLocus:function(t){e({type:"UPDATE_LOCUS",newValue:t})},setLocusList:function(t){e({type:"SET_LEFT_SIDE_BAR_LOCUS_LIST",values:t})},updateDataTypesToShow:function(t,n){e({type:"".concat(t,"_DATA_TYPES_TO_SHOW"),values:n})},updateSelectedRowNames:function(t,n,a){e({type:"".concat(t,"_SELECTED_ROW_NAMES"),categoryName:n,selectedRowNames:a})},updateSjOptions:function(t){e({type:"UPDATE_SJ_OPTIONS",updates:t})},updateVcfOptions:function(t){e({type:"UPDATE_VCF_OPTIONS",updates:t})},updateBamOptions:function(t){e({type:"UPDATE_BAM_OPTIONS",updates:t})}}}))(_t),It={},Bt=Object(l.b)((function(e){return{bamOptions:ie(e)}}),(function(e){return{updateBamOptions:function(t){e({type:"UPDATE_BAM_OPTIONS",updates:t})}}}))((function(e){var t=e.bamOptions,n=e.updateBamOptions;return r.a.createElement("div",null,r.a.createElement(T,null,"BAM Track ",r.a.createElement("br",null),"Options"),r.a.createElement("br",null),r.a.createElement(N,null,r.a.createElement(f.a,{label:"View as pairs",checked:t.viewAsPairs,onChange:function(e,t){return n({viewAsPairs:t.checked})}})),r.a.createElement(N,null,r.a.createElement(f.a,{label:"Show soft-clips",checked:t.showSoftClips,onChange:function(e,t){return n({showSoftClips:t.checked})}})),r.a.createElement(N,null,"Color by:",r.a.createElement("select",{value:t.colorBy,onChange:function(e){return n({colorBy:e.target.value})}},r.a.createElement("option",{value:"strand"},"Strand"),r.a.createElement("option",{value:"firstOfPairStrand"},"First-of-pair strand"),r.a.createElement("option",{value:"pairOrientation"},"Pair orientation"),r.a.createElement("option",{value:"fragmentLength"},"Insert size (TLEN)"),r.a.createElement("option",{value:"none"},"None"))),r.a.createElement(A,null,"Track height: ",r.a.createElement(_,{key:"track-height-".concat(t.trackHeight),type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return function(e,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode?n(Object(q.a)({},t,{},It)):It[a]=r}(e,"trackHeight",parseInt(e.target.value,10))}})," px"),r.a.createElement(A,null,r.a.createElement(B.a,{compact:!0,size:"small",onClick:function(){n(Object(q.a)({},t,{},It))}},"Apply")))})),Dt=Object(l.b)((function(e){return{vcfOptions:le(e)}}),(function(e){return{updateVcfOptions:function(t){e({type:"UPDATE_VCF_OPTIONS",updates:t})}}}))((function(e){var t=e.vcfOptions,n=e.updateVcfOptions;return r.a.createElement("div",null,r.a.createElement(T,null,"VCF Track ",r.a.createElement("br",null),"Options"),r.a.createElement("br",null),r.a.createElement(N,null,"Display mode: \xa0",r.a.createElement("select",{value:t.displayMode,onChange:function(e){return n({displayMode:e.target.value})}},r.a.createElement("option",{value:"COLLAPSED"},"Collapse"),r.a.createElement("option",{value:"SQUISHED"},"Squish"),r.a.createElement("option",{value:"EXPANDED"},"Expand"))))})),Ut=n(587);function Pt(){var e=Object(i.a)(["\n  label {\n    margin-left: 10px;\n    margin-bottom: 10px;\n    padding-left: 1.4em !important;\n  }\n"]);return Pt=function(){return e},e}function Mt(){var e=Object(i.a)(["\n  margin-top: 5px;\n"]);return Mt=function(){return e},e}var Vt=s.a.div(Mt()),Wt=Object(s.a)(Ut.a)(Pt()),Gt=function(e){var t=e.sjOptions,n=e.handleTextInput;return"strand"===t.colorBy?r.a.createElement("div",null,r.a.createElement(C,{name:"stop",style:{color:"#b0b0ec"}})," plus",r.a.createElement(C,{name:"stop",style:{color:"#ecb0b0",marginLeft:"10px"}})," minus"):"motif"===t.colorBy?r.a.createElement("div",null,r.a.createElement(C,{name:"stop",style:{color:"rgb(27,158,119)"}})," GT/AG ",r.a.createElement("br",null),r.a.createElement(C,{name:"stop",style:{color:"rgb(217,95,2)"}})," CT/AC ",r.a.createElement("br",null),r.a.createElement(C,{name:"stop",style:{color:"rgb(117,112,179)"}})," GC/AG ",r.a.createElement("br",null),r.a.createElement(C,{name:"stop",style:{color:"rgb(231,41,138)"}})," CT/GC ",r.a.createElement("br",null),r.a.createElement(C,{name:"stop",style:{color:"rgb(102,166,30)"}})," AT/AC ",r.a.createElement("br",null),r.a.createElement(C,{name:"stop",style:{color:"rgb(230,171,2)"}})," GT/AT ",r.a.createElement("br",null),r.a.createElement(C,{name:"stop",style:{color:"rgb(166,118,29)"}})," non-canonical ",r.a.createElement("br",null)):"numUniqueReads"===t.colorBy||"numReads"===t.colorBy?r.a.createElement("div",null,"# reads",r.a.createElement(C,{name:"stop",style:{color:"#AAAAAA",marginLeft:"10px"}}),"\xa0\u2264 \xa0",r.a.createElement(_,{type:"text",key:"num-reads-".concat(t.colorByNumReadsThreshold),defaultValue:void 0!==t.colorByNumReadsThreshold?t.colorByNumReadsThreshold:5,onKeyUp:function(e){return n(e,"colorByNumReadsThreshold")},style:{width:"35px"}}),"\xa0 < \xa0",r.a.createElement(C,{name:"stop",style:{color:"blue"}})):"isAnnotatedJunction"===t.colorBy?r.a.createElement("div",null,r.a.createElement(C,{name:"stop",style:{color:"#b0b0ec"}})," known junction ",r.a.createElement("br",null),r.a.createElement(C,{name:"stop",style:{color:"orange"}})," novel junction"):r.a.createElement("div",null)},Jt={},Ht=Object(l.b)((function(e){return{sjOptions:ce(e)}}),(function(e){return{updateSjOptions:function(t){e({type:"UPDATE_SJ_OPTIONS",updates:t})}}}))((function(e){var t=e.sjOptions,n=e.updateSjOptions,a=function(e,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode?n(Object(q.a)({},t,{},Jt)):Jt[a]=r};return r.a.createElement("div",null,r.a.createElement(T,null,"Junctions Track Filters"),r.a.createElement("br",null),r.a.createElement(Vt,null,r.a.createElement(N,null,"Show: ",r.a.createElement("br",null),r.a.createElement(Wt,{label:"only local junctions",name:"minJunctionEndsVisibleButton",checked:2===t.minJunctionEndsVisible,onChange:function(e,t){return t.checked&&n({minJunctionEndsVisible:2})}}),r.a.createElement(R,{content:"Only show splice junctions that start and end within the current view.",position:"left center",trigger:r.a.createElement(E.a,{style:{marginLeft:"8px"},name:"question circle outline"})}),r.a.createElement("br",null),r.a.createElement(Wt,{label:"semi-local junctions",name:"minJunctionEndsVisibleButton",checked:1===t.minJunctionEndsVisible,onChange:function(e,t){return t.checked&&n({minJunctionEndsVisible:1})}}),r.a.createElement(R,{content:"Hide splice junctions that span the current view (start to the left of the current view and end to the right of it).",position:"left center",trigger:r.a.createElement(E.a,{style:{marginLeft:"8px"},name:"question circle outline"})}),r.a.createElement("br",null),r.a.createElement(Wt,{label:"all junctions",name:"minJunctionEndsVisibleButton",checked:0===t.minJunctionEndsVisible,onChange:function(e,t){return t.checked&&n({minJunctionEndsVisible:0})}}),r.a.createElement(R,{content:"Show all splice junctions",position:"left center",trigger:r.a.createElement(E.a,{style:{marginLeft:"8px"},name:"question circle outline"})}))),r.a.createElement(Vt,null,r.a.createElement(N,null,"Show Strands:",r.a.createElement(Wt,{label:"both",name:"strandButton",checked:!t.showOnlyPlusStrand&&!t.showOnlyMinusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!1,showOnlyMinusStrand:!1})}}),r.a.createElement(Wt,{label:"plus",name:"strandButton",checked:t.showOnlyPlusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!0,showOnlyMinusStrand:!1})}}),r.a.createElement(Wt,{label:"minus",name:"strandButton",checked:t.showOnlyMinusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!1,showOnlyMinusStrand:!0})}}))),r.a.createElement(Vt,null,r.a.createElement(N,null,r.a.createElement(f.a,{label:"Show known junctions",checked:!t.hideAnnotated,onChange:function(e,t){return n({hideAnnotated:!t.checked})}})),r.a.createElement(N,null,r.a.createElement(f.a,{label:"Show novel junctions",checked:!t.hideUnannotated,onChange:function(e,t){return n({hideUnannotated:!t.checked})}}))),r.a.createElement(Vt,null,r.a.createElement("div",null,r.a.createElement(N,null,"Uniquely-mapped reads:"),"at least ",r.a.createElement(_,{key:"uniquely-mapped-reads-".concat(t.minUniquelyMappedReads),type:"text",defaultValue:t.minUniquelyMappedReads,onKeyUp:function(e){return a(e,"minUniquelyMappedReads",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(N,null,"Total reads:"),"at least ",r.a.createElement(_,{key:"total-reads-".concat(t.minTotalReads),type:"text",defaultValue:t.minTotalReads,onKeyUp:function(e){return a(e,"minTotalReads",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(N,null,"Fraction multi-mapped:",r.a.createElement(R,{content:"Allows filtering of junctions where most reads that span the junction are multi-mapped reads. For example, setting this to 0.79 will hide junctions where 8 out of 10 (or more) reads that span the junction are not uniquely mapped reads.",position:"left center",trigger:r.a.createElement(E.a,{style:{marginLeft:"8px"},name:"question circle outline"})})),"at most ",r.a.createElement(_,{key:"fraction-multi-mapped-".concat(t.maxFractionMultiMappedReads),type:"text",defaultValue:t.maxFractionMultiMappedReads,onKeyUp:function(e){return a(e,"maxFractionMultiMappedReads",parseInt(e.target.value,10))}}))),r.a.createElement(Vt,null,r.a.createElement("div",null,r.a.createElement(N,null,"Splice overhang base-pairs:"),"at least ",r.a.createElement(_,{key:"spliced-alignment-overhang-".concat(t.minSplicedAlignmentOverhang),type:"text",defaultValue:t.minSplicedAlignmentOverhang,onKeyUp:function(e){return a(e,"minSplicedAlignmentOverhang",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(N,null,"# samples with junction:",r.a.createElement(R,{content:"Filter junctions based on how many samples in the batch have this junction. A sample is counted as having the junction as long as the junction is supported by at least one read.",position:"left center",trigger:r.a.createElement(E.a,{style:{marginLeft:"8px"},name:"question circle outline"})})),r.a.createElement(_,{key:"samples-with-junction-more-than-".concat(t.minSamplesWithThisJunction),type:"text",defaultValue:t.minSamplesWithThisJunction,onKeyUp:function(e){return a(e,"minSamplesWithThisJunction",parseInt(e.target.value,10))}})," \xa0\u2264 n \u2264 ",r.a.createElement(_,{key:"samples-with-junction-less-than-".concat(t.maxSamplesWithThisJunction),type:"text",defaultValue:t.maxSamplesWithThisJunction,onKeyUp:function(e){return a(e,"maxSamplesWithThisJunction",parseInt(e.target.value,10))}})),r.a.createElement("div",null,r.a.createElement(N,null,"% samples with junction:",r.a.createElement(R,{content:"Filter junctions based on what percentage of samples in the batch have this junction. A sample is counted as having the junction as long as the junction is supported by at least one read.",position:"left center",trigger:r.a.createElement(E.a,{style:{marginLeft:"8px"},name:"question circle outline"})})),r.a.createElement(_,{key:"percent-samples-with-junction-more-than-".concat(t.minPercentSamplesWithThisJunction),type:"text",defaultValue:t.minPercentSamplesWithThisJunction,onKeyUp:function(e){return a(e,"minPercentSamplesWithThisJunction",parseInt(e.target.value,10))}})," \xa0\u2264 % \u2264 ",r.a.createElement(_,{key:"percent-samples-with-junction-less-than-".concat(t.maxPercentSamplesWithThisJunction),type:"text",defaultValue:t.maxPercentSamplesWithThisJunction,onKeyUp:function(e){return a(e,"maxPercentSamplesWithThisJunction",parseInt(e.target.value,10))}}))),r.a.createElement(Vt,null,r.a.createElement("div",null,r.a.createElement(N,null,"Donor/Acceptor Motifs:"),H.map((function(e){return r.a.createElement(N,{key:e},r.a.createElement(f.a,{label:"Show ".concat(e),checked:!t["hideMotif".concat(e)],onChange:function(t,a){return n(Object(L.a)({},"hideMotif".concat(e),!a.checked))}}))}))),r.a.createElement(A,null,"Track height: ",r.a.createElement(_,{key:"track-height-".concat(t.trackHeight),type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return a(e,"trackHeight",parseInt(e.target.value,10))}})," px"),r.a.createElement(A,null,r.a.createElement(B.a,{compact:!0,size:"small",onClick:function(){n(Object(q.a)({},t,{},Jt))}},"Apply"))),r.a.createElement(T,null,"Junctions Track ",r.a.createElement("br",null),"Options"),r.a.createElement("br",null),r.a.createElement(Vt,null,r.a.createElement(N,null,"Color by:"),r.a.createElement(N,null,r.a.createElement("select",{value:t.colorBy,onChange:function(e){return n({colorBy:e.target.value})}},r.a.createElement("option",{value:"strand"},"strand"),r.a.createElement("option",{value:"motif"},"donor/acceptor motif"),r.a.createElement("option",{value:"numUniqueReads"},"# uniquely-mapped reads"),r.a.createElement("option",{value:"numReads"},"# total reads"),r.a.createElement("option",{value:"isAnnotatedJunction"},"is known junction")),r.a.createElement(Gt,{sjOptions:t,handleTextInput:a}))),r.a.createElement(Vt,null,r.a.createElement(N,null,"Junction label #1:"),r.a.createElement(N,null,r.a.createElement(Wt,{label:"# uniquely-mapped",name:"junctionLabelButton",checked:"uniqueReadCount"===t.labelWith,onChange:function(e,t){return t.checked&&n({labelWith:"uniqueReadCount"})}}),r.a.createElement(Wt,{label:"# total reads",name:"junctionLabelButton",checked:"totalReadCount"===t.labelWith,onChange:function(e,t){return t.checked&&n({labelWith:"totalReadCount"})}}),r.a.createElement(Wt,{label:"# samples with junction",name:"junctionLabelButton",checked:"numSamplesWithThisJunction"===t.labelWith,onChange:function(e,t){return t.checked&&n({labelWith:"numSamplesWithThisJunction"})}}),r.a.createElement(Wt,{label:"% samples with junction",name:"junctionLabelButton",checked:"percentSamplesWithThisJunction"===t.labelWith,onChange:function(e,t){return t.checked&&n({labelWith:"percentSamplesWithThisJunction"})}}),r.a.createElement(Wt,{label:"motif",name:"junctionLabelButton",checked:"motif"===t.labelWith,onChange:function(e,t){return t.checked&&n({labelWith:"motif"})}}))),r.a.createElement(Vt,null,r.a.createElement(N,null,"Junction label #2:"),r.a.createElement(N,null,r.a.createElement(Wt,{label:"none",name:"junctionLabel2Button",checked:!t.labelWithInParen,onChange:function(e,t){return t.checked&&n({labelWithInParen:null})}}),r.a.createElement(Wt,{label:"# uniquely-mapped",name:"junctionLabel2Button",checked:"uniqueReadCount"===t.labelWithInParen,onChange:function(e,t){return t.checked&&n({labelWithInParen:"uniqueReadCount"})}}),r.a.createElement(Wt,{label:"# total reads",name:"junctionLabel2Button",checked:"totalReadCount"===t.labelWithInParen,onChange:function(e,t){return t.checked&&n({labelWithInParen:"totalReadCount"})}}),r.a.createElement(Wt,{label:"# multi-mapped",name:"junctionLabel2Button",checked:"multiMappedReadCount"===t.labelWithInParen,onChange:function(e,t){return t.checked&&n({labelWithInParen:"multiMappedReadCount"})}}),r.a.createElement(Wt,{label:"# samples with junction",name:"junctionLabel2Button",checked:"numSamplesWithThisJunction"===t.labelWithInParen,onChange:function(e,t){return t.checked&&n({labelWithInParen:"numSamplesWithThisJunction"})}}),r.a.createElement(Wt,{label:"% samples with junction",name:"junctionLabel2Button",checked:"percentSamplesWithThisJunction"===t.labelWithInParen,onChange:function(e,t){return t.checked&&n({labelWithInParen:"percentSamplesWithThisJunction"})}}),r.a.createElement(Wt,{label:"motif",name:"junctionLabel2Button",checked:"motif"===t.labelWithInParen,onChange:function(e,t){return t.checked&&n({labelWithInParen:"motif"})}}))),r.a.createElement(Vt,null,r.a.createElement(N,null,"Junction thickness:"),r.a.createElement(N,null,r.a.createElement("select",{value:t.thicknessBasedOn,onChange:function(e){return n({thicknessBasedOn:e.target.value})}},r.a.createElement("option",{value:"numUniqueReads"},"# uniquely-mapped reads"),r.a.createElement("option",{value:"numReads"},"# total reads"),r.a.createElement("option",{value:"isAnnotatedJunction"},"is known junction"),r.a.createElement("option",{value:"numSamplesWithThisJunction"},"# samples with this junction")))),r.a.createElement(Vt,null,r.a.createElement(N,null,"Junction bounce height:"),r.a.createElement(N,null,r.a.createElement("select",{value:t.bounceHeightBasedOn,onChange:function(e){return n({bounceHeightBasedOn:e.target.value})}},r.a.createElement("option",{value:"random"},"random"),r.a.createElement("option",{value:"distance"},"distance"),r.a.createElement("option",{value:"thickness"},"thickness")))))})),qt={},Ft=Object(l.b)((function(e){return{gcnvOptions:se(e)}}),(function(e){return{updateGcnvOptions:function(t){e({type:"UPDATE_GCNV_OPTIONS",updates:t})}}}))((function(e){var t=e.gcnvOptions,n=e.updateGcnvOptions,a=function(e,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode?n(Object(q.a)({},t,{},qt)):qt[a]=r};return r.a.createElement("div",null,r.a.createElement(T,null,"gCNV Options"),r.a.createElement("br",null),r.a.createElement(A,null,r.a.createElement(f.a,{label:"Enable clicking background samples",checked:!t.onlyHandleClicksForHighlightedSamples,onChange:function(e,a){return n(Object(q.a)({},t,{onlyHandleClicksForHighlightedSamples:!a.checked}))}})),r.a.createElement(A,null,"Y-min: ",r.a.createElement(_,{key:"y-max-".concat(t.trackMin),type:"text",defaultValue:t.trackMin,onKeyUp:function(e){return a(e,"trackMin",parseInt(e.target.value,10))}})," copies"),r.a.createElement(A,null,"Y-max: ",r.a.createElement(_,{key:"y-max-".concat(t.trackMax),type:"text",defaultValue:t.trackMax,onKeyUp:function(e){return a(e,"trackMax",parseInt(e.target.value,10))}})," copies"),r.a.createElement(A,null,"Track height: ",r.a.createElement(_,{key:"track-height-".concat(t.trackHeight),type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return a(e,"trackHeight",parseInt(e.target.value,10))}})," px"),r.a.createElement(A,null,r.a.createElement(B.a,{compact:!0,size:"small",onClick:function(){n(Object(q.a)({},t,{},qt))}},"Apply")))})),zt=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.locusList,n=e.enabledDataTypes,a=e.setLocus,o=e.setLocusList;return r.a.createElement("div",null,r.a.createElement(qe,{name:"Right Side Bar",locusList:t,setLocus:a,setLocusList:o}),n.includes("junctions")&&r.a.createElement(Ht,null),n.includes("gcnv_bed")&&r.a.createElement(Ft,null),n.includes("alignment")&&r.a.createElement(Bt,null),n.includes("vcf")&&r.a.createElement(Dt,null))}}]),n}(r.a.PureComponent),Kt=Object(l.b)((function(e){return{locusList:ee(e),enabledDataTypes:ge(e)}}),(function(e){return{setLocus:function(t){e({type:"UPDATE_LOCUS",newValue:t})},setLocusList:function(t){e({type:"SET_RIGHT_SIDE_BAR_LOCUS_LIST",values:t})}}}))(zt);function Yt(){var e=Object(i.a)(["\n  cursor: pointer;\n  margin-left: 20px;\n"]);return Yt=function(){return e},e}var Xt=s.a.a(Yt()),Qt=function(){return r.a.createElement(We,{title:"About the TGG Viewer",size:"large",modalName:"AboutModal",trigger:r.a.createElement(Xt,null,"About")},"The Translational Genomics Group (TGG) Viewer is a free, open-source web app for visualizing splice junctions, copy number, and other data genome-wide using ",r.a.createElement("a",{href:"https://github.com/igvteam/igv.js",target:"_blank"},"IGV.js"),r.a.createElement("br",null),r.a.createElement("br",null),"Main features: ",r.a.createElement("br",null),r.a.createElement("ul",null,r.a.createElement("li",null,"Supports most file formats supported by IGV.js, including: .bed, .vcf, .bam, .cram, .bigWig, as well as several custom formats for splice junctions (.junctions.bed.gz) and gCNV copy-number variants (.gcnv.bed.gz) "),r.a.createElement("li",null,"Includes custom reference tracks such as splice junctions from GTEx v8 muscle, blood, and fibroblast samples."),r.a.createElement("li",null,"Supports adding gene or locus lists to left or right side bar for quick navigation across a list of regions."),r.a.createElement("li",null,"Can load data files or reference tracks from any Google bucket to which you have read-access."),r.a.createElement("li",null,"Retrieves just the on-screen sections of the files directly from Google buckets."),r.a.createElement("li",null,"All settings, gene lists, and data paths can be exported and later restored or shared with others via a .json config file. To export all current settings, click the ",r.a.createElement(E.a,{name:"download"})," button, upload the .json file to github (or another public url), and then to restore the settings, paste the file's URL into the Initial Settings input, and Apply. "),r.a.createElement("li",null,"The page url also records page settings so that they can be bookmarked or shared, but does not include gene lists.")),r.a.createElement("a",{href:"https://github.com/broadinstitute/tgg-viewer/issues",target:"_blank"},"Issues"),"\xa0or ",r.a.createElement("a",{href:"https://github.com/broadinstitute/tgg-viewer/issues",target:"_blank"},"Feature Requests"),"\xa0can be submitted via ",r.a.createElement("a",{href:"https://github.com/broadinstitute/tgg-viewer",target:"_blank"},"GitHub"),".")},$t=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.user;return e.googleUserEmail?r.a.createElement("div",null,"Signed in to Google Buckets as ",r.a.createElement("b",null,e.googleUserEmail)):r.a.createElement("div",null,"Signing in to Google Buckets...")}}]),n}(r.a.PureComponent),Zt=Object(l.b)((function(e){return{user:ue(e)}}))($t);function en(){var e=Object(i.a)(["\n  text-align: right;\n  padding-right: 75px !important;\n"]);return en=function(){return e},e}function tn(){var e=Object(i.a)(["\n  text-align: left;\n  padding-left: 75px !important;\n"]);return tn=function(){return e},e}function nn(){var e=Object(i.a)(["\n  color: #444;\n  margin-bottom: 5px;\n"]);return nn=function(){return e},e}var an=Object(s.a)(u.a.Row)(nn()),rn=Object(s.a)(u.a.Column).attrs({width:6})(tn()),on=Object(s.a)(u.a.Column).attrs({width:10})(en()),cn=function(){return r.a.createElement(u.a,null,r.a.createElement(an,null,r.a.createElement(rn,null,r.a.createElement("b",null,"TGG Viewer:"),r.a.createElement(Qt,null)),r.a.createElement(on,null,r.a.createElement(Zt,null))))},ln=n(297),sn=n(298),un=function(e,t){var n;return function(){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];n&&clearTimeout(n),n=setTimeout((function(){t.apply(void 0,r),n=null}),e)}},mn={showIdeogram:!0,showNavigation:!0,showRuler:!0,showCenterGuide:!0,showCursorTrackingGuide:!0,showCommandBar:!0};function pn(e,t){var n=this;t||(t=this.clickedFeatures(e));var a=[];return t.forEach((function(t){if(!(t.end<e.genomicLocation||t.start>e.genomicLocation)&&"spliceJunctions"===n.config.type){if(!t.isVisible||!t.attributes)return;a.push("<hr />"),a.push({name:"<b>".concat(t.chr,":").concat(t.start,"-").concat(t.end," (").concat(t.strand," strand)</b>"),value:" "}),t.attributes.annotated_junction&&("true"===t.attributes.annotated_junction?a.push({name:"Known Junction",value:""}):a.push({name:"Novel Junction",value:""})),a.push("<hr />"),a.push({name:(t.end-t.start).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),value:"bp length"}),t.attributes.uniquely_mapped&&a.push({name:t.attributes.uniquely_mapped,value:"uniquely mapped reads"}),t.attributes.multi_mapped&&a.push({name:t.attributes.multi_mapped,value:"multi-mapped reads"}),t.attributes.uniquely_mapped&&t.attributes.multi_mapped&&a.push({name:parseInt(t.attributes.uniquely_mapped)+parseInt(t.attributes.multi_mapped),value:"total reads"}),t.attributes.maximum_spliced_alignment_overhang&&a.push({name:t.attributes.maximum_spliced_alignment_overhang,value:"bp maximum overhang"}),t.attributes.num_samples_with_this_junction&&(a.push({name:t.attributes.num_samples_with_this_junction,value:(t.attributes.num_samples_total?"out of ".concat(t.attributes.num_samples_total," "):"")+"samples have this junction"}),t.attributes.percent_samples_with_this_junction&&a.push({name:t.attributes.percent_samples_with_this_junction.toFixed(1),value:"% of samples have this junction"})),t.attributes.info&&a.push({name:" ",value:t.attributes.info.replace("_"," ")}),Object.keys(t.attributes).filter((function(e){return!["line_width","color","left_shape","right_shape","info","annotated_junction","uniquely_mapped","multi_mapped","maximum_spliced_alignment_overhang","num_samples_with_this_junction","percent_samples_with_this_junction","num_samples_total"].includes(e)})).forEach((function(e){a.push({name:e.replace(/_/g," "),value:t.attributes[e].replace(/_/g," ")})})),a=a.map((function(e){return e.name&&e.value?{name:"<b>".concat(e.name,"</b>"),value:e.value}:e}))}})),a}var dn=function(e){e?"spliceJunctions"===e.type?e.popupData=pn:"merged"===e.type&&e.tracks.filter((function(e){return"spliceJunctions"===e.type})).forEach((function(e){e.popupData=pn})):console.warn("monkeyPatchPopupData: track arg is undefined")},gn=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).setContainerElement=function(e){a.container=e},a.render=function(){return r.a.createElement("div",null,r.a.createElement("div",{ref:a.setContainerElement}))},a.shouldTrackBeReloaded=function(e,t,n){var a=t.selectedSamplesByCategoryNameAndRowName,r=t.enabledDataTypes,o=t.sjOptions,c=t.vcfOptions,l=t.bamOptions,i=t.gcnvOptions,s=["merged","wig","spliceJunctions"].includes(e.type)&&(n.enabledDataTypes.includes("junctions")!==r.includes("junctions")||n.enabledDataTypes.includes("coverage")!==r.includes("coverage")||n.sjOptions!==o),u="variant"===e.type&&n.vcfOptions!==c,m="alignment"===e.type&&n.bamOptions!==l,p="gcnv"===e.type&&n.gcnvOptions!==i,d="gcnv"===e.type&&(!ot.a.isEqual(((n.selectedSamplesByCategoryNameAndRowName[e.categoryName]||{}).selectedSamples||{})[e.rowName],((a[e.categoryName]||{}).selectedSamples||{})[e.rowName])||!ot.a.isEqual(((n.selectedSamplesByCategoryNameAndRowName[e.categoryName]||{}).sampleSettings||{})[e.rowName],((a[e.categoryName]||{}).sampleSettings||{})[e.rowName]));return s||u||m||p||d},a.getTrackId=function(e){return"".concat(e.url,"|").concat(e.categoryName,"|").concat(e.rowName)},a.getIgvTrackView=function(e){var t=a.getTrackId(e),n=a.browser.trackViews.filter((function(e){var n=(e.track||{}).config||{};return t===a.getTrackId(n)}));return n.length>0&&n[0]},a.reloadRemoveAndAddTracks=function(e){if(a.ignoreNextTrackPropsAfterOrderChangedEvent)a.ignoreNextTrackPropsAfterOrderChangedEvent=!1;else{var t=e.tracks.reduce((function(e,t){return Object(q.a)(Object(L.a)({},"".concat(t.name,"|").concat(t.type),t),e)}),{});a.props.tracks&&a.props.tracks.forEach(function(){var n=Object(Y.a)(K.a.mark((function n(r){var o,c;return K.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(o=t["".concat(r.name,"|").concat(r.type)])){n.next=12;break}if(!a.shouldTrackBeReloaded(r,a.props,e)){n.next=9;break}return c=a.getIgvTrackView(r),console.log("Reloading track",r.name,o),c.track.updateConfig(o),n.next=8,c.track.postInit();case 8:c.repaintViews();case 9:delete t["".concat(r.name,"|").concat(r.type)],n.next=13;break;case 12:try{console.log("Removing track",r.name),a.ignoreNextTrackRemovedEvent=!0,a.browser.removeTrackByName(r.name)}catch(l){console.warn("Unable to remove track",r.name,l)}case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),Object.values(t).forEach((function(e){try{a.getIgvTrackView(e)||(console.log("Loading new track",e.name),a.browser.loadTrack(e).then(dn))}catch(t){console.warn("Unable to add track",e.name,t)}}))}},a.container=null,a.browser=null,a.ignoreNextLocusChangedEvent=!1,a.ignoreNextTrackRemovedEvent=!1,a.ignoreNextTrackPropsAfterOrderChangedEvent=!1,a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(Y.a)(K.a.mark((function e(){var t,n,a,r,o,c,l,i,s=this;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.container){e.next=2;break}return e.abrupt("return");case 2:t=this.props,n=t.genome,a=t.locus,r=t.tracks,o=t.locusChangedHandler,c=t.trackRemovedHandler,l=t.trackOrderChangedHandler,i=Object(q.a)({},mn,{locus:a,genome:n,tracks:r}),sn.a.createBrowser(this.container,i).then((function(e){s.browser=e,window.igvBrowser=e,e.trackViews.forEach((function(e){dn(e.track)})),o&&s.browser.on("locuschange",un(300,(function(e){s.ignoreNextLocusChangedEvent||o(e),s.ignoreNextLocusChangedEvent=!1}))),c&&s.browser.on("trackremoved",(function(e){s.ignoreNextTrackRemovedEvent||c(e.config.categoryName,e.config.rowName),s.ignoreNextTrackRemovedEvent=!1})),l&&s.browser.on("trackorderchanged",(function(e){s.ignoreNextTrackPropsAfterOrderChangedEvent=!0,l(e)}))}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shouldComponentUpdate",value:function(e){if(!this.container||!this.browser)return!1;var t=this.browser.$searchInput.val(),n=e.locus;return!e.locus||t&&n.replace(/,/g,"")===t.replace(/,/g,"")||(this.ignoreNextLocusChangedEvent=!0,this.browser.search(n)),this.reloadRemoveAndAddTracks(e),!1}}]),n}(r.a.Component),hn=Object(l.b)((function(e){return{genome:ne(e),locus:Z(e),tracks:be(e),enabledDataTypes:ge(e),selectedSamplesByCategoryNameAndRowName:oe(e),sjOptions:ce(e),vcfOptions:le(e),bamOptions:ie(e),gcnvOptions:se(e)}}),(function(e){return{locusChangedHandler:function(t){if(t&&t.length>0&&t[0].locusSearchString){var n=t[0].locusSearchString.replace(/,/g,"");e({type:"UPDATE_LOCUS",newValue:n})}},trackRemovedHandler:function(t,n){e({type:"REMOVE_SELECTED_ROW_NAMES",categoryName:t,selectedRowNames:[n]})},trackOrderChangedHandler:function(t){e({type:"UPDATE_TRACK_ORDER",newValue:t})}}}))(gn);function fn(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin-top: 50px;\n  margin-left: 100px;\n  word-wrap: break-word;\n  word-break: break-all;\n"]);return fn=function(){return e},e}function bn(){var e=Object(i.a)(["\n  display: flex;\n  justify-content: center;\n  margin-top: 50px;\n"]);return bn=function(){return e},e}var En=s.a.div(bn()),vn=s.a.div(fn()),yn=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleGoogleSignIn=function(e){var t=e&&e.getBasicProfile(),n=t&&t.getEmail();a.setState({show:n?"igv":"signin-button"}),a.props.userChangedHandler(n)},a.render=function(){if("igv"===a.state.show)return console.log("Render <IGV />"),r.a.createElement(hn,null);if("signin-button"===a.state.show){var e=0,t=new Set;return a.props.rowsInCategories.forEach((function(n){n.rows.forEach((function(n){n.data&&n.data.forEach((function(n){if(n.url&&n.url.startsWith("gs://")){e+=1;var a=n.url.split("/")[2];"tgg-viewer"!==a&&t.add(a)}}))}))})),0===e?r.a.createElement(vn,null,"No dataset paths loaded. \xa0 Please specify an Initial settings url."):r.a.createElement("div",null,r.a.createElement(vn,null,r.a.createElement("div",null,"Retrieved ",e," data paths from settings file: ",r.a.createElement("a",{href:a.props.initialSettingsUrl,target:"_blank"},a.props.initialSettingsUrl),r.a.createElement("br",null),r.a.createElement("br",null)),t.size>0&&r.a.createElement("div",null,"To view this data, you should have read access to the following Google Storage buckets:",r.a.createElement("ul",null,Array.from(t).map((function(e){return r.a.createElement("li",{key:e},r.a.createElement("a",{href:"https://console.cloud.google.com/storage/browser/".concat(e),target:"_blank"},e))})))),"cookies-disabled"===a.state.signInError&&r.a.createElement("div",{style:{marginTop:"20px",color:"red",textAlign:"left"}},r.a.createElement("b",null,"ERROR: Cookies are disabled"),r.a.createElement("br",null),"Please allow cookies to enable sign in with Google.")),r.a.createElement(En,null,r.a.createElement(ln.GoogleLogin,{clientId:window.TGG_VIEWER_CLIENT_ID,theme:"dark",buttonText:"Sign in with Google",disabled:a.state.signInError,onSuccess:a.handleGoogleSignIn,onFailure:a.handleGoogleSignIn,cookiePolicy:"single_host_origin"})))}return null},a.state={},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(Y.a)(K.a.mark((function e(){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,new Promise((function(e){"undefined"!==typeof gapi&&gapi.load("client:auth2",(function(){gapi.client.load("storage","v1",(function(){gapi.client.init({clientId:"61200892608-qphtf65o323setqdcfj4hnf601mmetvs.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/devstorage.read_only",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/storage/v1/rest"]}),e()}))}))}));case 3:e.next=10;break;case 5:return e.prev=5,e.t0=e.catch(0),console.error("Error during google sign-in init:",e.t0),this.setState({show:"signin-button"}),e.abrupt("return");case 10:return e.prev=10,this.setState({signInError:null}),e.next=14,X();case 14:e.next=22;break;case 16:return e.prev=16,e.t1=e.catch(10),console.error("Error during google sign-in:",e.t1),e.t1.details&&e.t1.details.search("Cookies are not enabled")>=0&&this.setState({signInError:"cookies-disabled"}),this.setState({show:"signin-button"}),e.abrupt("return");case 22:return e.next=24,Q();case 24:t=e.sent,this.setState({show:t?"igv":"signin-button"}),this.props.userChangedHandler(t);case 27:case"end":return e.stop()}}),e,this,[[0,5],[10,16]])})));return function(){return e.apply(this,arguments)}}()}]),n}(r.a.Component),wn=Object(l.b)((function(e){return{rowsInCategories:ae(e),initialSettingsUrl:me(e)}}),(function(e){return{userChangedHandler:function(t){e({type:"UPDATE_USER",updates:{googleUserEmail:t}})}}}))(yn),Sn=n(588),On=n(299),kn=n.n(On),jn=n(300),xn=n.n(jn),Tn=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){switch(this.props.status){case n.IN_PROGRESS:return r.a.createElement(E.a,{loading:!0,name:"spinner",style:{color:"#4183c4"}});case n.SUCCEEDED:return r.a.createElement(b.a,{trigger:r.a.createElement(E.a,{name:"check circle",style:{color:"#00C000"}}),content:this.props.successMessage||"Success",position:"top center",size:"small"});case n.ERROR:return r.a.createElement(b.a,{trigger:r.a.createElement(E.a,{name:"warning circle",style:{color:"#F00000"}}),content:this.props.errorMessage||"",position:"top center",size:"small"});default:return r.a.createElement(E.a,{name:"warning circle",style:{color:"rgb(0,0,0,0.0)"}})}}}]),n}(r.a.PureComponent);Tn.NONE="NONE",Tn.IN_PROGRESS="IN_PROGRESS",Tn.SUCCEEDED="SUCCEEDED",Tn.ERROR="ERROR";var Rn=Tn,Cn=n(189),Nn=n.n(Cn),An=n(190),_n=n.n(An),Ln={},In={genome:"hg38",locus:"chr15:92,835,700-93,031,800",dataTypesToShow:["junctions","coverage","vcf","gcnv_bed"],leftSideBarLocusList:[],rightSideBarLocusList:[],rowsInCategories:[],selectedRowNamesByCategoryName:{},sjOptions:{trackHeight:170,hideAnnotated:!1,hideUnannotated:!1,colorBy:"strand",minUniquelyMappedReads:0,minTotalReads:1,maxFractionMultiMappedReads:1,minSplicedAlignmentOverhang:0,thicknessBasedOn:"numUniqueReads",bounceHeightBasedOn:"random",labelWith:"uniqueReadCount"},vcfOptions:{displayMode:"EXPANDED"},bamOptions:{trackHeight:200,showSoftClips:!0,alignmentShading:"strand"},gcnvOptions:{trackHeight:200,trackMin:0,trackMax:5,autoscale:!1,onlyHandleClicksForHighlightedSamples:!0},initialSettingsUrl:"https://github.com/macarthur-lab/rnaseq-methods/blob/master/pipelines/tgg_viewer/configs/default.json"},Bn=["leftSideBarLocusList","rightSideBarLocusList"],Dn=function(){return Bn.reduce((function(e,t){var n=function(e){try{var t=localStorage.getItem(e),n=_n.a.decompress(t);if(Ln[e]=n,null===n)return;return JSON.parse(n)}catch(a){return}}(t);return void 0!==n&&(e[t]=n),e}),{})},Un={locus:"locus",dataTypesToShow:"show",trackOrder:"order",selectedRowNamesByCategoryName:"selectedRows",selectedSamplesByCategoryNameAndRowName:"selectedSamples",sjOptions:"sjOptions",vcfOptions:"vcfOptions",bamOptions:"bamOptions",gcnvOptions:"gcnvOptions",initialSettingsUrl:"settingsUrl"},Pn=function(){var e=Object.entries(Un).reduce((function(e,t){var n=Object(I.a)(t,2),a=n[0],r=n[1];return Object(q.a)({},e,Object(L.a)({},r,a))}),{}),t=window.location.hash.replace(/^#/,"");return t?t.split("&").reduce((function(t,n){var a=n.split("="),r=a[0]in e?e[a[0]]:a[0];if("locus"===r)t=Object(q.a)({},t,Object(L.a)({},r,a[1]));else try{t[r]=Nn.a.parse(a[1])}catch(o){console.error("Couldn't parse url hash param",a[0],": ",a[1])}return t}),{}):{}},Mn=function(e){Bn.forEach((function(t){!function(e,t){try{var n=JSON.stringify(t);if(Ln[e]===n)return;console.warn("LocalStorage: compressing ".concat(e));var a=_n.a.compress(n);localStorage.setItem(e,a),Ln[e]=n}catch(r){console.warn("Unable to save state: ",e,t,r)}}(t,e[t])}));var t=Object.keys(e).filter((function(e){return e in Un})).reduce((function(t,n){var a="locus"===n?e[n].replace(",",""):Nn.a.stringify(e[n]);return[].concat(Object(h.a)(t),["".concat(Un[n],"=").concat(a)])}),[]).join("&");window.location.hash="#".concat(t)};function Vn(){var e=Object(i.a)(["\n  margin-left: 10px !important;\n"]);return Vn=function(){return e},e}function Wn(){var e=Object(i.a)(["\n  margin-left: 20px !important;\n  margin-right: 15px !important;\n"]);return Wn=function(){return e},e}function Gn(){var e=Object(i.a)(["\n  margin-top: 100px;\n  width: calc(100% - 350px);\n"]);return Gn=function(){return e},e}function Jn(){var e=Object(i.a)(["\n  color: #999;\n  width: 100%;\n  text-align: center;\n  \n  .ui.label {\n    color: #444;\n    background-color: #f3f3f3;\n  }\n"]);return Jn=function(){return e},e}var Hn=s.a.div(Jn()),qn=Object(s.a)(Sn.a)(Gn()),Fn=Object(s.a)(B.a)(Wn()),zn=Object(s.a)(B.a)(Vn()),Kn=function(e){Object(d.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).loadInitialSettingsUrl=function(){var e=Object(Y.a)(K.a.mark((function e(t,n){var r,o,c,l,i,s,u,m,p,d,g,h,f,b;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.props,o=r.globalState,c=r.updateInitialSettingsUrl,l=r.resetGlobalState,t){e.next=5;break}return l(Object(q.a)({},In,{},{user:o.user})),c(""),e.abrupt("return");case 5:if(n||(i=Dn(),s=Pn()),-1!==t.search(":")&&-1!==t.search("/")){e.next=8;break}throw new Error('Invalid url: "'.concat(t,'"'));case 8:return u=-1!==t.search(".yaml")||-1!==t.search(".yml"),m=-1!==t.search(".json"),p=!u&&!m,e.next=13,fetch(t);case 13:if((d=e.sent).ok){e.next=16;break}throw new Error("Couldn't load URL. Error: ".concat(d.statusText.toLowerCase()," (").concat(d.status,")"));case 16:return e.next=18,d.text();case 18:if(g=e.sent,(h=null)||!u&&!p){e.next=28;break}e.prev=21,h=xn.a.safeLoad(g),e.next=28;break;case 25:throw e.prev=25,e.t0=e.catch(21),new Error("Unable to parse YAML file: ".concat(t,"  ").concat(e.t0));case 28:if(h||!m&&!p){e.next=36;break}e.prev=29,h=JSON.parse(g),e.next=36;break;case 33:throw e.prev=33,e.t1=e.catch(29),new Error("Unable to parse JSON file: ".concat(t,"  ").concat(e.t1));case 36:if(h){e.next=38;break}throw new Error("Unable to parse settings from file: ".concat(t));case 38:f=Object.keys(o).reduce((function(e,t){return t in h?Object(q.a)({},e,Object(L.a)({},t,h[t])):e}),{}),console.log("Retrieved state from config file:",f),b=Object(q.a)({},o,{},f),n||(console.log("Applying settings from local storage",i),console.log("Applying settings from url hash",s),b=Object(q.a)({},b,{},i,{},s)),console.log("Setting global state to",b),l(b),c(t);case 45:case"end":return e.stop()}}),e,null,[[21,25],[29,33]])})));return function(t,n){return e.apply(this,arguments)}}(),a.applyInitialSettingsUrl=function(){var e=Object(Y.a)(K.a.mark((function e(t){var n,r,o,c,l=arguments;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]&&l[1],a.setState({requestStatus:Rn.IN_PROGRESS}),t.startsWith("https://github.com/")?t=t.replace("https://github.com","https://raw.githubusercontent.com").replace("blob/",""):(t.startsWith("https://storage.googleapis.com")||t.startsWith("gs://"))&&(r=t.replace("gs://","").replace("https://storage.googleapis.com/","").split("/"),o=r[0],c=r.slice(1).join("/"),t="https://".concat(o,".storage.googleapis.com/").concat(c)),e.prev=3,e.next=6,a.loadInitialSettingsUrl(t,n);case 6:a.setState({requestStatus:Rn.SUCCEEDED,successMessage:t?"Successfully loaded URL and applied settings":"Reset all settings to defaults"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a.setState({requestStatus:Rn.ERROR,errorMessage:e.t0.toString()});case 12:return e.next=14,kn()(1e4);case 14:a.state.requestStatus!==Rn.IN_PROGRESS&&a.setState({requestStatus:Rn.NONE,errorMessage:""});case 15:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),a.exportCurrentSettings=function(){var e=["user","modals"],t=Object.keys(a.props.globalState).reduce((function(t,n){return e.includes(n)||(t[n]=a.props.globalState[n]),t}),{});return encodeURIComponent(JSON.stringify(t,null,5))},a.textInputValue=e.initialSettingsUrl||"",a.state={requestStatus:Rn.NONE,successMessage:"",errorMessage:""},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(Y.a)(K.a.mark((function e(){var t;return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.props.initialSettingsUrl)){e.next=5;break}return console.log("Loading settings from",t),e.next=5,this.applyInitialSettingsUrl(t,!1);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.initialSettingsUrl;return r.a.createElement(Hn,{align:"center"},r.a.createElement(qn,{label:"Initial settings:",defaultValue:t,placeholder:"URL of .yaml or .json settings file (eg. http://.../settings.json), or blank to reset all settings to defaults.",onChange:function(t){e.textInputValue=t.target.value},onKeyUp:function(t){return 13===t.keyCode&&e.applyInitialSettingsUrl(t.target.value,!0)}}),r.a.createElement(Fn,{content:"Apply",onClick:function(){return e.applyInitialSettingsUrl(e.textInputValue,!0)}}),r.a.createElement(Rn,{status:this.state.requestStatus,errorMessage:this.state.errorMessage,successMessage:this.state.successMessage}),r.a.createElement(b.a,{content:"Export current settings to a .json file. If you then upload this file to a public url (for example to github) and then paste the url here, the current settings will be restored.",position:"right center",trigger:r.a.createElement("a",{download:"settings.json",href:"data:text/json;charset=utf-8,".concat(this.exportCurrentSettings())},r.a.createElement(zn,{icon:"download"}))}))}}]),n}(r.a.PureComponent),Yn=Object(l.b)((function(e){return{globalState:e,initialSettingsUrl:me(e)}}),(function(e){return{updateInitialSettingsUrl:function(t){e({type:"UPDATE_INITIAL_SETTINGS_URL",newValue:t})},resetGlobalState:function(t){e({type:"RESET_GLOBAL_STATE",newState:t})}}}))(Kn);function Xn(){var e=Object(i.a)(["\n  min-width: calc(99% - ","px) !important;\n  z-index: 1;\n"]);return Xn=function(){return e},e}function Qn(){var e=Object(i.a)(["\n  min-width: ","px !important;\n  z-index: 0;\n"]);return Qn=function(){return e},e}function $n(){var e=Object(i.a)(["\n  min-width: ","px !important;\n  z-index: 2;\n"]);return $n=function(){return e},e}function Zn(){var e=Object(i.a)(["\n  padding: 10px 20px;\n"]);return Zn=function(){return e},e}var ea=s.a.div(Zn()),ta=Object(s.a)(u.a.Column)($n(),210),na=Object(s.a)(u.a.Column)(Qn(),210),aa=Object(s.a)(u.a.Column)(Xn(),425),ra=function(){return r.a.createElement(ea,null,r.a.createElement(u.a,null,r.a.createElement(u.a.Row,null,r.a.createElement(ta,null,r.a.createElement(Lt,null)),r.a.createElement(aa,null,r.a.createElement(cn,null),r.a.createElement(wn,null),r.a.createElement(Yn,null)),r.a.createElement(na,null,r.a.createElement(Kt,null)))))},oa=n(76),ca=n(301),la=Object(oa.c)(Object.assign({genome:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},locus:Ce("UPDATE_LOCUS",""),rightSideBarLocusList:Ae("RIGHT_SIDE_BAR_LOCUS_LIST"),leftSideBarLocusList:Ae("LEFT_SIDE_BAR_LOCUS_LIST"),dataTypesToShow:Ae("DATA_TYPES_TO_SHOW"),rowsInCategories:function(e,t){return t&&t.categoryName&&t.rows?e.map((function(e){if(e.categoryName!==t.categoryName)return e;var n;switch(t.type){case"SET_ROWS":n=Object(h.a)(t.rows);break;case"ADD_ROWS":var a=e.rows.map((function(e){return e.name}));n=[].concat(Object(h.a)(e.rows),Object(h.a)(t.rows.filter((function(e){return!a.includes(e.name)}))));break;default:n=e.rows}return Object(q.a)({},e,{rows:n})})):e||[]},selectedRowNamesByCategoryName:function(e,t){if(!t||!t.categoryName||!Array.isArray(t.selectedRowNames))return e||{};var n=e[t.categoryName]||[];switch(t.type){case"SET_SELECTED_ROW_NAMES":case"ADD_SELECTED_ROW_NAMES":case"REMOVE_SELECTED_ROW_NAMES":var a;if("SET_SELECTED_ROW_NAMES"===t.type)a=Array.from(new Set(t.selectedRowNames));else if("ADD_SELECTED_ROW_NAMES"===t.type)a=Array.from(new Set([].concat(Object(h.a)(n),Object(h.a)(t.selectedRowNames))));else{var r=t.selectedRowNames;a=n.filter((function(e){return!r.includes(e)}))}return Object(q.a)({},e,Object(L.a)({},t.categoryName,a));default:console.trace("Unknown action type: ".concat(t.type))}return e},selectedSamplesByCategoryNameAndRowName:function(e,t){if(!t||!t.categoryName||!t.selectedSamplesByRowName&&!t.sampleSettingsByRowNameAndSampleName)return e||{};var n=e[t.categoryName]||{},a=n.selectedSamples||{},r=n.sampleSettings||{},o=a,c=r;switch(t.type){case"SET_SELECTED_SAMPLES":case"ADD_SELECTED_SAMPLES":case"REMOVE_SELECTED_SAMPLES":o="SET_SELECTED_SAMPLES"===t.type?Object(q.a)({},a,{},t.selectedSamplesByRowName):"ADD_SELECTED_SAMPLES"===t.type?Array.from(new Set([].concat(Object(h.a)(Object.keys(a)),Object(h.a)(Object.keys(t.selectedSamplesByRowName))))).reduce((function(e,n){return e[n]=Array.from(new Set([].concat(Object(h.a)(a[n]||[]),Object(h.a)(t.selectedSamplesByRowName[n]||[])))),e}),{}):Object.keys(a).reduce((function(e,n){var r=t.selectedSamplesByRowName[n]||[],o=(a[n]||[]).filter((function(e){return!r.includes(e)}));return o.length>0&&(e[n]=o),e}),{});break;case"UPDATE_SAMPLE_SETTINGS":c=Object(q.a)({},r,{},t.sampleSettingsByRowNameAndSampleName),Object.keys(t.sampleSettingsByRowNameAndSampleName).forEach((function(e){var n=r[e]||{},a=t.sampleSettingsByRowNameAndSampleName[e],o=Object(q.a)({},n,{},a);Object.entries(a).forEach((function(e){var t=Object(I.a)(e,2),a=t[0],r=t[1],c=Object(q.a)({},n[a]||{},{},r);o[a]=c})),c[e]=o}));break;default:return console.trace("Unknown action type: ".concat(t.type)),e}return Object(q.a)({},e,Object(L.a)({},t.categoryName,{selectedSamples:o,sampleSettings:c}))},trackOrder:Ce("UPDATE_TRACK_ORDER",[]),sjOptions:Ne("UPDATE_SJ_OPTIONS"),vcfOptions:Ne("UPDATE_VCF_OPTIONS"),bamOptions:Ne("UPDATE_BAM_OPTIONS"),gcnvOptions:Ne("UPDATE_GCNV_OPTIONS"),user:Ne("UPDATE_USER"),initialSettingsUrl:Ce("UPDATE_INITIAL_SETTINGS_URL","")},_e)),ia=function(e,t){if("RESET_GLOBAL_STATE"===t.type)return t.newState;var n=la(e,t);return Mn(n),n},sa=function(){var e=function(){var e=Dn(),t=Pn();return Object(q.a)({},In,{},e,{},t)}();return console.log("Initializing store to:",e),Object(oa.e)(ia,e,Object(oa.d)(Object(oa.a)(ca.a)))};var ua=function(){return r.a.createElement(l.a,{store:sa()},r.a.createElement(ra,null))};c.a.render(r.a.createElement(ua,null),document.getElementById("root"))}},[[314,1,2]]]);
//# sourceMappingURL=main.69be8bfb.chunk.js.map