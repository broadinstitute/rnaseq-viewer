(this.webpackJsonprnaseq_viewer=this.webpackJsonprnaseq_viewer||[]).push([[0],{335:function(e,t,n){e.exports=n(545)},340:function(e,t,n){},545:function(e,t,n){"use strict";n.r(t);var a,r,o,c,i,l,s,u,p,d=n(0),m=n.n(d),h=n(60),f=n.n(h),g=(n(340),n(30)),b=n(18),y=n(19),v=n(567),E=n(4),w=n(5),O=n(16),j=n(17),S=n(22),x=n(546),k=n(564),T=n(78),L=n(287),N=n.n(L),_=y.a.h3(a||(a=Object(b.a)([" \n  display: inline-block;\n  margin: 12px 0px 0px 0px !important;\n"]))),R=Object(y.a)(k.a)(r||(r=Object(b.a)(["\n  opacity: 0.95;\n"]))),C=Object(y.a)(T.a)(o||(o=Object(b.a)(["\n  margin-top: 5px !important;\n"]))),A=y.a.div(c||(c=Object(b.a)(["\n  padding-top: 3px;\n  z-index: 100000;\n"]))),I=Object(y.a)(A)(i||(i=Object(b.a)(["\n  margin: 10px 0px; \n"]))),P=y.a.input(l||(l=Object(b.a)(["\n  display: inline;\n  width: 50px;\n  margin-left: 5px;\n  padding-left: 5px;\n"]))),B=n(13),D=n(9),U=n(547),M=n(20),G=n(322),V=y.a.div(s||(s=Object(b.a)(["\n  display: inline-block;\n  cursor: pointer;\n  border-radius: 2px;\n  padding: 1px 2px;\n  background: #fff;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.1);\n"]))),W=y.a.div(u||(u=Object(b.a)(["\n  display: inline-block;\n  cursor: pointer;\n  border-radius: 2px;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.1);\n  width: 10px;\n  height: 12px;\n"]))),J=Object(y.a)(k.a).attrs({flowing:!0})(p||(p=Object(b.a)(["\n  padding: 0px !important;\n  div {\n    overflow-y: visible !important;\n  }\n"]))),F=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(E.a)(this,n),a=t.call(this,e),Object(B.a)(Object(M.a)(a),"handleChange",(function(e){a.setState({color:e})})),Object(B.a)(Object(M.a)(a),"handleApply",(function(e){a.props.colorChangedHandler(e.hex)})),a.state={color:a.props.color},a}return Object(w.a)(n,[{key:"render",value:function(){var e=this;return m.a.createElement(J,{on:"click",position:"left center",trigger:m.a.createElement(V,null,m.a.createElement(W,{style:{background:this.state.color}})),content:m.a.createElement(G.a,{color:this.state.color,onChangeComplete:this.handleApply,onChange:function(t){return e.setState({color:t})}})})}}]),n}(m.a.Component),H=["GT/AG","CT/AC","GC/AG","CT/GC","AT/AC","GT/AT","non-canonical"],q=n(15),z=n(79),K=n(2);function Y(){Y=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,a){var o=t&&t.prototype instanceof g?t:g,c=Object.create(o.prototype),i=new N(a||[]);return r(c,"_invoke",{value:x(e,n,i)}),c}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",m="executing",h="completed",f={};function g(){}function b(){}function y(){}var v={};s(v,c,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(_([])));w&&w!==n&&a.call(w,c)&&(v=w);var O=y.prototype=g.prototype=Object.create(v);function j(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(r,o,c,i){var l=p(e[r],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==typeof u&&a.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(u).then((function(e){s.value=e,c(s)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}var o;r(this,"_invoke",{value:function(e,a){function r(){return new t((function(t,r){n(e,a,t,r)}))}return o=o?o.then(r,r):r()}})}function x(t,n,a){var r=d;return function(o,c){if(r===m)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw c;return{value:e,done:!0}}for(a.method=o,a.arg=c;;){var i=a.delegate;if(i){var l=k(i,a);if(l){if(l===f)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===d)throw r=h,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=m;var s=p(t,n,a);if("normal"===s.type){if(r=a.done?h:"suspendedYield",s.arg===f)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(r=h,a.method="throw",a.arg=s.arg)}}}function k(t,n){var a=n.method,r=t.iterator[a];if(r===e)return n.delegate=null,"throw"===a&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),f;var o=p(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,f;var c=o.arg;return c?c.done?(n[t.resultName]=c.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):c:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(a.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return b.prototype=y,r(O,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:b,configurable:!0}),b.displayName=s(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},j(S.prototype),s(S.prototype,i,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,a,r,o){void 0===o&&(o=Promise);var c=new S(u(e,n,a,r),o);return t.isGeneratorFunction(n)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},j(O),s(O,l,"Generator"),s(O,c,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=_,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(a,r){return i.type="throw",i.arg=t,n.next=a,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return r("end");if(c.tryLoc<=this.prev){var l=a.call(c,"catchLoc"),s=a.call(c,"finallyLoc");if(l&&s){if(this.prev<c.catchLoc)return r(c.catchLoc,!0);if(this.prev<c.finallyLoc)return r(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return r(c.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return r(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;L(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,a){return this.delegate={iterator:_(t),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=e),f}},t}var X,Q,$,Z,ee,te,ne=function(){var e=Object(K.a)(Y().mark((function e(){var t;return Y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance();case 2:if(!(t=e.sent)||t.isSignedIn.get()){e.next=6;break}return e.next=6,t.signIn();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(K.a)(Y().mark((function e(){var t,n,a;return Y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return n=t&&t.currentUser&&t.currentUser.get(),a=n&&n.getBasicProfile(),e.abrupt("return",a&&a.getEmail());case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(K.a)(Y().mark((function e(){var t,n;return Y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gapi.auth2.getAuthInstance();case 2:if(t=e.sent,n=t&&t.currentUser&&t.currentUser.get(),t){e.next=6;break}return e.abrupt("return",null);case 6:return t.isSignedIn.get()||n.reloadAuthResponse(),e.abrupt("return",n.getAuthResponse().access_token);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(e){return e.locus},ce=function(e){return e.rightSideBarLocusList},ie=function(e){return e.leftSideBarLocusList},le=function(e){return e.genome},se=function(e){return e.rowsInCategories},ue=function(e){return e.selectedRowNamesByCategoryName},pe=function(e){return e.selectedSamplesByCategoryNameAndRowName},de=function(e){return e.sjOptions},me=function(e){return e.vcfOptions},he=function(e){return e.bamOptions},fe=function(e){return e.gcnvOptions},ge=function(e){return e.user},be=function(e){return e.isGoogleLoginRequired},ye=function(e){return e.initialSettingsUrl},ve=Object(z.a)(se,(function(e){return Object(S.a)(e.reduce((function(e,t){return t.rows.forEach((function(t){t.data&&t.data.filter((function(e){return e.type})).map((function(e){return e.type})).forEach((function(t){e.add(t)}))})),e}),new Set))})),Ee=Object(z.a)(se,(function(e){return Object(S.a)(e.reduce((function(e,t){return t.rows.forEach((function(t){if(t.data){var n=t.data.filter((function(e){return e.type})).map((function(e){return e.type}));new Set(n).size>=2&&n.forEach((function(t){e.add(t)}))}})),e}),new Set))})),we=Object(z.a)(ve,Ee,(function(e){return e.dataTypesToShow}),(function(e,t,n){return e.filter((function(e){return!t.includes(e)||n.includes(e)}))})),Oe=Object(z.a)(se,(function(e){return e.reduce((function(e,t){return Object(q.a)(Object(q.a)({},e),{},Object(B.a)({},t.categoryName,t.rows))}),{})})),je=Object(z.a)(ue,Oe,(function(e,t){return Object.entries(e).reduce((function(e,n){var a=Object(D.a)(n,2),r=a[0],o=a[1];return t[r]?Object(q.a)(Object(q.a)({},e),{},Object(B.a)({},r,t[r].filter((function(e){return o.includes(e.name)})))):e}),{})})),Se=Object(z.a)(je,pe,(function(e){return e.trackOrder}),we,de,me,he,fe,(function(e,t,n,a,r,o,c,i){var l=[];Object.entries(e).forEach((function(e){var s=Object(D.a)(e,2),u=s[0];return s[1].forEach((function(e,s){var p,d;(e.data||[]).forEach((function(m,h){if(a.includes(m.type)){var f=function(e){var t=n.indexOf(e);return-1!==t?t+=5e4:t=100*s+h,t};if("gcnv_bed"===m.type){var g="".concat(e.name," ").concat(m.label||""),b=f(g);console.log("Adding ".concat(g," (").concat(m.url,") track: order ").concat(b)),l.push({type:"gcnv",format:"gcnv",name:g,url:m.url,indexURL:m.indexURL||"".concat(m.url,".tbi"),height:i.trackHeight,min:i.trackMin,max:i.trackMax,autoscale:i.autoscale,highlightSamples:(((t[u]||{}).selectedSamples||{})[e.name]||[]).reduce((function(n,a){return n[a]=((((t[u]||{}).sampleSettings||{})[e.name]||{})[a]||{}).color||"blue",n}),{}),onlyHandleClicksForHighlightedSamples:i.onlyHandleClicksForHighlightedSamples,oauthToken:re,order:b,rowName:e.name,categoryName:u})}else if("junctions"===m.type){if(p)return void console.error('More than one "junctions" track found in row',e);p={type:"spliceJunctions",format:"bed",url:m.url,indexURL:m.indexURL||"".concat(m.url,".tbi"),oauthToken:re,name:e.name,order:f(e.name),height:r.trackHeight,minUniquelyMappedReads:r.minUniquelyMappedReads,minTotalReads:r.minTotalReads,maxFractionMultiMappedReads:r.maxFractionMultiMappedReads,minSplicedAlignmentOverhang:r.minSplicedAlignmentOverhang,minSamplesWithThisJunction:r.minSamplesWithThisJunction,maxSamplesWithThisJunction:r.maxSamplesWithThisJunction,minPercentSamplesWithThisJunction:r.minPercentSamplesWithThisJunction,maxPercentSamplesWithThisJunction:r.maxPercentSamplesWithThisJunction,minJunctionEndsVisible:r.minJunctionEndsVisible,thicknessBasedOn:r.thicknessBasedOn,bounceHeightBasedOn:r.bounceHeightBasedOn,colorBy:r.colorBy,colorByNumReadsThreshold:void 0!==r.colorByNumReadsThreshold?r.colorByNumReadsThreshold:5,hideStrand:r.showOnlyPlusStrand?"-":r.showOnlyMinusStrand?"+":void 0,labelWith:r.labelWith,labelWithInParen:r.labelWithInParen,hideAnnotatedJunctions:r.hideAnnotated,hideUnannotatedJunctions:r.hideUnannotated,hideMotifs:H.filter((function(e){return r["hideMotif".concat(e)]})),rowName:e.name,categoryName:u}}else if("coverage"===m.type){if(d)return void console.error('More than one "coverage" track found in row',e);d={type:"wig",format:"bigwig",url:m.url,oauthToken:re,name:e.name,order:f(e.name),height:r.trackHeight,rowName:e.name,categoryName:u},m.url.includes("spliceai")&&(d.color=function(e){return e<.5?"rgb(180,180,180)":e<.8?"rgb(180,180,0)":"rgb(200,0,0)"})}else if(["bed","gff3","gtf","genePred","genePredExt","peaks","narrowPeak","broadPeak","bigBed","bedpe"].includes(m.type)){var y="".concat(e.name," ").concat(m.label||""),v=f(y);console.log("Adding ".concat(y," (").concat(m.url,") ").concat(m.type," track: order ").concat(v)),l.push({type:"annotation",format:m.type,name:y,order:v,url:m.url,delimiter:m.delimiter,nameField:m.nameField,oauthToken:re,indexURL:m.indexURL||"".concat(m.url,".tbi"),height:100})}else if(("vcf"===m.type||m.url.includes(".vcf"))&&a.includes("vcf")){var E="".concat(e.name," ").concat(m.label||"vcf"),w=f(E);console.log("Adding ".concat(E," (").concat(m.url,") track: order ").concat(w)),l.push({type:"variant",format:"vcf",url:m.url,indexURL:m.indexURL||"".concat(m.url,".tbi"),indexed:!0,name:E,order:w,displayMode:o.displayMode,oauthToken:re,rowName:e.name,categoryName:u})}else if("alignment"===m.type||m.url.includes(".bam")||m.url.includes(".cram")){var O="".concat(e.name," ").concat(m.label||"bam"),j=f(O);console.log("Adding ".concat(O," (").concat(m.url,") track: order ").concat(j)),l.push({type:"alignment",url:m.url,indexURL:m.indexURL||("".concat(m.url).endsWith("cram")?"".concat(m.url,".crai"):"".concat(m.url).endsWith("bam")?"".concat(m.url,".bai"):null),indexed:!0,name:O,order:j,height:c.trackHeight,colorBy:c.colorBy,viewAsPairs:c.viewAsPairs,showSoftClips:c.showSoftClips,oauthToken:re,rowName:e.name,categoryName:u})}}else console.log("Skipping hidden track: ".concat(m.url))})),d&&p?(console.log("Adding ".concat(p.name," (").concat(p.url," & ").concat(d.url,") track: order ").concat(p.order)),l.push({type:"merged",name:p.name,order:p.order,height:r.trackHeight,tracks:[d,p],rowName:e.name,categoryName:u})):p?(console.log("Adding ".concat(p.name," (").concat(p.url,") track: order ").concat(p.order)),l.push(p)):d&&(console.log("Adding ".concat(d.name," (").concat(d.url,") track: order ").concat(d.order)),l.push(d))}))}));var s=n.indexOf("Gencode v32 Genes");return-1!==s?s+=5e4:s=1000001,l.push({name:"Gencode v32 Genes",format:"refgene",url:"gs://tgg-viewer/ref/GRCh38/gencode_v44/gencode.v44.hg38.sorted.txt.gz",indexURL:"gs://tgg-viewer/ref/GRCh38/gencode_v44/gencode.v44.hg38.sorted.txt.gz.tbi",indexed:!0,searchable:!0,height:350,visibilityWindow:-1,displayMode:"EXPANDED",order:s,color:"rgb(76,171,225)",oauthToken:re}),l})),xe=y.a.span(X||(X=Object(b.a)(["\n  margin: 10px 0px 8px 0px;\n  font-style: italic;\n"]))),ke=Object(y.a)(U.a).attrs({basic:!0,icon:!0})(Q||(Q=Object(b.a)(["\n  padding: 0px !important;\n  box-shadow: none !important;\n"]))),Te=y.a.span($||($=Object(b.a)(["\n  word-wrap: break-word;\n  word-break: break-all;  \n  white-space: normal;\n"]))),Le=function(e){var t=e.categoryName,n=e.rowName,a=e.sample,r=e.sampleSettings,o=e.hideSample,c=e.updateSampleSettings,i=e.numSelectedSamplesInRow;return m.a.createElement("div",{style:{whiteSpace:"nowrap"}},m.a.createElement(ke,{onClick:function(){return o(t,n,a,i)}},m.a.createElement(T.a,{name:"delete"})),m.a.createElement(Te,null,a),m.a.createElement("span",{style:{marginLeft:"8px"}},m.a.createElement(F,{key:r.color,color:r.color||"blue",colorChangedHandler:function(e){return c(t,n,a,{color:e})}})))},Ne=Object(g.b)((function(e){return{selectedSamplesByCategoryNameAndRowName:pe(e)}}),(function(e){return{updateGcnvOptions:function(t){e({type:"UPDATE_GCNV_OPTIONS",updates:t})},hideRow:function(t,n){e({type:"REMOVE_SELECTED_ROW_NAMES",categoryName:t,selectedRowNames:[n]})},hideSample:function(t,n,a,r){r<=1&&e({type:"REMOVE_SELECTED_ROW_NAMES",categoryName:t,selectedRowNames:[n]}),e({type:"REMOVE_SELECTED_SAMPLES",categoryName:t,selectedSamplesByRowName:Object(B.a)({},n,[a])})},updateSampleSettings:function(t,n,a,r){e({type:"UPDATE_SAMPLE_SETTINGS",categoryName:t,sampleSettingsByRowNameAndSampleName:Object(B.a)({},n,Object(B.a)({},a,r))})}}}))((function(e){var t=e.selectedSamplesByCategoryNameAndRowName,n=e.hideRow,a=e.hideSample,r=e.updateSampleSettings,o=[];return Object.entries(t).forEach((function(e){var t=Object(D.a)(e,2),c=t[0],i=t[1];Object.entries(i.selectedSamples||{}).forEach((function(e){var t=Object(D.a)(e,2),l=t[0],s=t[1];o.push(m.a.createElement("div",{key:"".concat(c,"!!").concat(l)},m.a.createElement("div",{style:{whiteSpace:"nowrap",margin:"15px 0px 7px 0px"}},m.a.createElement(xe,null,"".concat(c,": ").concat(l))),s.map((function(e){return m.a.createElement(Le,{key:e,categoryName:c,rowName:l,sample:e,sampleSettings:((i.sampleSettings||{})[l]||{})[e]||{},hideRow:n,hideSample:a,updateSampleSettings:r,numSelectedSamplesInRow:s.length})}))))}))})),o.length>0?o:null})),_e=n(562),Re=n(561),Ce=n(563),Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e},Ie=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case e:return void 0===r.newValue?(console.error("Invalid ".concat(e," action: action.newValue is undefined: "),r),a):(n&&console.log("singleValueReducer: applying action: ",r,"State changing from ",a," to ",r.newValue),r.newValue);default:return a}};return a},Pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case e:if(void 0===r.updates)return console.error("Invalid ".concat(e," action: action.updates is undefined: "),r),a;var o=Object(q.a)(Object(q.a)({},a),r.updates);return n&&console.log("singleObjectReducer: applying action: ",r,"State changing from ",a," to ",o),o;default:return a}};return a},Be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;if(!r)return a;switch(r.type){case"SET_".concat(e):case"ADD_".concat(e):case"REMOVE_".concat(e):if(!Array.isArray(r.values))return console.error("Invalid ".concat(r.type," action: action.values is undefined or not an array: "),r),a;var o;if(r.type==="SET_".concat(e))o=Object(S.a)(r.values);else if(r.type==="ADD_".concat(e))o=[].concat(Object(S.a)(a),Object(S.a)(r.values));else{var c=r.values;o=a.filter((function(e){return!c.includes(e)}))}return n&&console.log("createArrayReducer: applying action: ",r,"State changing from ",a," to ",o),o;default:return a}};return a},De={modals:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,o=arguments.length>1?arguments[1]:void 0;if(!o)return r;switch(o.type){case e:if(void 0===o.updatesById)return console.error("Invalid ".concat(e," action. action.updatesById is undefined: "),o),r;var c=o.updatesById;if(t){if(!(t in c))return r;c=c[t]}var i=Object(q.a)({},r);return Object.entries(c).forEach((function(e){var t=Object(D.a)(e,2),n=t[0],a=t[1];null==a?delete i[n]:i[n]?i[n]=Object(q.a)(Object(q.a)({},i[n]),a):i[n]=Object(q.a)({},a)})),a&&console.log("objectsByIdReducer: applying action: ",o,"State changing from: ",r," to ",i),i;default:return r}};return r}("UPDATE_MODAL_STATE")},Ue=function(e,t){return e.modals[t]&&e.modals[t].open},Me=Object(y.a)(U.a).attrs({basic:!0})(Z||(Z=Object(b.a)(["\n  &.ui.button.basic {\n    white-space: nowrap;\n    border: none;\n    padding: ",";\n    color: "," !important;\n    text-decoration: none;\n    font-weight: ",';\n    box-shadow: none !important;\n    user-select: auto;\n    \n    &:hover, &:focus, &:active {\n      color: #1e70bf !important;\n      background: transparent !important;\n    }\n    \n    &[class*="right labeled"].icon {\n      padding-left: 0 !important;\n      padding-right: 2.1em !important;\n      \n      > .icon {\n        background-color: initial;\n      }\n    }\n  }\n'])),(function(e){return e.padding||0}),(function(e){return e.color||"#4183C4"}),(function(e){return e.fontWeight||"inherit"})),Ge=y.a.div(ee||(ee=Object(b.a)(["\n  float: right;\n  padding: 0px 20px 20px 20px;\n"]))),Ve=Object(y.a)(U.a)(te||(te=Object(b.a)(["\n  margin-left: 10px !important;\n  width: 100px;\n"]))),We=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(E.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),Object(B.a)(Object(M.a)(e),"handleClose",(function(){var t=!0;e.props.handleClose&&(t=e.props.handleClose()),t&&e.props.close()})),Object(B.a)(Object(M.a)(e),"handleSave",(function(){var t=!0;e.props.handleSave&&(t=e.props.handleSave()),t&&e.props.close()})),e}return Object(w.a)(n,[{key:"render",value:function(){var e=this.props.trigger?m.a.cloneElement(this.props.trigger,{onClick:this.props.open}):null;return m.a.createElement(Ce.a,{open:this.props.isOpen,trigger:e,onClose:this.handleClose,size:this.props.size},m.a.createElement(Ce.a.Header,null,this.props.title,m.a.createElement(Me,{floated:"right",onClick:this.handleClose,icon:m.a.createElement(T.a,{name:"remove",color:"grey"})})),m.a.createElement(Ce.a.Content,null,this.props.children),m.a.createElement(Ge,null,m.a.createElement(Ve,{tabIndex:0,onClick:this.handleClose,type:"button"},"Cancel"),m.a.createElement(Ve,{tabIndex:0,onClick:this.handleSave,type:"submit",color:"blue"},this.props.handleSave?"Save":"Ok")))}}]),n}(m.a.PureComponent);We.defaultProps={size:"small"};var Je,Fe,He,qe,ze,Ke,Ye,Xe,Qe,$e,Ze,et,tt,nt,at,rt,ot,ct,it=Object(g.b)((function(e,t){return{isOpen:Ue(e,t.modalName)}}),(function(e,t){return{open:function(n){var a;n.preventDefault(),e((a=t.modalName,function(e){return e({type:"UPDATE_MODAL_STATE",updatesById:Object(B.a)({},a,{open:!0})})}))},close:function(){var n,a;e((n=t.modalName,a=!0,function(e,t){t().modals[n].confirmOnClose&&!a?e({type:"UPDATE_MODAL_STATE",updatesById:Object(B.a)({},n,{confirming:!0})}):e({type:"UPDATE_MODAL_STATE",updatesById:Object(B.a)({},n,{open:!1,confirming:!1,confirmOnClose:null})})}))}}}))(We),lt=y.a.a(Je||(Je=Object(b.a)(["\n  cursor: pointer;\n"]))),st=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e){var a;Object(E.a)(this,n),a=t.call(this,e),Object(B.a)(Object(M.a)(a),"render",(function(){var e=a.props,t=e.locusList,n=e.name,r=e.setLocusList,o="Locus List - ".concat(n);return m.a.createElement(it,{title:o,size:"large",modalName:o,trigger:m.a.createElement(lt,null,(t||[]).length>0?m.a.createElement("div",null,m.a.createElement("br",null),"Edit Locus List"):m.a.createElement("div",null,"Add Locus List To Side Bar")),handleSave:function(){var e=a.textAreaValue.split(/[,\s]+/).filter(Boolean);return r(e),!0}},m.a.createElement(_e.a,null,m.a.createElement(_e.a.Field,{control:Re.a,style:{minHeight:"300px"},defaultValue:a.textAreaValue,onKeyUp:function(e){a.textAreaValue=e.target.value},placeholder:"Enter genomic positions, intervals, and/or gene names separated by commas, spaces, or new lines.  These can be in any format recognized by the IGV search bar.  For example: DMD, ENST00000589830, chr1:55516888, 2:152341851-152591002"})),m.a.createElement("br",null),m.a.createElement("b",null,m.a.createElement("i",null,"NOTE:"))," This locus list will be saved across page refreshes in this browser, \xa0 but will not be recorded in the page url like other settings.\xa0 Sharing or bookmarking this page won't include the contents of this list.")}));var r=a.props.locusList;return a.textAreaValue=(r||[]).join("\n"),a}return Object(w.a)(n)}(m.a.PureComponent),ut=function(e){var t=e.name,n=e.locusList,a=e.setLocus,r=e.setLocusList;return m.a.createElement("div",null,n.map((function(e,t){return m.a.createElement("div",{key:"".concat(e," ").concat(t)},t+1,". \xa0 ",m.a.createElement(lt,{onClick:function(){a(e)}},e))})),m.a.createElement(st,{name:t,locusList:n,setLocusList:r}))},pt=n(565),dt=y.a.a(Fe||(Fe=Object(b.a)(["\n  cursor: pointer;\n  padding: 10px 10px 10px 0px;\n  display: inline-block;\n"]))),mt=y.a.div(He||(He=Object(b.a)(["\n  font-family: monospace;\n  margin: 20px 30px;\n  padding: 10px;\n  background-color: #F7F7F7;\n  white-space: nowrap;\n"]))),ht=y.a.span(qe||(qe=Object(b.a)(["\n  font-family: monospace;\n  background-color: #F7F7F7;\n"]))),ft=Object(y.a)(k.a).attrs({position:"right center"})(ze||(ze=Object(b.a)(["\n"]))),gt={".bigWig":"coverage",".bw":"coverage",".junctions.bed":"junctions",".spliceJunctions.bed":"junctions",".junctions.bed.gz":"junctions",".spliceJunctions.bed.gz":"junctions",".bam":"bam",".cram":"bam",".vcf":"vcf",".vcf.gz":"vcf",".wig":"wig",".bedGraph":"wig",".gcnv.bed":"gcnv_bed",".gcnv.bed.gz":"gcnv_bed",".bed":"bed",".bed.gz":"bed",".gff3":"gff",".gtf":"gtf",".gtf.gz":"gtf",".genePred":"genePred",".bigBed":"bigBed"},bt=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(E.a)(this,n),a=t.call(this,e),Object(B.a)(Object(M.a)(a),"getInitialState",(function(){return{textAreaValue:"",warningMessage:null,errorMessage:null}})),Object(B.a)(Object(M.a)(a),"parseTextAreaValueToRows",(function(e){if(!e.trim())return{rows:[],errorMessage:null};var t=null,n=[],a=e.split(/[,\s]+/).filter(Boolean).reduce((function(e,t){var a=t.split("/"),r=a[a.length-1],o=Object.keys(gt).filter((function(e){return r.endsWith(e)}));if(0===o.length)n.push(t);else{var c=o[0],i=r.replace(c,"");e[i]||(e[i]={data:[]}),e[i].name=i,e[i].data.push({type:gt[c],url:t})}return e}),{});return n.length>0&&(t="These paths have file suffixes that are not recognized: ".concat(n.join(", "))),{newRows:Object.values(a),errorMessage:t}})),Object(B.a)(Object(M.a)(a),"handleModalSave",(function(){var e=a.props.addRows,t=a.state.textAreaValue,n=a.parseTextAreaValueToRows(t),r=n.newRows,o=n.errorMessage;return o?(a.setState({errorMessage:o}),!1):(e(r),a.setState(a.getInitialState()),!0)})),Object(B.a)(Object(M.a)(a),"handleModalClose",(function(){return a.setState(a.getInitialState()),!0})),Object(B.a)(Object(M.a)(a),"render",(function(){var e=a.props,t=e.title,n=e.trigger,r=a.state,o=r.textAreaValue,c=r.warningMessage,i=r.errorMessage,l="".concat(t," Rows");return m.a.createElement(it,{title:l,size:"large",modalName:l,trigger:n,handleSave:a.handleModalSave,handleClose:a.handleModalClose},m.a.createElement("div",null,"Enter google bucket path(s) for data files: \xa0",m.a.createElement(ft,{trigger:m.a.createElement(T.a,{style:{margin:"10px 0px"},name:"question circle outline"}),content:m.a.createElement("div",null,m.a.createElement("b",null,"Format"),":",m.a.createElement("br",null),m.a.createElement("br",null),"Enter a list of data file paths separated by commas, spaces or new lines. ",m.a.createElement("br",null),m.a.createElement("br",null),"Example:",m.a.createElement("br",null),m.a.createElement(mt,null,"gs://your-bucket/dir/sample-name1.bigWig ",m.a.createElement("br",null),"gs://your-bucket/dir/sample2.bigWig ",m.a.createElement("br",null),"gs://your-bucket/dir/sample-name1.junctions.bed.gz ",m.a.createElement("br",null),"gs://your-bucket/dir/sample-name1.bam ",m.a.createElement("br",null),"gs://your-bucket/dir/sample2.junctions.bed.gz ",m.a.createElement("br",null)),"Paths that have the same prefix (eg. ",m.a.createElement(ht,null,"gs://your-bucket/dir/sample-name1")," above) will be interpreted as different data types from the same sample.",m.a.createElement("br",null),"The order of paths doesn't matter.",m.a.createElement("br",null),m.a.createElement("br",null),"IGV.js track types will be inferred from file extensions as follows:",m.a.createElement("br",null),m.a.createElement("div",{style:{margin:"10px 30px"}},m.a.createElement("table",null,m.a.createElement("tbody",null,m.a.createElement("tr",null,m.a.createElement("td",null," ",m.a.createElement("b",null," File Extension ")," "),m.a.createElement("td",null," ",m.a.createElement("b",null,"IGV.js Track Type")," ")),Object.entries(gt).filter((function(e){return!Object(D.a)(e,1)[0].endsWith(".bed")})).map((function(e,t){var n=Object(D.a)(e,2),a=n[0],r=n[1];return m.a.createElement("tr",{key:"".concat(a," ").concat(r," ").concat(t)},m.a.createElement("td",null,a),m.a.createElement("td",null,r))}))))))}),m.a.createElement("br",null)),m.a.createElement(_e.a,null,m.a.createElement(Re.a,{style:{minHeight:"300px"},value:o,onChange:function(e){a.setState({textAreaValue:e.target.value})},placeholder:"Enter file path(s)"})),m.a.createElement("br",null),m.a.createElement("b",null,m.a.createElement("i",null,"NOTE:"))," These paths will be saved across page refreshes in this browser, but will not be recorded in the page url like other settings. Sharing or bookmarking this page won't include these paths.",c&&m.a.createElement(pt.a,{color:"yellow"},c),i&&m.a.createElement(pt.a,{color:"red"},i))})),a.state=a.getInitialState(),a}return Object(w.a)(n)}(m.a.PureComponent),yt=Object(g.b)(null,(function(e){return{addRows:function(t,n){e({type:"ADD_ROWS",categoryName:t,rows:n})}}}))((function(e){var t=e.category,n=e.addRows;return m.a.createElement("div",null,m.a.createElement(bt,{title:"Add ".concat(t.categoryName),categoryName:t.categoryName,addRows:function(e){return n(t.categoryName,e)},trigger:m.a.createElement(dt,null,"Add ",0===t.rows.length?t.categoryName:null," Rows")}))})),vt=n(62),Et=n.n(vt),wt=n(566),Ot=y.a.div(Ke||(Ke=Object(b.a)(["\n  margin: 5px 0px;\n"]))),jt=Object(y.a)(wt.a)(Ye||(Ye=Object(b.a)(["\n  margin: 13px 0px; \n  .prompt {\n    border-radius: 2px !important;\n    width: 155px;\n  }\n  \n  input {\n      max-width: none !important;\n      padding: 5px !important;\n  }\n  \n  .input {\n    -webkit-box-shadow: 0px 0px 1px 0px rgba(0,0,0) !important;\n    -moz-box-shadow: 0px 0px 1px 0px rgba(0,0,0) !important;\n    box-shadow: 0px 0px 1px 0px rgba(0,0,0) !important;\n  }\n  \n  .results {\n      min-width: max-content;\n  }\n\n  .red-text {\n    .title {\n      color: #CC0000 !important;\n      font-weight: 500 !important;\n     }\n  }\n"]))),St={isLoading:!1,results:[],value:""},xt=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(){var e;return Object(E.a)(this,n),e=t.call(this),Object(B.a)(Object(M.a)(e),"handleResultSelect",(function(t,n){var a=n.result;e.setState({value:""});var r=a.id.split("!!"),o=r[0],c=r[1],i=r[2],l=r[3];l?(("ADD"===o||e.getSelectedSamplesForRow(c,i).length<=1)&&e.props.updateSelectedRowNames(o,c,[i]),e.props.updateSelectedSamples(o,c,Object(B.a)({},i,[l]))):e.props.updateSelectedRowNames(o,c,[i])})),Object(B.a)(Object(M.a)(e),"getSelectedRowNames",(function(t){return e.props.selectedRowNamesByCategoryName[t]||[]})),Object(B.a)(Object(M.a)(e),"isRowSelected",(function(t,n){return e.getSelectedRowNames(t).includes(n)})),Object(B.a)(Object(M.a)(e),"getSelectedSamplesByRowName",(function(t){return(e.props.selectedSamplesByCategoryNameAndRowName[t]||{}).selectedSamples||{}})),Object(B.a)(Object(M.a)(e),"getSelectedSamplesForRow",(function(t,n){return e.getSelectedSamplesByRowName(t)[n]||[]})),Object(B.a)(Object(M.a)(e),"isSampleSelected",(function(t,n,a){return e.getSelectedSamplesForRow(t,n).includes(a)})),Object(B.a)(Object(M.a)(e),"addRowsToHide",(function(t,n){return Object.keys(e.props.selectedRowNamesByCategoryName).forEach((function(a){n>=12||e.props.selectedRowNamesByCategoryName[a].forEach((function(e){if(!(n>=12)){t[a]=t[a]||[];var r={action:"REMOVE",categoryName:a,rowName:e};Et.a.some(t[a],r)||(t[a].push(r),n+=1)}}))})),n})),Object(B.a)(Object(M.a)(e),"addSamplesToHide",(function(t,n){return Object.keys(e.props.selectedSamplesByCategoryNameAndRowName).forEach((function(a){n>=12||Object.keys(e.getSelectedSamplesByRowName(a)).forEach((function(r){n>=12||!e.isRowSelected(a,r)||e.getSelectedSamplesForRow(a,r).forEach((function(e){if(!(n>=12)){t[a]=t[a]||[];var o={action:"REMOVE",categoryName:a,rowName:r,sample:e};Et.a.some(t[a],o)||(t[a].push(o),n+=1)}}))}))})),n})),Object(B.a)(Object(M.a)(e),"addMatchingSamplesFromRow",(function(t,n,a,r,o){if(!n.data)return o;var c=n.data.filter((function(e){return e.samples&&e.samples.length>0}));return c.length>1&&console.warn("Found row with multiple data items each of which has a samples array. This may behave unexpectedly if there are duplicate samples"),c.forEach((function(c){(c.samples||[]).forEach((function(c){if(!(o>=12)&&a.test(c)){r[t]=r[t]||[];var i={action:e.isRowSelected(t,n.name)&&e.isSampleSelected(t,n.name,c)?"REMOVE":"ADD",categoryName:t,rowName:n.name,sample:c};Et.a.some(r[t],i)||(r[t].push(i),o+=1)}}))})),o})),Object(B.a)(Object(M.a)(e),"addMatchingRowsAndSamples",(function(t,n,a){var r={};return e.props.rowsInCategories.forEach((function(o){if(!(a>=12)){var c=o.categoryName;o.rows.forEach((function(o){if(!(a>=12)){if(t.test(o.name)){r[c]=r[c]||[],r[c].push(o),n[c]=n[c]||[];var i={action:e.isRowSelected(c,o.name)?"REMOVE":"ADD",categoryName:c,rowName:o.name};Et.a.some(n[c],i)||(n[c].push(i),a+=1)}a=e.addMatchingSamplesFromRow(c,o,t,n,a)}}))}})),Object.entries(r).forEach((function(t){var r=Object(D.a)(t,2),o=r[0],c=r[1];a>=12||(n[o]=n[o]||[],c.forEach((function(t){a>=12||(a=e.addMatchingSamplesFromRow(o,t,/.*/,n,a))})))})),a})),Object(B.a)(Object(M.a)(e),"handleSearchChange",(function(t,n){var a=n.value;e.setState({isLoading:!0,value:a}),setTimeout((function(){if(e.state.value.length<1)return e.setState(St);var t=new RegExp(Et.a.escapeRegExp(e.state.value),"i"),n={},a=0;t.test("Hide")&&(a=e.addRowsToHide(n,a)),(t.test("Hide")||t.test("Hide sample"))&&(a=e.addSamplesToHide(n,a)),e.addMatchingRowsAndSamples(t,n,a);var r=e.props.rowsInCategories.length>1,o=r?{}:[];return Object.keys(n).forEach((function(e){r&&(o[e]={name:e,results:[]});var t=r?o[e].results:o;n[e].forEach((function(n){if(n.sample){var a="ADD"===n.action?"Show sample":"Hide sample";t.push({id:"".concat(n.action,"!!").concat(e,"!!").concat(n.rowName,"!!").concat(n.sample),title:"".concat(a," ").concat(n.rowName," > ").concat(n.sample),className:"ADD"!==n.action?"red-text":null})}else{var r="ADD"===n.action?"Show":"Hide";t.push({id:"".concat(n.action,"!!").concat(e,"!!").concat(n.rowName),title:"".concat(r," ").concat(n.rowName),className:"ADD"!==n.action?"red-text":null})}}))})),e.setState({isLoading:!1,results:o})}),1)})),Object(B.a)(Object(M.a)(e),"render",(function(){var t=e.state,n=t.isLoading,a=t.value,r=t.results;return m.a.createElement(Ot,null,m.a.createElement(_,null,"Select Data"),m.a.createElement(jt,{category:e.props.rowsInCategories.length>1,loading:n,onResultSelect:e.handleResultSelect,onFocus:e.handleSearchChange,onSearchChange:e.handleSearchChange,placeholder:"Select data",results:r,value:a}))})),e.state=St,e}return Object(w.a)(n)}(m.a.Component),kt=Object(g.b)((function(e){return{rowsInCategories:se(e),selectedRowNamesByCategoryName:ue(e),selectedSamplesByCategoryNameAndRowName:pe(e)}}),(function(e){return{updateSelectedRowNames:function(t,n,a){e({type:"".concat(t,"_SELECTED_ROW_NAMES"),categoryName:n,selectedRowNames:a})},updateSelectedSamples:function(t,n,a){e({type:"".concat(t,"_SELECTED_SAMPLES"),categoryName:n,selectedSamplesByRowName:a})}}}))(xt),Tt=y.a.div(Xe||(Xe=Object(b.a)(["\n  display: inline-block;\n  margin: 0px 0px 0px 15px;\n  color: #999;\n  white-space: nowrap;\n"]))),Lt=y.a.div.attrs({name:"stop"})(Qe||(Qe=Object(b.a)(["\n  color: ",";\n  background-color: ",";\n  border: 3px solid ",";\n  display: inline-block;\n  width: 6px;\n  border-radius: 1px;\n  height: 10px;\n  cursor: pointer;\n"])),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.color})),Nt={junctions:"#B0B0EC",coverage:"#B5D29A",alignment:"#5DB6E9",vcf:"#E6A01B",gcnv_bed:"#AA3333",default:"#000000"},_t={coverage:"Coverage",junctions:"Splice Junctions",vcf:"Variants (VCF)",gcnv_bed:"gCNV",alignment:"Reads (BAM)",bed:"Annotations (BED)",gff3:"Annotations (GFF3)",gtf:"Annotations (GTF)",genePred:"Annotations (genePred)",bigBed:"Annotations (bigBed)"},Rt=y.a.a($e||($e=Object(b.a)(["\n  cursor: pointer;\n  padding: 10px 10px 10px 0px;\n  display: inline-block;\n"]))),Ct=y.a.span(Ze||(Ze=Object(b.a)(["\n  padding-left: 5px;\n  white-space: nowrap;\n"]))),At=y.a.div(et||(et=Object(b.a)(["\n  white-space: nowrap;\n"]))),It=function(e){var t=e.dataTypesUsersCanToggle,n=e.enabledDataTypes,a=e.updateDataTypesToShow;if(t.length<2)return null;var r=Object(S.a)(t).map((function(e,t){var r=_t[e]||e.charAt(0).toUpperCase()+e.slice(1);return m.a.createElement(A,{key:"".concat(e," ").concat(t)},m.a.createElement(x.a,{label:"".concat(r.toLocaleString()),checked:n.includes(e),onChange:function(t,n){return a(n.checked?"ADD":"REMOVE",[e])}}),m.a.createElement(Ct,null,m.a.createElement(k.a,{content:"This stripe marks rows that have ".concat(r.toLowerCase()," data. Use the checkbox on the left to show or hide ").concat(r.toLowerCase()," tracks for all rows selected below."),position:"right center",trigger:m.a.createElement(Lt,{color:Nt[e]||Nt.default})})))}));return m.a.createElement("div",null,m.a.createElement(_,null,"Show Track Types"),r)},Pt=function(e){var t=e.row;return m.a.createElement(k.a,{flowing:!0,content:m.a.createElement("table",null,m.a.createElement("tbody",null,(t.data||[]).map((function(e,t){return m.a.createElement("tr",{key:"".concat(e.url," ").concat(e.type," ").concat(t)},m.a.createElement("td",{style:{paddingRight:"10px"}},m.a.createElement("b",null,e.type&&(_t[e.type]||e.type.toUpperCase()),":")),m.a.createElement("td",null,m.a.createElement(At,null,e.url)),m.a.createElement("td",{style:{color:"gray",whiteSpace:"nowrap",paddingLeft:"15px"}},e.samples?"(".concat(e.samples.length," samples)"):null))})),m.a.createElement("tr",null,m.a.createElement("td",{colSpan:2},m.a.createElement("div",{style:{fontSize:"small",color:"grey",marginTop:"10px"}},"(click to copy paths)"))))),position:"right center",trigger:m.a.createElement(Ct,{onClick:function(){var e=(t.data||[]).map((function(e){return e.url})).join("\n");navigator.clipboard.writeText(e)}},(t.data||[]).map((function(e,t){return m.a.createElement(Lt,{key:"".concat(e.url," ").concat(e.type," ").concat(t),color:Nt[e.type]||Nt.default})}))),style:{marginLeft:"2px"}})},Bt=function(e){var t=e.category,n=e.updateSelectedRowNames;return m.a.createElement("div",null,m.a.createElement(_,null,t.categoryName),t.rows.length>=12&&m.a.createElement(Tt,null,"(N=".concat(t.rows.length,") ")),t.rows.length>0&&m.a.createElement("div",null,m.a.createElement(Rt,{onClick:function(e){e.preventDefault(),n("SET",t.categoryName,[])}},"Uncheck All")))},Dt=function(e){var t=e.rowsInCategories,n=e.selectedRowNamesByCategoryName,a=e.updateSelectedRowNames;return t.map((function(e,r){return m.a.createElement("div",{key:"".concat(e.categoryName," ").concat(r)},m.a.createElement(Bt,{category:e,updateSelectedRowNames:a}),e.rows.map((function(t,r){var o=n[e.categoryName]||[];return m.a.createElement(Ut,{key:"".concat(t.name," ").concat(r),row:t,categoryName:e.categoryName,selectedRowNames:o,updateSelectedRowNames:a})})),r===t.length-1?m.a.createElement(yt,{category:e}):null)}))},Ut=function(e){var t=e.row,n=e.categoryName,a=e.selectedRowNames,r=e.updateSelectedRowNames;return m.a.createElement(At,null,m.a.createElement(x.a,{label:t.name,checked:a.includes(t.name),"data-row":t.name,onChange:function(e,t){return r(t.checked?"ADD":"REMOVE",n,[t["data-row"]])}}),m.a.createElement(Mt,{row:t}),m.a.createElement(Pt,{row:t}))},Mt=function(e){var t=e.row;return t.description?m.a.createElement(R,{flowing:!0,content:t.description&&m.a.createElement("div",{dangerouslySetInnerHTML:{__html:N.a.sanitize(t.description)}}),position:"right center",trigger:m.a.createElement(T.a,{style:{marginLeft:"10px"},name:"question circle outline"})}):null},Gt=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var e=this.props,t=e.locusList,n=e.rowsInCategories,a=e.dataTypesUsersCanToggle,r=e.enabledDataTypes,o=e.selectedRowNamesByCategoryName,c=e.setLocus,i=e.setLocusList,l=e.updateDataTypesToShow,s=e.updateSelectedRowNames;return m.a.createElement("div",null,m.a.createElement(ut,{name:"Left Side Bar",locusList:t,setLocus:c,setLocusList:i}),m.a.createElement(It,{dataTypesUsersCanToggle:a,enabledDataTypes:r,updateDataTypesToShow:l}),m.a.createElement(kt,null),m.a.createElement(I,null,m.a.createElement(Ne,null)),m.a.createElement(Dt,{rowsInCategories:n,selectedRowNamesByCategoryName:o,updateSelectedRowNames:s}))}}]),n}(m.a.PureComponent),Vt=Object(g.b)((function(e){return{locusList:ie(e),rowsInCategories:se(e),dataTypesUsersCanToggle:Ee(e),enabledDataTypes:we(e),selectedRowNamesByCategoryName:ue(e)}}),(function(e){return{setLocus:function(t){e({type:"UPDATE_LOCUS",newValue:t})},setLocusList:function(t){e({type:"SET_LEFT_SIDE_BAR_LOCUS_LIST",values:t})},updateDataTypesToShow:function(t,n){e({type:"".concat(t,"_DATA_TYPES_TO_SHOW"),values:n})},updateSelectedRowNames:function(t,n,a){e({type:"".concat(t,"_SELECTED_ROW_NAMES"),categoryName:n,selectedRowNames:a})},updateSjOptions:function(t){e({type:"UPDATE_SJ_OPTIONS",updates:t})},updateVcfOptions:function(t){e({type:"UPDATE_VCF_OPTIONS",updates:t})},updateBamOptions:function(t){e({type:"UPDATE_BAM_OPTIONS",updates:t})}}}))(Gt),Wt={},Jt=Object(g.b)((function(e){return{bamOptions:he(e)}}),(function(e){return{updateBamOptions:function(t){e({type:"UPDATE_BAM_OPTIONS",updates:t})}}}))((function(e){var t=e.bamOptions,n=e.updateBamOptions;return m.a.createElement("div",null,m.a.createElement(_,null,"BAM Track ",m.a.createElement("br",null),"Options"),m.a.createElement("br",null),m.a.createElement(A,null,m.a.createElement(x.a,{label:"View as pairs",checked:t.viewAsPairs,onChange:function(e,t){return n({viewAsPairs:t.checked})}})),m.a.createElement(A,null,m.a.createElement(x.a,{label:"Show soft-clips",checked:t.showSoftClips,onChange:function(e,t){return n({showSoftClips:t.checked})}})),m.a.createElement(A,null,"Color by:",m.a.createElement("select",{value:t.colorBy,onChange:function(e){return n({colorBy:e.target.value})}},m.a.createElement("option",{value:"strand"},"Strand"),m.a.createElement("option",{value:"firstOfPairStrand"},"First-of-pair strand"),m.a.createElement("option",{value:"pairOrientation"},"Pair orientation"),m.a.createElement("option",{value:"fragmentLength"},"Insert size (TLEN)"),m.a.createElement("option",{value:"none"},"None"))),m.a.createElement(I,null,"Track height: ",m.a.createElement(P,{key:"track-height-".concat(t.trackHeight),type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return function(e,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode?n(Object(q.a)(Object(q.a)({},t),Wt)):Wt[a]=r}(e,"trackHeight",parseInt(e.target.value,10))}})," px"),m.a.createElement(I,null,m.a.createElement(U.a,{compact:!0,size:"small",onClick:function(){n(Object(q.a)(Object(q.a)({},t),Wt))}},"Apply")))})),Ft=Object(g.b)((function(e){return{vcfOptions:me(e)}}),(function(e){return{updateVcfOptions:function(t){e({type:"UPDATE_VCF_OPTIONS",updates:t})}}}))((function(e){var t=e.vcfOptions,n=e.updateVcfOptions;return m.a.createElement("div",null,m.a.createElement(_,null,"VCF Track ",m.a.createElement("br",null),"Options"),m.a.createElement("br",null),m.a.createElement(A,null,"Display mode: \xa0",m.a.createElement("select",{value:t.displayMode,onChange:function(e){return n({displayMode:e.target.value})}},m.a.createElement("option",{value:"COLLAPSED"},"Collapse"),m.a.createElement("option",{value:"SQUISHED"},"Squish"),m.a.createElement("option",{value:"EXPANDED"},"Expand"))))})),Ht=n(559),qt=y.a.div(tt||(tt=Object(b.a)(["\n  margin-top: 5px;\n"]))),zt=Object(y.a)(Ht.a)(nt||(nt=Object(b.a)(["\n  label {\n    margin-left: 10px;\n    margin-bottom: 10px;\n    padding-left: 1.4em !important;\n  }\n"]))),Kt=function(e){var t=e.sjOptions,n=e.handleTextInput;return"strand"===t.colorBy?m.a.createElement("div",null,m.a.createElement(C,{name:"stop",style:{color:"#b0b0ec"}})," plus",m.a.createElement(C,{name:"stop",style:{color:"#ecb0b0",marginLeft:"10px"}})," minus"):"motif"===t.colorBy?m.a.createElement("div",null,m.a.createElement(C,{name:"stop",style:{color:"rgb(27,158,119)"}})," GT/AG ",m.a.createElement("br",null),m.a.createElement(C,{name:"stop",style:{color:"rgb(217,95,2)"}})," CT/AC ",m.a.createElement("br",null),m.a.createElement(C,{name:"stop",style:{color:"rgb(117,112,179)"}})," GC/AG ",m.a.createElement("br",null),m.a.createElement(C,{name:"stop",style:{color:"rgb(231,41,138)"}})," CT/GC ",m.a.createElement("br",null),m.a.createElement(C,{name:"stop",style:{color:"rgb(102,166,30)"}})," AT/AC ",m.a.createElement("br",null),m.a.createElement(C,{name:"stop",style:{color:"rgb(230,171,2)"}})," GT/AT ",m.a.createElement("br",null),m.a.createElement(C,{name:"stop",style:{color:"rgb(166,118,29)"}})," non-canonical ",m.a.createElement("br",null)):"numUniqueReads"===t.colorBy||"numReads"===t.colorBy?m.a.createElement("div",null,"# reads",m.a.createElement(C,{name:"stop",style:{color:"#AAAAAA",marginLeft:"10px"}}),"\xa0\u2264 \xa0",m.a.createElement(P,{type:"text",key:"num-reads-".concat(t.colorByNumReadsThreshold),defaultValue:void 0!==t.colorByNumReadsThreshold?t.colorByNumReadsThreshold:5,onKeyUp:function(e){return n(e,"colorByNumReadsThreshold")},style:{width:"35px"}}),"\xa0 < \xa0",m.a.createElement(C,{name:"stop",style:{color:"blue"}})):"isAnnotatedJunction"===t.colorBy?m.a.createElement("div",null,m.a.createElement(C,{name:"stop",style:{color:"#b0b0ec"}})," known junction ",m.a.createElement("br",null),m.a.createElement(C,{name:"stop",style:{color:"orange"}})," novel junction"):m.a.createElement("div",null)},Yt={},Xt=Object(g.b)((function(e){return{sjOptions:de(e)}}),(function(e){return{updateSjOptions:function(t){e({type:"UPDATE_SJ_OPTIONS",updates:t})}}}))((function(e){var t=e.sjOptions,n=e.updateSjOptions,a=function(e,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode?n(Object(q.a)(Object(q.a)({},t),Yt)):Yt[a]=r};return m.a.createElement("div",null,m.a.createElement(_,null,"Junctions Track Filters"),m.a.createElement("br",null),m.a.createElement(qt,null,m.a.createElement(A,null,"Show: ",m.a.createElement("br",null),m.a.createElement(zt,{label:"only local junctions",name:"minJunctionEndsVisibleButton",checked:2===t.minJunctionEndsVisible,onChange:function(e,t){return t.checked&&n({minJunctionEndsVisible:2})}}),m.a.createElement(R,{content:"Only show splice junctions that start and end within the current view.",position:"left center",trigger:m.a.createElement(T.a,{style:{marginLeft:"8px"},name:"question circle outline"})}),m.a.createElement("br",null),m.a.createElement(zt,{label:"semi-local junctions",name:"minJunctionEndsVisibleButton",checked:1===t.minJunctionEndsVisible,onChange:function(e,t){return t.checked&&n({minJunctionEndsVisible:1})}}),m.a.createElement(R,{content:"Hide splice junctions that span the current view (start to the left of the current view and end to the right of it).",position:"left center",trigger:m.a.createElement(T.a,{style:{marginLeft:"8px"},name:"question circle outline"})}),m.a.createElement("br",null),m.a.createElement(zt,{label:"all junctions",name:"minJunctionEndsVisibleButton",checked:0===t.minJunctionEndsVisible,onChange:function(e,t){return t.checked&&n({minJunctionEndsVisible:0})}}),m.a.createElement(R,{content:"Show all splice junctions",position:"left center",trigger:m.a.createElement(T.a,{style:{marginLeft:"8px"},name:"question circle outline"})}))),m.a.createElement(qt,null,m.a.createElement(A,null,"Show Strands:",m.a.createElement(zt,{label:"both",name:"strandButton",checked:!t.showOnlyPlusStrand&&!t.showOnlyMinusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!1,showOnlyMinusStrand:!1})}}),m.a.createElement(zt,{label:"plus",name:"strandButton",checked:t.showOnlyPlusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!0,showOnlyMinusStrand:!1})}}),m.a.createElement(zt,{label:"minus",name:"strandButton",checked:t.showOnlyMinusStrand,onChange:function(e,t){return t.checked&&n({showOnlyPlusStrand:!1,showOnlyMinusStrand:!0})}}))),m.a.createElement(qt,null,m.a.createElement(A,null,m.a.createElement(x.a,{label:"Show known junctions",checked:!t.hideAnnotated,onChange:function(e,t){return n({hideAnnotated:!t.checked})}})),m.a.createElement(A,null,m.a.createElement(x.a,{label:"Show novel junctions",checked:!t.hideUnannotated,onChange:function(e,t){return n({hideUnannotated:!t.checked})}}))),m.a.createElement(qt,null,m.a.createElement("div",null,m.a.createElement(A,null,"Uniquely-mapped reads:"),"at least ",m.a.createElement(P,{key:"uniquely-mapped-reads-".concat(t.minUniquelyMappedReads),type:"text",defaultValue:t.minUniquelyMappedReads,onKeyUp:function(e){return a(e,"minUniquelyMappedReads",parseInt(e.target.value,10))}})),m.a.createElement("div",null,m.a.createElement(A,null,"Total reads:"),"at least ",m.a.createElement(P,{key:"total-reads-".concat(t.minTotalReads),type:"text",defaultValue:t.minTotalReads,onKeyUp:function(e){return a(e,"minTotalReads",parseInt(e.target.value,10))}})),m.a.createElement("div",null,m.a.createElement(A,null,"Fraction multi-mapped:",m.a.createElement(R,{content:"Allows filtering of junctions where most reads that span the junction are multi-mapped reads. For example, setting this to 0.79 will hide junctions where 8 out of 10 (or more) reads that span the junction are not uniquely mapped reads.",position:"left center",trigger:m.a.createElement(T.a,{style:{marginLeft:"8px"},name:"question circle outline"})})),"at most ",m.a.createElement(P,{key:"fraction-multi-mapped-".concat(t.maxFractionMultiMappedReads),type:"text",defaultValue:t.maxFractionMultiMappedReads,onKeyUp:function(e){return a(e,"maxFractionMultiMappedReads",parseInt(e.target.value,10))}}))),m.a.createElement(qt,null,m.a.createElement("div",null,m.a.createElement(A,null,"Splice overhang base-pairs:"),"at least ",m.a.createElement(P,{key:"spliced-alignment-overhang-".concat(t.minSplicedAlignmentOverhang),type:"text",defaultValue:t.minSplicedAlignmentOverhang,onKeyUp:function(e){return a(e,"minSplicedAlignmentOverhang",parseInt(e.target.value,10))}})),m.a.createElement("div",null,m.a.createElement(A,null,"# samples with junction:",m.a.createElement(R,{content:"Filter junctions based on how many samples in the batch have this junction. A sample is counted as having the junction as long as the junction is supported by at least one read.",position:"left center",trigger:m.a.createElement(T.a,{style:{marginLeft:"8px"},name:"question circle outline"})})),m.a.createElement(P,{key:"samples-with-junction-more-than-".concat(t.minSamplesWithThisJunction),type:"text",defaultValue:t.minSamplesWithThisJunction,onKeyUp:function(e){return a(e,"minSamplesWithThisJunction",parseInt(e.target.value,10))}})," \xa0\u2264 n \u2264 ",m.a.createElement(P,{key:"samples-with-junction-less-than-".concat(t.maxSamplesWithThisJunction),type:"text",defaultValue:t.maxSamplesWithThisJunction,onKeyUp:function(e){return a(e,"maxSamplesWithThisJunction",parseInt(e.target.value,10))}})),m.a.createElement("div",null,m.a.createElement(A,null,"% samples with junction:",m.a.createElement(R,{content:"Filter junctions based on what percentage of samples in the batch have this junction. A sample is counted as having the junction as long as the junction is supported by at least one read.",position:"left center",trigger:m.a.createElement(T.a,{style:{marginLeft:"8px"},name:"question circle outline"})})),m.a.createElement(P,{key:"percent-samples-with-junction-more-than-".concat(t.minPercentSamplesWithThisJunction),type:"text",defaultValue:t.minPercentSamplesWithThisJunction,onKeyUp:function(e){return a(e,"minPercentSamplesWithThisJunction",parseInt(e.target.value,10))}})," \xa0\u2264 % \u2264 ",m.a.createElement(P,{key:"percent-samples-with-junction-less-than-".concat(t.maxPercentSamplesWithThisJunction),type:"text",defaultValue:t.maxPercentSamplesWithThisJunction,onKeyUp:function(e){return a(e,"maxPercentSamplesWithThisJunction",parseInt(e.target.value,10))}}))),m.a.createElement(qt,null,m.a.createElement("div",null,m.a.createElement(A,null,"Donor/Acceptor Motifs:"),H.map((function(e){return m.a.createElement(A,{key:e},m.a.createElement(x.a,{label:"Show ".concat(e),checked:!t["hideMotif".concat(e)],onChange:function(t,a){return n(Object(B.a)({},"hideMotif".concat(e),!a.checked))}}))}))),m.a.createElement(I,null,"Track height: ",m.a.createElement(P,{key:"track-height-".concat(t.trackHeight),type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return a(e,"trackHeight",parseInt(e.target.value,10))}})," px"),m.a.createElement(I,null,m.a.createElement(U.a,{compact:!0,size:"small",onClick:function(){n(Object(q.a)(Object(q.a)({},t),Yt))}},"Apply"))),m.a.createElement(_,null,"Junctions Track ",m.a.createElement("br",null),"Options"),m.a.createElement("br",null),m.a.createElement(qt,null,m.a.createElement(A,null,"Color by:"),m.a.createElement(A,null,m.a.createElement("select",{value:t.colorBy,onChange:function(e){return n({colorBy:e.target.value})}},m.a.createElement("option",{value:"strand"},"strand"),m.a.createElement("option",{value:"motif"},"donor/acceptor motif"),m.a.createElement("option",{value:"numUniqueReads"},"# uniquely-mapped reads"),m.a.createElement("option",{value:"numReads"},"# total reads"),m.a.createElement("option",{value:"isAnnotatedJunction"},"is known junction")),m.a.createElement(Kt,{sjOptions:t,handleTextInput:a}))),m.a.createElement(qt,null,m.a.createElement(A,null,"Junction label #1:"),m.a.createElement(A,null,m.a.createElement(zt,{label:"# uniquely-mapped",name:"junctionLabelButton",checked:"uniqueReadCount"===t.labelWith,onChange:function(e,t){return t.checked&&n({labelWith:"uniqueReadCount"})}}),m.a.createElement(zt,{label:"# total reads",name:"junctionLabelButton",checked:"totalReadCount"===t.labelWith,onChange:function(e,t){return t.checked&&n({labelWith:"totalReadCount"})}}),m.a.createElement(zt,{label:"# samples with junction",name:"junctionLabelButton",checked:"numSamplesWithThisJunction"===t.labelWith,onChange:function(e,t){return t.checked&&n({labelWith:"numSamplesWithThisJunction"})}}),m.a.createElement(zt,{label:"% samples with junction",name:"junctionLabelButton",checked:"percentSamplesWithThisJunction"===t.labelWith,onChange:function(e,t){return t.checked&&n({labelWith:"percentSamplesWithThisJunction"})}}),m.a.createElement(zt,{label:"motif",name:"junctionLabelButton",checked:"motif"===t.labelWith,onChange:function(e,t){return t.checked&&n({labelWith:"motif"})}}))),m.a.createElement(qt,null,m.a.createElement(A,null,"Junction label #2:"),m.a.createElement(A,null,m.a.createElement(zt,{label:"none",name:"junctionLabel2Button",checked:!t.labelWithInParen,onChange:function(e,t){return t.checked&&n({labelWithInParen:null})}}),m.a.createElement(zt,{label:"# uniquely-mapped",name:"junctionLabel2Button",checked:"uniqueReadCount"===t.labelWithInParen,onChange:function(e,t){return t.checked&&n({labelWithInParen:"uniqueReadCount"})}}),m.a.createElement(zt,{label:"# total reads",name:"junctionLabel2Button",checked:"totalReadCount"===t.labelWithInParen,onChange:function(e,t){return t.checked&&n({labelWithInParen:"totalReadCount"})}}),m.a.createElement(zt,{label:"# multi-mapped",name:"junctionLabel2Button",checked:"multiMappedReadCount"===t.labelWithInParen,onChange:function(e,t){return t.checked&&n({labelWithInParen:"multiMappedReadCount"})}}),m.a.createElement(zt,{label:"# samples with junction",name:"junctionLabel2Button",checked:"numSamplesWithThisJunction"===t.labelWithInParen,onChange:function(e,t){return t.checked&&n({labelWithInParen:"numSamplesWithThisJunction"})}}),m.a.createElement(zt,{label:"% samples with junction",name:"junctionLabel2Button",checked:"percentSamplesWithThisJunction"===t.labelWithInParen,onChange:function(e,t){return t.checked&&n({labelWithInParen:"percentSamplesWithThisJunction"})}}),m.a.createElement(zt,{label:"motif",name:"junctionLabel2Button",checked:"motif"===t.labelWithInParen,onChange:function(e,t){return t.checked&&n({labelWithInParen:"motif"})}}))),m.a.createElement(qt,null,m.a.createElement(A,null,"Junction thickness:"),m.a.createElement(A,null,m.a.createElement("select",{value:t.thicknessBasedOn,onChange:function(e){return n({thicknessBasedOn:e.target.value})}},m.a.createElement("option",{value:"numUniqueReads"},"# uniquely-mapped reads"),m.a.createElement("option",{value:"numReads"},"# total reads"),m.a.createElement("option",{value:"isAnnotatedJunction"},"is known junction"),m.a.createElement("option",{value:"numSamplesWithThisJunction"},"# samples with this junction")))),m.a.createElement(qt,null,m.a.createElement(A,null,"Junction bounce height:"),m.a.createElement(A,null,m.a.createElement("select",{value:t.bounceHeightBasedOn,onChange:function(e){return n({bounceHeightBasedOn:e.target.value})}},m.a.createElement("option",{value:"random"},"random"),m.a.createElement("option",{value:"distance"},"distance"),m.a.createElement("option",{value:"thickness"},"thickness")))))})),Qt={},$t=Object(g.b)((function(e){return{gcnvOptions:fe(e)}}),(function(e){return{updateGcnvOptions:function(t){e({type:"UPDATE_GCNV_OPTIONS",updates:t})}}}))((function(e){var t=e.gcnvOptions,n=e.updateGcnvOptions,a=function(e,a){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;13===e.keyCode?n(Object(q.a)(Object(q.a)({},t),Qt)):Qt[a]=r};return m.a.createElement("div",null,m.a.createElement(_,null,"gCNV Options"),m.a.createElement("br",null),m.a.createElement(I,null,m.a.createElement(x.a,{label:"Enable clicking background samples",checked:!t.onlyHandleClicksForHighlightedSamples,onChange:function(e,a){return n(Object(q.a)(Object(q.a)({},t),{},{onlyHandleClicksForHighlightedSamples:!a.checked}))}})),m.a.createElement(I,null,"Y-min: ",m.a.createElement(P,{key:"y-max-".concat(t.trackMin),type:"text",defaultValue:t.trackMin,onKeyUp:function(e){return a(e,"trackMin",parseInt(e.target.value,10))}})," copies"),m.a.createElement(I,null,"Y-max: ",m.a.createElement(P,{key:"y-max-".concat(t.trackMax),type:"text",defaultValue:t.trackMax,onKeyUp:function(e){return a(e,"trackMax",parseInt(e.target.value,10))}})," copies"),m.a.createElement(I,null,"Track height: ",m.a.createElement(P,{key:"track-height-".concat(t.trackHeight),type:"text",defaultValue:t.trackHeight,onKeyUp:function(e){return a(e,"trackHeight",parseInt(e.target.value,10))}})," px"),m.a.createElement(I,null,m.a.createElement(U.a,{compact:!0,size:"small",onClick:function(){n(Object(q.a)(Object(q.a)({},t),Qt))}},"Apply")))})),Zt=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var e=this.props,t=e.locusList,n=e.enabledDataTypes,a=e.setLocus,r=e.setLocusList;return m.a.createElement("div",null,m.a.createElement(ut,{name:"Right Side Bar",locusList:t,setLocus:a,setLocusList:r}),n.includes("junctions")&&m.a.createElement(Xt,null),n.includes("gcnv_bed")&&m.a.createElement($t,null),n.includes("alignment")&&m.a.createElement(Jt,null),n.includes("vcf")&&m.a.createElement(Ft,null))}}]),n}(m.a.PureComponent),en=Object(g.b)((function(e){return{locusList:ce(e),enabledDataTypes:we(e)}}),(function(e){return{setLocus:function(t){e({type:"UPDATE_LOCUS",newValue:t})},setLocusList:function(t){e({type:"SET_RIGHT_SIDE_BAR_LOCUS_LIST",values:t})}}}))(Zt),tn=y.a.a(at||(at=Object(b.a)(["\n  cursor: pointer;\n  margin-left: 20px;\n"]))),nn=function(){return m.a.createElement(it,{title:"About TGG Viewer",size:"large",modalName:"AboutModal",trigger:m.a.createElement(tn,null,"About")},"The Translational Genomics Group (TGG) Viewer is a free, open-source web app for visualizing splice junctions, copy number, and other data genome-wide using ",m.a.createElement("a",{href:"https://github.com/igvteam/igv.js",target:"_blank"},"IGV.js"),m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement("b",null,"Updates:"),m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement("i",null,"9/5/2023")," - fixed: genomic location no longer resets when a new track is added",m.a.createElement("br",null),m.a.createElement("br",null),m.a.createElement("b",null,"Main features:"),m.a.createElement("br",null),m.a.createElement("ul",null,m.a.createElement("li",null,"Supports most file formats supported by IGV.js, including: .bed, .vcf, .bam, .cram, .bigWig, as well as several custom formats for splice junctions (.junctions.bed.gz) and gCNV copy-number variants (.gcnv.bed.gz) "),m.a.createElement("li",null,"Includes custom reference tracks such as splice junctions from GTEx v8 muscle, blood, and fibroblast samples."),m.a.createElement("li",null,"Supports adding gene or locus lists to left or right side bar for quick navigation across a list of regions."),m.a.createElement("li",null,"Can load data files or reference tracks from any Google bucket to which you have read-access."),m.a.createElement("li",null,"Retrieves just the on-screen sections of the files directly from Google buckets."),m.a.createElement("li",null,"All settings, gene lists, and data paths can be exported and later restored or shared with others via a .json config file. To export all current settings, click the ",m.a.createElement(T.a,{name:"download"})," button, upload the .json file to github (or another public url), and then to restore the settings, paste the file's URL into the Initial Settings input, and Apply. "),m.a.createElement("li",null,"The page url also records page settings so that they can be bookmarked or shared, but does not include gene lists.")),m.a.createElement("a",{href:"https://github.com/broadinstitute/tgg-viewer/issues",target:"_blank"},"Issues"),"\xa0or ",m.a.createElement("a",{href:"https://github.com/broadinstitute/tgg-viewer/issues",target:"_blank"},"Feature Requests"),"\xa0can be submitted via ",m.a.createElement("a",{href:"https://github.com/broadinstitute/tgg-viewer",target:"_blank"},"GitHub"),".")},an=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isGoogleLoginRequired,n=e.user;return t?n.googleUserEmail?m.a.createElement("div",null,"Signed in to Google Buckets as ",m.a.createElement("b",null,n.googleUserEmail)):m.a.createElement("div",null,"Signing in to Google Buckets..."):m.a.createElement("div",null)}}]),n}(m.a.PureComponent),rn=Object(g.b)((function(e){return{isGoogleLoginRequired:be(e),user:ge(e)}}))(an),on=Object(y.a)(v.a.Row)(rt||(rt=Object(b.a)(["\n  color: #444;\n  margin-bottom: 5px;\n"]))),cn=Object(y.a)(v.a.Column).attrs({width:6})(ot||(ot=Object(b.a)(["\n  text-align: left;\n  padding-left: 75px !important;\n"]))),ln=Object(y.a)(v.a.Column).attrs({width:10})(ct||(ct=Object(b.a)(["\n  text-align: right;\n  padding-right: 75px !important;\n"]))),sn=function(){return m.a.createElement(v.a,null,m.a.createElement(on,null,m.a.createElement(cn,null,m.a.createElement("b",null,"TGG Viewer ")," version ",m.a.createElement("i",null," 9/5/2023"),m.a.createElement(nn,null)),m.a.createElement(ln,null,m.a.createElement(rn,null))))},un=n(316),pn=n(317),dn=function(e,t){var n;return function(){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];n&&clearTimeout(n),n=setTimeout((function(){t.apply(void 0,r),n=null}),e)}};function mn(){mn=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,a){var o=t&&t.prototype instanceof g?t:g,c=Object.create(o.prototype),i=new N(a||[]);return r(c,"_invoke",{value:x(e,n,i)}),c}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",m="executing",h="completed",f={};function g(){}function b(){}function y(){}var v={};s(v,c,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(_([])));w&&w!==n&&a.call(w,c)&&(v=w);var O=y.prototype=g.prototype=Object.create(v);function j(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(r,o,c,i){var l=p(e[r],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==typeof u&&a.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(u).then((function(e){s.value=e,c(s)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}var o;r(this,"_invoke",{value:function(e,a){function r(){return new t((function(t,r){n(e,a,t,r)}))}return o=o?o.then(r,r):r()}})}function x(t,n,a){var r=d;return function(o,c){if(r===m)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw c;return{value:e,done:!0}}for(a.method=o,a.arg=c;;){var i=a.delegate;if(i){var l=k(i,a);if(l){if(l===f)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===d)throw r=h,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=m;var s=p(t,n,a);if("normal"===s.type){if(r=a.done?h:"suspendedYield",s.arg===f)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(r=h,a.method="throw",a.arg=s.arg)}}}function k(t,n){var a=n.method,r=t.iterator[a];if(r===e)return n.delegate=null,"throw"===a&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),f;var o=p(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,f;var c=o.arg;return c?c.done?(n[t.resultName]=c.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):c:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(a.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return b.prototype=y,r(O,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:b,configurable:!0}),b.displayName=s(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},j(S.prototype),s(S.prototype,i,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,a,r,o){void 0===o&&(o=Promise);var c=new S(u(e,n,a,r),o);return t.isGeneratorFunction(n)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},j(O),s(O,l,"Generator"),s(O,c,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=_,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(a,r){return i.type="throw",i.arg=t,n.next=a,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return r("end");if(c.tryLoc<=this.prev){var l=a.call(c,"catchLoc"),s=a.call(c,"finallyLoc");if(l&&s){if(this.prev<c.catchLoc)return r(c.catchLoc,!0);if(this.prev<c.finallyLoc)return r(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return r(c.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return r(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;L(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,a){return this.delegate={iterator:_(t),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=e),f}},t}var hn={showIdeogram:!0,showNavigation:!0,showRuler:!0,showCenterGuide:!0,showCursorTrackingGuide:!0,showCommandBar:!0};function fn(e,t){var n=this;t||(t=this.clickedFeatures(e));var a=[];return t.forEach((function(t){if(!(t.end<e.genomicLocation||t.start>e.genomicLocation)&&"spliceJunctions"===n.config.type){if(!t.isVisible||!t.attributes)return;a.push("<hr />"),a.push({name:"<b>".concat(t.chr,":").concat(t.start,"-").concat(t.end," (").concat(t.strand," strand)</b>"),value:" "}),t.attributes.annotated_junction&&("true"===t.attributes.annotated_junction?a.push({name:"Known Junction",value:""}):a.push({name:"Novel Junction",value:""})),a.push("<hr />"),a.push({name:(t.end-t.start).toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),value:"bp length"}),t.attributes.uniquely_mapped&&a.push({name:t.attributes.uniquely_mapped,value:"uniquely mapped reads"}),t.attributes.multi_mapped&&a.push({name:t.attributes.multi_mapped,value:"multi-mapped reads"}),t.attributes.uniquely_mapped&&t.attributes.multi_mapped&&a.push({name:parseInt(t.attributes.uniquely_mapped)+parseInt(t.attributes.multi_mapped),value:"total reads"}),t.attributes.maximum_spliced_alignment_overhang&&a.push({name:t.attributes.maximum_spliced_alignment_overhang,value:"bp maximum overhang"}),t.attributes.num_samples_with_this_junction&&(a.push({name:t.attributes.num_samples_with_this_junction,value:(t.attributes.num_samples_total?"out of ".concat(t.attributes.num_samples_total," "):"")+"samples have this junction"}),t.attributes.percent_samples_with_this_junction&&a.push({name:t.attributes.percent_samples_with_this_junction.toFixed(1),value:"% of samples have this junction"})),t.attributes.info&&a.push({name:" ",value:t.attributes.info.replace("_"," ")}),Object.keys(t.attributes).filter((function(e){return!["line_width","color","left_shape","right_shape","info","annotated_junction","uniquely_mapped","multi_mapped","maximum_spliced_alignment_overhang","num_samples_with_this_junction","percent_samples_with_this_junction","num_samples_total"].includes(e)})).forEach((function(e){a.push({name:e.replace(/_/g," "),value:t.attributes[e].replace(/_/g," ")})})),a=a.map((function(e){return e.name&&e.value?{name:"<b>".concat(e.name,"</b>"),value:e.value}:e}))}})),a}var gn,bn,yn=function(e){e?"spliceJunctions"===e.type?e.popupData=fn:"merged"===e.type&&e.tracks.filter((function(e){return"spliceJunctions"===e.type})).forEach((function(e){e.popupData=fn})):console.warn("monkeyPatchPopupData: track arg is undefined")},vn=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(E.a)(this,n),a=t.call(this,e),Object(B.a)(Object(M.a)(a),"setContainerElement",(function(e){a.container=e})),Object(B.a)(Object(M.a)(a),"render",(function(){return m.a.createElement("div",null,m.a.createElement("div",{ref:a.setContainerElement}))})),Object(B.a)(Object(M.a)(a),"shouldTrackBeReloaded",(function(e,t,n){var a=t.selectedSamplesByCategoryNameAndRowName,r=t.enabledDataTypes,o=t.sjOptions,c=t.vcfOptions,i=t.bamOptions,l=t.gcnvOptions,s=["merged","wig","spliceJunctions"].includes(e.type)&&(n.enabledDataTypes.includes("junctions")!==r.includes("junctions")||n.enabledDataTypes.includes("coverage")!==r.includes("coverage")||n.sjOptions!==o),u="variant"===e.type&&n.vcfOptions!==c,p="alignment"===e.type&&n.bamOptions!==i,d="gcnv"===e.type&&n.gcnvOptions!==l,m="gcnv"===e.type&&(!Et.a.isEqual(((n.selectedSamplesByCategoryNameAndRowName[e.categoryName]||{}).selectedSamples||{})[e.rowName],((a[e.categoryName]||{}).selectedSamples||{})[e.rowName])||!Et.a.isEqual(((n.selectedSamplesByCategoryNameAndRowName[e.categoryName]||{}).sampleSettings||{})[e.rowName],((a[e.categoryName]||{}).sampleSettings||{})[e.rowName]));return s||u||p||d||m})),Object(B.a)(Object(M.a)(a),"getTrackId",(function(e){return"".concat(e.url,"|").concat(e.categoryName,"|").concat(e.rowName)})),Object(B.a)(Object(M.a)(a),"getIgvTrackView",(function(e){var t=a.getTrackId(e),n=a.browser.trackViews.filter((function(e){var n=(e.track||{}).config||{};return t===a.getTrackId(n)}));return n.length>0&&n[0]})),Object(B.a)(Object(M.a)(a),"reloadRemoveAndAddTracks",(function(e){if(a.ignoreNextTrackPropsAfterOrderChangedEvent)a.ignoreNextTrackPropsAfterOrderChangedEvent=!1;else{var t=e.tracks.reduce((function(e,t){return Object(q.a)(Object(B.a)({},"".concat(t.name,"|").concat(t.type),t),e)}),{});a.props.tracks&&a.props.tracks.forEach(function(){var n=Object(K.a)(mn().mark((function n(r){var o,c;return mn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(o=t["".concat(r.name,"|").concat(r.type)])){n.next=12;break}if(!a.shouldTrackBeReloaded(r,a.props,e)){n.next=9;break}return c=a.getIgvTrackView(r),console.log("Reloading track",r.name,o),c.track.updateConfig(o),n.next=8,c.track.postInit();case 8:c.repaintViews();case 9:delete t["".concat(r.name,"|").concat(r.type)],n.next=13;break;case 12:try{console.log("Removing track",r.name),a.ignoreNextTrackRemovedEvent=!0,a.browser.removeTrackByName(r.name)}catch(i){console.warn("Unable to remove track",r.name,i)}case 13:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),Object.values(t).forEach((function(e){try{a.getIgvTrackView(e)||(console.log("Loading new track",e.name),a.browser.loadTrack(e).then(yn))}catch(t){console.warn("Unable to add track",e.name,t)}}))}})),a.container=null,a.browser=null,a.ignoreNextLocusChangedEvent=!1,a.ignoreNextTrackRemovedEvent=!1,a.ignoreNextTrackPropsAfterOrderChangedEvent=!1,a}return Object(w.a)(n,[{key:"componentDidMount",value:function(){var e=Object(K.a)(mn().mark((function e(){var t,n,a,r,o,c,i,l,s=this;return mn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.container){e.next=2;break}return e.abrupt("return");case 2:t=this.props,n=t.genome,a=t.locus,r=t.tracks,o=t.locusChangedHandler,c=t.trackRemovedHandler,i=t.trackOrderChangedHandler,l=Object(q.a)(Object(q.a)({},hn),{},{locus:a,genome:n,tracks:r}),pn.a.createBrowser(this.container,l).then((function(e){s.browser=e,window.igvBrowser=e,e.trackViews.forEach((function(e){yn(e.track)})),o&&s.browser.on("locuschange",dn(100,(function(e){s.ignoreNextLocusChangedEvent||o(e),s.ignoreNextLocusChangedEvent=!1}))),c&&s.browser.on("trackremoved",(function(e){s.ignoreNextTrackRemovedEvent||c(e.config.categoryName,e.config.rowName),s.ignoreNextTrackRemovedEvent=!1})),i&&s.browser.on("trackorderchanged",(function(e){s.ignoreNextTrackPropsAfterOrderChangedEvent=!0,i(e)}))}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"shouldComponentUpdate",value:function(e){if(!this.container||!this.browser)return!1;var t=this.browser.$searchInput.val(),n=e.locus;return!e.locus||t&&n.replace(/,/g,"")===t.replace(/,/g,"")||(this.ignoreNextLocusChangedEvent=!0,this.browser.search(n)),this.reloadRemoveAndAddTracks(e),!1}}]),n}(m.a.Component),En=Object(g.b)((function(e){return{genome:le(e),locus:oe(e),tracks:Se(e),enabledDataTypes:we(e),selectedSamplesByCategoryNameAndRowName:pe(e),sjOptions:de(e),vcfOptions:me(e),bamOptions:he(e),gcnvOptions:fe(e)}}),(function(e){return{locusChangedHandler:function(t){if(t&&t[0]&&t[0].chr&&t[0].start&&t[0].end){var n="".concat(t[0].chr,":").concat(parseInt(t[0].start)+1,"-").concat(parseInt(t[0].end));e({type:"UPDATE_LOCUS",newValue:n})}},trackRemovedHandler:function(t,n){e({type:"REMOVE_SELECTED_ROW_NAMES",categoryName:t,selectedRowNames:[n]})},trackOrderChangedHandler:function(t){e({type:"UPDATE_TRACK_ORDER",newValue:t})}}}))(vn);function wn(){wn=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,a){var o=t&&t.prototype instanceof g?t:g,c=Object.create(o.prototype),i=new N(a||[]);return r(c,"_invoke",{value:x(e,n,i)}),c}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",m="executing",h="completed",f={};function g(){}function b(){}function y(){}var v={};s(v,c,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(_([])));w&&w!==n&&a.call(w,c)&&(v=w);var O=y.prototype=g.prototype=Object.create(v);function j(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(r,o,c,i){var l=p(e[r],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==typeof u&&a.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(u).then((function(e){s.value=e,c(s)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}var o;r(this,"_invoke",{value:function(e,a){function r(){return new t((function(t,r){n(e,a,t,r)}))}return o=o?o.then(r,r):r()}})}function x(t,n,a){var r=d;return function(o,c){if(r===m)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw c;return{value:e,done:!0}}for(a.method=o,a.arg=c;;){var i=a.delegate;if(i){var l=k(i,a);if(l){if(l===f)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===d)throw r=h,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=m;var s=p(t,n,a);if("normal"===s.type){if(r=a.done?h:"suspendedYield",s.arg===f)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(r=h,a.method="throw",a.arg=s.arg)}}}function k(t,n){var a=n.method,r=t.iterator[a];if(r===e)return n.delegate=null,"throw"===a&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),f;var o=p(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,f;var c=o.arg;return c?c.done?(n[t.resultName]=c.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):c:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(a.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return b.prototype=y,r(O,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:b,configurable:!0}),b.displayName=s(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},j(S.prototype),s(S.prototype,i,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,a,r,o){void 0===o&&(o=Promise);var c=new S(u(e,n,a,r),o);return t.isGeneratorFunction(n)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},j(O),s(O,l,"Generator"),s(O,c,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=_,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(a,r){return i.type="throw",i.arg=t,n.next=a,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return r("end");if(c.tryLoc<=this.prev){var l=a.call(c,"catchLoc"),s=a.call(c,"finallyLoc");if(l&&s){if(this.prev<c.catchLoc)return r(c.catchLoc,!0);if(this.prev<c.finallyLoc)return r(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return r(c.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return r(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;L(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,a){return this.delegate={iterator:_(t),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=e),f}},t}var On=y.a.div(gn||(gn=Object(b.a)(["\n  display: flex;\n  justify-content: center;\n  margin-top: 50px;\n"]))),jn=y.a.div(bn||(bn=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  margin-top: 50px;\n  margin-left: 100px;\n  word-wrap: break-word;\n  word-break: break-all;\n"]))),Sn=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(E.a)(this,n),a=t.call(this,e),Object(B.a)(Object(M.a)(a),"handleGoogleSignIn",(function(e){var t=e&&e.getBasicProfile(),n=t&&t.getEmail();a.setState({show:n?"igv":"signin-button"}),a.props.userChangedHandler(n)})),Object(B.a)(Object(M.a)(a),"render",(function(){if("igv"===a.state.show||!a.props.isGoogleLoginRequired)return console.log("Render <IGV />"),m.a.createElement(En,null);if("signin-button"===a.state.show){var e=0,t=new Set;return a.props.rowsInCategories.forEach((function(n){n.rows.forEach((function(n){n.data&&n.data.forEach((function(n){if(n.url&&n.url.startsWith("gs://")){e+=1;var a=n.url.split("/")[2];"tgg-viewer"!==a&&t.add(a)}}))}))})),0===e?m.a.createElement(jn,null,"No dataset paths loaded. \xa0 Please specify an Initial settings url."):m.a.createElement("div",null,m.a.createElement(jn,null,m.a.createElement("div",null,"Retrieved ",e," data paths from settings file: ",m.a.createElement("a",{href:a.props.initialSettingsUrl,target:"_blank"},a.props.initialSettingsUrl),m.a.createElement("br",null),m.a.createElement("br",null)),t.size>0&&m.a.createElement("div",null,"To view this data, you should have read access to the following Google Storage buckets:",m.a.createElement("ul",null,Array.from(t).map((function(e){return m.a.createElement("li",{key:e},m.a.createElement("a",{href:"https://console.cloud.google.com/storage/browser/".concat(e),target:"_blank"},e))})))),"cookies-disabled"===a.state.signInError&&m.a.createElement("div",{style:{marginTop:"20px",color:"red",textAlign:"left"}},m.a.createElement("b",null,"ERROR: Cookies are disabled"),m.a.createElement("br",null),"Please allow cookies to enable sign in with Google.")),m.a.createElement(On,null,m.a.createElement(un.GoogleLogin,{clientId:window.TGG_VIEWER_CLIENT_ID,theme:"dark",buttonText:"Sign in with Google",disabled:a.state.signInError,onSuccess:a.handleGoogleSignIn,onFailure:a.handleGoogleSignIn,cookiePolicy:"single_host_origin"})))}return null})),a.state={},a}return Object(w.a)(n,[{key:"componentDidMount",value:function(){var e=Object(K.a)(wn().mark((function e(){var t;return wn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.isGoogleLoginRequired){e.next=3;break}return this.setState({show:"igv"}),e.abrupt("return");case 3:return e.prev=3,e.next=6,new Promise((function(e){"undefined"!==typeof gapi&&gapi.load("client:auth2",(function(){gapi.client.load("storage","v1",(function(){gapi.client.init({clientId:"61200892608-qphtf65o323setqdcfj4hnf601mmetvs.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/devstorage.read_only",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/storage/v1/rest"]}),e()}))}))}));case 6:e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(3),console.error("Error during google sign-in init:",e.t0),this.setState({show:"signin-button"}),e.abrupt("return");case 13:return e.prev=13,this.setState({signInError:null}),e.next=17,ne();case 17:e.next=25;break;case 19:return e.prev=19,e.t1=e.catch(13),console.error("Error during google sign-in:",e.t1),e.t1.details&&e.t1.details.search("Cookies are not enabled")>=0&&this.setState({signInError:"cookies-disabled"}),this.setState({show:"signin-button"}),e.abrupt("return");case 25:return e.next=27,ae();case 27:t=e.sent,this.setState({show:t?"igv":"signin-button"}),this.props.userChangedHandler(t);case 30:case"end":return e.stop()}}),e,this,[[3,8],[13,19]])})));return function(){return e.apply(this,arguments)}}()}]),n}(m.a.Component),xn=Object(g.b)((function(e){return{isGoogleLoginRequired:be(e),rowsInCategories:se(e),initialSettingsUrl:ye(e)}}),(function(e){return{userChangedHandler:function(t){e({type:"UPDATE_USER",updates:{googleUserEmail:t}})}}}))(Sn),kn=n(560),Tn=n(319),Ln=n.n(Tn),Nn=n(320),_n=n.n(Nn),Rn=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(){return Object(E.a)(this,n),t.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){switch(this.props.status){case n.IN_PROGRESS:return m.a.createElement(T.a,{loading:!0,name:"spinner",style:{color:"#4183c4"}});case n.SUCCEEDED:return m.a.createElement(k.a,{trigger:m.a.createElement(T.a,{name:"check circle",style:{color:"#00C000"}}),content:this.props.successMessage||"Success",position:"top center",size:"small"});case n.ERROR:return m.a.createElement(k.a,{trigger:m.a.createElement(T.a,{name:"warning circle",style:{color:"#F00000"}}),content:this.props.errorMessage||"",position:"top center",size:"small"});default:return m.a.createElement(T.a,{name:"warning circle",style:{color:"rgb(0,0,0,0.0)"}})}}}]),n}(m.a.PureComponent);Object(B.a)(Rn,"NONE","NONE"),Object(B.a)(Rn,"IN_PROGRESS","IN_PROGRESS"),Object(B.a)(Rn,"SUCCEEDED","SUCCEEDED"),Object(B.a)(Rn,"ERROR","ERROR");var Cn,An,In,Pn,Bn=Rn,Dn=n(204),Un=n.n(Dn),Mn=n(205),Gn=n.n(Mn),Vn={},Wn={isGoogleLoginRequired:!0,genome:"hg38",locus:"chr15:92,835,700-93,031,800",dataTypesToShow:["junctions","coverage","vcf","gcnv_bed"],leftSideBarLocusList:[],rightSideBarLocusList:[],rowsInCategories:[],selectedRowNamesByCategoryName:{},sjOptions:{trackHeight:170,hideAnnotated:!1,hideUnannotated:!1,colorBy:"strand",minUniquelyMappedReads:0,minTotalReads:1,maxFractionMultiMappedReads:1,maxPercentSamplesWithThisJunction:100,maxSamplesWithThisJunction:1e9,minJunctionEndsVisible:0,minPercentSamplesWithThisJunction:0,minSamplesWithThisJunction:0,minSplicedAlignmentOverhang:0,thicknessBasedOn:"numUniqueReads",bounceHeightBasedOn:"random",labelWith:"uniqueReadCount"},vcfOptions:{displayMode:"EXPANDED"},bamOptions:{trackHeight:200,showSoftClips:!0,alignmentShading:"strand"},gcnvOptions:{trackHeight:200,trackMin:0,trackMax:5,autoscale:!1,onlyHandleClicksForHighlightedSamples:!0},initialSettingsUrl:"https://broadinstitute.github.io/rnaseq-methods/pipelines/tgg_viewer/configs/default.json"},Jn=["leftSideBarLocusList","rightSideBarLocusList"],Fn=function(){return Jn.reduce((function(e,t){var n=function(e){try{var t=localStorage.getItem(e),n=Gn.a.decompress(t);if(Vn[e]=n,null===n)return;return JSON.parse(n)}catch(a){return}}(t);return void 0!==n&&(e[t]=n),e}),{})},Hn={locus:"locus",dataTypesToShow:"show",trackOrder:"order",selectedRowNamesByCategoryName:"selectedRows",selectedSamplesByCategoryNameAndRowName:"selectedSamples",sjOptions:"sjOptions",vcfOptions:"vcfOptions",bamOptions:"bamOptions",gcnvOptions:"gcnvOptions",initialSettingsUrl:"settingsUrl"},qn=function(){var e=Object.entries(Hn).reduce((function(e,t){var n=Object(D.a)(t,2),a=n[0],r=n[1];return Object(q.a)(Object(q.a)({},e),{},Object(B.a)({},r,a))}),{}),t=window.location.hash.replace(/^#/,"");return t?t.split("&").reduce((function(t,n){var a=n.split("="),r=a[0]in e?e[a[0]]:a[0];if("locus"===r)t=Object(q.a)(Object(q.a)({},t),{},Object(B.a)({},r,a[1]));else try{t[r]=Un.a.parse(a[1])}catch(o){console.error("Couldn't parse url hash param",a[0],": ",a[1])}return(!t[r]||"object"===typeof t[r]&&0===Object.keys(t[r]).length)&&delete t[r],t}),{}):{}},zn=function(e){Jn.forEach((function(t){!function(e,t){try{var n=JSON.stringify(t);if(Vn[e]===n)return;console.warn("LocalStorage: compressing ".concat(e));var a=Gn.a.compress(n);localStorage.setItem(e,a),Vn[e]=n}catch(r){console.warn("Unable to save state: ",e,t,r)}}(t,e[t])}));var t=Object.keys(e).filter((function(e){return e in Hn})).reduce((function(t,n){var a="locus"===n?e[n].replace(",",""):Un.a.stringify(e[n]);return[].concat(Object(S.a)(t),["".concat(Hn[n],"=").concat(a)])}),[]).join("&");window.location.hash="#".concat(t)};function Kn(){Kn=function(){return t};var e,t={},n=Object.prototype,a=n.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,a){var o=t&&t.prototype instanceof g?t:g,c=Object.create(o.prototype),i=new N(a||[]);return r(c,"_invoke",{value:x(e,n,i)}),c}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d="suspendedStart",m="executing",h="completed",f={};function g(){}function b(){}function y(){}var v={};s(v,c,(function(){return this}));var E=Object.getPrototypeOf,w=E&&E(E(_([])));w&&w!==n&&a.call(w,c)&&(v=w);var O=y.prototype=g.prototype=Object.create(v);function j(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(r,o,c,i){var l=p(e[r],e,o);if("throw"!==l.type){var s=l.arg,u=s.value;return u&&"object"==typeof u&&a.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,c,i)}),(function(e){n("throw",e,c,i)})):t.resolve(u).then((function(e){s.value=e,c(s)}),(function(e){return n("throw",e,c,i)}))}i(l.arg)}var o;r(this,"_invoke",{value:function(e,a){function r(){return new t((function(t,r){n(e,a,t,r)}))}return o=o?o.then(r,r):r()}})}function x(t,n,a){var r=d;return function(o,c){if(r===m)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw c;return{value:e,done:!0}}for(a.method=o,a.arg=c;;){var i=a.delegate;if(i){var l=k(i,a);if(l){if(l===f)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(r===d)throw r=h,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);r=m;var s=p(t,n,a);if("normal"===s.type){if(r=a.done?h:"suspendedYield",s.arg===f)continue;return{value:s.arg,done:a.done}}"throw"===s.type&&(r=h,a.method="throw",a.arg=s.arg)}}}function k(t,n){var a=n.method,r=t.iterator[a];if(r===e)return n.delegate=null,"throw"===a&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==a&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+a+"' method")),f;var o=p(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,f;var c=o.arg;return c?c.done?(n[t.resultName]=c.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,f):c:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function _(t){if(t||""===t){var n=t[c];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function n(){for(;++r<t.length;)if(a.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(typeof t+" is not iterable")}return b.prototype=y,r(O,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:b,configurable:!0}),b.displayName=s(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,l,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},j(S.prototype),s(S.prototype,i,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,a,r,o){void 0===o&&(o=Promise);var c=new S(u(e,n,a,r),o);return t.isGeneratorFunction(n)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},j(O),s(O,l,"Generator"),s(O,c,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},t.values=_,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(a,r){return i.type="throw",i.arg=t,n.next=a,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var c=this.tryEntries[o],i=c.completion;if("root"===c.tryLoc)return r("end");if(c.tryLoc<=this.prev){var l=a.call(c,"catchLoc"),s=a.call(c,"finallyLoc");if(l&&s){if(this.prev<c.catchLoc)return r(c.catchLoc,!0);if(this.prev<c.finallyLoc)return r(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return r(c.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return r(c.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var c=o?o.completion:{};return c.type=e,c.arg=t,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;L(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,a){return this.delegate={iterator:_(t),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=e),f}},t}var Yn,Xn,Qn,$n,Zn=y.a.div(Cn||(Cn=Object(b.a)(["\n  color: #999;\n  width: 100%;\n  text-align: center;\n  \n  .ui.label {\n    color: #444;\n    background-color: #f3f3f3;\n  }\n"]))),ea=Object(y.a)(kn.a)(An||(An=Object(b.a)(["\n  margin-top: 100px;\n  width: calc(100% - 350px);\n"]))),ta=Object(y.a)(U.a)(In||(In=Object(b.a)(["\n  margin-left: 20px !important;\n  margin-right: 15px !important;\n"]))),na=Object(y.a)(U.a)(Pn||(Pn=Object(b.a)(["\n  margin-left: 10px !important;\n"]))),aa=function(e){Object(O.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(E.a)(this,n),a=t.call(this,e),Object(B.a)(Object(M.a)(a),"loadInitialSettingsUrl",function(){var e=Object(K.a)(Kn().mark((function e(t,n){var r,o,c,i,l,s,u,p,d,m,h,f,g,b;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.props,o=r.globalState,c=r.updateInitialSettingsUrl,i=r.resetGlobalState,t){e.next=5;break}return i(Object(q.a)(Object(q.a)({},Wn),{user:o.user})),c(""),e.abrupt("return");case 5:if(n||(l=Fn(),s=qn()),-1!==t.search(":")&&-1!==t.search("/")){e.next=8;break}throw new Error('Invalid url: "'.concat(t,'"'));case 8:return u=-1!==t.search(".yaml")||-1!==t.search(".yml"),p=-1!==t.search(".json"),d=!u&&!p,e.next=13,fetch(t);case 13:if((m=e.sent).ok){e.next=16;break}throw new Error("Couldn't load URL. Error: ".concat(m.statusText.toLowerCase()," (").concat(m.status,")"));case 16:return e.next=18,m.text();case 18:if(h=e.sent,(f=null)||!u&&!d){e.next=28;break}e.prev=21,f=_n.a.safeLoad(h),e.next=28;break;case 25:throw e.prev=25,e.t0=e.catch(21),new Error("Unable to parse YAML file: ".concat(t,"  ").concat(e.t0));case 28:if(f||!p&&!d){e.next=36;break}e.prev=29,f=JSON.parse(h),e.next=36;break;case 33:throw e.prev=33,e.t1=e.catch(29),new Error("Unable to parse JSON file: ".concat(t,"  ").concat(e.t1));case 36:if(f){e.next=38;break}throw new Error("Unable to parse settings from file: ".concat(t));case 38:g=Object.keys(o).reduce((function(e,t){return t in f?Object(q.a)(Object(q.a)({},e),{},Object(B.a)({},t,f[t])):e}),{}),console.log("Retrieved state from config file:",g),b=Object(q.a)(Object(q.a)({},o),g),n||(console.log("Applying settings from local storage",l),console.log("Applying settings from url hash",s),b=Object(q.a)(Object(q.a)(Object(q.a)({},b),l),s)),console.log("Setting global state to",b),i(b),c(t);case 45:case"end":return e.stop()}}),e,null,[[21,25],[29,33]])})));return function(t,n){return e.apply(this,arguments)}}()),Object(B.a)(Object(M.a)(a),"applyInitialSettingsUrl",function(){var e=Object(K.a)(Kn().mark((function e(t){var n,r,o,c,i=arguments;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]&&i[1],a.setState({requestStatus:Bn.IN_PROGRESS}),t.startsWith("https://github.com/")?t=t.replace("https://github.com","https://raw.githubusercontent.com").replace("blob/",""):(t.startsWith("https://storage.googleapis.com")||t.startsWith("gs://"))&&(r=t.replace("gs://","").replace("https://storage.googleapis.com/","").split("/"),o=r[0],c=r.slice(1).join("/"),t="https://".concat(o,".storage.googleapis.com/").concat(c)),e.prev=3,e.next=6,a.loadInitialSettingsUrl(t,n);case 6:a.setState({requestStatus:Bn.SUCCEEDED,successMessage:t?"Successfully loaded URL and applied settings":"Reset all settings to defaults"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),a.setState({requestStatus:Bn.ERROR,errorMessage:e.t0.toString()});case 12:return e.next=14,Ln()(1e4);case 14:a.state.requestStatus!==Bn.IN_PROGRESS&&a.setState({requestStatus:Bn.NONE,errorMessage:""});case 15:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}()),Object(B.a)(Object(M.a)(a),"exportCurrentSettings",(function(){var e=["user","modals"],t=Object.keys(a.props.globalState).reduce((function(t,n){return e.includes(n)||(t[n]=a.props.globalState[n]),t}),{});return encodeURIComponent(JSON.stringify(t,null,5))})),a.textInputValue=e.initialSettingsUrl||"",a.state={requestStatus:Bn.NONE,successMessage:"",errorMessage:""},a}return Object(w.a)(n,[{key:"componentDidMount",value:function(){var e=Object(K.a)(Kn().mark((function e(){var t;return Kn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.props.initialSettingsUrl)){e.next=5;break}return console.log("Loading settings from",t),e.next=5,this.applyInitialSettingsUrl(t,!1);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props.initialSettingsUrl;return m.a.createElement(Zn,{align:"center"},m.a.createElement(ea,{label:"Initial settings:",defaultValue:t,placeholder:"URL of .yaml or .json settings file (eg. http://.../settings.json), or blank to reset all settings to defaults.",onChange:function(t){e.textInputValue=t.target.value},onKeyUp:function(t){return 13===t.keyCode&&e.applyInitialSettingsUrl(t.target.value,!0)}}),m.a.createElement(ta,{content:"Apply",onClick:function(){return e.applyInitialSettingsUrl(e.textInputValue,!0)}}),m.a.createElement(Bn,{status:this.state.requestStatus,errorMessage:this.state.errorMessage,successMessage:this.state.successMessage}),m.a.createElement(k.a,{content:"Export current settings to a .json file. If you then upload this file to a public url (for example to github) and then paste the url here, the current settings will be restored.",position:"right center",trigger:m.a.createElement("a",{download:"settings.json",href:"data:text/json;charset=utf-8,".concat(this.exportCurrentSettings())},m.a.createElement(na,{icon:"download"}))}))}}]),n}(m.a.PureComponent),ra=Object(g.b)((function(e){return{globalState:e,initialSettingsUrl:ye(e)}}),(function(e){return{updateInitialSettingsUrl:function(t){e({type:"UPDATE_INITIAL_SETTINGS_URL",newValue:t})},resetGlobalState:function(t){e({type:"RESET_GLOBAL_STATE",newState:t})}}}))(aa),oa=y.a.div(Yn||(Yn=Object(b.a)(["\n  padding: 10px 20px;\n"]))),ca=Object(y.a)(v.a.Column)(Xn||(Xn=Object(b.a)(["\n  min-width: ","px !important;\n  z-index: 2;\n"])),210),ia=Object(y.a)(v.a.Column)(Qn||(Qn=Object(b.a)(["\n  min-width: ","px !important;\n  z-index: 0;\n"])),210),la=Object(y.a)(v.a.Column)($n||($n=Object(b.a)(["\n  min-width: calc(99% - ","px) !important;\n  z-index: 1;\n"])),425),sa=function(){return m.a.createElement(oa,null,m.a.createElement(v.a,null,m.a.createElement(v.a.Row,null,m.a.createElement(ca,null,m.a.createElement(Vt,null)),m.a.createElement(la,null,m.a.createElement(sn,null),m.a.createElement(xn,null),m.a.createElement(ra,null)),m.a.createElement(ia,null,m.a.createElement(en,null)))))},ua=n(120),pa=n(321),da=Object(ua.b)(Object.assign({isGoogleLoginRequired:Ae,genome:Ae,locus:Ie("UPDATE_LOCUS",""),rightSideBarLocusList:Be("RIGHT_SIDE_BAR_LOCUS_LIST"),leftSideBarLocusList:Be("LEFT_SIDE_BAR_LOCUS_LIST"),dataTypesToShow:Be("DATA_TYPES_TO_SHOW"),rowsInCategories:function(e,t){return t&&t.categoryName&&t.rows?e.map((function(e){if(e.categoryName!==t.categoryName)return e;var n;switch(t.type){case"SET_ROWS":n=Object(S.a)(t.rows);break;case"ADD_ROWS":var a=e.rows.map((function(e){return e.name}));n=[].concat(Object(S.a)(e.rows),Object(S.a)(t.rows.filter((function(e){return!a.includes(e.name)}))));break;default:n=e.rows}return Object(q.a)(Object(q.a)({},e),{},{rows:n})})):e||[]},selectedRowNamesByCategoryName:function(e,t){if(!t||!t.categoryName||!Array.isArray(t.selectedRowNames))return e||{};var n=e[t.categoryName]||[];switch(t.type){case"SET_SELECTED_ROW_NAMES":case"ADD_SELECTED_ROW_NAMES":case"REMOVE_SELECTED_ROW_NAMES":var a;if("SET_SELECTED_ROW_NAMES"===t.type)a=Array.from(new Set(t.selectedRowNames));else if("ADD_SELECTED_ROW_NAMES"===t.type)a=Array.from(new Set([].concat(Object(S.a)(n),Object(S.a)(t.selectedRowNames))));else{var r=t.selectedRowNames;a=n.filter((function(e){return!r.includes(e)}))}return Object(q.a)(Object(q.a)({},e),{},Object(B.a)({},t.categoryName,a));default:console.trace("Unknown action type: ".concat(t.type))}return e},selectedSamplesByCategoryNameAndRowName:function(e,t){if(!t||!t.categoryName||!t.selectedSamplesByRowName&&!t.sampleSettingsByRowNameAndSampleName)return e||{};var n=e[t.categoryName]||{},a=n.selectedSamples||{},r=n.sampleSettings||{},o=a,c=r;switch(t.type){case"SET_SELECTED_SAMPLES":case"ADD_SELECTED_SAMPLES":case"REMOVE_SELECTED_SAMPLES":o="SET_SELECTED_SAMPLES"===t.type?Object(q.a)(Object(q.a)({},a),t.selectedSamplesByRowName):"ADD_SELECTED_SAMPLES"===t.type?Array.from(new Set([].concat(Object(S.a)(Object.keys(a)),Object(S.a)(Object.keys(t.selectedSamplesByRowName))))).reduce((function(e,n){return e[n]=Array.from(new Set([].concat(Object(S.a)(a[n]||[]),Object(S.a)(t.selectedSamplesByRowName[n]||[])))),e}),{}):Object.keys(a).reduce((function(e,n){var r=t.selectedSamplesByRowName[n]||[],o=(a[n]||[]).filter((function(e){return!r.includes(e)}));return o.length>0&&(e[n]=o),e}),{});break;case"UPDATE_SAMPLE_SETTINGS":c=Object(q.a)(Object(q.a)({},r),t.sampleSettingsByRowNameAndSampleName),Object.keys(t.sampleSettingsByRowNameAndSampleName).forEach((function(e){var n=r[e]||{},a=t.sampleSettingsByRowNameAndSampleName[e],o=Object(q.a)(Object(q.a)({},n),a);Object.entries(a).forEach((function(e){var t=Object(D.a)(e,2),a=t[0],r=t[1],c=Object(q.a)(Object(q.a)({},n[a]||{}),r);o[a]=c})),c[e]=o}));break;default:return console.trace("Unknown action type: ".concat(t.type)),e}return Object(q.a)(Object(q.a)({},e),{},Object(B.a)({},t.categoryName,{selectedSamples:o,sampleSettings:c}))},trackOrder:Ie("UPDATE_TRACK_ORDER",[]),sjOptions:Pe("UPDATE_SJ_OPTIONS"),vcfOptions:Pe("UPDATE_VCF_OPTIONS"),bamOptions:Pe("UPDATE_BAM_OPTIONS"),gcnvOptions:Pe("UPDATE_GCNV_OPTIONS"),user:Pe("UPDATE_USER"),initialSettingsUrl:Ie("UPDATE_INITIAL_SETTINGS_URL","")},De)),ma=function(e,t){if("RESET_GLOBAL_STATE"===t.type)return t.newState;var n=da(e,t);return zn(n),n},ha=function(){var e=function(){var e=Fn(),t=qn();return Object(q.a)(Object(q.a)(Object(q.a)({},Wn),e),t)}();return console.log("Initializing store to:",e),Object(ua.d)(ma,e,Object(ua.c)(Object(ua.a)(pa.a)))};var fa=function(){return m.a.createElement(g.a,{store:ha()},m.a.createElement(sa,null))};f.a.render(m.a.createElement(fa,null),document.getElementById("root"))}},[[335,1,2]]]);
//# sourceMappingURL=main.e1dabbb5.chunk.js.map