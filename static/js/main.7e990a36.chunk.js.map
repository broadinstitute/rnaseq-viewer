{"version":3,"sources":["redux/utils/reducerFactories.js","redux/utils/modalReducer.js","components/Modal.jsx","components/EditLocusList.jsx","components/SideBarUtils.jsx","constants.js","utils/googleAuth.js","redux/selectors.js","components/EditSamplePaths.jsx","components/LeftSideBar.jsx","components/RightSideBar.jsx","components/About.jsx","components/UserInfo.jsx","components/Header.jsx","utils/throttle.js","components/IGV.jsx","components/RequestStatus.jsx","redux/initialState.js","utils/localStorage.js","components/InitialSettingsForm.jsx","components/BaseLayout.jsx","redux/rootReducer.js","App.js","index.js"],"names":["createSingleValueReducer","updateActionType","initialState","debug","reducer","state","action","type","undefined","newValue","console","error","log","createSingleObjectReducer","updates","newState","createArrayReducer","actionTypeSuffix","Array","isArray","values","valuesToRemove","filter","v","includes","modals","key","updatesById","shallowCopy","Object","entries","forEach","id","obj","createObjectsByIdReducer","getModalOpen","modalName","open","ButtonLink","styled","Button","attrs","basic","props","padding","color","fontWeight","ContainerDiv","div","StyledButton","CustomModal","handleClose","doClose","close","handleSave","trigger","this","React","cloneElement","onClick","Modal","isOpen","onClose","size","Header","title","floated","icon","Icon","name","Content","children","tabIndex","PureComponent","defaultProps","connect","ownProps","dispatch","e","preventDefault","confirmed","getState","confirmOnClose","confirming","LinkButton","a","EditLocusListButtonAndModal","render","locusList","setLocusList","length","newLocusList","textAreaValue","split","Boolean","Form","Field","control","TextArea","style","minHeight","defaultValue","onKeyUp","target","value","placeholder","join","EditLocusList","setLocus","map","locus","i","CategoryH3","h3","OptionDiv","StyledPopup","Popup","SUPPORTED_FILE_EXTENSIONS","MOTIFS","googleSignIn","async","gapi","auth2","getAuthInstance","authInstance","isSignedIn","get","signIn","getGoogleUserEmail","profile","currentUser","getBasicProfile","getEmail","getGoogleAccessToken","user","reloadAuthResponse","getAuthResponse","access_token","getLocus","getRightSideBarLocusList","rightSideBarLocusList","getLeftSideBarLocusList","leftSideBarLocusList","getGenome","genome","getSamplesInCategories","samplesInCategories","getSelectedSampleNamesByCategoryName","selectedSampleNamesByCategoryName","getSjOptions","sjOptions","getVcfOptions","vcfOptions","getBamOptions","bamOptions","getUser","getInitialSettings","initialSettings","getInitialSettingsUrl","initialSettingsUrl","getInitialSettingsUrlHasBeenApplied","initialSettingsUrlHasBeenApplied","getSamplesByCategoryName","createSelector","reduce","acc","category","categoryName","samples","getSelectedSamplesByCategoryName","samplesByCategoryName","selectedSampleNames","sample","getTracks","selectedSamplesByCategoryName","igvTracks","junctionsTrack","coverageTrack","junctions","showJunctions","format","url","indexURL","oauthToken","order","height","trackHeight","minUniquelyMappedReads","minTotalReads","maxFractionMultiMappedReads","minSplicedAlignmentOverhang","thicknessBasedOn","bounceHeightBasedOn","colorBy","colorByNumReadsThreshold","hideStrand","showOnlyPlusStrand","showOnlyMinusStrand","labelUniqueReadCount","labelMultiMappedReadCount","labelTotalReadCount","labelMotif","labelAnnotatedJunction","labelAnnotatedJunctionValue","hideAnnotatedJunctions","hideAnnotated","hideUnannotatedJunctions","hideUnannotated","hideMotifs","motif","coverage","showCoverage","push","tracks","showVcfs","vcf","indexUrl","indexed","displayMode","showBams","bam","viewAsPairs","showSoftClips","searchable","visibilityWindow","ExampleDiv","ExamplePath","span","StyledRadio","Radio","position","EditSamplePathsButtonAndModal","getInitialState","convertSamplesToTextAreaValue","warningMessage","errorMessage","parseTextAreaValueToSamples","trim","invalidPaths","samplesBySampleName","samplePath","pathTokens","fileName","matchingExtensions","keys","ext","endsWith","filePrefix","replace","yaml","safeLoad","JSON","parse","flat","safeDump","flowLevel","stringify","formatRadioButtonChangeHandler","data","setState","checked","label","getInitialSamplesInCategory","showResetButton","initialSamplesInCategories","originalCategories","resetButtonClickHandler","initialSamplesInCategory","handleModalSave","setSamples","handleModalClose","fullTitle","someSamplesHaveDescriptionOrMultipleDataFiles","some","description","disabled","onChange","marginLeft","content","float","Message","updateSamples","actionType","CategoryDetails","StyledIcon","JunctionsIcon","CoverageIcon","BamIcon","VcfIcon","SampleColorLabelsContainer","NoWrapDiv","SampleColorLabelsWithPopup","paddingRight","colSpan","fontSize","marginTop","s","navigator","clipboard","writeText","CategoryPanel","updateSelectedSampleNames","toUpperCase","SamplesPanel","j","SamplePanel","Checkbox","data-sample","SampleDetails","inverted","LeftSideBar","updateSjOptions","updateVcfOptions","updateBamOptions","newSettings","OptionInput","input","ColorLegendIcon","ColorByLegend","handleTextInput","width","SjOptionsPanel","keyCode","parseInt","on","BamOptionsPanel","VcfOptionsPanel","RightSideBar","AboutLink","href","UserInfo","googleUserEmail","HeaderRow","Grid","Row","Column1","Column","Column2","About","throttle","delay","fn","timerId","args","clearTimeout","setTimeout","IGV_SETTINGS","showIdeogram","showNavigation","showRuler","showCenterGuide","showCursorTrackingGuide","showCommandBar","StyledDiv","IGV","setContainerElement","element","container","ref","browser","ignoreNextTrackRemovedEvent","locusChangedHandler","trackRemovedHandler","userChangedHandler","igvBrowserOptions","Promise","resolve","load","client","init","clientId","scope","discoveryDocs","igv","createBrowser","then","track","nextProps","currentIGVLocus","$searchInput","val","nextIGVLocus","search","nextTrackSettingsByTrackName","item","nextTrackSettings","removeTrackByName","loadTrack","warn","Component","event","newLocus","config","RequestStatus","status","IN_PROGRESS","loading","SUCCEEDED","successMessage","ERROR","NONE","REFERENCE_DATA_ROOT","DEFAULT_STATE","alignmentShading","KEYS_TO_PERSIST_IN_URL","KEYS_TO_PERSIST_IN_LOCAL_STORAGE","computeInitialState","stateFromLocalStorage","serializedState","localStorage","getItem","err","loadState","REVERSE_KEY_NAME_LOOKUP","hashString","window","location","hash","stateFromUrlHash","keyValue","keyValueList","jsurl","updateLocalStorageAndUrl","setItem","saveState","hashKeyValueList","StyledInput","Input","InitialSettingsForm","loadInitialSettingsUrl","globalState","updateInitialSettingsUrl","setInitialSettingsUrlHasBeenApplied","resetGlobalState","Error","isYamlURL","isJsonURL","fetch","response","ok","statusText","toLowerCase","text","fileContents","settings","filteredSettings","applyInitialSettingsUrl","requestStatus","toString","textInputValue","align","newUrl","minWidth","otherReducers","combineReducers","assign","updatedSamples","previousList","updatedList","trace","modalReducers","rootReducer","nextState","createReduxStore","createStore","compose","applyMiddleware","thunkMiddleware","App","store","BaseLayout","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.7e990a36.chunk.js","sourcesContent":["/**\n * Redux reducers take a 'state' object representing the current application\n * state, and an 'action' object specifying some change to that state.\n * They apply the change and return the updated 'state' object.\n * For more details, see: http://redux.js.org/docs/basics/Reducers.html\n *\n * This module provides generic reducers that can be used to manage the following common types of\n * state shapes:\n *\n * { ... } - zero actions - arbitrary state shape that doesn't change after it's initialized, so\n *          this reducer doesn't perform any actions.\n *\n * value - single value - reducer supports 1 action that replaces the value with a new value.\n *\n * { key1: value1, key2: value2 .. } - single object - reducer supports 1 action that allows\n *          changing the values of one or more keys.\n *\n * { id1: { key1: value1, key2: value2, .. },\n *   id2: { key1: value1, key2: value2, .. },\n *   id3: ... }  -  objects by id - reducer supports several actions:\n *          adding or deleting objects by id, and updating the values within one or more objects\n *          specified by id.\n *\n *\n * ==========\n * Additional state shapes that may be implemnted as needed:\n *\n * { id1: value1, id2: value2 .. } - values by id - reducer supports several actions:\n *          adding or deleting values by id, and replacing one or more values by id.\n *\n * [ value1, value2, .. ] - single array - supports actions that add and remove values from the array\n *\n * { id1: [ value1, value2, .. ]\n *   id2: [ value1, value2, .. ] - arrays by id\n */\n\n/**\n * Reducer that can be used to manage any state that doesn't change after it's initialized.\n */\nexport const zeroActionsReducer = (state = {}) => {\n  return state\n}\n\n/**\n * Factory function that creates a reducer for managing any state object that's treated as a single\n * atomic value, where the only supported modification is to replace this value with a new value.\n *\n * As an example use case, lets say an app has one or more on/off toggles. Each of these toggles is\n * bound to a single state variable: 'isOn' which is either true or false.\n *\n * This function can be used to create the reducer(s) for managing a toggle's state:\n *\n * const rootReducer = combineReducers({\n *        toggleA: createSingleValueReducer('UPDATE_TOGGLE_A'),\n *        toggleB: createSingleValueReducer('UPDATE_TOGGLE_B'),\n *        ...\n *      })\n *\n * Here, the argument 'UPDATE_TOGGLE_A' specifies the action type that will later be dispatched\n * to update that toggle's state. For example, to set a toggle to \"off\":\n *\n * dispatch({\n *      type: 'UPDATE_TOGGLE_A',\n *      newValue: false,\n * })\n *\n * @param updateActionType (string) action.type that will later be used to replace the state with a\n * new state.\n */\nexport const createSingleValueReducer = (updateActionType, initialState, debug = false) => {\n  const reducer = (state = initialState, action) => {\n    if (!action) {\n      return state\n    }\n\n    switch (action.type) {\n      case updateActionType: {\n        if (action.newValue === undefined) {\n          console.error(`Invalid ${updateActionType} action: action.newValue is undefined: `, action)\n          return state\n        }\n        if (debug) {\n          console.log('singleValueReducer: applying action: ', action, 'State changing from ', state, ' to ', action.newValue)\n        }\n        return action.newValue\n      }\n      default:\n        return state\n    }\n  }\n\n  return reducer\n}\n\n\n/**\n * Factory function that creates a reducer for managing a state object with some fixed set of keys.\n * The reducer supports an 'UPDATE' action that can be used to set one or more\n * of these keys to new values.\n *\n * As an example use case, lets say an app displays several instances of a widget whose state\n * consists of this state object:\n *\n *    { isVisible: true, size: 5, names:  ['bob', 'gary', .. ], ... }\n *\n * This function can be used to create a reducer for this state:\n *\n *    const widgetReducer = createSingleObjectReducer('UPDATE_WIDGET')\n *\n * Here, the argument 'UPDATE_WIDGET' specifies the action type that will later be dispatched to\n * update the widget's state.\n *\n * After this, an action with type 'UPDATE_WIDGET' can be dispatched:\n *\n *    dispatch({\n *      type: 'UPDATE_WIDGET',\n *      updates: { isVisible: false, names: ['jim', 'liza'] }\n *    })\n *\n * which will cause the state object to be updated to:\n *\n *    { isVisible: false, size: 5, names:  ['jim', 'liza'], ... }\n *\n * These reducers can also be used with combineReducers(..):\n *\n *    const rootReducer = combineReducers({\n *        widget1: createSingleObjectReducer('UPDATE_WIDGET1'),\n *        widget2: createSingleObjectReducer('UPDATE_WIDGET2'),\n *        other: ..,\n *        ..\n *    })\n *\n * @param updateActionType (string) action.type that will later be used to update the state object.\n */\nexport const createSingleObjectReducer = (updateActionType, initialState = {}, debug = false) => {\n  const reducer = (state = initialState, action) => {\n    if (!action) {\n      return state\n    }\n\n    switch (action.type) {\n      case updateActionType: {\n        if (action.updates === undefined) {\n          console.error(`Invalid ${updateActionType} action: action.updates is undefined: `, action)\n          return state\n        }\n\n        const newState = { ...state, ...action.updates }\n        if (debug) {\n          console.log('singleObjectReducer: applying action: ', action, 'State changing from ', state, ' to ', newState)\n        }\n        return newState\n      }\n      default:\n        return state\n    }\n  }\n\n  return reducer\n}\n\n\n/**\n * Factory function that creates a reducer for managing an array of items.\n * The reducer supports 'ADD' and 'REMOVE' actions for adding/removing one or more items from the array.\n * It also supports a 'SET' action that replaces the existing array with a new one (or can be used to set\n * it to an empty array).\n *\n * An example use case is a list of track names in IGV:\n *\n *    [ 'Sample1', 'Sample2']\n *\n * This function can be used to create a reducer for this state:\n *\n *    const samplesReducer = createArrayReducer('SAMPLES', [ 'Sample1', 'Sample2'])\n *\n * Here, the argument 'SAMPLES' means the reducer will support the following action types:\n *    'ADD_SAMPLES'     (to add one or more samples to the end of the list)\n *    'REMOVE_SAMPLES'  (to remove or more samples from the list)\n *    'SET_SAMPLES'     (to replace existing samples with a new array of 0 or more samples)\n *\n * After this, an 'ADD_SAMPLES' action can be dispatched as follows:\n *\n *    dispatch({\n *      type: 'ADD_SAMPLES',\n *      values: ['Sample3', 'Sample4']\n *    })\n *\n * which will cause the state object to be updated to:\n *\n *    [ 'Sample1', 'Sample2', 'Sample3', 'Sample4']\n *\n * These reducers can also be used with combineReducers(..):\n *\n *    const rootReducer = combineReducers({\n *        samples: createArrayReducer('SAMPLES', ['Sample1', 'Sample2']),\n *        tags: createArrayReducer('TAGS'),\n *        other: ..,\n *        ..\n *    })\n *\n * @param updateActionType (string) action.type that will later be used to update the state object.\n */\nexport const createArrayReducer = (actionTypeSuffix, initialState = [], debug = false) => {\n  const reducer = (state = initialState, action) => {\n    if (!action) {\n      return state\n    }\n\n    switch (action.type) {\n      case `SET_${actionTypeSuffix}`:\n      case `ADD_${actionTypeSuffix}`:\n      case `REMOVE_${actionTypeSuffix}`: {\n        if (!Array.isArray(action.values)) {\n          console.error(`Invalid ${action.type} action: action.values is undefined or not an array: `, action)\n          return state\n        }\n\n        let newState\n        if (action.type === `SET_${actionTypeSuffix}`) {\n          newState = [...action.values] // make a copy of action.values\n        } else if (action.type === `ADD_${actionTypeSuffix}`) {\n          newState = [...state, ...action.values]\n        } else {\n          const valuesToRemove = action.values\n          newState = state.filter((v) => !valuesToRemove.includes(v))\n        }\n\n        if (debug) {\n          console.log('createArrayReducer: applying action: ', action, 'State changing from ', state, ' to ', newState)\n        }\n        return newState\n      }\n\n      default:\n        return state\n    }\n  }\n\n  return reducer\n}\n\n/**\n * Factory function that creates a reducer for managing a state object that looks like:\n *\n * { id1: { key1: valueA, key2: valueB, key3: valueC },\n *   id2: { key1: valueI, key2: valueJ, key3: valueK },\n *   id3: ...\n * }\n *\n * This state object is analogous to a database table, where the contained objects represent table\n * rows and have identical sets of keys but different values, so that each key can be thought of as\n * a column in the table.\n *\n * This reducer supports a single action type that can be used to transform the underlying state\n * in several ways:\n *    - adding new objects by id\n *    - deleting objects by id\n *    - updating the values within one or more existing objects by id\n *\n * As an example, the reducer can be created as follows:\n *\n *      const tableRowReducer = createObjectsByIdReducer('UPDATE_TABLE_X')\n *\n * Here, the 'UPDATE_TABLE_X' argument specifies the action type that will later be dispatched\n * to perform modifications. For example, the action below will change some of the values and also\n * both delete some ids and add some new ids:\n *\n * dispatch({\n *   type: 'UPDATE_TABLE_X',\n *   updatesById: {\n *     id1: { key2: valueM },                                 // update key2 value in object with id1\n *     idNew: { key1: valueX, key2: valueY, key3: valueZ },   // add new object and id\n *     id2: null,                                             // delete id2\n *   }\n *  })\n *\n * The resulting state after this action would look like:\n *\n * { id1: { key1: valueA, key2: valueM, key3: valueC },\n *   idNew: { key1: valueX, key2: valueY, key3: valueZ },\n *   id3: ...\n * }\n *\n * @param updateStateActionId (string) action.type that will later be used to update the state object.\n */\nexport const createObjectsByIdReducer = (updateActionType, key, initialState = {}, debug = false) => {\n  const reducer = (state = initialState, action) => {\n    if (!action) {\n      return state\n    }\n\n    switch (action.type) {\n      case updateActionType: {\n        if (action.updatesById === undefined) {\n          console.error(`Invalid ${updateActionType} action. action.updatesById is undefined: `, action)\n          return state\n        }\n        let updates = action.updatesById\n        if (key) {\n          if (!(key in updates)) {\n            return state\n          }\n          updates = updates[key]\n        }\n        const shallowCopy = { ...state }\n        Object.entries(updates).forEach(([id, obj]) => {\n          if (obj == null) {\n            // if the id is mapped to a null or undefined value, then delete this id\n            delete shallowCopy[id]\n          } else if (shallowCopy[id]) {\n            shallowCopy[id] = { ...shallowCopy[id], ...obj }\n          } else {\n            shallowCopy[id] = { ...obj }\n          }\n        })\n\n        if (debug) {\n          console.log('objectsByIdReducer: applying action: ', action, 'State changing from: ', state, ' to ', shallowCopy)\n        }\n        return shallowCopy\n      }\n      default:\n        return state\n    }\n  }\n\n  return reducer\n}\n\n\n/**\n * Factory function that creates a reducer for managing a state object that looks like:\n *\n * {\n *    loading: false,\n *    error: null,\n * }\n *\n * This state object encapsulates an entity type that is fetched from the server\n *\n * This reducer supports a two action types:\n * 1) A request action that sets the state to loading\n * 2) A receive action that indicates the loading has completed\n *\n * @param requestActionType (string) action.type representing a \"request\" event\n * @param receiveActionType (string) action.type representing a \"receive\" event\n */\nexport const loadingReducer = (requestActionType, receiveActionType, initialState = { isLoading: false, errorMessage: null }, debug = false) => {\n  const reducer = (state = initialState, action) => {\n    switch (action.type) {\n      case requestActionType:\n        if (debug) {\n          console.log(`fetchObjectsReducer: applying action: ${action.type}. State changing to loading`)\n        }\n        return { ...state, isLoading: true }\n\n      case receiveActionType:\n        if (debug) {\n          console.log(`fetchObjectsReducer: applying action: ${action.type}. State changing to received: ${action.byGuid}`)\n        }\n        return { ...state, isLoading: false, errorMessage: action.error }\n\n      default:\n        return state\n    }\n  }\n  return reducer\n}\n","import { createObjectsByIdReducer } from './reducerFactories'\n\n\n// actions\nconst UPDATE_MODAL_STATE = 'UPDATE_MODAL_STATE'\n\n// action creators\nexport const openModal = (modalName) => (dispatch) => (\n  dispatch({ type: UPDATE_MODAL_STATE, updatesById: { [modalName]: { open: true } } })\n)\n\nexport const closeModal = (modalName, confirmed) => (dispatch, getState) => {\n  if (getState().modals[modalName].confirmOnClose && !confirmed) {\n    dispatch({ type: UPDATE_MODAL_STATE, updatesById: { [modalName]: { confirming: true } } })\n  } else {\n    dispatch({ type: UPDATE_MODAL_STATE, updatesById: { [modalName]: { open: false, confirming: false, confirmOnClose: null } } })\n  }\n}\n\n// root reducer\nexport default {\n  modals: createObjectsByIdReducer(UPDATE_MODAL_STATE),\n}\n\n// basic selectors\nexport const getModalOpen = (state, modalName) => state.modals[modalName] && state.modals[modalName].open\n","/* eslint-disable react/destructuring-assignment */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport { Button, Modal, Icon } from 'semantic-ui-react'\n\nimport { getModalOpen, openModal, closeModal } from '../redux/utils/modalReducer'\n\nexport const ButtonLink = styled(Button).attrs({ basic: true })`\n  &.ui.button.basic {\n    white-space: nowrap;\n    border: none;\n    padding: ${(props) => props.padding || 0};\n    color: ${(props) => props.color || '#4183C4'} !important;\n    text-decoration: none;\n    font-weight: ${(props) => props.fontWeight || 'inherit'};\n    box-shadow: none !important;\n    user-select: auto;\n    \n    &:hover, &:focus, &:active {\n      color: #1e70bf !important;\n      background: transparent !important;\n    }\n    \n    &[class*=\"right labeled\"].icon {\n      padding-left: 0 !important;\n      padding-right: 2.1em !important;\n      \n      > .icon {\n        background-color: initial;\n      }\n    }\n  }\n`\n\nconst ContainerDiv = styled.div`\n  float: right;\n  padding: 0px 20px 20px 20px;\n`\n\nconst StyledButton = styled(Button)`\n  margin-left: 10px !important;\n  width: 100px;\n`\n\n\nclass CustomModal extends React.PureComponent\n{\n  handleClose = () => {\n    let doClose = true\n    if (this.props.handleClose) {\n      doClose = this.props.handleClose()\n    }\n    if (doClose) {\n      this.props.close()\n    }\n  }\n\n  handleSave = () => {\n    let doClose = true\n    if (this.props.handleSave) {\n      doClose = this.props.handleSave()\n    }\n    if (doClose) {\n      this.props.close()\n    }\n  }\n\n  render() {\n    const trigger = this.props.trigger ? React.cloneElement(this.props.trigger, { onClick: this.props.open }) : null\n    return (\n      <Modal open={this.props.isOpen} trigger={trigger} onClose={this.handleClose} size={this.props.size}>\n        <Modal.Header>\n          {this.props.title}\n          <ButtonLink floated=\"right\" onClick={this.handleClose} icon={<Icon name=\"remove\" color=\"grey\" />} />\n        </Modal.Header>\n        <Modal.Content>\n          {this.props.children}\n        </Modal.Content>\n        <ContainerDiv>\n          <StyledButton tabIndex={0} onClick={this.handleClose} type=\"button\">Cancel</StyledButton>\n          <StyledButton tabIndex={0} onClick={this.handleSave} type=\"submit\" color=\"blue\">{ this.props.handleSave ? 'Save' : 'Ok' }</StyledButton>\n        </ContainerDiv>\n      </Modal>\n    )\n  }\n}\n\nCustomModal.defaultProps = {\n  size: 'small',\n}\n\nCustomModal.propTypes = {\n  trigger: PropTypes.node,\n  title: PropTypes.string,\n  handleSave: PropTypes.func,\n  handleClose: PropTypes.func,\n  size: PropTypes.oneOf(['small', 'large', 'fullscreen']),\n  isOpen: PropTypes.bool,\n  open: PropTypes.func,\n  close: PropTypes.func,\n  children: PropTypes.node,\n}\n\n\nconst mapStateToProps = (state, ownProps) => ({\n  isOpen: getModalOpen(state, ownProps.modalName),\n})\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    open: (e) => {\n      e.preventDefault()\n      dispatch(openModal(ownProps.modalName))\n    },\n    close: () => {\n      dispatch(closeModal(ownProps.modalName, true))\n    },\n  }\n}\n\nexport { CustomModal as ModalComponent }\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CustomModal)\n","/* eslint-disable react/jsx-one-expression-per-line */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport { Form, TextArea } from 'semantic-ui-react'\nimport Modal from './Modal'\n\nconst LinkButton = styled.a`\n  cursor: pointer;\n`\n\nclass EditLocusListButtonAndModal extends React.PureComponent {\n\n  constructor(props) {\n    super(props)\n\n    const {\n      locusList,\n    } = this.props\n\n    this.textAreaValue = (locusList || []).join('\\n') // TextArea refs don't work - probably because its a pure component, so use this hack\n  }\n\n  render = () => {\n    const {\n      locusList,\n      name,\n      setLocusList,\n    } = this.props\n\n    const title = `Locus List - ${name}`\n\n    return (\n      <Modal\n        title={title}\n        size=\"large\"\n        modalName={title}\n        trigger={\n          <LinkButton>\n            {\n              (locusList || []).length > 0\n                ? <div><br />Edit Locus List</div>\n                : <div>Add Locus List To Side Bar</div>\n            }\n          </LinkButton>\n        }\n        handleSave={() => {\n          const newLocusList = this.textAreaValue.split(/[,\\s]+/).filter(Boolean)\n          setLocusList(newLocusList)\n\n          return true\n        }}\n      >\n        <Form>\n          <Form.Field\n            control={TextArea}\n            style={{ minHeight: '300px' }}\n            defaultValue={this.textAreaValue}\n            onKeyUp={(e) => { this.textAreaValue = e.target.value }}\n            placeholder=\"Enter genomic positions, intervals, and/or gene names separated by commas, spaces, or new lines. &#10;\n              These can be in any format recognized by the IGV search bar. &#10;\n              For example: DMD, ENST00000589830, chr1:55516888, 2:152341851-152591002\"\n          >\n          </Form.Field>\n        </Form>\n        <br />\n        <b><i>NOTE:</i></b> This locus list will be saved across page refreshes in this browser, but will not be recorded in the page url like other settings. Sharing or bookmarking this page won&apos;t include the contents of this list.\n      </Modal>)\n  }\n}\n\nEditLocusListButtonAndModal.propTypes = {\n  name: PropTypes.string,\n  locusList: PropTypes.array,\n  setLocusList: PropTypes.func,\n}\n\nexport const EditLocusList = ({ name, locusList, setLocus, setLocusList }) => (\n  <div>\n    {\n      locusList.map((locus, i) => <div key={locus}>{i + 1}. &nbsp; <LinkButton onClick={() => { setLocus(locus) }}>{locus}</LinkButton></div>)\n    }\n    <EditLocusListButtonAndModal name={name} locusList={locusList} setLocusList={setLocusList} />\n  </div>)\n\n\nEditLocusList.propTypes = {\n  name: PropTypes.string,\n  locusList: PropTypes.array,\n  setLocus: PropTypes.func,\n  setLocusList: PropTypes.func,\n}\n","import styled from 'styled-components'\nimport { Popup } from 'semantic-ui-react'\n\nexport const CategoryH3 = styled.h3` \n  display: inline-block;\n  margin: 12px 0px 0px 0px !important;\n`\n\nexport const OptionDiv = styled.div`\n  padding-top: 3px;\n`\n\nexport const StyledPopup = styled(Popup)`\n  opacity: 0.95;\n`\n","\nexport const SUPPORTED_FILE_EXTENSIONS = {\n  '.bigWig': 'coverage',\n\n  '.junctions.bed': 'spliceJunctions',\n  '.spliceJunctions.bed': 'spliceJunctions',\n  '.junctions.bed.gz': 'spliceJunctions',\n  '.spliceJunctions.bed.gz': 'spliceJunctions',\n\n  '.bam': 'bam',\n  '.cram': 'bam',\n\n  '.vcf': 'vcf',\n  '.vcf.gz': 'vcf',\n\n  '.wig': 'wig',\n  '.bedGraph': 'wig',\n\n  /*\n  '.bed': 'annotation',\n  '.bed.gz': 'annotation',\n  '.gff3': 'annotation',\n  '.gtf': 'annotation',\n  '.gtf.gz': 'annotation',\n  '.genePred': 'annotation',\n  '.bigBed': 'annotation',\n   */\n}\n\nexport const MOTIFS = ['GT/AG', 'CT/AC', 'GC/AG', 'CT/GC', 'AT/AC', 'GT/AT', 'non-canonical']\n\nexport const DEFAULT_COLOR_BY_NUM_READS_THRESHOLD = 5\n","/* eslint-disable no-undef */\n\nconst RNA_VIEWER_CLIENT_ID = '61200892608-qphtf65o323setqdcfj4hnf601mmetvs.apps.googleusercontent.com'\n\nexport const initGoogleClient = () => new Promise((resolve) => {\n  if (typeof gapi === 'undefined') {\n    return\n  }\n\n  // init all gapi modules\n  gapi.load('client:auth2', () => {\n    gapi.client.load('storage', 'v1', () => {\n      gapi.client.init({\n        clientId: RNA_VIEWER_CLIENT_ID,\n        scope: 'https://www.googleapis.com/auth/devstorage.read_only',\n        discoveryDocs: ['https://www.googleapis.com/discovery/v1/apis/storage/v1/rest'],\n      })\n\n      resolve()\n    })\n  })\n})\n\nexport const googleSignIn = async () => {\n\n  const authInstance = await gapi.auth2.getAuthInstance()\n  if (!authInstance.isSignedIn.get()) {\n    await authInstance.signIn()\n  }\n}\n\nexport const getGoogleUserEmail = async () => {\n  const authInstance = await gapi.auth2.getAuthInstance()\n  const profile = authInstance.currentUser.get().getBasicProfile()\n\n  return profile.getEmail()\n}\n\nexport const getGoogleAccessToken = async () => {\n  // use OAuth2 to get an access token for RNA-seq viewer to access the google storage API on behalf of the user\n  const authInstance = await gapi.auth2.getAuthInstance()\n  const user = authInstance.currentUser.get()\n  if (!authInstance.isSignedIn.get()) {\n    user.reloadAuthResponse()\n  }\n\n  return user.getAuthResponse().access_token\n}\n\nexport const googleSignOut = async () => {\n  const authInstance = await gapi.auth2.getAuthInstance()\n  if (authInstance.isSignedIn.get()) {\n    await authInstance.signOut()\n  }\n}\n\nexport const listGoogleStorageFiles = async (gsPath) => {\n  if (!gsPath.startsWith('gs://')) {\n    console.error(`${gsPath} doesn't start with \"gs://\"`)\n    return []\n  }\n\n  const gsPathParts = gsPath.split('/')\n  if (gsPathParts.length < 3) {\n    console.error(`${gsPath} must be of the form \"gs://bucket-name/...\"`)\n    return []\n  }\n\n  const bucketName = gsPathParts[2]\n  const bucketSubdir = gsPathParts.slice(3).join('/')\n\n  return gapi.client.storage.objects.list({ bucket: bucketName, prefix: bucketSubdir, maxResults: 1000 })\n}\n","/* eslint-disable no-nested-ternary */\n/* eslint-disable object-shorthand */\n\nimport { createSelector } from 'reselect'\nimport { getGoogleAccessToken } from '../utils/googleAuth'\nimport { MOTIFS, DEFAULT_COLOR_BY_NUM_READS_THRESHOLD } from '../constants'\n\nexport const getLocus = (state) => state.locus\nexport const getRightSideBarLocusList = (state) => state.rightSideBarLocusList\nexport const getLeftSideBarLocusList = (state) => state.leftSideBarLocusList\nexport const getGenome = (state) => state.genome\nexport const getSamplesInCategories = (state) => state.samplesInCategories\nexport const getSelectedSampleNamesByCategoryName = (state) => state.selectedSampleNamesByCategoryName\nexport const getSjOptions = (state) => state.sjOptions\nexport const getVcfOptions = (state) => state.vcfOptions\nexport const getBamOptions = (state) => state.bamOptions\nexport const getUser = (state) => state.user\nexport const getInitialSettings = (state) => state.initialSettings\nexport const getInitialSettingsUrl = (state) => state.initialSettingsUrl\nexport const getInitialSettingsUrlHasBeenApplied = (state) => state.initialSettingsUrlHasBeenApplied\n\n\n/**\n * Expects sample info like:\n *\n * [\n *    {\n *      label: 'category1',\n *      samples : [\n *          { sample1 .. },\n *          { sample2 .. },\n *          ...\n *      ]\n *    },\n *    {\n *      label: 'category2',\n *      samples : [\n *        { sample3 .. },\n *        { sample4 .. },\n *        ...\n *      ]\n *    },\n * ]\n */\n\n\nexport const getSamplesByCategoryName = createSelector(\n  getSamplesInCategories,\n  (samplesInCategories) => {\n    return samplesInCategories.reduce((acc, category) => {\n      return { ...acc, [category.categoryName]: category.samples }\n    }, {})\n  })\n\n\nexport const getSelectedSamplesByCategoryName = createSelector(\n  getSelectedSampleNamesByCategoryName,\n  getSamplesByCategoryName,\n  (selectedSampleNamesByCategoryName, samplesByCategoryName) => {\n    return Object.entries(selectedSampleNamesByCategoryName).reduce((acc, [categoryName, selectedSampleNames]) => {\n      if (!samplesByCategoryName[categoryName]) {\n        return acc\n      }\n      return { ...acc, [categoryName]: samplesByCategoryName[categoryName].filter((sample) => selectedSampleNames.includes(sample.name)) }\n    }, {})\n  })\n\n\nexport const getTracks = createSelector(\n  getSelectedSamplesByCategoryName,\n  getSjOptions,\n  getVcfOptions,\n  getBamOptions,\n  (selectedSamplesByCategoryName, sjOptions, vcfOptions, bamOptions) => {\n    const igvTracks = []\n\n    Object.entries(selectedSamplesByCategoryName).forEach(([categoryName, selectedSamples]) => selectedSamples.forEach((sample, i) => {\n      //docs @ https://github.com/igvteam/igv.js/wiki/Wig-Track\n      let junctionsTrack\n      if (sample.junctions && sjOptions.showJunctions) {\n        junctionsTrack = {\n          type: 'spliceJunctions',\n          format: 'bed',\n          url: sample.junctions,\n          indexURL: `${sample.junctions}.tbi`,\n          oauthToken: getGoogleAccessToken,\n          order: i * 10,\n          name: sample.name,\n          categoryName: categoryName,\n          height: sjOptions.trackHeight,\n          minUniquelyMappedReads: sjOptions.minUniquelyMappedReads,\n          minTotalReads: sjOptions.minTotalReads,\n          maxFractionMultiMappedReads: sjOptions.maxFractionMultiMappedReads,\n          minSplicedAlignmentOverhang: sjOptions.minSplicedAlignmentOverhang,\n          thicknessBasedOn: sjOptions.thicknessBasedOn, //options: numUniqueReads (default), numReads, isAnnotatedJunction\n          bounceHeightBasedOn: sjOptions.bounceHeightBasedOn, //options: random (default), distance, thickness\n          colorBy: sjOptions.colorBy, //options: numUniqueReads (default), numReads, isAnnotatedJunction, strand, motif\n          colorByNumReadsThreshold: sjOptions.colorByNumReadsThreshold !== undefined ? sjOptions.colorByNumReadsThreshold : DEFAULT_COLOR_BY_NUM_READS_THRESHOLD,\n          hideStrand: sjOptions.showOnlyPlusStrand ? '-' : (sjOptions.showOnlyMinusStrand ? '+' : undefined),\n          labelUniqueReadCount: sjOptions.labelUniqueReadCount,\n          labelMultiMappedReadCount: sjOptions.labelMultiMappedReadCount,\n          labelTotalReadCount: sjOptions.labelTotalReadCount,\n          labelMotif: sjOptions.labelMotif,\n          labelAnnotatedJunction: sjOptions.labelAnnotatedJunction && sjOptions.labelAnnotatedJunctionValue,\n          hideAnnotatedJunctions: sjOptions.hideAnnotated,\n          hideUnannotatedJunctions: sjOptions.hideUnannotated,\n          hideMotifs: MOTIFS.filter((motif) => sjOptions[`hideMotif${motif}`]), //options: 'GT/AG', 'CT/AC', 'GC/AG', 'CT/GC', 'AT/AC', 'GT/AT', 'non-canonical'\n        }\n      }\n\n      let coverageTrack\n      if (sample.coverage && sjOptions.showCoverage) {\n        coverageTrack = {\n          type: 'wig',\n          format: 'bigwig',\n          url: sample.coverage,\n          oauthToken: getGoogleAccessToken,\n          name: sample.name,\n          categoryName: categoryName,\n          height: sjOptions.trackHeight,\n          order: i * 10 + 1,\n        }\n      }\n\n      if (coverageTrack && junctionsTrack) {\n        console.log(`Adding ${sample.junctions} & ${sample.coverage} track #`, i * 10 + 2)\n        igvTracks.push({\n          type: 'merged',\n          name: sample.name,\n          categoryName: categoryName,\n          height: sjOptions.trackHeight,\n          tracks: [coverageTrack, junctionsTrack],\n          order: i * 10 + 2,\n        })\n      } else if (junctionsTrack) {\n        console.log(`Adding ${sample.junctions} track #`, i * 10)\n        igvTracks.push({\n          type: 'merged',\n          name: sample.name,\n          categoryName: categoryName,\n          height: sjOptions.trackHeight,\n          tracks: [junctionsTrack],\n          order: i * 10 + 3,\n        })\n      } else if (coverageTrack) {\n        console.log(`Adding ${sample.coverage} track #`, i * 10 + 1)\n        igvTracks.push(coverageTrack)\n      }\n\n      if (vcfOptions.showVcfs && sample.vcf) {\n        //docs @ https://github.com/igvteam/igv.js/wiki/Alignment-Track\n        console.log(`Adding ${sample.vcf} track #`, i * 10 + 4)\n\n        igvTracks.push({\n          type: 'variant',\n          format: 'vcf',\n          url: sample.vcf,\n          indexUrl: `${sample.vcf}.tbi`,\n          indexed: true,\n          name: `${sample.name} vcf`,\n          categoryName: categoryName,\n          displayMode: vcfOptions.displayMode,\n          oauthToken: getGoogleAccessToken,\n          order: i * 10 + 4,\n        })\n      }\n\n      if (bamOptions.showBams && sample.bam) {\n        //docs @ https://github.com/igvteam/igv.js/wiki/Alignment-Track\n        console.log(`Adding ${sample.bam} track #`, i * 10 + 5)\n\n        igvTracks.push({\n          type: 'alignment',\n          url: sample.bam,\n          indexed: true,\n          name: `${sample.name} bam`,\n          categoryName: categoryName,\n          height: bamOptions.trackHeight,\n          colorBy: bamOptions.colorBy,\n          viewAsPairs: bamOptions.viewAsPairs,\n          showSoftClips: bamOptions.showSoftClips,\n          oauthToken: getGoogleAccessToken,\n          order: i * 10 + 5,\n        })\n      }\n    }))\n\n\n    igvTracks.push({\n      name: 'Gencode v32 Genes',\n      format: 'refgene',\n      url: 'gs://macarthurlab-rnaseq/reference_tracks/gencode_v32_knownGene.sorted.txt.gz',\n      indexUrl: 'gs://macarthurlab-rnaseq/reference_tracks/gencode_v32_knownGene.sorted.txt.gz.tbi',\n      indexed: true,\n      searchable: true,\n      height: 350,\n      visibilityWindow: -1,\n      displayMode: 'EXPANDED',\n      order: 1000001,\n      color: 'rgb(76,171,225)',\n      oauthToken: getGoogleAccessToken,\n    })\n\n    return igvTracks\n  },\n)\n","/* eslint-disable react/jsx-one-expression-per-line */\n/* eslint-disable react/self-closing-comp */\n/* eslint-disable object-shorthand */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport { Form, Icon, Message, Popup, Radio, TextArea } from 'semantic-ui-react'\nimport yaml from 'js-yaml'\n\nimport Modal from './Modal'\nimport { SUPPORTED_FILE_EXTENSIONS } from '../constants'\nimport { getInitialSettings } from '../redux/selectors'\n\nconst LinkButton = styled.a`\n  cursor: pointer;\n  padding: 10px 10px 10px 0px;\n  display: inline-block;\n`\n\nconst ExampleDiv = styled.div`\n  font-family: monospace;\n  margin: 20px 30px;\n  padding: 10px;\n  background-color: #F7F7F7;\n  white-space: nowrap;\n`\n\nconst ExamplePath = styled.span`\n  font-family: monospace;\n  background-color: #F7F7F7;\n`\n\nconst StyledRadio = styled(Radio)`\n  label {\n    margin: 10px 0px 10px 20px;\n    padding-left: 1.4em !important;\n  }\n`\n\nconst StyledPopup = styled(Popup).attrs({ position: 'bottom center' })`\n`\n\n\nclass EditSamplePathsButtonAndModal extends React.PureComponent {\n\n  getInitialState = () => {\n    const {\n      samples,\n    } = this.props\n    const format = samples && samples.length > 0 ? 'yaml' : 'basic'\n\n    return {\n      format: format,\n      textAreaValue: this.convertSamplesToTextAreaValue(samples || [], format),\n      warningMessage: null,\n      errorMessage: null,\n    }\n  }\n\n  constructor(props) {\n    super(props)\n\n    this.state = this.getInitialState()\n  }\n\n  parseTextAreaValueToSamples = (textAreaValue, format) => {\n    if (!textAreaValue.trim()) {\n      return { samples: [], errorMessage: null }\n    }\n\n    let samples = []\n    let errorMessage = null\n    const invalidPaths = []\n\n    if (format === 'basic') {\n      const samplePaths = textAreaValue.split(/[,\\s]+/).filter(Boolean)\n\n      const samplesBySampleName = samplePaths.reduce((acc, samplePath) => {\n        const pathTokens = samplePath.split('/')\n        const fileName = pathTokens[pathTokens.length - 1]\n        const matchingExtensions = Object.keys(SUPPORTED_FILE_EXTENSIONS).filter((ext) => fileName.endsWith(ext))\n        if (matchingExtensions.length === 0) {\n          invalidPaths.push(samplePath)\n        } else {\n          const ext = matchingExtensions[0]\n          const filePrefix = fileName.replace(ext, '')\n          if (!acc[filePrefix]) {\n            acc[filePrefix] = {}\n          }\n          acc[filePrefix].name = filePrefix\n          acc[filePrefix][SUPPORTED_FILE_EXTENSIONS[ext]] = samplePath\n        }\n        return acc\n      }, {})\n\n      samples = Object.values(samplesBySampleName)\n\n    } else if (format === 'yaml' || format === 'json') {\n      try {\n        samples = yaml.safeLoad(textAreaValue)\n        //TODO validate\n      } catch (e) {\n        errorMessage = `Unable to parse YAML: ${e}`\n      }\n    } else if (format === 'json') {\n      try {\n        samples = JSON.parse(textAreaValue)\n        //TODO validate\n      } catch (e) {\n        errorMessage = `Unable to parse JSON: ${e}`\n      }\n    }\n\n    if (invalidPaths.length > 0) {\n      errorMessage = `These paths have unexpected file suffixes: ${invalidPaths.join(', ')}`\n    }\n\n    return { samples, errorMessage }\n  }\n\n  convertSamplesToTextAreaValue = (samples, format) => {\n    if (!samples || samples.length === 0) {\n      return ''\n    }\n\n    let textAreaValue\n    if (format === 'basic') {\n      textAreaValue = samples.map((sample) => Object.keys(sample).filter((key) => key !== 'name' && key !== 'description').map((key) => sample[key])).flat().join('\\n')\n    } else if (format === 'yaml') {\n      textAreaValue = yaml.safeDump(samples, { flowLevel: 2 })\n    } else if (format === 'json') {\n      textAreaValue = JSON.stringify(samples, null, 2)\n    }\n\n    return textAreaValue\n  }\n\n  formatRadioButtonChangeHandler = (e, data) => {\n    const {\n      textAreaValue,\n      format,\n    } = this.state\n\n    const { samples, errorMessage } = this.parseTextAreaValueToSamples(textAreaValue, format)\n    if (errorMessage) {\n      e.preventDefault()\n      this.setState({ errorMessage: errorMessage })\n      return false\n    }\n    this.setState({ errorMessage: '' })\n\n    if (data.checked) {\n      this.setState({ format: data.label, textAreaValue: this.convertSamplesToTextAreaValue(samples, data.label) })\n    }\n\n    return true\n  }\n\n  getInitialSamplesInCategory = () => {\n    // cache originalSamples for reset button\n    const {\n      categoryName,\n      showResetButton,\n      initialSamplesInCategories,\n    } = this.props\n\n    if (showResetButton && initialSamplesInCategories) {\n      const originalCategories = initialSamplesInCategories.filter((category) => category.categoryName === categoryName)\n      if (originalCategories.length > 0) {\n        return originalCategories[0].samples\n      }\n    }\n\n    return []\n  }\n\n  resetButtonClickHandler = () => {\n    const {\n      format,\n    } = this.state\n\n    const initialSamplesInCategory = this.getInitialSamplesInCategory()\n    const textAreaValue = this.convertSamplesToTextAreaValue(initialSamplesInCategory, format)\n    this.setState({ textAreaValue: textAreaValue })\n  }\n\n  handleModalSave = () => {\n    const {\n      setSamples,\n    } = this.props\n\n    const {\n      textAreaValue,\n      format,\n    } = this.state\n\n    const { samples, errorMessage } = this.parseTextAreaValueToSamples(textAreaValue, format)\n\n    if (errorMessage) {\n      this.setState({ errorMessage: errorMessage })\n      return false\n    }\n\n    setSamples(samples)\n    return true\n\n  }\n\n  handleModalClose = () => {\n    this.setState(this.getInitialState())\n    return true\n  }\n\n  render = () => {\n    const {\n      samples,\n      title,\n      showResetButton,\n      trigger,\n    } = this.props\n\n    const {\n      format,\n      textAreaValue,\n      warningMessage,\n      errorMessage,\n    } = this.state\n\n    const fullTitle = `${title} Paths`\n    let initialSamplesInCategory\n    if (showResetButton) {\n      initialSamplesInCategory = this.getInitialSamplesInCategory()\n    }\n\n    const someSamplesHaveDescriptionOrMultipleDataFiles = samples.some(\n      (sample) => sample.description || Object.keys(sample).filter((key) => key !== 'name' && key !== 'description').length > 1,\n    )\n\n    return (\n      <Modal\n        title={fullTitle}\n        size=\"large\"\n        modalName={fullTitle}\n        trigger={trigger}\n        handleSave={this.handleModalSave}\n        handleClose={this.handleModalClose}\n      >\n        <div>\n          Enter google bucket path(s) for <i>.bigWig</i>, <i>.junctions.bed.gz</i>, <i>.bam/.cram</i>, or <i>.vcf.gz</i> files:<br />\n          <br />\n          <div>\n            <b>Format:</b>\n            <StyledRadio name=\"format\" label=\"basic\" disabled={someSamplesHaveDescriptionOrMultipleDataFiles} checked={format === 'basic'} onChange={this.formatRadioButtonChangeHandler} />\n            <StyledPopup trigger={<Icon style={{ marginLeft: '8px' }} name=\"question circle outline\" />} content={\n              <div>\n                {\n                  someSamplesHaveDescriptionOrMultipleDataFiles && (\n                  <div>\n                    <b>[Disabled]</b> because some samples have multiple data files and/or a description.<br />\n                    <br />\n                  </div>)\n                }\n                <b>Basic format</b>:<br />\n                <br />\n                Enter a list of paths separated by commas, spaces or new lines. <br />\n                <br />\n                Example:<br />\n                <ExampleDiv>\n                 gs://your-bucket/dir/sample-name1.bigWig <br />\n                 gs://your-bucket/dir/sample2.bigWig <br />\n                 gs://your-bucket/dir/sample-name1.junctions.bed.gz <br />\n                 gs://your-bucket/dir/sample-name1.bam <br />\n                 gs://your-bucket/dir/sample2.junctions.bed.gz <br />\n                </ExampleDiv>\n                Paths that have the same prefix (like <ExamplePath>gs://your-bucket/dir/sample-name1</ExamplePath> in the example) will be interpreted as different data types from the same sample.<br />\n                <br />\n                The order of paths doesn&apos;t matter.\n              </div>\n            }\n            />\n\n            <StyledRadio name=\"format\" label=\"yaml\" checked={format === 'yaml'} onChange={this.formatRadioButtonChangeHandler} />\n            <StyledPopup trigger={<Icon style={{ marginLeft: '8px' }} name=\"question circle outline\" />}\n              content={\n                <div>\n                  <b>YAML format</b>:<br />\n                  <br />\n                  Provides per-sample file paths just like the Basic format, but allows additional meta-data to be specified - such as sample descriptions - as well as more flexibility in file names.<br />\n                  <ExampleDiv>\n                    - name: sample1 <br />\n                      &nbsp; description: description of sample1 <br />\n                      &nbsp; coverage: gs://your-bucket/dir/sample-name1.bigWig <br />\n                      &nbsp; junctions: gs://your-bucket/dir2/sample-name1.junctions.bed.gz <br />\n                      &nbsp; bam: gs://your-bucket/dir3/sample-name1.bam <br />\n                      &nbsp; vcf: gs://your-bucket/dir3/sample-name1-wgs-variants.vcf.gz <br />\n                    - name: sample2 <br />\n                      &nbsp; coverage: gs://your-bucket/dir/sample2.bigWig <br />\n                      &nbsp; junctions: gs://your-bucket/dir2/sample2.junctions.bed.gz <br />\n                  </ExampleDiv>\n                </div>\n              }\n            />\n            <StyledRadio name=\"format\" label=\"json\" checked={format === 'json'} onChange={this.formatRadioButtonChangeHandler} />\n            <StyledPopup trigger={<Icon style={{ marginLeft: '8px' }} name=\"question circle outline\" />}\n              content={\n                <div>\n                  <b>JSON format</b>:<br />\n                  <br />\n                  Identical to YAML, but represented in the JSON format.<br />\n                  <ExampleDiv>\n                    {'[{'}<br />\n                    {' \"name\": \"sample1\",'}<br />\n                    {' \"coverage\": \"gs://your-bucket/dir/sample-name1.bigWig\", '}<br />\n                    {' \"junctions\": \"gs://your-bucket/dir2/sample-name1.junctions.bed.gz\", '}<br />\n                    {' \"bam\": \"gs://your-bucket/dir3/sample-name1.bam\", '}<br />\n                    {' \"vcf\": \"gs://your-bucket/dir3/sample-name1-wgs-variants.vcf.gz\" '}<br />\n                    {'}, {'}<br />\n                    {' \"name\": \"sample2\", '}<br />\n                    {' \"coverage\": \"gs://your-bucket/dir/sample2.bigWig\", '}<br />\n                    {' \"junctions\": \"gs://your-bucket/dir2/sample2.junctions.bed.gz\" '}<br />\n                    {'}]'}<br />\n                  </ExampleDiv>\n                </div>\n              }\n            />\n            {\n              showResetButton && (\n              <LinkButton style={{ float: 'right' }} onClick={this.resetButtonClickHandler}>\n                Reset {(initialSamplesInCategory && initialSamplesInCategory.length > 0) ? `To ${initialSamplesInCategory.length} Original Samples` : null}\n              </LinkButton>)\n            }\n          </div>\n        </div>\n        <Form>\n          <TextArea\n            style={{ minHeight: '300px' }}\n            value={textAreaValue}\n            onChange={(e) => {\n              this.setState({ textAreaValue: e.target.value })\n            }}\n            placeholder=\"Enter file path(s)\"\n          >\n          </TextArea>\n        </Form>\n\n        <br />\n        <b><i>NOTE:</i></b> These paths will be saved across page refreshes in this browser, but will not be recorded in the page url like other settings. Sharing or bookmarking this page won&apos;t include these paths.\n        {\n          warningMessage && (\n          <Message color=\"yellow\">\n            {warningMessage}\n          </Message>)\n        }\n        {\n          errorMessage && (\n          <Message color=\"red\">\n            {errorMessage}\n          </Message>)\n        }\n      </Modal>)\n  }\n}\n\nEditSamplePathsButtonAndModal.propTypes = {\n  title: PropTypes.string,\n  categoryName: PropTypes.string,\n  samples: PropTypes.array,\n  setSamples: PropTypes.func,\n  trigger: PropTypes.node,\n  showResetButton: PropTypes.bool,\n  initialSamplesInCategories: PropTypes.array,\n}\n\n\nconst AddOrEditSamplePaths = ({ category, initialSamplesInCategories, updateSamples }) => {\n  return (\n    <div>\n      <EditSamplePathsButtonAndModal\n        key={`${JSON.stringify(category.samples)}_add`}\n        title={`Add ${category.categoryName}`}\n        categoryName={category.categoryName}\n        samples={[]}\n        setSamples={(samples) => updateSamples('ADD', category.categoryName, samples)}\n        initialSamplesInCategories={initialSamplesInCategories}\n        trigger={<LinkButton>Add {category.samples.length === 0 ? category.categoryName : null} Paths</LinkButton>}\n      />\n      {category.samples.length > 0 && <EditSamplePathsButtonAndModal\n        key={`${JSON.stringify(category.samples)}_edit`}\n        title={`Edit ${category.categoryName}`}\n        categoryName={category.categoryName}\n        samples={category.samples}\n        setSamples={(samples) => updateSamples('SET', category.categoryName, samples)}\n        initialSamplesInCategories={initialSamplesInCategories}\n        trigger={<LinkButton>Edit Paths</LinkButton>}\n        showResetButton\n      />}\n    </div>)\n}\n\nAddOrEditSamplePaths.propTypes = {\n  category: PropTypes.object,\n  initialSamplesInCategories: PropTypes.array,\n  updateSamples: PropTypes.func,\n}\n\nconst mapStateToProps = (state) => ({\n  initialSamplesInCategories: getInitialSettings(state).samplesInCategories,\n})\n\n\nconst mapDispatchToProps = (dispatch) => ({\n  updateSamples: (actionType, categoryName, samples) => {\n    dispatch({\n      type: `${actionType}_SAMPLES`,\n      categoryName: categoryName,\n      samples: samples,\n    })\n  },\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddOrEditSamplePaths)\n","/* eslint-disable react/jsx-one-expression-per-line */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport { Checkbox, Icon, Popup } from 'semantic-ui-react'\nimport { EditLocusList } from './EditLocusList'\nimport { CategoryH3, OptionDiv, StyledPopup } from './SideBarUtils'\nimport AddOrEditSamplePaths from './EditSamplePaths'\nimport { getLeftSideBarLocusList, getSamplesInCategories, getSelectedSampleNamesByCategoryName, getSjOptions, getVcfOptions, getBamOptions } from '../redux/selectors'\n\n\nconst CategoryDetails = styled.div`\n  display: inline-block;\n  margin: 0px 0px 0px 15px;\n  color: #999;\n  white-space: nowrap;\n`\n\nconst StyledIcon = styled.div.attrs({ name: 'stop' })`\n  display: inline-block;\n  width: 6px;\n  border-radius: 1px;\n  height: 10px;\n  cursor: pointer;\n`\n\nconst JunctionsIcon = styled(StyledIcon)`\n   color: #B0B0EC;\n   border: 3px solid #B0B0EC;\n`\n\nconst CoverageIcon = styled(StyledIcon)`\n   color: #B5D29A;\n   border: 3px solid #B5D29A;\n`\n\nconst BamIcon = styled(StyledIcon)`\n   color: #5CB6EA;\n   border: 3px solid #5CB6EA;\n`\n\nconst VcfIcon = styled(StyledIcon)`\n   color: #E6A01B;\n   border: 3px solid #E6A01B;\n`\n\nconst LinkButton = styled.a`\n  cursor: pointer;\n  padding: 10px 10px 10px 0px;\n  display: inline-block;\n`\n\nconst SampleColorLabelsContainer = styled.span`\n  padding-left: 5px;\n  white-space: nowrap;\n`\n\nconst NoWrapDiv = styled.div`\n  white-space: nowrap;\n`\n\nconst SampleColorLabelsWithPopup = ({ sample }) => {\n  const handleCopyToClipboard = () => {\n    let s = ''\n    if (sample.coverage) {\n      s += `${sample.coverage}\\n`\n    }\n    if (sample.junctions) {\n      s += `${sample.junctions}\\n`\n    }\n    if (sample.vcf) {\n      s += `${sample.vcf}\\n`\n    }\n    if (sample.bam) {\n      s += `${sample.bam}\\n`\n    }\n    navigator.clipboard.writeText(s)\n  }\n\n  return (<Popup\n    content={\n      <table>\n        <tbody>\n          { sample.junctions && <tr><td style={{ paddingRight: '10px' }}><b>Junctions:</b></td><td><NoWrapDiv>{sample.junctions}</NoWrapDiv></td></tr>}\n          { sample.coverage && <tr><td><b>Coverage:</b></td><td><NoWrapDiv>{sample.coverage}</NoWrapDiv></td></tr>}\n          { sample.bam && <tr><td><b>Bam:</b></td><td><NoWrapDiv>{sample.bam}</NoWrapDiv></td></tr>}\n          { sample.vcf && <tr><td><b>Vcf:</b></td><td><NoWrapDiv>{sample.vcf}</NoWrapDiv></td></tr>}\n          <tr><td colSpan={2}><div style={{ fontSize: 'small', color: 'grey', marginTop: '10px' }}>(click to copy paths)</div></td></tr>\n        </tbody>\n      </table>\n    }\n    position=\"right center\"\n    trigger={\n      <SampleColorLabelsContainer onClick={handleCopyToClipboard}>\n        {sample.junctions && <JunctionsIcon />}\n        {sample.coverage && <CoverageIcon />}\n        {sample.bam && <BamIcon />}\n        {sample.vcf && <VcfIcon />}\n      </SampleColorLabelsContainer>\n    }\n    style={{ marginLeft: '2px' }}\n  />)\n}\nSampleColorLabelsWithPopup.propTypes = {\n  sample: PropTypes.object,\n}\n\nconst CategoryPanel = ({ category, updateSelectedSampleNames }) => (\n  <div>\n    <CategoryH3>{category.categoryName.toUpperCase()}</CategoryH3>\n    {\n      category.samples.length >= 12 && <CategoryDetails>{`(N=${category.samples.length}) `}</CategoryDetails>\n    }\n    {\n      category.samples.length > 0 && (\n      <div>\n        <LinkButton onClick={\n          (e) => {\n            e.preventDefault()\n            updateSelectedSampleNames('SET', category.categoryName, [])\n          }\n        }\n        >\n          Uncheck All\n        </LinkButton>\n      </div>)\n    }\n  </div>)\n\nCategoryPanel.propTypes = {\n  category: PropTypes.object,\n  updateSelectedSampleNames: PropTypes.func,\n}\n\nconst SamplesPanel = ({ samplesInCategories, selectedSampleNamesByCategoryName, updateSelectedSampleNames }) => (\n  samplesInCategories.map((category, i) => (\n    <div key={category.categoryName || i}>\n      <CategoryPanel category={category} updateSelectedSampleNames={updateSelectedSampleNames} />\n      {\n        category.samples.map((sample, j) => {\n          const selectedSampleNames = selectedSampleNamesByCategoryName[category.categoryName] || []\n          return <SamplePanel key={sample.name || j} sample={sample} categoryName={category.categoryName} selectedSampleNames={selectedSampleNames} updateSelectedSampleNames={updateSelectedSampleNames} />\n        })\n      }\n      <AddOrEditSamplePaths category={category} />\n    </div>),\n  ))\n\nSamplesPanel.propTypes = {\n  samplesInCategories: PropTypes.array,\n  selectedSampleNamesByCategoryName: PropTypes.object,\n  updateSelectedSampleNames: PropTypes.func,\n}\n\n\nconst SamplePanel = ({ sample, categoryName, selectedSampleNames, updateSelectedSampleNames }) => (\n  <NoWrapDiv>\n    <Checkbox\n      label={sample.name}\n      checked={selectedSampleNames.includes(sample.name)}\n      data-sample={sample.name}\n      onChange={(e, data) => updateSelectedSampleNames(data.checked ? 'ADD' : 'REMOVE', categoryName, [data['data-sample']])}\n    />\n    <SampleDetails sample={sample} />\n    <SampleColorLabelsWithPopup sample={sample} />\n  </NoWrapDiv>)\n\nSamplePanel.propTypes = {\n  sample: PropTypes.object,\n  categoryName: PropTypes.string,\n  selectedSampleNames: PropTypes.array,\n  updateSelectedSampleNames: PropTypes.func,\n}\n\nconst SampleDetails = ({ sample }) => {\n  return (\n    sample.description\n      ? <StyledPopup inverted\n        content={sample.description}\n        position=\"right center\"\n        trigger={\n          <Icon style={{ marginLeft: '10px' }} name=\"question circle outline\" />\n        }\n      />\n      : null)\n}\n\nSampleDetails.propTypes = {\n  sample: PropTypes.object,\n}\n\n\nclass LeftSideBar extends React.PureComponent\n{\n  render() {\n    //const params = new URLSearchParams(window.location.search)\n    const {\n      locusList,\n      samplesInCategories,\n      selectedSampleNamesByCategoryName,\n      sjOptions,\n      vcfOptions,\n      bamOptions,\n      setLocus,\n      setLocusList,\n      updateSelectedSampleNames,\n      updateSjOptions,\n      updateVcfOptions,\n      updateBamOptions,\n    } = this.props\n\n    return (\n      <div>\n        <EditLocusList name=\"Left Side Bar\" locusList={locusList} setLocus={setLocus} setLocusList={setLocusList} />\n        <CategoryH3>TRACK TYPES TO SHOW PER SAMPLE</CategoryH3>\n        <OptionDiv>\n          <Checkbox label=\"RNA splice junctions\" checked={sjOptions.showJunctions} onChange={(e, data) => updateSjOptions({ showJunctions: data.checked })} />\n          <SampleColorLabelsContainer><Popup content=\"This color stripe marks samples that have splice junction data. Select this checkbox to show a splice junction track for each sample selected below.\" position=\"right center\" trigger={<JunctionsIcon />} /></SampleColorLabelsContainer>\n        </OptionDiv>\n        <OptionDiv>\n          <Checkbox label=\"RNA coverage\" checked={sjOptions.showCoverage} onChange={(e, data) => updateSjOptions({ showCoverage: data.checked })} />\n          <SampleColorLabelsContainer><Popup content=\"This color stripe marks samples that have coverage data. Select this checkbox to show a coverage track for each sample selected below.\" position=\"right center\" trigger={<CoverageIcon />} /></SampleColorLabelsContainer>\n        </OptionDiv>\n        <OptionDiv>\n          <Checkbox label=\"BAM track\" checked={bamOptions.showBams} onChange={(e, data) => updateBamOptions({ showBams: data.checked })} />\n          <SampleColorLabelsContainer><Popup content=\"This color stripe marks samples that have alignment data. Select this checkbox to show a bam track for each sample selected below.\" position=\"right center\" trigger={<BamIcon />} /></SampleColorLabelsContainer>\n        </OptionDiv>\n        <OptionDiv>\n          <Checkbox label=\"VCF track\" checked={vcfOptions.showVcfs} onChange={(e, data) => updateVcfOptions({ showVcfs: data.checked })} />\n          <SampleColorLabelsContainer><Popup content=\"This color stripe marks samples that have splice junction data. Select this checkbox to show a vcf track for each sample selected below.\" position=\"right center\" trigger={<VcfIcon />} /></SampleColorLabelsContainer>\n        </OptionDiv>\n        <SamplesPanel\n          samplesInCategories={samplesInCategories}\n          selectedSampleNamesByCategoryName={selectedSampleNamesByCategoryName}\n          updateSelectedSampleNames={updateSelectedSampleNames}\n        />\n      </div>)\n  }\n}\n\nLeftSideBar.propTypes = {\n  locusList: PropTypes.array,\n  samplesInCategories: PropTypes.array,\n  selectedSampleNamesByCategoryName: PropTypes.object,\n  sjOptions: PropTypes.object,\n  vcfOptions: PropTypes.object,\n  bamOptions: PropTypes.object,\n  setLocus: PropTypes.func,\n  setLocusList: PropTypes.func,\n  updateSelectedSampleNames: PropTypes.func,\n  updateSjOptions: PropTypes.func,\n  updateVcfOptions: PropTypes.func,\n  updateBamOptions: PropTypes.func,\n}\n\nconst mapStateToProps = (state) => ({\n  locusList: getLeftSideBarLocusList(state),\n  samplesInCategories: getSamplesInCategories(state),\n  selectedSampleNamesByCategoryName: getSelectedSampleNamesByCategoryName(state),\n  sjOptions: getSjOptions(state),\n  vcfOptions: getVcfOptions(state),\n  bamOptions: getBamOptions(state),\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  setLocus: (locus) => {\n    dispatch({\n      type: 'UPDATE_LOCUS',\n      newValue: locus,\n    })\n  },\n  setLocusList: (locusList) => {\n    dispatch({\n      type: 'SET_LEFT_SIDE_BAR_LOCUS_LIST',\n      values: locusList,\n    })\n  },\n  updateSelectedSampleNames: (actionType, categoryName, selectedSampleNames) => {\n    dispatch({\n      type: `${actionType}_SELECTED_SAMPLE_NAMES`,\n      categoryName,\n      selectedSampleNames,\n    })\n  },\n  updateSjOptions: (newSettings) => {\n    dispatch({\n      type: 'UPDATE_SJ_OPTIONS',\n      updates: newSettings,\n    })\n  },\n  updateVcfOptions: (newSettings) => {\n    dispatch({\n      type: 'UPDATE_VCF_OPTIONS',\n      updates: newSettings,\n    })\n  },\n  updateBamOptions: (newSettings) => {\n    dispatch({\n      type: 'UPDATE_BAM_OPTIONS',\n      updates: newSettings,\n    })\n  },\n})\n\n\nexport { LeftSideBar as LeftSideBarComponent }\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LeftSideBar)\n","/* eslint-disable react/jsx-one-expression-per-line */\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport { Checkbox, Icon, Radio } from 'semantic-ui-react'\nimport { EditLocusList } from './EditLocusList'\nimport { CategoryH3, OptionDiv, StyledPopup } from './SideBarUtils'\nimport { getRightSideBarLocusList, getSjOptions, getVcfOptions, getBamOptions } from '../redux/selectors'\nimport { MOTIFS, DEFAULT_COLOR_BY_NUM_READS_THRESHOLD } from '../constants'\n\n\nconst OptionInput = styled.input`\n  display: inline;\n  width: 50px;\n  margin-left: 5px;\n  padding-left: 5px;\n`\n\nconst ColorLegendIcon = styled(Icon)`\n  margin-top: 5px !important;\n`\n\nconst StyledRadio = styled(Radio)`\n  label {\n    margin-left: 10px;\n    margin-bottom: 10px;\n    padding-left: 1.4em !important;\n  }\n`\n\nconst ColorByLegend = ({ sjOptions, handleTextInput }) => {\n  if (sjOptions.colorBy === 'strand') {\n    return (\n      <div>\n        <ColorLegendIcon name=\"stop\" style={{ color: '#b0b0ec' }} /> plus\n        <ColorLegendIcon name=\"stop\" style={{ color: '#ecb0b0', marginLeft: '10px' }} /> minus\n      </div>)\n  }\n\n  if (sjOptions.colorBy === 'motif') {\n    // IGV.js Dark2 color palette\n    return (\n      <div>\n        <ColorLegendIcon name=\"stop\" style={{ color: 'rgb(27,158,119)' }} /> GT/AG <br />\n        <ColorLegendIcon name=\"stop\" style={{ color: 'rgb(217,95,2)' }} /> CT/AC <br />\n        <ColorLegendIcon name=\"stop\" style={{ color: 'rgb(117,112,179)' }} /> GC/AG <br />\n        <ColorLegendIcon name=\"stop\" style={{ color: 'rgb(231,41,138)' }} /> CT/GC <br />\n        <ColorLegendIcon name=\"stop\" style={{ color: 'rgb(102,166,30)' }} /> AT/AC <br />\n        <ColorLegendIcon name=\"stop\" style={{ color: 'rgb(230,171,2)' }} /> GT/AT <br />\n        <ColorLegendIcon name=\"stop\" style={{ color: 'rgb(166,118,29)' }} /> non-canonical <br />\n      </div>)\n  }\n\n  if (sjOptions.colorBy === 'numUniqueReads' || sjOptions.colorBy === 'numReads') {\n    return (\n      <div>\n        # reads<ColorLegendIcon name=\"stop\" style={{ color: '#AAAAAA', marginLeft: '10px' }} />\n        &nbsp;≤ &nbsp;\n        <OptionInput\n          type=\"text\"\n          key={`num-reads-${sjOptions.colorByNumReadsThreshold}`}\n          defaultValue={sjOptions.colorByNumReadsThreshold !== undefined ? sjOptions.colorByNumReadsThreshold : DEFAULT_COLOR_BY_NUM_READS_THRESHOLD}\n          onKeyUp={(e) => handleTextInput(e, 'colorByNumReadsThreshold')}\n          style={{ width: '35px' }}\n        />\n        &nbsp; &lt; &nbsp;\n        <ColorLegendIcon name=\"stop\" style={{ color: 'blue' }} />\n      </div>)\n  }\n  if (sjOptions.colorBy === 'isAnnotatedJunction') {\n    return (\n      <div>\n        <ColorLegendIcon name=\"stop\" style={{ color: '#b0b0ec' }} /> known junction <br />\n        <ColorLegendIcon name=\"stop\" style={{ color: 'orange' }} /> novel junction\n      </div>)\n  }\n\n  return <div />\n}\n\nColorByLegend.propTypes = {\n  sjOptions: PropTypes.object,\n  handleTextInput: PropTypes.func,\n}\n\nconst SjOptionsPanel = ({ sjOptions, updateSjOptions }) => {\n  const handleTextInput = (e, name, value = null) => {\n    if (e.keyCode === 13) {\n      updateSjOptions({ [name]: value || e.target.value })\n    }\n  }\n\n  return (\n    <div>\n      <CategoryH3>JUNCTION TRACK <br />OPTIONS</CategoryH3><br />\n      <OptionDiv>Track height: <OptionInput key={`track-height-${sjOptions.trackHeight}`} type=\"text\" defaultValue={sjOptions.trackHeight} onKeyUp={(e) => handleTextInput(e, 'trackHeight', parseInt(e.target.value, 10))} /> px</OptionDiv>\n      <OptionDiv>Color by:</OptionDiv>\n      <OptionDiv>\n        <select value={sjOptions.colorBy} onChange={(e) => updateSjOptions({ colorBy: e.target.value })}>\n          <option value=\"strand\">strand</option>\n          <option value=\"motif\">donor/acceptor motif</option>\n          <option value=\"numUniqueReads\"># uniquely-mapped reads</option>\n          <option value=\"numReads\"># total reads</option>\n          <option value=\"isAnnotatedJunction\">is known junction</option>\n        </select>\n        <ColorByLegend sjOptions={sjOptions} handleTextInput={handleTextInput} />\n      </OptionDiv>\n      <OptionDiv>Junction thickness:</OptionDiv>\n      <OptionDiv>\n        <select value={sjOptions.thicknessBasedOn} onChange={(e) => updateSjOptions({ thicknessBasedOn: e.target.value })}>\n          <option value=\"numUniqueReads\"># uniquely-mapped reads</option>\n          <option value=\"numReads\"># total reads</option>\n          <option value=\"isAnnotatedJunction\">is known junction</option>\n        </select>\n      </OptionDiv>\n      <OptionDiv>Junction bounce height:</OptionDiv>\n      <OptionDiv>\n        <select value={sjOptions.bounceHeightBasedOn} onChange={(e) => updateSjOptions({ bounceHeightBasedOn: e.target.value })}>\n          <option value=\"random\">random</option>\n          <option value=\"distance\">distance</option>\n          <option value=\"thickness\">thickness</option>\n        </select>\n      </OptionDiv>\n      <OptionDiv>Junction label:</OptionDiv>\n      <OptionDiv><Checkbox label=\"# uniquely-mapped\" checked={sjOptions.labelUniqueReadCount} onChange={(e, data) => updateSjOptions({ labelUniqueReadCount: data.checked })} /></OptionDiv>\n      <OptionDiv><Checkbox label=\"# multi-mapped\" checked={sjOptions.labelMultiMappedReadCount} onChange={(e, data) => updateSjOptions({ labelMultiMappedReadCount: data.checked })} /></OptionDiv>\n      <OptionDiv><Checkbox label=\"# total reads\" checked={sjOptions.labelTotalReadCount} onChange={(e, data) => updateSjOptions({ labelTotalReadCount: data.checked })} /></OptionDiv>\n      <OptionDiv><Checkbox label=\"donor/acceptor motif\" checked={sjOptions.labelMotif} onChange={(e, data) => updateSjOptions({ labelMotif: data.checked })} /></OptionDiv>\n      <OptionDiv>\n        <Checkbox label=\"known junction:\" checked={sjOptions.labelAnnotatedJunction} onChange={(e, data) => updateSjOptions({ labelAnnotatedJunction: data.checked })} />\n        <OptionInput key={`junction-label-${sjOptions.labelAnnotatedJunctionValue}`} type=\"text\" defaultValue={sjOptions.labelAnnotatedJunctionValue} onKeyUp={(e) => handleTextInput(e, 'labelAnnotatedJunctionValue')} style={{ width: '35px' }} />\n      </OptionDiv>\n\n      <CategoryH3>JUNCTION TRACK FILTERS</CategoryH3><br />\n      <OptionDiv>\n        Show Strands:\n        <StyledRadio label=\"both\" name=\"strandButton\" checked={!sjOptions.showOnlyPlusStrand && !sjOptions.showOnlyMinusStrand} onChange={(e, data) => data.checked && updateSjOptions({ showOnlyPlusStrand: false, showOnlyMinusStrand: false })} />\n        <StyledRadio label=\"plus\" name=\"strandButton\" checked={sjOptions.showOnlyPlusStrand} onChange={(e, data) => data.checked && updateSjOptions({ showOnlyPlusStrand: true, showOnlyMinusStrand: false })} />\n        <StyledRadio label=\"minus\" name=\"strandButton\" checked={sjOptions.showOnlyMinusStrand} onChange={(e, data) => data.checked && updateSjOptions({ showOnlyPlusStrand: false, showOnlyMinusStrand: true })} />\n      </OptionDiv>\n      <OptionDiv><Checkbox label=\"Show known junctions\" checked={!sjOptions.hideAnnotated} onChange={(e, data) => updateSjOptions({ hideAnnotated: !data.checked })} /></OptionDiv>\n      <OptionDiv><Checkbox label=\"Show novel junctions\" checked={!sjOptions.hideUnannotated} onChange={(e, data) => updateSjOptions({ hideUnannotated: !data.checked })} /></OptionDiv>\n      <div>\n        <OptionDiv>Uniquely-mapped reads:</OptionDiv>\n        at least <OptionInput key={`uniquely-mapped-reads-${sjOptions.minUniquelyMappedReads}`} type=\"text\" defaultValue={sjOptions.minUniquelyMappedReads} onKeyUp={(e) => handleTextInput(e, 'minUniquelyMappedReads', parseInt(e.target.value, 10))} />\n      </div>\n      <div>\n        <OptionDiv>Total reads:</OptionDiv>\n        at least <OptionInput key={`total-reads-${sjOptions.minTotalReads}`} type=\"text\" defaultValue={sjOptions.minTotalReads} onKeyUp={(e) => handleTextInput(e, 'minTotalReads', parseInt(e.target.value, 10))} />\n      </div>\n      <div>\n        <OptionDiv>Fraction multi-mapped:\n          <StyledPopup inverted\n            content=\"Allows filtering of junctions where most reads that span the junction are multi-mapped reads. For example, setting this to 0.79 will hide junctions where 8 out of 10 (or more) reads that span the junction are not uniquely mapped reads.\"\n            position=\"left center\"\n            on=\"click\"\n            trigger={\n              <Icon style={{ marginLeft: '8px' }} name=\"question circle outline\" />\n            }\n          />\n        </OptionDiv>\n        at most <OptionInput key={`fraction-multi-mapped-${sjOptions.maxFractionMultiMappedReads}`} type=\"text\" defaultValue={sjOptions.maxFractionMultiMappedReads} onKeyUp={(e) => handleTextInput(e, 'maxFractionMultiMappedReads', parseInt(e.target.value, 10))} />\n      </div>\n      <div>\n        <OptionDiv>Splice overhang base-pairs:</OptionDiv>\n        at least <OptionInput key={`spliced-alignment-overhang-${sjOptions.minSplicedAlignmentOverhang}`} type=\"text\" defaultValue={sjOptions.minSplicedAlignmentOverhang} onKeyUp={(e) => handleTextInput(e, 'minSplicedAlignmentOverhang', parseInt(e.target.value, 10))} />\n      </div>\n      <div>\n        <OptionDiv>Donor/Acceptor Motifs:</OptionDiv>\n        {\n          MOTIFS.map((motif) => <OptionDiv key={motif}><Checkbox label={`Show ${motif}`} checked={!sjOptions[`hideMotif${motif}`]} onChange={(e, data) => updateSjOptions({ [`hideMotif${motif}`]: !data.checked })} /></OptionDiv>)\n        }\n      </div>\n    </div>)\n}\n\nSjOptionsPanel.propTypes = {\n  sjOptions: PropTypes.object,\n  updateSjOptions: PropTypes.func,\n}\n\n\nconst BamOptionsPanel = ({ bamOptions, updateBamOptions }) => {\n  const handleTextInput = (e, name, value = null) => {\n    if (e.keyCode === 13) {\n      updateBamOptions({ [name]: value || e.target.value })\n    }\n  }\n\n  return (\n    <div>\n      <CategoryH3>BAM TRACK <br />OPTIONS</CategoryH3><br />\n      <OptionDiv>Track height: <OptionInput key={`track-height-${bamOptions.trackHeight}`} type=\"text\" defaultValue={bamOptions.trackHeight} onKeyUp={(e) => handleTextInput(e, 'trackHeight', parseInt(e.target.value, 10))} /> px</OptionDiv>\n      <OptionDiv><Checkbox label=\"View as pairs\" checked={bamOptions.viewAsPairs} onChange={(e, data) => updateBamOptions({ viewAsPairs: data.checked })} /></OptionDiv>\n      <OptionDiv><Checkbox label=\"Show soft-clips\" checked={bamOptions.showSoftClips} onChange={(e, data) => updateBamOptions({ showSoftClips: data.checked })} /></OptionDiv>\n      <OptionDiv>Color by:</OptionDiv>\n      <OptionDiv>\n        <select value={bamOptions.colorBy} onChange={(e) => updateBamOptions({ colorBy: e.target.value })}>\n          <option value=\"strand\">Strand</option>\n          <option value=\"firstOfPairStrand\">First-of-pair strand</option>\n          <option value=\"pairOrientation\">Pair orientation</option>\n          <option value=\"fragmentLength\">Insert size (TLEN)</option>\n          <option value=\"none\">None</option>\n        </select>\n      </OptionDiv>\n    </div>)\n}\n\nBamOptionsPanel.propTypes = {\n  bamOptions: PropTypes.object,\n  updateBamOptions: PropTypes.func,\n}\n\n\nconst VcfOptionsPanel = ({ vcfOptions, updateVcfOptions }) => {\n\n  return (\n    <div>\n      <CategoryH3>VCF TRACK <br />OPTIONS</CategoryH3><br />\n      <OptionDiv>\n        Display mode: &nbsp;\n        <select value={vcfOptions.displayMode} onChange={(e) => updateVcfOptions({ displayMode: e.target.value })}>\n          <option value=\"COLLAPSED\">Collapse</option>\n          <option value=\"SQUISHED\">Squish</option>\n          <option value=\"EXPANDED\">Expand</option>\n        </select>\n      </OptionDiv>\n    </div>)\n}\n\nVcfOptionsPanel.propTypes = {\n  vcfOptions: PropTypes.object,\n  updateVcfOptions: PropTypes.func,\n}\n\n\nclass RightSideBar extends React.PureComponent\n{\n  render() {\n    const {\n      locusList,\n      sjOptions,\n      vcfOptions,\n      bamOptions,\n      updateSjOptions,\n      updateVcfOptions,\n      updateBamOptions,\n      setLocus,\n      setLocusList,\n    } = this.props\n\n    return (\n      <div>\n        <EditLocusList\n          name=\"Right Side Bar\"\n          locusList={locusList}\n          setLocus={setLocus}\n          setLocusList={setLocusList}\n        />\n\n        {bamOptions.showBams && <BamOptionsPanel\n          bamOptions={bamOptions}\n          updateBamOptions={updateBamOptions}\n        />}\n        {vcfOptions.showVcfs && <VcfOptionsPanel\n          vcfOptions={vcfOptions}\n          updateVcfOptions={updateVcfOptions}\n        />}\n        {(sjOptions.showCoverage || sjOptions.showJunctions) && <SjOptionsPanel\n          sjOptions={sjOptions}\n          updateSjOptions={updateSjOptions}\n        />}\n      </div>)\n  }\n}\n\nRightSideBar.propTypes = {\n  locusList: PropTypes.array,\n  sjOptions: PropTypes.object,\n  vcfOptions: PropTypes.object,\n  bamOptions: PropTypes.object,\n  setLocus: PropTypes.func,\n  setLocusList: PropTypes.func,\n  updateSjOptions: PropTypes.func,\n  updateVcfOptions: PropTypes.func,\n  updateBamOptions: PropTypes.func,\n}\n\nconst mapStateToProps = (state) => ({\n  locusList: getRightSideBarLocusList(state),\n  sjOptions: getSjOptions(state),\n  vcfOptions: getVcfOptions(state),\n  bamOptions: getBamOptions(state),\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  setLocus: (locus) => {\n    dispatch({\n      type: 'UPDATE_LOCUS',\n      newValue: locus,\n    })\n  },\n  setLocusList: (locusList) => {\n    dispatch({\n      type: 'SET_RIGHT_SIDE_BAR_LOCUS_LIST',\n      values: locusList,\n    })\n  },\n  updateSjOptions: (newSettings) => {\n    dispatch({\n      type: 'UPDATE_SJ_OPTIONS',\n      updates: newSettings,\n    })\n  },\n  updateBamOptions: (newSettings) => {\n    dispatch({\n      type: 'UPDATE_BAM_OPTIONS',\n      updates: newSettings,\n    })\n  },\n  updateVcfOptions: (newSettings) => {\n    dispatch({\n      type: 'UPDATE_VCF_OPTIONS',\n      updates: newSettings,\n    })\n  },\n})\n\n\nexport { RightSideBar as RightSideBarComponent }\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RightSideBar)\n","/* eslint-disable react/jsx-one-expression-per-line */\n/* eslint-disable react/no-unescaped-entities */\n/* eslint-disable  react/jsx-closing-tag-location */\n\nimport React from 'react'\nimport styled from 'styled-components'\nimport Modal from './Modal'\n\nconst LinkButton = styled.a`\n  cursor: pointer;\n  margin-left: 20px;\n`\n\nconst AboutLink = () => (\n  <Modal\n    title=\"About RNA-Seq Viewer\"\n    size=\"large\"\n    modalName=\"AboutModal\"\n    trigger={<LinkButton>About</LinkButton>}\n  >\n    This is a free, open-source web app for visualizing splice junctions, expression, and other\n    sequencing data in a genome-wide interactive interface built around <a href=\"https://github.com/igvteam/igv.js\" target=\"_blank\">IGV.js</a><br />\n    <br />\n    Main features: <br />\n    <ul>\n      <li>Supported formats include: .bigWig, .junctions.bed.gz, .vcf, .bam, .cram.</li>\n      <li>Includes reference tracks from GTEx v8 muscle, blood, and fibroblast samples.</li>\n      <li>Visualize your own data files or reference tracks as long as they are in Google buckets to which you read-access.</li>\n      <li>IGV.js reads just the on-screen sections of the files directly from the Google buckets.</li>\n      <li>Upload locus or gene lists to quickly navigate to these loci.</li>\n    </ul>\n\n    <a href=\"https://github.com/macarthur-lab/rnaseq-viewer/issues\" target=\"_blank\">Issues</a>\n    &nbsp;or <a href=\"https://github.com/macarthur-lab/rnaseq-viewer/issues\" target=\"_blank\">Feature Requests</a>\n    &nbsp;can be submitted via <a href=\"https://github.com/macarthur-lab/rnaseq-viewer\" target=\"_blank\">GitHub</a>.\n  </Modal>\n)\n\nexport default AboutLink\n","/* eslint-disable react/jsx-one-expression-per-line */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport { getUser } from '../redux/selectors'\n\n\nclass UserInfo extends React.PureComponent\n{\n  render() {\n\n    const {\n      user,\n    } = this.props\n\n    if (!user.googleUserEmail) {\n      return <div>Signing in to Google Buckets...</div>\n    }\n\n    return <div>Signed in to Google Buckets as <b>{user.googleUserEmail}</b></div>\n  }\n}\n\nUserInfo.propTypes = {\n  user: PropTypes.object.isRequired,\n}\n\nconst mapStateToProps = (state) => ({\n  user: getUser(state),\n\n})\n\nexport { UserInfo as UserInfoComponent }\n\nexport default connect(mapStateToProps)(UserInfo)\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Grid } from 'semantic-ui-react'\nimport AboutLink from './About'\nimport UserInfo from './UserInfo'\n\nconst HeaderRow = styled(Grid.Row)`\n  color: #444;\n  margin-bottom: 5px;\n`\n\nconst Column1 = styled(Grid.Column).attrs({ width: 6 })`\n  text-align: left;\n  padding-left: 75px !important;\n`\nconst Column2 = styled(Grid.Column).attrs({ width: 10 })`\n  text-align: right;\n  padding-right: 75px !important;\n`\n\nexport default () => (\n  <Grid>\n    <HeaderRow>\n      <Column1>\n        <b>RNA-seq Viewer:</b>\n        <AboutLink />\n        {/* <a href=\"#\">Intro Video</a> &nbsp; &nbsp; */}\n      </Column1>\n      <Column2>\n        <UserInfo />\n      </Column2>\n    </HeaderRow>\n  </Grid>)\n","\nexport const throttle = (delay, fn) => {\n  let timerId\n  return (...args) => {\n    if (timerId) {\n      clearTimeout(timerId)\n    }\n    timerId = setTimeout(() => {\n      fn(...args)\n      timerId = null\n    }, delay)\n  }\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport styled from 'styled-components'\nimport igv from 'igv/dist/igv.esm'\nimport { connect } from 'react-redux'\n\nimport { getGenome, getLocus, getTracks, getSjOptions, getVcfOptions, getBamOptions } from '../redux/selectors'\nimport { getGoogleUserEmail, googleSignIn, initGoogleClient } from '../utils/googleAuth'\nimport { throttle } from '../utils/throttle'\n\nconst IGV_SETTINGS = {\n  showIdeogram: true,\n  showNavigation: true,\n  showRuler: true,\n  showCenterGuide: true,\n  showCursorTrackingGuide: true,\n  showCommandBar: true,\n}\n\nconst StyledDiv = styled.div``\n\n\nclass IGV extends React.Component {\n\n  constructor(props) {\n    super(props)\n\n    this.container = null\n    this.browser = null\n    this.ignoreNextTrackRemovedEvent = false\n  }\n\n  setContainerElement = (element) => {\n    this.container = element\n  }\n\n  render = () => <StyledDiv><div ref={this.setContainerElement} /></StyledDiv>\n\n  async componentDidMount() {\n\n    if (!this.container) {\n      return\n    }\n\n    const {\n      genome,\n      locus,\n      tracks,\n      locusChangedHandler,\n      trackRemovedHandler,\n      userChangedHandler,\n    } = this.props\n\n    const igvBrowserOptions = {\n      ...IGV_SETTINGS,\n      locus,\n      genome,\n      tracks,\n    }\n\n    // TODO check if any tracks need google sign-in\n    await initGoogleClient()\n    await googleSignIn()\n    const googleUserEmail = await getGoogleUserEmail()\n    userChangedHandler(googleUserEmail)\n\n    console.log('Calling igv.createBrowser(..)', igvBrowserOptions)\n    igv.createBrowser(this.container, igvBrowserOptions).then((browser) => {\n      this.browser = browser\n\n      if (locusChangedHandler) {\n        this.browser.on('locuschange', throttle(300, locusChangedHandler)) //{chr, start, end, label}\n      }\n\n      if (trackRemovedHandler) {\n        this.browser.on('trackremoved', (track) => {\n          if (!this.ignoreNextTrackRemovedEvent) {\n            trackRemovedHandler(track)\n          }\n\n          this.ignoreNextTrackRemovedEvent = false\n        })\n      }\n    })\n  }\n\n  shouldComponentUpdate(nextProps) {\n    if (!this.container) {\n      return false\n    }\n\n    const {\n      tracks,\n      sjOptions,\n      vcfOptions,\n      bamOptions,\n    } = this.props\n\n\n    const currentIGVLocus = this.browser.$searchInput.val()\n    const nextIGVLocus = nextProps.locus\n    if (nextProps.locus && (!currentIGVLocus || nextIGVLocus.replace(/,/g, '') !== currentIGVLocus.replace(/,/g, ''))) {\n      this.browser.search(nextIGVLocus)\n    }\n\n    const nextTrackSettingsByTrackName = nextProps.tracks.reduce((acc, item) => {\n      return { [item.name]: item, ...acc }\n    }, {})\n\n    //console.log('IGV.nextProps:', nextProps)\n\n    // update or remove existing tracks\n    tracks.forEach((track) => {\n      // TODO check if any tracks need google sign-in\n\n      const nextTrackSettings = nextTrackSettingsByTrackName[track.name]\n      if (nextTrackSettings) {\n        if ((nextProps.sjOptions !== sjOptions && ['merged', 'wig', 'spliceJunctions'].includes(track.type))\n          || (nextProps.vcfOptions !== vcfOptions && track.type === 'variant')\n          || (nextProps.bamOptions !== bamOptions && track.type === 'alignment')\n        ) {\n          console.log('reloading track', track.name)\n          this.ignoreNextTrackRemovedEvent = true\n          this.browser.removeTrackByName(track.name)\n          this.browser.loadTrack(nextTrackSettings)\n        }\n\n        // delete track from nextTrackSettingsByTrackName to indicate that it's still selected\n        delete nextTrackSettingsByTrackName[track.name]\n\n      } else {\n        // remove track that was de-selected\n        try {\n          this.ignoreNextTrackRemovedEvent = true\n          console.log('removing track', track.name)\n          this.browser.removeTrackByName(track.name)\n        } catch (e) {\n          console.warn('Unable to remove track', track.name, e)\n        }\n      }\n    })\n\n    // load any newly-selected track(s)\n    Object.values(nextTrackSettingsByTrackName).forEach((track) => {\n      try {\n        console.log('loading track', track.name)\n        this.browser.loadTrack(track)\n      } catch (e) {\n        console.warn('Unable to add track', track.name, e)\n      }\n    })\n\n    return false\n  }\n}\n\n\nconst mapStateToProps = (state) => ({\n  genome: getGenome(state),\n  locus: getLocus(state),\n  tracks: getTracks(state),\n  sjOptions: getSjOptions(state),\n  vcfOptions: getVcfOptions(state),\n  bamOptions: getBamOptions(state),\n})\n\n\nconst mapDispatchToProps = (dispatch) => ({\n  locusChangedHandler: (event) => {\n    const newLocus = event.label.replace(/,/g, '')\n\n    dispatch({\n      type: 'UPDATE_LOCUS',\n      newValue: newLocus,\n    })\n  },\n\n  userChangedHandler: (googleUserEmail) => {\n    dispatch({\n      type: 'UPDATE_USER',\n      updates: { googleUserEmail },\n    })\n  },\n\n  trackRemovedHandler: (track) => {\n    console.log('removing track', track.config.categoryName, track.config.name)\n\n    dispatch({\n      type: 'REMOVE_SELECTED_SAMPLE_NAMES',\n      categoryName: [track.config.categoryName],\n      selectedSampleNames: [track.config.name],\n    })\n  },\n})\n\nIGV.propTypes = {\n  genome: PropTypes.string.isRequired,\n  locus: PropTypes.string.isRequired,\n  tracks: PropTypes.array.isRequired,\n  locusChangedHandler: PropTypes.func,\n  trackRemovedHandler: PropTypes.func,\n  userChangedHandler: PropTypes.func,\n  sjOptions: PropTypes.object,\n  vcfOptions: PropTypes.object,\n  bamOptions: PropTypes.object,\n}\n\nexport { IGV as IGVComponent }\n\nexport default connect(mapStateToProps, mapDispatchToProps)(IGV)\n","/* eslint-disable react/destructuring-assignment */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { Icon, Popup } from 'semantic-ui-react'\n\n\nclass RequestStatus extends React.PureComponent {\n\n  static NONE = 'NONE'\n\n  static IN_PROGRESS = 'IN_PROGRESS'\n\n  static SUCCEEDED = 'SUCCEEDED'\n\n  static ERROR = 'ERROR'\n\n  render() {\n    switch (this.props.status) {\n      case RequestStatus.IN_PROGRESS:\n        return <Icon loading name=\"spinner\" style={{ color: '#4183c4' }} />\n      case RequestStatus.SUCCEEDED:\n        return <Popup\n          trigger={\n            <Icon name=\"check circle\" style={{ color: '#00C000' }} />\n          }\n          content={this.props.successMessage || 'Success'}\n          position=\"top center\"\n          size=\"small\"\n        />\n      case RequestStatus.ERROR:\n        return <Popup\n          trigger={\n            <Icon name=\"warning circle\" style={{ color: '#F00000' }} />\n          }\n          content={this.props.errorMessage || ''}\n          position=\"top center\"\n          size=\"small\"\n        />\n      default:\n        return <Icon name=\"warning circle\" style={{ color: 'rgb(0,0,0,0.0)' }} />\n    }\n  }\n}\n\nRequestStatus.propTypes = {\n  status: PropTypes.string,\n  errorMessage: PropTypes.string,\n  successMessage: PropTypes.string,\n}\n\nexport default RequestStatus\n","/* eslint-disable operator-linebreak */\n\nimport jsurl from 'jsurl'\n\nimport { loadState, saveState } from '../utils/localStorage'\n\nconst REFERENCE_DATA_ROOT = 'gs://macarthurlab-rnaseq/reference_tracks/GTEx_ref_data'\nconst REFERENCE_DATA_INFO_LIST = [\n  {\n    name: 'GTEx 100 Muscle',\n    description: '100 randomly-chosen GTEx v3 muscle samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all 100 samples.',\n    junctions: `${REFERENCE_DATA_ROOT}/muscle_100_GTEx_samples.junctions.bed.gz`,\n    coverage: `${REFERENCE_DATA_ROOT}/muscle_100_GTEx_samples.bigWig`,\n  },\n  {\n    name: 'GTEx 100 Blood',\n    description: '100 randomly-chosen GTEx v3 blood samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all 100 samples.',\n    junctions: `${REFERENCE_DATA_ROOT}/blood_100_GTEx_samples.junctions.bed.gz`,\n    coverage: `${REFERENCE_DATA_ROOT}/blood_100_GTEx_samples.bigWig`,\n  },\n  {\n    name: 'GTEx 100 Fibs',\n    description: '100 randomly-chosen GTEx v3 fibroblast samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all 100 samples.',\n    junctions: `${REFERENCE_DATA_ROOT}/fibs_100_GTEx_samples.junctions.bed.gz`,\n    coverage: `${REFERENCE_DATA_ROOT}/fibs_100_GTEx_samples.bigWig`,\n  },\n  {\n    name: 'GTEx All Muscle',\n    description: 'All 803 GTEx v3 muscle samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all samples.',\n    junctions: `${REFERENCE_DATA_ROOT}/GTEX_muscle.803_samples.junctions.bed.gz`,\n    coverage: `${REFERENCE_DATA_ROOT}/GTEX_muscle.803_samples.bigWig`,\n  },\n  {\n    name: 'GTEx All Blood',\n    description: 'All 755 GTEx v3 blood samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all samples.',\n    junctions: `${REFERENCE_DATA_ROOT}/GTEX_blood.755_samples.junctions.bed.gz`,\n    coverage: `${REFERENCE_DATA_ROOT}/GTEX_blood.755_samples.bigWig`,\n  },\n  {\n    name: 'GTEx All Fibs',\n    description: 'All 504 GTEx v3 fibroblast samples combined by summing raw coverage values and raw splice-junction-spanning read counts across all samples.',\n    junctions: `${REFERENCE_DATA_ROOT}/GTEX_fibs.504_samples.junctions.bed.gz`,\n    coverage: `${REFERENCE_DATA_ROOT}/GTEX_fibs.504_samples.bigWig`,\n  },\n  {\n    name: 'GTEx All Muscle - Norm.',\n    description: 'All 803 GTEx v3 muscle samples combined by summing raw coverage values across all samples and also summing normalized splice-junction-spanning read counts across all samples. The normalization is done by computing the normalized read count for each junction as normalized_read_count = raw_read_count * scalar. Here scalar = average_unique_reads_per_muscle_sample / (total_unqiue_reads_in_this_sample * number_of_muscle_samples), and average_unique_reads_per_muscle_sample = (total_unqiue_reads_in_all_muscle_samples / number_of_muscle_samples)',\n    junctions: `${REFERENCE_DATA_ROOT}/GTEX_muscle.803_samples.normalized.junctions.bed.gz`,\n    coverage: `${REFERENCE_DATA_ROOT}/GTEX_muscle.803_samples.bigWig`,\n  },\n  {\n    name: 'GTEx All Blood - Norm.',\n    description: 'All 755 GTEx v3 blood samples combined by summing raw coverage values across all samples and also summing normalized splice-junction-spanning read counts across all samples. The normalization is done by computing the normalized read count for each junction as normalized_read_count = raw_read_count * scalar. Here scalar = average_unique_reads_per_blood_sample / (total_unqiue_reads_in_this_sample * number_of_blood_samples), and average_unique_reads_per_blood_sample = (total_unqiue_reads_in_all_blood_samples / number_of_blood_samples)',\n    junctions: `${REFERENCE_DATA_ROOT}/GTEX_blood.755_samples.normalized.junctions.bed.gz`,\n    coverage: `${REFERENCE_DATA_ROOT}/GTEX_blood.755_samples.bigWig`,\n  },\n  {\n    name: 'GTEx All Fibs - Norm.',\n    description: 'All 504 GTEx v3 fibroblast samples combined by summing raw coverage values across all samples and also summing normalized splice-junction-spanning read counts across all samples. The normalization is done by computing the normalized read count for each junction as normalized_read_count = raw_read_count * scalar. Here scalar = average_unique_reads_per_fibs_sample / (total_unqiue_reads_in_this_sample * number_of_fibs_samples), and average_unique_reads_per_fibs_sample = (total_unqiue_reads_in_all_fibs_samples / number_of_fibs_samples)',\n    junctions: `${REFERENCE_DATA_ROOT}/GTEX_fibs.504_samples.normalized.junctions.bed.gz`,\n    coverage: `${REFERENCE_DATA_ROOT}/GTEX_fibs.504_samples.bigWig`,\n  },\n  /*\n  {\n    name: 'Gencode v32 Genes',\n    description: 'Comprehensive gene annotations for GRCh38 reference chromosomes. Source: https://www.gencodegenes.org/human/release_32.html',\n    annotation: 'gs://macarthurlab-rnaseq/reference_tracks/gencode.v32.annotation.sorted.gtf.gz'\n  },\n  {\n    name: 'RefSeq Genes',\n    path: 'https://s3.amazonaws.com/igv.org.genomes/hg38/refGene.sorted.txt.gz'\n  }\n  */\n]\n\nconst SAMPLE_INFO_LIST = []\n\nconst INITIAL_SAMPLES_IN_CATEGORIES = [\n  {\n    categoryName: 'Reference Data',\n    samples: REFERENCE_DATA_INFO_LIST,\n  },\n  {\n    categoryName: 'Samples',\n    samples: SAMPLE_INFO_LIST,\n  },\n]\n\nexport const DEFAULT_STATE = {\n  genome: 'hg38',\n  locus: 'chr15:92,835,700-93,031,800',\n  leftSideBarLocusList: [],\n  rightSideBarLocusList: [],\n  samplesInCategories: INITIAL_SAMPLES_IN_CATEGORIES,\n  selectedSampleNamesByCategoryName: {},\n  sjOptions: {\n    trackHeight: 170,\n    showCoverage: true,\n    showJunctions: true,\n    hideAnnotated: false,\n    hideUnannotated: false,\n    colorBy: 'strand',\n    minUniquelyMappedReads: 1,\n    minTotalReads: 1,\n    maxFractionMultiMappedReads: 1,\n    minSplicedAlignmentOverhang: 0,\n    thicknessBasedOn: 'numUniqueReads', //options: numUniqueReads (default), numReads, isAnnotatedJunction\n    bounceHeightBasedOn: 'random', //options: random (default), distance, thickness\n    labelUniqueReadCount: true,\n    labelMultiMappedReadCount: false,\n    labelTotalReadCount: false,\n    labelMotif: false,\n    labelAnnotatedJunction: false,\n    labelAnnotatedJunctionValue: ' [A]',\n  },\n  vcfOptions: {\n    displayMode: 'EXPANDED',\n  },\n  bamOptions: {\n    trackHeight: 200,\n    showSoftClips: true,\n    alignmentShading: 'strand',\n  },\n  initialSettingsUrl: '',\n}\n\nDEFAULT_STATE.initialSettings = JSON.parse(JSON.stringify(DEFAULT_STATE)) // create a deep-copy of DEFAULT_STATE\n\nconst KEYS_TO_PERSIST_IN_URL = {\n  locus: 'locus',\n  selectedSampleNamesByCategoryName: 'selectedSamples',\n  sjOptions: 'sjOptions',\n  bamOptions: 'bamOptions',\n  vcfOptions: 'vcfOptions',\n  initialSettingsUrl: 'settingsUrl',\n  initialSettingsUrlHasBeenApplied: 'settingsUrlApplied',\n}\n\nconst KEYS_TO_PERSIST_IN_LOCAL_STORAGE = [\n  'samplesInCategories', 'leftSideBarLocusList', 'rightSideBarLocusList',\n]\n\n\nexport const computeInitialState = () => {\n\n  // restore values from local storage\n  const stateFromLocalStorage = KEYS_TO_PERSIST_IN_LOCAL_STORAGE.reduce((acc, key) => {\n    const v = loadState(key)\n    if (v !== undefined) {\n      acc[key] = v\n    }\n    return acc\n  }, {})\n\n  // restore values from url\n  const REVERSE_KEY_NAME_LOOKUP = Object.entries(KEYS_TO_PERSIST_IN_URL).reduce(\n    (acc, [key, value]) => {\n      return { ...acc, [value]: key }\n    }, {})\n  const hashString = window.location.hash.replace(/^#/, '')\n\n  const stateFromUrlHash = hashString ?\n    hashString.split('&').reduce((acc, keyValue) => {\n      const keyValueList = keyValue.split('=')\n      const key = (keyValueList[0] in REVERSE_KEY_NAME_LOOKUP) ? REVERSE_KEY_NAME_LOOKUP[keyValueList[0]] : keyValueList[0]\n      if (key === 'locus') {\n        acc = { ...acc, [key]: keyValueList[1] }\n      } else {\n        try {\n          acc[key] = jsurl.parse(keyValueList[1])\n        } catch (e) {\n          console.error('Couldn\\'t parse url hash param', keyValueList[0], ': ', keyValueList[1])\n        }\n      }\n      return acc\n    }, {})\n    : {}\n\n  // default values are over-ridden by values from local storage, which are over-ridden by values from the url\n  const initialState = { ...DEFAULT_STATE, ...stateFromLocalStorage, ...stateFromUrlHash }\n\n  return initialState\n}\n\n\nexport const updateLocalStorageAndUrl = (state) => {\n\n  //update local storage\n  KEYS_TO_PERSIST_IN_LOCAL_STORAGE.forEach((key) => {\n    saveState(key, state[key])\n  })\n\n  //update url\n  const hashString = Object.keys(state)\n    .filter((key) => (key in KEYS_TO_PERSIST_IN_URL))\n    .reduce((hashKeyValueList, key) => {\n      const value = key === 'locus' ? state[key].replace(',', '') : jsurl.stringify(state[key])\n      return [\n        ...hashKeyValueList,\n        `${KEYS_TO_PERSIST_IN_URL[key]}=${value}`,\n      ]\n    }, []).join('&')\n\n  window.location.hash = `#${hashString}`\n}\n","/**\n * Uses the localStorage API to save a state object in the browser under the given label.\n * @param label {string}\n * @param state {object}\n */\nexport const saveState = (label, state) => {\n  try {\n    const serializedState = JSON.stringify(state)\n    localStorage.setItem(label, serializedState)\n  } catch (err) {\n    // Ignore write errors.\n  }\n}\n\n\n/**\n * Uses the localStorage API to restored a previously-saved state object.\n * @param label {string}\n * @param state {object}\n */\nexport const loadState = (label) => {\n  try {\n    const serializedState = localStorage.getItem(label)\n    if (serializedState === null) {\n      return undefined\n    }\n    return JSON.parse(serializedState)\n  } catch (err) {\n    return undefined\n  }\n}\n","/* eslint-disable react/no-find-dom-node */\n/* eslint-disable react/destructuring-assignment */\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { connect } from 'react-redux'\nimport styled from 'styled-components'\nimport { Button, Input } from 'semantic-ui-react'\nimport delay from 'timeout-as-promise'\nimport yaml from 'js-yaml'\nimport { getInitialSettingsUrl, getInitialSettingsUrlHasBeenApplied } from '../redux/selectors'\nimport RequestStatus from './RequestStatus'\nimport { DEFAULT_STATE } from '../redux/initialState'\n\nconst StyledDiv = styled.div`\n  color: #999;\n  width: 100%;\n  text-align: center;\n  \n  .ui.label {\n    color: #444;\n    background-color: #f3f3f3;\n  }\n`\n\nconst StyledInput = styled(Input)`\n  margin-top: 100px;\n  width: calc(100% - 350px);\n`\n\nconst StyledButton = styled(Button)`\n  margin-left: 20px !important;\n  margin-right: 15px !important;\n`\n\nclass InitialSettingsForm extends React.PureComponent\n{\n  constructor(props) {\n    super(props)\n    this.textInputValue = props.initialSettingsUrl || ''\n    this.state = {\n      requestStatus: RequestStatus.NONE,\n      successMessage: '',\n      errorMessage: '',\n    }\n  }\n\n  async componentDidMount() {\n    const {\n      initialSettingsUrl,\n      initialSettingsUrlHasBeenApplied,\n    } = this.props\n\n    if (initialSettingsUrl && !initialSettingsUrlHasBeenApplied) {\n      // download url\n      console.log('Loading settings from url', initialSettingsUrl)\n      await this.applyInitialSettingsUrl(initialSettingsUrl)\n    }\n  }\n\n  loadInitialSettingsUrl = async (url) => {\n    const {\n      globalState,\n      updateInitialSettingsUrl,\n      setInitialSettingsUrlHasBeenApplied,\n      resetGlobalState,\n    } = this.props\n\n    if (!url) {\n      //reset url to empty\n      resetGlobalState({ ...DEFAULT_STATE, ...{ user: globalState.user } })\n      updateInitialSettingsUrl('')\n      setInitialSettingsUrlHasBeenApplied()\n      return\n    }\n\n    //validate url\n    if (url.search(':') === -1 || url.search('/') === -1) {\n      throw new Error(`Invalid url: \"${url}\"`)\n    }\n\n    const isYamlURL = url.search('.yaml') !== -1 || url.search('.yml') !== -1\n    const isJsonURL = url.search('.json') !== -1\n    if (!isYamlURL && !isJsonURL) {\n      throw new Error('Expected file extensions (\".yaml\", \".yml\", or \".json\") not found in the URL')\n    }\n\n\n    const response = await fetch(url)\n    if (!response.ok) {\n      throw new Error(`Couldn't load URL. Error: ${response.statusText.toLowerCase()} (${response.status})`)\n    }\n\n    const fileContents = await response.text()\n\n    let settings\n    if (isYamlURL) {\n      try {\n        settings = yaml.safeLoad(fileContents)\n      } catch (e) {\n        throw new Error(`Unable to parse YAML file: ${e}`)\n      }\n    }\n\n    if (isJsonURL) {\n      try {\n        settings = JSON.parse(fileContents)\n      } catch (e) {\n        throw new Error(`Unable to parse JSON file: ${e}`)\n      }\n    }\n\n    // TODO validate settings more\n\n    // filter settings to keys in globalState\n    const filteredSettings = Object.keys(globalState).reduce((acc, key) => {\n      if (key in settings) {\n        return { ...acc, [key]: settings[key] }\n      }\n      return acc\n    }, {})\n\n    filteredSettings.initialSettings = JSON.parse(JSON.stringify(filteredSettings)) // deep-copy just in case\n\n    // apply settings\n    resetGlobalState({ ...globalState, ...filteredSettings })\n    updateInitialSettingsUrl(url)\n    setInitialSettingsUrlHasBeenApplied()\n  }\n\n  applyInitialSettingsUrl = async (url) => {\n\n    this.setState({ requestStatus: RequestStatus.IN_PROGRESS })\n\n    try {\n      await this.loadInitialSettingsUrl(url)\n\n      this.setState({ requestStatus: RequestStatus.SUCCEEDED, successMessage: url ? 'Successfully loaded URL and applied settings' : 'Reset all settings to defaults' })\n    } catch (e) {\n      this.setState({ requestStatus: RequestStatus.ERROR, errorMessage: e.toString() })\n    }\n\n    // wait and then clear the message\n    await delay(10000)\n    if (this.state.requestStatus !== RequestStatus.IN_PROGRESS) {\n      this.setState({ requestStatus: RequestStatus.NONE, errorMessage: '' })\n    }\n  }\n\n  render() {\n    const {\n      initialSettingsUrl,\n    } = this.props\n\n    return (\n      <StyledDiv align=\"center\">\n        <StyledInput\n          label=\"Initial settings:\"\n          defaultValue={initialSettingsUrl}\n          placeholder=\"URL of .yaml or .json settings file (eg. http://.../settings.json), or blank to reset all settings to defaults.\"\n          onChange={(e) => {\n            this.textInputValue = e.target.value\n          }}\n        />\n        <StyledButton\n          content=\"Apply\"\n          onClick={() => this.applyInitialSettingsUrl(this.textInputValue)}\n        />\n        <RequestStatus\n          status={this.state.requestStatus}\n          errorMessage={this.state.errorMessage}\n          successMessage={this.state.successMessage}\n        />\n      </StyledDiv>)\n  }\n}\n\nInitialSettingsForm.propTypes = {\n  initialSettingsUrl: PropTypes.string.isRequired,\n  initialSettingsUrlHasBeenApplied: PropTypes.bool.isRequired,\n  globalState: PropTypes.object,\n  updateInitialSettingsUrl: PropTypes.func,\n  setInitialSettingsUrlHasBeenApplied: PropTypes.func,\n  resetGlobalState: PropTypes.func,\n}\n\nconst mapStateToProps = (state) => ({\n  globalState: state,\n  initialSettingsUrl: getInitialSettingsUrl(state),\n  initialSettingsUrlHasBeenApplied: getInitialSettingsUrlHasBeenApplied(state),\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  updateInitialSettingsUrl: (newUrl) => {\n    dispatch({\n      type: 'UPDATE_INITIAL_SETTINGS_URL',\n      newValue: newUrl,\n    })\n  },\n  setInitialSettingsUrlHasBeenApplied: () => {\n    dispatch({\n      type: 'UPDATE_INITIAL_SETTINGS_URL_HAS_BEEN_APPLIED',\n      newValue: true,\n    })\n  },\n  resetGlobalState: (state) => {\n    dispatch({\n      type: 'RESET_GLOBAL_STATE',\n      newState: state,\n    })\n  },\n})\n\nexport { InitialSettingsForm as InitialSettingsFormComponent }\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InitialSettingsForm)\n","import React from 'react'\nimport styled from 'styled-components'\nimport { Grid } from 'semantic-ui-react'\nimport LeftSideBar from './LeftSideBar'\nimport RightSideBar from './RightSideBar'\nimport Header from './Header'\nimport IGV from './IGV'\nimport InitialSettingsForm from './InitialSettingsForm'\n\nconst StyledDiv = styled.div`\n  padding: 10px 20px;\n`\n\nconst SIDE_BAR_WIDTH = 210\n\nexport default () => (\n  <StyledDiv>\n    <Grid>\n      <Grid.Row>\n        <Grid.Column width={2} style={{ minWidth: `${SIDE_BAR_WIDTH}px` }}>\n          <LeftSideBar />\n        </Grid.Column>\n        <Grid.Column style={{ minWidth: '800px', width: `calc(100% - ${2 * SIDE_BAR_WIDTH}px)` }}>\n          <Header />\n          <IGV />\n          <InitialSettingsForm />\n\n        </Grid.Column>\n        <Grid.Column width={2} style={{ minWidth: `${SIDE_BAR_WIDTH}px` }}>\n          <RightSideBar />\n        </Grid.Column>\n      </Grid.Row>\n    </Grid>\n  </StyledDiv>\n)\n","/* eslint-disable prefer-object-spread */\nimport { createStore, applyMiddleware, compose, combineReducers } from 'redux'\nimport thunkMiddleware from 'redux-thunk'\nimport { updateLocalStorageAndUrl, computeInitialState } from './initialState'\n\n\nimport {\n  zeroActionsReducer,\n  createSingleValueReducer,\n  createSingleObjectReducer,\n  createArrayReducer,\n} from './utils/reducerFactories'\n\nimport modalReducers from './utils/modalReducer'\n\n\nconst samplesInCategoriesReducer = (state, action) => {\n  if (!action || !action.categoryName || !action.samples) {\n    return state || []\n  }\n\n  return state.map((category) => {\n    if (category.categoryName !== action.categoryName) {\n      return category\n    }\n\n    let updatedSamples\n    switch (action.type) {\n      case 'SET_SAMPLES':\n        updatedSamples = [...action.samples]\n        break\n\n      case 'ADD_SAMPLES':\n        updatedSamples = [...category.samples, ...action.samples]\n        break\n\n      default:\n        updatedSamples = category.samples\n    }\n\n    return {\n      ...category,\n      samples: updatedSamples,\n    }\n  })\n}\n\n\nconst selectedSampleNamesByCategoryNameReducer = (state, action) => {\n  if (!action || !action.categoryName || !Array.isArray(action.selectedSampleNames)) {\n    return state || {}\n  }\n\n  const previousList = state[action.categoryName] || []\n  switch (action.type) {\n    case 'SET_SELECTED_SAMPLE_NAMES':\n    case 'ADD_SELECTED_SAMPLE_NAMES':\n    case 'REMOVE_SELECTED_SAMPLE_NAMES': {\n      let updatedList\n      if (action.type === 'SET_SELECTED_SAMPLE_NAMES') {\n        updatedList = [...action.selectedSampleNames] // make a copy of action.values\n      } else if (action.type === 'ADD_SELECTED_SAMPLE_NAMES') {\n        updatedList = [...previousList, ...action.selectedSampleNames]\n      } else {\n        const valuesToRemove = action.selectedSampleNames\n        updatedList = previousList.filter((v) => !valuesToRemove.includes(v))\n      }\n\n      return {\n        ...state,\n        [action.categoryName]: updatedList,\n      }\n    }\n    default:\n      console.trace(`Unknown action type: ${action.type}`)\n  }\n\n  return state\n}\n\n// combined reducers\nconst otherReducers = combineReducers(Object.assign({\n  genome: zeroActionsReducer,\n  locus: createSingleValueReducer('UPDATE_LOCUS', ''),\n  rightSideBarLocusList: createArrayReducer('RIGHT_SIDE_BAR_LOCUS_LIST'),\n  leftSideBarLocusList: createArrayReducer('LEFT_SIDE_BAR_LOCUS_LIST'),\n  samplesInCategories: samplesInCategoriesReducer,\n  selectedSampleNamesByCategoryName: selectedSampleNamesByCategoryNameReducer,\n  sjOptions: createSingleObjectReducer('UPDATE_SJ_OPTIONS'),\n  vcfOptions: createSingleObjectReducer('UPDATE_VCF_OPTIONS'),\n  bamOptions: createSingleObjectReducer('UPDATE_BAM_OPTIONS'),\n  user: createSingleObjectReducer('UPDATE_USER'),\n  initialSettings: createSingleValueReducer('UPDATE_INITIAL_SETTINGS', {}),\n  initialSettingsUrl: createSingleValueReducer('UPDATE_INITIAL_SETTINGS_URL', ''),\n  initialSettingsUrlHasBeenApplied: createSingleValueReducer('UPDATE_INITIAL_SETTINGS_URL_HAS_BEEN_APPLIED', false),\n}, modalReducers))\n\n\nconst rootReducer = (state, action) => {\n  if (action.type === 'RESET_GLOBAL_STATE') {\n    console.log('RESET_GLOBAL_STATE to', action.newState)\n    return action.newState\n  }\n\n  const nextState = otherReducers(state, action)\n\n  updateLocalStorageAndUrl(nextState)\n  return nextState\n}\n\n\n/**\n * Initialize and return the Redux store\n * @param rootReducer\n * @param initialState\n * @returns {*}\n */\nexport const createReduxStore = () => {\n\n  const initialState = computeInitialState()\n\n  console.log('Initializing store to:')\n  console.log(initialState)\n\n  return createStore(rootReducer, initialState, compose(applyMiddleware(thunkMiddleware)))\n}\n","import React from 'react'\nimport { Provider } from 'react-redux'\n\nimport BaseLayout from './components/BaseLayout'\nimport { createReduxStore } from './redux/rootReducer'\n\nfunction App() {\n  return (\n    <Provider store={createReduxStore()}>\n      <BaseLayout />\n    </Provider>)\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}